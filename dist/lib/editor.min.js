(()=>{var o=class{constructor(t,e){if(!t)throw new Error("Container must be a selector, element, jquery object or display options");if(typeof t=="string"){if(t=document.querySelector(t),!t)throw new Error("Invalid selector for display.");this.textarea=t}else if(t instanceof $)this.textarea=t[0];else if(t instanceof HTMLTextAreaElement)this.textarea=t;else if(t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLTextAreaElement)this.textarea=t;else throw new Error("Textarea must be a selector, element or jquery object");this.e=Object.assign({inline:!0,block:!0,inlineStr:["/","/"],blockStr:["/","*"],parameter:"%",nParameter:"$",command:"#",stacking:";",speed:"!",verbatim:"`"},e||{})}get textarea(){return this.s}set textarea(t){this.s&&(this.s.style.display="",this.t&&this.destroy()),this.s=t,this.s.editor=this,this.s.style.display="none",this.i=document.createElement("pre"),this.i.id=this.s.id+"-editor",this.i.classList.add("editor","form-control"),this.s.insertAdjacentElement("afterend",this.i),ace.require("ace/ext/language_tools"),ace.require("ace/ext/spellcheck"),this.t=ace.edit(this.i.id);let e=this.t.getSession();if(this.t.n=1/0,!this.r){let s=ace.require("ace/tooltip").Tooltip;this.r=new s($("#content")[0])}this.t.setTheme("ace/theme/visual_studio"),e.setMode("ace/mode/text"),e.setUseSoftTabs(!0),e.setValue(this.s.value),this.t.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,newLineMode:"unix",tabSize:3}),this.t.commands.addCommand({name:"expand all folds",bindKey:{win:"Ctrl-Shift-+",mac:"Command-Option-+"},exec:s=>{s.getSession().unfold()}}),this.t.commands.addCommand({name:"collapse all folds",bindKey:{win:"Ctrl-Shift--",mac:"Command-Option--"},exec:s=>{s.getSession().foldAll()}}),e.on("change",s=>{let i=e.getValue();if(this.s.value!==i){this.s.value=i;let r=new Event("input",{bubbles:!0});this.s.dispatchEvent(r)}}),e.on("changeFold",()=>{this.r.hide()}),this.t.on("mousemove",s=>{let i=s.getDocumentPosition(),r=s.editor.getSession().getFoldAt(i.row,i.column,1);if(r){let n=s.editor.getSession().getDocument().getTextRange(r.range).replace(/^\n+|\s+$/g,""),l=n.split(/\n/);l.length>10&&(n=l.slice(0,10).join(`
`).replace(/\s+$/g,"")+`
...`);let h=$(window).height(),c=this.r.getHeight(),g=s.clientX+32,a=s.clientY;a+c>h&&(a=a-c),this.r.show(n,g,a),s.stop()}else this.r.hide()})}get options(){return this.e}set options(t){this.e=Object.assign({inline:!0,block:!0,inlineStr:["/","/"],blockStr:["/","*"],parameter:"%",nParameter:"$",command:"#",stacking:";",speed:"!",verbatim:"`"},t||{}),(this.t.getSession().getMode().o==="ace/mode/oimud"||this.t.getSession().l==="ace/mode/oimud")&&this.setParseSyntax()}setParseSyntax(){this.t.getSession().setMode("ace/mode/oimud",()=>{var t=this.t.getSession();if(t.a){var e=t.a.c.getRules();if(Object.prototype.hasOwnProperty.call(e,"start")){var s=e.start.pop();this.e.inline?this.e.inlineStr.length===1?(e.start[e.start.length-2].regex=`\\${this.e.inlineStr[0]}$`,e.start[e.start.length-1].regex=`\\${this.e.inlineStr[0]}`):(e.start[e.start.length-2].regex=`\\${this.e.inlineStr[0]}\\${this.e.inlineStr[1]}$`,e.start[e.start.length-1].regex=`\\${this.e.inlineStr[0]}\\${this.e.inlineStr[1]}`):(e.start.pop(),e.start.pop()),this.e.block&&(this.e.inlineStr.length===1?s.regex=`\\${this.e.blockStr[0]}`:s.regex=`\\${this.e.blockStr[0]}\\${this.e.blockStr[1]}`,e.start.push(s)),e.start[3].token=this.e.stacking,e.start[3].regex=this.e.stacking,e.start[5].regex=this.e.parameter+e.start[5].regex.substr(1),e.start[6].regex=this.e.parameter+e.start[6].regex.substr(1),e.start[7].regex=this.e.parameter+e.start[7].regex.substr(1),e.start[8].regex="\\"+this.e.nParameter+e.start[8].regex.substr(2),e.start[9].regex="["+this.e.parameter+this.e.nParameter+"]\\*",e.start[10].regex="["+this.e.parameter+this.e.nParameter+"]{\\*}",e.start[11].regex=this.e.command+e.start[11].regex.substr(1),e.start[12].regex="^"+this.e.command+e.start[12].regex.substr(2),e.start[12].splitRegex=new RegExp(e.start[12].regex),e.start[13].regex="^"+this.e.verbatim+".*$",e.start[14].regex="^"+this.e.speed+".*$",e.start[15].regex="["+this.e.parameter+this.e.nParameter+e.start[15].regex.substr(3),e.start[15].splitRegex=new RegExp(e.start[15].regex),e.start[16].regex="["+this.e.parameter+this.e.nParameter+e.start[16].regex.substr(3),e.start[16].splitRegex=new RegExp(e.start[16].regex),e.start[17].regex="["+this.e.parameter+this.e.nParameter+e.start[17].regex.substr(3),e.start[17].splitRegex=new RegExp(e.start[17].regex)}Object.prototype.hasOwnProperty.call(e,"stacking")&&(e.stacking[0].regex=this.e.command+e.stacking[0].regex.substr(1),e.stacking[0].splitRegex=new RegExp(e.stacking[0].regex),e.stacking[1].regex=this.e.command+e.stacking[1].regex.substr(1),e.stacking[2].regex=this.e.verbatim+".*$",e.stacking[3].regex=this.e.speed+".*$"),Object.prototype.hasOwnProperty.call(e,"bracket")&&(e.bracket[0].regex="\\s*?"+this.e.command+e.bracket[0].regex.substr(5),e.bracket[0].splitRegex=new RegExp(e.bracket[0].regex),e.bracket[3].regex=this.e.verbatim+".*$",e.bracket[4].regex=this.e.speed+".*$",e.bracket[6].regex=this.e.command+e.bracket[6].regex.substr(1)),this.e.block&&Object.prototype.hasOwnProperty.call(e,"comment")&&(this.e.blockStr.length===1?e.comment[0].regex=`\\${this.e.blockStr[0]}`:e.comment[0].regex=`\\${this.e.blockStr[1]}\\${this.e.blockStr[0]}`),t.a.h=null,t.bgTokenizer.setTokenizer(t.a.getTokenizer()),t.bgTokenizer.start(0)}})}setLanguage(t){t=(t||"").toLowerCase(),t==="javascript"||t==="js"?this.t.getSession().setMode("ace/mode/javascript"):t==="oimud"||t==="script"?this.setParseSyntax():this.t.getSession().setMode("ace/mode/text")}get value(){return this.t.getSession().getValue()}set value(t){this.t.getSession().setValue(t)}focus(){this.t.focus()}resize(){this.t.resize(!0)}destroy(){this.t.destroy(),this.i.remove(),this.s.style.display="",delete this.s.editor}};window.CodeEditor=o;})();
//# sourceMappingURL=editor.min.js.map
