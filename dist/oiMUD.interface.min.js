(()=>{function O(){let o=bootstrap.Offcanvas.getInstance(document.getElementById("clientMenu"));o&&o.hide()}function it(){bootstrap.Offcanvas.getOrCreateInstance(document.getElementById("clientMenu")).show()}function Ne(){document.getElementById("btn-menu").addEventListener("click",it),client.on("connected",()=>{let s=document.getElementById("menu-connect"),n=document.querySelector("#menu-connect a span"),a=document.querySelector("#menu-connect svg")||document.querySelector("#menu-connect i");s.title="Disconnect",s.classList.add("active"),n.textContent="Disconnect",a.classList.add("fa-plug-circle-xmark"),a.classList.remove("fa-plug")}),client.on("closed",()=>{let s=document.getElementById("menu-connect"),n=document.querySelector("#menu-connect a span"),a=document.querySelector("#menu-connect svg")||document.querySelector("#menu-connect i");s.title="Connect",s.classList.remove("active"),n.textContent="Connect",a.classList.remove("fa-plug-circle-xmark"),a.classList.add("fa-plug")}),client.on("scroll-lock",Te),document.querySelector("#menu-connect a").addEventListener("click",s=>{client.connected?client.close():(client.connect(),O())}),document.querySelector("#menu-clear a").addEventListener("click",s=>{client.clear(),O()}),document.querySelector("#menu-lock a").addEventListener("click",s=>{client.toggleScrollLock(),O()}),document.querySelector("#menu-editor a").addEventListener("click",s=>{O(),document.getElementById("btn-adv-editor").click()}),document.querySelector("#menu-about a").addEventListener("click",s=>{F("about"),O()}),document.querySelector("#menu-settings a").addEventListener("click",s=>{F("settings"),O()}),document.querySelector("#menu-profiles a").addEventListener("click",s=>{F("profiles"),O()}),document.querySelector("#menu-help a").addEventListener("click",s=>{F("help"),O()}),document.querySelector("#menu-fullscreen a").addEventListener("click",s=>{var n=window.document,a=n.documentElement,c=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen||a.msRequestFullscreen,h=n.exitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen||n.msExitFullscreen;let l=document.getElementById("menu-fullscreen"),d=document.querySelector("#menu-fullscreen svg")||document.querySelector("#menu-fullscreen i"),f=document.querySelector("#menu-fullscreen a span");!n.fullscreenElement&&!n.mozFullScreenElement&&!n.webkitFullscreenElement&&!n.msFullscreenElement?(l.title="Exit fullscreen",f.textContent="Exit fullscreen",c.call(a),d.classList.add("fa-minimize"),d.classList.remove("fa-maximize")):(l.title="Enter fullscreen",f.textContent="Enter fullscreen",h.call(n),d.classList.add("fa-maximize"),d.classList.remove("fa-minimize")),O()}),document.querySelector("#menu-buttons a").addEventListener("click",s=>{Ie();let n=document.querySelector("#menu-buttons");client.getOption("showButtons")?(n.title="Hide buttons",n.classList.add("active"),document.querySelector("#menu-buttons a span").textContent="Hide buttons"):(n.title="Show buttons",n.classList.remove("active"),document.querySelector("#menu-buttons a span").textContent="Show buttons"),O()}),Te();let o=client.plugins.length,r,e,t=document.querySelector("#clientMenu ul");for(let s=0;s<o;s++)if(client.plugins[s].menu&&client.plugins[s].menu.length)for(e=client.plugins[s].menu.length,r=0;r<e;r++){let n=client.plugins[s].menu[r],a,c="menu-"+(n.id||n.name||r).trim().toLowerCase().replace(/ /g,"-");if(n.name==="-"?a=`<li id="${c}"><hr class="dropdown-divider"></li>`:typeof n.action=="string"?a=`<li id="${c}" class="nav-item${n.active?" active":""}" title="${n.name||""}"><a class="nav-link" href="#${n.action}">${n.icon||""}<span>${n.name||""}</span></a></li>`:a=`<li id="${c}" class="nav-item${n.active?" active":""}" title="${n.name||""}"><a class="nav-link" href="javascript:void(0)">${n.icon||""}<span>${n.name||""}</span></a></li>`,!(n.exists&&t.querySelector(n.exists))){if("position"in n)if(typeof n.position=="string")t.querySelector(n.position)&&t.querySelector(n.position).insertAdjacentHTML("afterend",a);else if(n.position<0||n.position>=0){let h=n.position;h>=t.children.length?h=t.children.length-1:h<0&&(h=t.children.length+n.position),h<0&&(h=0),h<t.children.length&&t.children[h].insertAdjacentHTML("afterend",a)}else t.insertAdjacentHTML("beforeend",a);else t.insertAdjacentHTML("beforeend",a);n.name!=="-"&&typeof n.action=="function"&&document.querySelector(`#${c} a`)&&document.querySelector(`#${c} a`).addEventListener("click",h=>{let l={client,preventDefault:!1};n.action(l),!l.preventDefault&&O()})}}let i=document.querySelector("#menu-buttons");client.getOption("showButtons")?(i.title="Hide buttons",i.classList.add("active"),document.querySelector("#menu-buttons a span").textContent="Hide buttons"):(i.title="Show buttons",i.classList.remove("active"),document.querySelector("#menu-buttons a span").textContent="Show buttons")}function Te(){let o=document.getElementById("menu-lock"),r=document.querySelector("#menu-lock a span"),e=document.querySelector("#menu-lock svg")||document.querySelector("#menu-lock i");client.scrollLock?(o.title="Unlock display",o.classList.add("active"),r.textContent="Unlock display",e.classList.add("fa-unlock"),e.classList.remove("fa-lock")):(o.title="Lock display",o.classList.remove("active"),r.textContent="Lock display",e.classList.remove("fa-unlock"),e.classList.add("fa-lock"))}var M=class{#e={};bind(r,e,t,i){(!Array.isArray(this.#e[r])||typeof this.#e[r]>"u")&&(this.#e[r]=[]),this.#e[r].push({listener:e,caller:t,once:i||!1})}on(r,e,t){this.bind(r,e,t)}once(r,e,t){this.bind(r,e,t,!0)}addEventListener(r,e,t){this.bind(r,e,t)}fire(r,e,t){if(!r||typeof r!="string")throw new Error("Event missing.");if(!Array.isArray(this.#e[r]))return;!e||e===null||typeof e>"u"?e=[]:Array.isArray(e)||(e=[e]),t=t||this;let i=this.#e[r],s=i.slice().reverse(),n=[];for(let a=s.length-1;a>=0;a--)i.indexOf(s[a])!==-1&&(s[a]&&s[a].once&&n.push(s[a]),s[a].listener.apply(s[a].caller||t,e));for(let a=n.length-1;a>=0;a--){let c=this.#e[r].indexOf(n[a]);c!==-1&&this.#e[r].splice(c,1)}}emit(r,...e){this.fire(r,e)}dispatchEvent(r,e,t){this.fire(r,e,t)}unbind(r,e){if(!r||!e||!Array.isArray(this.#e[r]))return;let t=this.#e[r];for(let i=t.length-1;i>=0;i--)if(t[i].listener===e){t.splice(i,1);break}}remove(r,e){this.unbind(r,e)}off(r,e){this.unbind(r,e)}removeListener(r,e){this.unbind(r,e)}removeAllListeners(r){if(!r){this.#e=[];return}Array.isArray(this.#e[r])&&delete this.#e[r]}removeListenersFromCaller(r,e){if(!e){Object.keys(this.#e).forEach(i=>{let s=this.#e[i];for(let n=s.length-1;n>=0;n--)if(s[n].caller===r){s.splice(n,1);break}});return}if(!Array.isArray(this.#e[e]))return;let t=this.#e[e];for(let i=0,s=t.length;i<s;i++)if(t[i].caller===r){t.splice(i,1);break}}listeners(r){return r?this.#e[r]||[]:this.#e}};Array.prototype.filter||(Array.prototype.filter=function(o){var r=this.length>>>0;if(typeof o!="function")throw new TypeError;for(var e=[],t=arguments[1],i=0;i<r;i++)if(i in this){var s=this[i];o.call(t,s,i,this)&&e.push(s)}return e});function st(o,r){return o.priority>r.priority?-1:o.priority<r.priority?1:0}function nt(o,r){return o.priority>r.priority?-1:o.priority<r.priority?1:o.index<r.index?-1:o.index>r.index?1:0}function le(o){let r=o.map((e,t)=>({index:t,priority:e.priority}));return r.sort(nt),r.map(e=>o[e.index])}function Me(o,r,e){let t=[];if(!o||o.length===0)return t;let i=o.length;for(let s=0;s<i;s++)o[s].enabled&&o[s][r]===e&&t.push(o[s]);return t.length<=1?t:t.sort(st)}var ke=document.createElement("div");function T(o){return!o||!o.length?"":(ke.textContent=o,o=ke.innerHTML,ke.textContent="",o)}function Pe(o){let r=o.getBoundingClientRect(),e=document.documentElement;return{top:r.top+window.pageYOffset-e.clientTop,left:r.left+window.pageXOffset-e.clientLeft}}var ue=class{constructor(r){this.length=0;typeof r=="string"&&r.length>0?this.buffer=[r]:this.buffer=[],this.length=0}prepend(r){return this.buffer.unshift(r),this.length+=r.length,this}append(r){return this.buffer.push(r),this.length+=r.length,this}push(r){typeof r=="number"?this.appendCode(r):this.append(r)}appendCode(r){return this.buffer.push(String.fromCharCode(r)),this.length++,this}toString(){return this.buffer.join("")}clear(r){return this.buffer=[],this.length=0,r&&typeof r<"u"&&r.length&&(this.buffer.push(r),this.length=r.length),this}concat(r){this.buffer=this.buffer.concat(r)}};var Q={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",19:"Pause/Break",20:"Caps Lock",21:"Kana",22:"Eisu",23:"Junja",24:"Final",25:"Hanja",27:"Esc",28:"Convert",29:"Nonconvert",30:"Accept",31:"Modechange",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",44:"Printscreen",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:"Colon",59:"Semicolon",60:"Less Than",61:"Equals2",62:"Greater Than",63:"Question Mark",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",93:"Context Menu",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",146:"Win Oem Fj Jisho",147:"Win Oem Fj Masshou",148:"Win Oem Fj Touroku",149:"Win Oem Fj Loya",150:"Win Oem Fj Roya",160:"Circumflex",161:"Exclamation",162:"Double Quote",163:"Hash",164:"Dollar",165:"Percent",166:"Ampersand",167:"Underscore",168:"Open Paren",169:"Close Paren",170:"Asterisk",171:"Plus",172:"Pipe",173:"Hyphen Minus",174:"Open Curly Bracket",175:"Close Curly Bracket",176:"Tilde",181:"Volume Mute",182:"Volume Down",183:"Volume Up",186:";",187:"Equals",188:",",189:"Minus",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",227:"Win Ico Help",228:"Win Ico 00",230:"Win Ico Clear",233:"Win Oem Reset",234:"Win Oem Jump",235:"Win Oem Pa1",236:"Win Oem Pa2",237:"Win Oem Pa3",238:"Win Oem Wsctrl",239:"Win Oem Cusel",240:"Win Oem Attn",241:"Win Oem Finish",242:"Win Oem Copy",243:"Win Oem Auto",244:"Win Oem Enlw",245:"Win Oem Backtab",246:"Attn",247:"Crsel",248:"Exsel",249:"Ereof",250:"Play",251:"Zoom",253:"Pa1",254:"Win Oem Clear"},He={Cancel:3,Help:6,Backspace:8,Tab:9,"Pause/Break":19,"Caps Lock":20,Esc:27,Space:32,"Page Up":33,"Page Down":34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"Numpad 0":96,"Numpad 1":97,"Numpad 2":98,"Numpad 3":99,"Numpad 4":100,"Numpad 5":101,"Numpad 6":102,"Numpad 7":103,"Numpad 8":104,"Numpad 9":105,"Numpad *":106,"Numpad +":107,"Numpad -":109,"Numpad .":110,"Numpad /":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"Num Lock":144,"Scroll Lock":145,";":186,",":188,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,Kana:21,Eisu:22,Junja:23,Final:24,Hanja:25,Convert:28,Nonconvert:29,Accept:30,Modechange:31,Select:41,Print:42,Execute:43,Printscreen:44,Colon:58,Semicolon:59,"Less Than":60,Equals2:61,"Greater Than":62,"Question Mark":63,"Context Menu":93,Sleep:95,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,"Win Oem Fj Jisho":146,"Win Oem Fj Masshou":147,"Win Oem Fj Touroku":148,"Win Oem Fj Loya":149,"Win Oem Fj Roya":150,Circumflex:160,Exclamation:161,"Double Quote":162,Hash:163,Dollar:164,Percent:165,Ampersand:166,Underscore:167,"Open Paren":168,"Close Paren":169,Asterisk:170,Plus:171,Pipe:172,"Hyphen Minus":173,"Open Curly Bracket":174,"Close Curly Bracket":175,Tilde:176,"Volume Mute":181,"Volume Down":182,"Volume Up":183,Equals:187,Minus:189,"Win Ico Help":227,"Win Ico 00":228,"Win Ico Clear":230,"Win Oem Reset":233,"Win Oem Jump":234,"Win Oem Pa1":235,"Win Oem Pa2":236,"Win Oem Pa3":237,"Win Oem Wsctrl":238,"Win Oem Cusel":239,"Win Oem Attn":240,"Win Oem Finish":241,"Win Oem Copy":242,"Win Oem Auto":243,"Win Oem Enlw":244,"Win Oem Backtab":245,Attn:246,Crsel:247,Exsel:248,Ereof:249,Play:250,Zoom:251,Pa1:253,"Win Oem Clear":254};(function(o){o.fn.hasHorizontalScrollBar=function(){return o(this)[0].scrollWidth>o(this).innerWidth()}})(jQuery);function Z(o,r){return JSON.parse(JSON.stringify(o,r))}function Be(o,r,e){if(o.setSelectionRange)o.focus(),o.setSelectionRange(r,e);else if(o.createTextRange){let t=o.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",r),t.select()}}CanvasRenderingContext2D.prototype.fillRoundedRect=function(o,r,e,t,i){this.beginPath(),this.moveTo(o+i,r),this.lineTo(o+e-i,r),this.quadraticCurveTo(o+e,r,o+e,r+i),this.lineTo(o+e,r+t-i),this.quadraticCurveTo(o+e,r+t,o+e-i,r+t),this.lineTo(o+i,r+t),this.quadraticCurveTo(o,r+t,o,r+t-i),this.lineTo(o,r+i),this.quadraticCurveTo(o,r,o+i,r),this.closePath(),this.fill()};CanvasRenderingContext2D.prototype.strokeRoundedRect=function(o,r,e,t,i){this.beginPath(),this.moveTo(o+i,r),this.lineTo(o+e-i,r),this.quadraticCurveTo(o+e,r,o+e,r+i),this.lineTo(o+e,r+t-i),this.quadraticCurveTo(o+e,r+t,o+e-i,r+t),this.lineTo(o+i,r+t),this.quadraticCurveTo(o,r+t,o,r+t-i),this.lineTo(o,r+i),this.quadraticCurveTo(o,r,o+i,r),this.closePath(),this.stroke()};Object.keys||(Object.keys=function(o){if(o!==Object(o))throw new TypeError("Object.keys called on a non-object");var r=[],e;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&r.push(e);return r});Object.toType||(Object.toType=function(o){return{}.toString.call(o).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(o){return this.slice(0,o.length)==o});typeof String.prototype.endsWith!="function"&&(String.prototype.endsWith=function(o){return this.slice(-o.length)==o});typeof String.prototype.splice!="function"&&(String.prototype.splice=function(o,r,e){return typeof e>"u"&&(e=0),this.slice(0,o)+r+this.slice(o+Math.abs(e))});typeof String.prototype.padStart!="function"&&(String.prototype.padStart=function(o){return typeof o=="number"&&(o=" ".repeat(o)),String(o+this).slice(-o.length)});typeof String.prototype.padEnd!="function"&&(String.prototype.padEnd=function(o){return typeof o=="number"?o<=this.length?this:(o=" ".repeat(o-this.length),this+o):o.length<=this.length?this:this+o.slice(-this.length)});String.prototype.replaceAll||(String.prototype.replaceAll=function(o,r){return Object.prototype.toString.call(o).toLowerCase()==="[object regexp]"?this.replace(o,r):this.replace(new RegExp(o,"g"),r)});typeof Uint8Array.prototype.charAt!="function"&&(Uint8Array.prototype.charAt=function(o){return String.fromCharCode(this[o])});typeof Uint8Array.prototype.charCodeAt!="function"&&(Uint8Array.prototype.charCodeAt=function(o){return this[o]});function rt(o,r){return!o||!o.length?o:r?o.replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\u0000/g,"\\0"):o.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"')}String.prototype.addSlashes=function(){return rt(this)};String.prototype.splitQuote=function(o,r,e,t){if(this.length===0)return[];if(!o||!o.length)return[this];r||(r=3),e||(e=3),t||(t="\\");let i=!1,s=!1,n=[],a=0,c=0,h,l="",d,f=o.length,p,x=this.length;for(;c<x;c++){if(h=this.charAt(c),h==='"'&&(r&2)===2)(e&2)===2?(c===0||l!==t)&&(i=!i):i=!i;else if(h==="'"&&(r&1)===1)(e&1)===1?(c===0||l!==t)&&(s=!s):s=!s;else if(!i&&!s){for(d=0;d<f;d++)if(p=o.charAt(d),h===p)if(c>a||c===0){n.push(this.substr(a,c-a)),a=c+1;break}else if(c===a){n.push(""),a=c+1;break}else c===x-1&&n.push("")}l=h}return c===x&&c===a&&o.indexOf(l)!==-1&&(n.push(""),a=c+1),c>a&&n.push(this.substr(a,c-a)),n};function B(o,r){if(!o)return"";o=o.split(" ");let e,t,i,s=r?1:o.length;for(t=0;t<s;t++){let n=o[t].length;for(i=0;i<n;i++)if(e=o[t].charAt(i),e>="a"&&e<="z"||e>="A"&&e<="Z"){o[t]=o[t].substr(0,i)+e.toUpperCase()+o[t].substr(i+1).toLowerCase();break}}return o.join(" ")}var v;function Ce(o){o=o||"",o=o.split("%^"),v||ot();let r=[],e=[],t=0,i=o.length,s=!1,n=!1,a=[];for(;t<i;t++)switch(o[t]){case"ITALIC":r.push("<em>"),e.push("</em>");break;case"UNDERLINE":a.push("underline");break;case"STRIKEOUT":a.push("strikeout");break;case"DBLUNDERLINE":a.push("dblunderline");break;case"OVERLINE":a.push("overline");break;case"FLASH":a.push("noflash");break;case"REVERSE":a.push("reverse");break;case"RESET":case"DEFAULT":let c=e.length;for(let h=0;h<c;h++)r.push(e[h]);e=[],a=[];break;case"BOLD":s=!0;break;case"":break;default:if(o[t].startsWith("B_")){o[t]=o[t].substr(2),s&&!n&&(r.push('<span style="border: inherit;text-decoration:inherit;color: #'+v["BOLD%^%^WHITE"]+'">'),e.push("</span>")),r.push('<span style="border: inherit;text-decoration:inherit;background-color: #'+v[o[t]]+'">'),e.push("</span>"),s=!1;continue}else if(v[o[t]]){if(s&&!v["BOLD%^%^"+o[t]])r.push('<span style="border: inherit;text-decoration:inherit;color: #'+v["BOLD%^%^WHITE"]+'">'),e.push("</span>"),n=!0;else if(s){r.push('<span style="border: inherit;text-decoration:inherit;color: #'+v["BOLD%^%^"+o[t]]+'">'),e.push("</span>"),n=!0;continue}r.push('<span style="border: inherit;text-decoration:inherit;color: #'+v[o[t]]+'">'),e.push("</span>");continue}else s&&!n&&(r.push('<span style="border: inherit;text-decoration:inherit;color: #'+v["BOLD%^%^WHITE"]+'">'),e.push("</span>"));a.length&&(r.push('<span class="'+a.join(" ")+'">'),e.push("</span>"),a=[]),r.push(o[t]),s=!1,n=!1;break}for(a.length&&(r.push('<span class="'+a.join(" ")+'">'),e.push("</span>")),t=0,i=e.length;t<i;t++)r.push(e[t]);return r.join("")}function ot(){let o,r,e,t,i,s;for(v={},v.BLACK="000000",v.RED="800000",v.GREEN="008000",v.ORANGE="808000",v.BLUE="0000EE",v.MAGENTA="800080",v.CYAN="008080",v.WHITE="BBBBBB",v.mono11="808080",v["BOLD%^%^RED"]="FF0000",v["BOLD%^%^GREEN"]="00FF00",v.YELLOW="FFFF00",v["BOLD%^%^YELLOW"]="FFFF00",v["BOLD%^%^BLUE"]="5C5CFF",v["BOLD%^%^MAGENTA"]="FF00FF",v["BOLD%^%^CYAN"]="00FFFF",v["BOLD%^%^WHITE"]="FFFFFF",v["BOLD%^%^BLACK"]="808080",e=0;e<6;e++)for(t=0;t<6;t++)for(i=0;i<6;i++)s=`RGB${e}${t}${i}`,r="",o=0,o=e*40+55,o<16&&(r+="0"),r+=o.toString(16),o=0,o=t*40+55,o<16&&(r+="0"),r+=o.toString(16),o=0,o=i*40+55,o<16&&(r+="0"),r+=o.toString(16),v[s]||(v[s]=r.toUpperCase());for(e=232;e<=255;e++)t=(e-232)*10+8,t<16?t="0"+t.toString(16).toUpperCase():t=t.toString(16).toUpperCase(),t=t+t+t,e<242?v["mono0"+(e-232)]=t:v["mono"+(e-232)]=t}function We(){let o=[],r,e,t,i;for(r=0;r<6;r++)for(e=0;e<6;e++)for(t=0;t<6;t++)i=16+r*36+e*6+t,o[i]="rgb(",r>0?o[i]+=r*40+55:o[i]+="0",o[i]+=",",e>0?o[i]+=e*40+55:o[i]+="0",o[i]+=",",t>0?o[i]+=t*40+55:o[i]+="0",o[i]+=")";for(r=232;r<=255;r++)e=(r-232)*10+8,o[r]=["rgb(",e,",",e,",",e,")"].join("");return o[0]="rgb(0,0,0)",o[1]="rgb(128, 0, 0)",o[2]="rgb(0, 128, 0)",o[3]="rgb(128, 128, 0)",o[4]="rgb(0, 0, 238)",o[5]="rgb(128, 0, 128)",o[6]="rgb(0, 128, 128)",o[7]="rgb(187, 187, 187)",o[8]="rgb(128, 128, 128)",o[9]="rgb(255, 0, 0)",o[10]="rgb(0, 255, 0)",o[11]="rgb(255, 255, 0)",o[12]="rgb(92, 92, 255)",o[13]="rgb(255, 0, 255)",o[14]="rgb(0, 255, 255)",o[15]="rgb(255, 255, 255)",o[256]="rgb(0, 0, 0)",o[257]="rgb(118, 0, 0)",o[258]="rgb(0, 108, 0)",o[259]="rgb(145, 136, 0)",o[260]="rgb(0, 0, 167)",o[261]="rgb(108, 0, 108)",o[262]="rgb(0, 108, 108)",o[263]="rgb(161, 161, 161)",o[264]="rgb(0, 0, 0)",o[265]="rgb(128, 0, 0)",o[266]="rgb(0, 128, 0)",o[267]="rgb(128, 128, 0)",o[268]="rgb(0, 0, 238)",o[269]="rgb(128, 0, 128)",o[270]="rgb(0, 128, 128)",o[271]="rgb(187, 187, 187)",o[272]="rgb(0,0,0)",o[273]="rgb(0, 255, 255)",o[274]="rgb(0,0,0)",o[275]="rgb(255, 255, 0)",o[276]="rgb(0, 0, 0)",o[277]="rgb(229, 229, 229)",o[278]="rgb(205, 0, 0)",o[279]="rgb(229, 229, 229)",o[280]="rgb(255,255,255)",o}function Se(o,r){if(!o)return;let e=document.activeElement;(!e||e!=o)&&o.focus(),document.execCommand("insertText",!1,r),e&&e!=o&&e.focus()}Array.isArray||(Array.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"});function ee(o){return new Promise(function(r,e){try{if(typeof navigator<"u"&&typeof navigator.clipboard<"u"&&typeof navigator.permissions<"u"){var t=new Blob([o],{type:"text/plain"}),i=[new ClipboardItem({"text/plain":t})];navigator.permissions.query({name:"clipboardWrite"}).then(function(n){n.state==="granted"||n.state==="prompt"?navigator.clipboard.write(i).then(r,e).catch(e):e(new Error("Permission not granted!"))})}else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var s=document.createElement("textarea");s.value=o,s.textContent=o,s.style.position="fixed",s.style.width="2em",s.style.height="2em",s.style.padding="0",s.style.border="none",s.style.outline="none",s.style.boxShadow="none",s.style.background="transparent",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),document.body.removeChild(s),r(null)}catch(n){document.body.removeChild(s),e(n)}}else e(new Error("None of copying methods are supported by this browser!"))}catch(n){e(n)}})}function te(){return new Promise(function(o,r){try{if(typeof navigator<"u"&&typeof navigator.clipboard<"u"&&typeof navigator.permissions<"u")navigator.permissions.query({name:"clipboardRead"}).then(function(t){t.state==="granted"||t.state==="prompt"?navigator.clipboard.readText().then(o,r).catch(r):r(new Error("Permission not granted!"))});else if(document.queryCommandSupported&&document.queryCommandSupported("paste")){var e=document.createElement("textarea");e.style.position="fixed",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("paste",!1,null),o(e.value),document.body.removeChild(e)}catch(t){document.body.removeChild(e),r(t)}}else r(new Error("None of pasting methods are supported by this browser!"))}catch(t){r(t)}})}function at(){var o="download"in document.createElement("a"),r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,e=window.URL||window.webkitURL||window.mozURL||window.msURL;navigator.saveBlob=navigator.saveBlob||navigator.msSaveBlob||navigator.mozSaveBlob||navigator.webkitSaveBlob,window.saveAs=window.saveAs||window.webkitSaveAs||window.mozSaveAs||window.msSaveAs;var t={"image/jpeg":!0,"image/png":!0,"image/gif":!0,"image/svg+xml":!0,"image/bmp":!0,"image/x-windows-bmp":!0,"image/webp":!0,"audio/wav":!0,"audio/mpeg":!0,"audio/webm":!0,"audio/ogg":!0,"video/mpeg":!0,"video/webm":!0,"video/ogg":!0,"text/plain":!0,"text/html":!0,"text/xml":!0,"application/xhtml+xml":!0,"application/json":!0};r&&(window.saveAs||navigator.saveBlob)?this.show=function(i,s,n){var a=new r;a.append(i);var c=a.getBlob(n||"application/octet-stream");s||(s="Download.bin"),window.saveAs?window.saveAs(c,s):navigator.saveBlob(c,s)}:r&&e?this.show=function(i,s,n){var a,c,h=new r;if(h.append(i),n||(n="application/octet-stream"),o){a=h.getBlob(n),c=e.createObjectURL(a);var l=document.createElement("a");l.setAttribute("href",c),l.setAttribute("download",s||"Download.bin");var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),l.dispatchEvent(d)}else t[n.split(";")[0]]===!0&&(n="application/octet-stream"),a=h.getBlob(n),c=e.createObjectURL(a),window.open(c,"_blank","");setTimeout(function(){e.revokeObjectURL(c)},250)}:Blob&&e?this.show=function(i,s,n){var a,c;if(n||(n="application/octet-stream"),a=new Blob([i],{type:n}),o){c=e.createObjectURL(a);var h=document.createElement("a");h.setAttribute("href",c),h.setAttribute("download",s||"Download.bin");var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),h.dispatchEvent(l)}else t[n.split(";")[0]]===!0&&(n="application/octet-stream"),c=e.createObjectURL(a),window.open(c,"_blank","");setTimeout(function(){e.revokeObjectURL(c)},250)}:/\bMSIE\b/.test(navigator.userAgent)||(this.show=function(i,s,n){n||(n="application/octet-stream"),t[n.split(";")[0]]===!0&&(n="application/octet-stream"),window.open("data:"+n+","+encodeURIComponent(i),"_blank","")})}window.fileSaveAs=new at;function lt(){var o,r;function e(t,i){var s=t.charCodeAt(r);if(!(s&128))o=s;else if((s&224)==192)o=(s&31)<<6|t.charCodeAt(r+1)&63,r+=1;else if((s&240)==224)o=(s&15)<<12|(t.charCodeAt(r+1)&63)<<6|t.charCodeAt(r+2)&63,r+=2;else if((s&248)==240)o=(s&7)<<18|(t.charCodeAt(r+1)&63)<<12|(t.charCodeAt(r+2)&63)<<6|t.charCodeAt(r+3)&63,r+=1;else return!1;return!0}this.decode=function(t){var i=new ue,s=t.length;for(r=0;r<s;r++)e(t,s)&&i.appendCode(o);return i.toString()},this.decode2=function(t){var i=new ue,s=t.length,n,a;for(n=0;n<s;n++){if(a=t.charCodeAt(n),a&128)if((a&224)==192)a=(a&31)<<6|t.charCodeAt(n+1)&63,n+=1;else if((a&240)==224)a=(a&15)<<12|(t.charCodeAt(n+1)&63)<<6|t.charCodeAt(n+2)&63,n+=2;else if((a&248)==240)a=(a&7)<<18|(t.charCodeAt(n+1)&63)<<12|(t.charCodeAt(n+2)&63)<<6|t.charCodeAt(n+3)&63,n+=1;else continue;i.appendCode(a)}return i.toString()}}window.UTF8=new lt;function q(o,r,e){return new Promise((t,i)=>{let s=document.createElement("dialog");if(typeof s.showModal!="function"){i("Browser does not support dialogs.");return}s.id="openFileDialog",s.style.zIndex="2000",s.style.height="158px",s.style.width="350px",s.innerHTML=`<div class="dialog-header" style="font-weight: bold"><button type="button" class="btn btn-close float-end btn-danger" data-dismiss="modal" onclick="document.getElementById('openFileDialog').close();"></button><div>${o||"Open file..."}</div></div><div class="dialog-body"><div class="m-3"><input class="form-control" type="file" id="openFileDialog-files"${r?" multiple":""} required${e&&e.length?' accept="'+e+'"':""}></div></div><div class="dialog-footer"><button id="openFileDialog-cancel" style="float: right" type="button" class="btn btn-default" onclick="document.getElementById('openFileDialog').close();">Cancel</button><button id="openFileDialog-ok" style="float: right" type="button" class="btn btn-primary">Ok</button></div>`,document.body.appendChild(s),s.addEventListener("close",n=>{n.target===s&&(document.body.removeChild(s),s.returnValue!=="file-ok"&&i("closed"))}),s.addEventListener("cancel",n=>{n.target===s&&(document.body.removeChild(s),s.returnValue!=="file-ok"&&i("canceled"))}),document.getElementById("openFileDialog-ok").addEventListener("click",()=>{let n=document.getElementById("openFileDialog-files");if(!n.files||n.files.length===0){n.classList.add("is-invalid");return}n.classList.remove("is-invalid"),s.close(),s.returnValue="files-ok",t(n.files)}),s.showModal()})}function z(o,r){return new Promise((e,t)=>{o||t(new Error("Invalid file"));var i=new FileReader;i.onerror=t,i.onload=s=>{e(s.target.result)},i.readAsText(o),r&&(i.onprogress=r)})}var xe={};function A(o,r,e){e=e||"default",clearTimeout(xe[e]),xe[e]=setTimeout(()=>{o(),delete xe[e]},r)}function pe(o,r){let e=r.getBoundingClientRect(),t=o.getBoundingClientRect();(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&r.scrollIntoView({behavior:"smooth",block:"nearest"})}function ce(o){return!!(window.matchMedia("(orientation: landscape) and (max-width: 641px)").matches||window.matchMedia("(orientation: landscape) and (max-height: 480px)").matches||window.matchMedia("(orientation: portrait) and (max-width: 480px)").matches||window.matchMedia(" (orientation: portrait) and (max-height: 641px)").matches||o&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera))}var de=(a=>(a[a.None=0]="None",a[a.Ok=1]="Ok",a[a.Cancel=2]="Cancel",a[a.Yes=4]="Yes",a[a.No=8]="No",a[a.YesNo=12]="YesNo",a[a.Standard=3]="Standard",a))(de||{});var R=class extends M{constructor(e){super();this.i={x:0,y:0,height:0,width:0,zIndex:100,maximized:!1,show:0};this.s={x:0,y:0,height:0,width:0,type:0,minHeight:150,minWidth:300,borderHeight:1,borderWidth:1};this.pe={x:0,y:0};this.Le=()=>{A(()=>{this.keepCentered||this.i.show===2&&!this.moveable?this.center():this.makeVisible(),this.ne.style.display!=="none"&&(this.ae.style.bottom=this.ne.clientHeight+1+"px"),this.emit("resizing")},250,this.l+"dialogResize")};this.ft=e=>{let t;if((this.s.type&1)===1&&(t=this.s.width+e.clientX-this.s.x,t>window.innerWidth&&(t=window.innerWidth),this.e.style.width=t+"px"),(this.s.type&2)===2&&(t=this.s.height+e.clientY-this.s.y,t>window.innerWidth-16&&(t=window.innerHeight-16),this.e.style.height=t+"px"),(this.s.type&8)===8){if(t=this.s.height-e.clientY+this.s.y-this.s.borderHeight,t+this.s.borderHeight>window.innerHeight&&(t=window.innerHeight),t+this.s.borderHeight<=this.s.minHeight){this.e.style.height=this.s.minHeight+"px";return}this.e.style.height=t+"px",t=e.clientY,t>window.innerHeight&&(t=window.innerHeight),this.e.style.top=t+"px"}if((this.s.type&4)===4){if(t=this.s.width-e.clientX+this.s.x-this.s.borderWidth,t+this.s.borderWidth>window.innerWidth&&(t=window.innerWidth),t+this.s.borderWidth<=this.s.minWidth){this.e.style.width=this.s.minWidth+"px";return}this.e.style.width=t+"px",t=e.clientX,t>window.innerWidth&&(t=window.innerWidth),this.e.style.left=t+"px"}this.ne.style.display!=="none"&&(this.ae.style.bottom=this.ne.clientHeight+1+"px"),this.emit("resizing")};this.mt=e=>{if(!e.touches.length)return;let t;if((this.s.type&1)===1&&(t=this.s.width+e.touches[0].clientX-this.s.x,t>window.innerWidth&&(t=window.innerWidth),this.e.style.width=t+"px"),(this.s.type&2)===2&&(t=this.s.height+e.touches[0].clientY-this.s.y,t>window.innerWidth&&(t=window.innerHeight),this.e.style.height=t+"px"),(this.s.type&8)===8){if(t=this.s.height-e.touches[0].clientY+this.s.y-this.s.borderHeight,t+this.s.borderHeight>window.innerHeight&&(t=window.innerHeight),t+this.s.borderHeight<=this.s.minHeight){this.e.style.height=this.s.minHeight+"px";return}this.e.style.height=t+"px",t=e.touches[0].clientY,t>window.innerHeight&&(t=window.innerHeight),this.e.style.top=t+"px"}if((this.s.type&4)===4){if(t=this.s.width-e.touches[0].clientX+this.s.x-this.s.borderWidth,t+this.s.borderWidth>window.innerWidth&&(t=window.innerWidth),t+this.s.borderWidth<=this.s.minWidth){this.e.style.width=this.s.minWidth+"px";return}this.e.style.width=t+"px",t=e.touches[0].clientX,t>window.innerWidth&&(t=window.innerWidth),this.e.style.left=t+"px"}this.ne.style.display!=="none"&&(this.ae.style.bottom=this.ne.clientHeight+1+"px"),this.emit("resizing")};this.Me=e=>{this.h.documentElement.removeEventListener("mousemove",this.ft),this.h.documentElement.removeEventListener("mouseup",this.Me),this.h.documentElement.removeEventListener("touchmove",this.mt),this.h.documentElement.removeEventListener("touchend",this.Me);let t=this.$.getComputedStyle(this.e);this.i.x=parseInt(t.left,10),this.i.width=parseInt(t.width,10),this.i.y=parseInt(t.top,10),this.i.height=parseInt(t.height,10),this.ae.style.pointerEvents="",this.emit("resized",this.i)};this.Nt=e=>{this.maximized||(this.pe.x=e.clientX,this.pe.y=e.clientY,this.h.documentElement.addEventListener("mouseup",this.Pe),this.h.documentElement.addEventListener("mousemove",this.gt),this.Re.style.cursor="move")};this.It=e=>{this.maximized||(this.pe.x=e.clientX,this.pe.y=e.clientY,this.h.documentElement.addEventListener("touchend",this.Pe),this.h.documentElement.addEventListener("touchmove",this.bt),this.Re.style.cursor="move")};this.gt=e=>{let t=this.pe.x-e.clientX,i=this.pe.y-e.clientY;this.pe.x=e.clientX,this.pe.y=e.clientY,this.i.x=this.e.offsetLeft-t,this.i.y=this.e.offsetTop-i,this.i.x>window.innerWidth-16&&(this.i.x=window.innerWidth-16),this.i.y>window.innerHeight-16&&(this.i.y=window.innerHeight-16);let s=this.Ze;this.i.x<16-s.width&&(this.i.x=16-s.width),this.i.y<16-s.height&&(this.i.y=16-s.height),this.e.style.left=this.i.x+"px",this.e.style.top=this.i.y+"px"};this.bt=e=>{if(!e.touches.length)return;let t=this.pe.x-e.touches[0].clientX,i=this.pe.y-e.touches[0].clientY;this.pe.x=e.touches[0].clientX,this.pe.y=e.touches[0].clientY,this.i.x=this.e.offsetLeft-t,this.i.y=this.e.offsetTop-i,this.i.x>window.innerWidth-16&&(this.i.x=window.innerWidth-16),this.i.y>window.innerHeight-16&&(this.i.y=window.innerHeight-16);let s=this.Ze;this.i.x<16-s.width&&(this.i.x=16-s.width),this.i.y<16-s.height&&(this.i.y=16-s.height),this.e.style.left=this.i.x+"px",this.e.style.top=this.i.y+"px"};this.Pe=()=>{this.h.documentElement.removeEventListener("mouseup",this.Pe),this.h.documentElement.removeEventListener("mousemove",this.gt),this.h.documentElement.removeEventListener("touchend",this.Pe),this.h.documentElement.removeEventListener("touchmove",this.bt),this.Re.style.cursor="";let e=this.$.getComputedStyle(this.e);this.i.x=parseInt(e.left,10),this.i.width=parseInt(e.width,10),this.i.y=parseInt(e.top,10),this.i.height=parseInt(e.height,10),this.emit("moved",this.i)};this.keepCentered=!1;this.moveable=!0;this.resizable=!0;this.Ge=!0;this.He=!0;this.$=window,this.h=e&&e.document||document,this.$=this.h.defaultView,e&&"type"in e&&e.type==1?(this.e=this.h.createElement("div"),this.e.open=!1):this.e=this.h.createElement("dialog"),typeof this.e.showModal!="function"&&(this.e.showModal=()=>{this.e.open||(this.e.style.display="block",this.e.style.visibility="visible",this.e.open=!0,this.i.show=2,this.e.dataset.show=""+this.i.show,this.e.xe||(this.e.xe=l=>{l.key==="Escape"&&l.srcElement.tagName!=="TEXTAREA"&&l.srcElement.tagName!=="INPUT"&&l.srcElement.tagName!=="SELECT"&&(this.e.returnValue="canceled",this.close())}),this.e.backdrop_||(this.e.backdrop_=this.h.createElement("div"),this.e.backdrop_.className="backdrop",this.e.backdrop_MouseEvent=function(l){if(this.hasAttribute("tabindex"))this.focus();else{var d=this.h.createElement("div");this.insertBefore(d,this.firstChild),d.tabIndex=-1,d.focus(),this.removeChild(d)}var f=this.h.createEvent("MouseEvents");f.initMouseEvent(l.type,l.bubbles,l.cancelable,window,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget),this.dispatchEvent(f),l.stopPropagation()},this.e.backdrop_.addEventListener("mouseup",this.e.backdrop_MouseEvent.bind(this.e)),this.e.backdrop_.addEventListener("mousedown",this.e.backdrop_MouseEvent.bind(this.e)),this.e.backdrop_.addEventListener("click",this.e.backdrop_MouseEvent.bind(this.e))),this.e.parentNode.insertBefore(this.e.backdrop_,this.e.nextSibling),this.h.addEventListener("keydown",this.e.xe))}),typeof this.e.show!="function"&&(this.e.show=()=>{this.e.open||(this.e.style.display="block",this.e.style.visibility="visible",this.e.open=!0,this.i.show=1,this.e.dataset.show=""+this.i.show)}),typeof this.e.close!="function"&&(this.e.close=()=>{this.e.style.display="",this.e.style.visibility="",this.e.open=!1,this.i.show=0,this.e.dataset.show=""+this.i.show,this.$.removeEventListener("resize",this.Le),this.emit("closed")}),this.e.dialog=this,e&&"id"in e&&e.id&&e.id.length?this.l=e.id:(!this.l||!this.l.length)&&(this.l="dialog"+new Date().getTime()),this.e.id=this.l,this.e.style.zIndex="100",this.e.style.margin="0",this.e.classList.add("dialog"),(!e||!e.noAdaptive)&&this.e.classList.add("adaptive"),e&&"moveable"in e&&(this.moveable=e.moveable),e&&"resizable"in e&&(this.resizable=e.resizable),e&&"maximizable"in e&&(this.Ge=e.maximizable),typeof e?.height=="number"?this.e.style.height=e.height+"px":e?.height&&e?.height.length>0?this.e.style.height=e.height:this.e.style.height="480px",typeof e?.minHeight=="number"?this.e.style.minHeight=e.minHeight+"px":e?.minHeight&&e?.minHeight.length>0?this.e.style.minHeight=e.minHeight:this.e.style.minHeight="150px",typeof e?.minWidth=="number"?this.e.style.minWidth=e.minWidth+"px":e?.minWidth&&e?.minWidth.length>0?this.e.style.minWidth=e.minWidth:this.e.style.minWidth="300px",typeof e?.width=="number"?this.e.style.width=e.width+"px":e?.width&&e?.width.length>0?this.e.style.width=e.width:this.e.style.width="640px",typeof e?.y=="number"?this.e.style.top=e.y+"px":e?.y&&e?.y.length>0?this.e.style.top=e.y:this.e.style.top="0",typeof e?.x=="number"?this.e.style.left=e.x+"px":e?.x&&e?.x.length>0?this.e.style.left=e.x:this.e.style.left="0";let t="";if(e&&(e.buttons&2)===2&&(t+=`<button id="${this.l}-cancel" type="button" class="btn-sm float-end btn btn-light" title="Cancel dialog">Cancel</button>`),e&&(e.buttons&1)===1&&(t+=`<button id="${this.l}-ok" type="button" class="btn-sm float-end btn btn-primary" title="Confirm dialog">Ok</button>`),e&&(e.buttons&8)===8&&(t+=`<button id="${this.l}-no" type="button" class="btn-sm float-end btn btn-light" title="No">No</button>`),e&&(e.buttons&4)===4&&(t+=`<button id="${this.l}-yes" type="button" class="btn-sm float-end btn btn-primary" title="Yes">Yes</button>`),this.e.innerHTML=`<div class="dialog-header"><button id="${this.l}-header-close" style="padding: 4px;" type="button" class="btn btn-close float-end btn-danger" data-dismiss="modal" title="Close window"></button><button type="button" class="btn btn-light float-end maximize" id="${this.l}-max" title="Maximize window" style="padding: 0 4px;margin-top: -1px;"><i class="bi-arrows-fullscreen"></i></button><div>${e?.title||""}</div></div><div class="dialog-body"></div><div class="dialog-footer">${t}</div>`,this.e.querySelector(`#${this.l}-header-close`).addEventListener("click",()=>{this.close()}),this.e.querySelector(`#${this.l}-max`).addEventListener("click",()=>{this.maximized?this.restore():this.maximize()}),this.e.addEventListener("close",l=>{if(l.target!==this.e)return;let d={preventDefault:!1};if(this.emit("closing",d),d.preventDefault){l.preventDefault();return}this.h.body.removeChild(this.e),this.i.show=0,this.e.dataset.show=""+this.i.show,this.e.backdrop_&&this.e.parentNode.removeChild(this.e.backdrop_),this.e.xe&&this.$.document.removeEventListener("keydown",this.e.xe),this.$.removeEventListener("resize",this.Le),this.emit("closed",this.e.returnValue)}),this.e.addEventListener("cancel",l=>{if(l.target!==this.e)return;let d={preventDefault:!1};if(this.emit("canceling",d),d.preventDefault){l.preventDefault();return}if(this.h.activeElement&&(this.h.activeElement.tagName==="TEXTAREA"||this.h.activeElement.tagName==="iNPUT"||this.h.activeElement.tagName==="SELECT")){l.preventDefault();return}this.e.open=!1,this.h.body.removeChild(this.e),this.i.show=0,this.e.dataset.show=""+this.i.show,this.e.backdrop_&&this.e.parentNode.removeChild(this.e.backdrop_),this.e.xe&&this.$.document.removeEventListener("keydown",this.e.xe),this.$.removeEventListener("resize",this.Le),this.e.returnValue!=="ok"&&this.emit("canceled")}),this.h.body.appendChild(this.e),this.Ge?this.e.querySelector(`#${this.l}-max`).style.display="":this.e.querySelector(`#${this.l}-max`).style.display="none",e&&"closeable"in e&&(this.closeable=e.closeable),e&&(e.buttons&2)===2&&this.e.querySelector(`#${this.l}-cancel`).addEventListener("click",()=>{let l={preventDefault:!1,button:2};this.emit("button-click",l),!l.preventDefault&&(this.e.returnValue="cancel",this.close())}),e&&(e.buttons&8)===8&&this.e.querySelector(`#${this.l}-no`).addEventListener("click",()=>{let l={preventDefault:!1,button:8};this.emit("button-click",l),!l.preventDefault&&(this.e.returnValue="no",this.close())}),e&&(e.buttons&1)===1&&this.e.querySelector(`#${this.l}-ok`).addEventListener("click",()=>{let l={preventDefault:!1,button:1};this.emit("button-click",l),!l.preventDefault&&(this.e.returnValue="ok",this.e.close())}),e&&(e.buttons&4)===4&&this.e.querySelector(`#${this.l}-yes`).addEventListener("click",()=>{let l={preventDefault:!1,button:4};this.emit("button-click",l),!l.preventDefault&&(this.e.returnValue="yes",this.e.close())}),this.ae=this.e.querySelector('[class="dialog-body"]'),this.Qe=this.e.querySelector('[class="dialog-header"] div'),this.ne=this.e.querySelector('[class="dialog-footer"]'),this.Re=this.e.querySelector('[class="dialog-header"]'),this.resizable){this.e.classList.add("resizable");var i=this.h.createElement("div");i.className="resizer-right",this.e.appendChild(i),i.addEventListener("mousedown",l=>{this.Be(l,1)},!1),i.addEventListener("touchstart",l=>{this.Ce(l,1)},{passive:!0});var s=this.h.createElement("div");s.className="resizer-bottom",this.e.appendChild(s),s.addEventListener("mousedown",l=>{this.Be(l,2)},!1),s.addEventListener("touchstart",l=>{this.Ce(l,2)},{passive:!0});var n=this.h.createElement("div");n.className="resizer-se",this.e.appendChild(n),n.addEventListener("mousedown",l=>{this.Be(l,3)},!1),n.addEventListener("touchstart",l=>{this.Ce(l,3)},{passive:!0}),n=this.h.createElement("div"),n.className="resizer-ne",this.e.appendChild(n),n.addEventListener("mousedown",l=>{this.Be(l,9)},!1),n.addEventListener("touchstart",l=>{this.Ce(l,9)},{passive:!0}),n=this.h.createElement("div"),n.className="resizer-nw",this.e.appendChild(n),n.addEventListener("mousedown",l=>{this.Be(l,12)},!1),n.addEventListener("touchstart",l=>{this.Ce(l,12)},{passive:!0}),n=this.h.createElement("div"),n.className="resizer-sw",this.e.appendChild(n),n.addEventListener("mousedown",l=>{this.Be(l,6)},!1),n.addEventListener("touchstart",l=>{this.Ce(l,6)},{passive:!0});var a=this.h.createElement("div");a.className="resizer-left",this.e.appendChild(a),a.addEventListener("mousedown",l=>{this.Be(l,4)},!1),a.addEventListener("touchstart",l=>{this.Ce(l,4)},{passive:!0});var c=this.h.createElement("div");c.className="resizer-top",this.e.appendChild(c),c.addEventListener("mousedown",l=>{this.Be(l,8)},!1),c.addEventListener("touchstart",l=>{this.Ce(l,8)},{passive:!0})}this.moveable&&(this.e.addEventListener("mousedown",()=>{this.focus()}),this.Re.addEventListener("mousedown",this.Nt),this.Re.addEventListener("touchstart",this.It,{passive:!0}));let h=this.$.getComputedStyle(this.e);this.i.x=this.s.x=parseInt(h.left,10),this.i.width=this.s.width=parseInt(h.width,10),this.i.y=this.s.y=parseInt(h.top,10),this.i.height=this.s.height=parseInt(h.height,10),e&&"noFooter"in e&&e.noFooter&&this.hideFooter(),e&&"maximized"in e&&e.maximized&&this.maximize(),e&&"showModal"in e&&e.showModal?this.showModal():e&&"show"in e&&e.show&&(e.show===2?this.showModal():this.show()),e&&"keepCentered"in e&&e.keepCentered&&(this.keepCentered=e.keepCentered),(this.keepCentered||e&&"center"in e&&e.center)&&this.center(),e&&"position"in e&&e.position>0&&this.position(e.position),this.Le(),this.ut=new ResizeObserver((l,d)=>{l.length!==0&&(!l[0].contentRect||l[0].contentRect.width===0||l[0].contentRect.height===0||(!this.Je||this.Je.height!==l[0].contentRect.height)&&(this.Je={width:l[0].contentRect.width,height:l[0].contentRect.height},this.ne.style.display!=="none"&&(this.ae.style.bottom=this.ne.clientHeight+1+"px")))}),this.ut.observe(this.ne),this.pt=new MutationObserver(l=>{let d;for(d of l)d.type==="attributes"&&d.attributeName==="style"&&this.ne.style.display!=="none"&&(this.ae.style.bottom=this.ne.clientHeight+1+"px")}),this.pt.observe(this.ne,{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}get maximizable(){return this.Ge}set maximizable(e){e!==this.Ge&&(this.Ge=e,this.maximizable?this.e.querySelector(`#${this.l}-max`).style.display="":this.e.querySelector(`#${this.l}-max`).style.display="none")}get closeable(){return this.He}set closeable(e){e!==this.He&&(this.He=e,this.He?this.e.querySelector(`#${this.l}-header-close`).style.display="":this.e.querySelector(`#${this.l}-header-close`).style.display="none")}set maximized(e){this.i.maximized!==e&&(this.i.maximized=e)}get maximized(){return this.i.maximized}Be(e,t){if(this.maximized)return;let i=this.$.getComputedStyle(this.e);this.s.x=e.clientX,this.s.width=parseInt(i.width,10),this.s.y=e.clientY,this.s.height=parseInt(i.height,10),this.s.type=t,this.s.minHeight=parseInt(i.minHeight,10),this.s.minWidth=parseInt(i.minWidth,10),this.s.borderHeight=e.offsetY+parseInt(i.borderTopWidth),this.s.borderWidth=e.offsetX+parseInt(i.borderLeftWidth),this.ae.style.pointerEvents="none",this.h.documentElement.addEventListener("mousemove",this.ft,!1),this.h.documentElement.addEventListener("mouseup",this.Me,!1)}Ce(e,t){if(!e.touches.length||this.maximized)return;let i=this.$.getComputedStyle(this.e);this.s.x=e.touches[0].clientX,this.s.width=parseInt(i.width,10),this.s.y=e.touches[0].clientY,this.s.height=parseInt(i.height,10),this.s.type=t,this.s.minHeight=parseInt(i.minHeight,10),this.s.minWidth=parseInt(i.minWidth,10);var s=e.target.getBoundingClientRect(),n=e.targetTouches[0].clientX-s.x,a=e.targetTouches[0].clientY-s.y;this.s.borderHeight=a+parseInt(i.borderTopWidth),this.s.borderWidth=n+parseInt(i.borderLeftWidth),this.ae.style.pointerEvents="none",this.h.documentElement.addEventListener("touchmove",this.mt,!1),this.h.documentElement.addEventListener("touchend",this.Me,!1)}get id(){return this.l}set id(e){if(this.l!==e&&(this.l=e,this.e)){this.e.id=this.l;let t=this.e.querySelector(`#${this.l}-cancel`);t&&(t.id=this.l+"-cancel"),t=this.e.querySelector(`#${this.l}-ok`),t&&(t.id=this.l+"-ok"),t=this.e.querySelector(`#${this.l}-max`),t&&(t.id=this.l+"-max"),t=this.e.querySelector(`#${this.l}-header-close`),t&&(t.id=this.l+"-header-close")}}get title(){return this.Qe.innerHTML}set title(e){this.Qe.innerHTML=e}showModal(){if(this.e.parentElement||this.h.body.appendChild(this.e),this.makeVisible(!0),this.e.returnValue="",this.e.open){this.focus();return}this.e.showModal(),this.i.show=2,this.e.dataset.show=""+this.i.show,this.$.addEventListener("resize",this.Le),this.emit("shown",!0),this.focus()}show(){if(this.e.parentElement||this.h.body.appendChild(this.e),this.makeVisible(!0),this.e.returnValue="",this.e.open){this.focus();return}this.e.show(),this.i.show=1,this.e.dataset.show=""+this.i.show,this.$.addEventListener("resize",this.Le),this.emit("shown",!1),this.focus()}get opened(){return this.e.open}close(e){this.e.open&&(this.e.backdrop_&&this.e.parentNode.removeChild(this.e.backdrop_),this.e.xe&&this.h.removeEventListener("keydown",this.e.xe),e&&(this.e.returnValue=e),this.e.close())}get header(){return this.Re}get body(){return this.ae}get footer(){return this.ne}get dialog(){return this.e}get left(){return this.e.style.left}set left(e){this.e.style.left=e}get top(){return this.e.style.top}set top(e){this.e.style.top=e}get width(){return this.e.style.width}set width(e){this.e.style.width=e}get height(){return this.e.style.height}set height(e){this.e.style.top=e}get windowState(){return this.i}get Ze(){let e=this.e.offsetWidth||this.e.clientWidth,t=this.e.offsetHeight||this.e.clientHeight;if(!e||!t){let i=this.$.getComputedStyle(this.e);e=e||parseInt(i.width,10),t=t||parseInt(i.height,10)}return{width:e,height:t}}center(){this.position(48)}position(e){if(e<1)return;let t=this.Ze;(e&4)===4?this.i.y=0:(e&8)===8?this.i.y=this.$.innerHeight-t.height:(e&16)===16&&(this.i.y=this.$.innerHeight/2-t.height/2),(e&1)===1?this.i.x=0:(e&2)===2?this.i.x=this.$.innerWidth-t.width:(e&32)===32&&(this.i.x=this.$.innerWidth/2-t.width/2),this.e.style.left=this.i.x+"px",this.e.style.top=this.i.y+"px",this.i.width=t.width,this.i.height=t.height,this.emit("moved",this.i)}maximize(){this.maximized||(this.maximized=!0,this.e.classList.add("maximized"),this.e.querySelector(`#${this.l}-max`).firstElementChild.classList.remove("bi-arrows-fullscreen"),this.e.querySelector(`#${this.l}-max`).firstElementChild.classList.add("bi-arrows-angle-contract"),this.emit("maximized"))}restore(){this.maximized&&(this.maximized=!1,this.e.classList.remove("maximized"),this.e.querySelector(`#${this.l}-max`).firstElementChild.classList.add("bi-arrows-fullscreen"),this.e.querySelector(`#${this.l}-max`).firstElementChild.classList.remove("bi-arrows-angle-contract"),this.emit("restored"))}Mt(e){let t=this.h.getElementsByTagName("dialog"),i=0,s=t.length,n=parseInt(this.e.style.zIndex,10),a=[];for(;i<s;i++){if(!t[i].style.zIndex||!t[i].style.zIndex.length)continue;let c=parseInt(t[i].style.zIndex,10);c>n&&(n=c),a.push({z:c,idx:i,show:parseInt(t[i].dataset.show||"",10)||0})}if(this.i.zIndex=n,e||this.i.zIndex>1e3)for(this.i.zIndex=100,i=0,a.sort((c,h)=>c.show>h.show?1:c.z<h.z?-1:c.z>h.z?1:0);i<s;i++)t[a[i]].backdrop_&&(t[a[i]].backdrop_.style.zIndex=""+this.i.zIndex++),t[a[i].idx].style.zIndex=""+this.i.zIndex++}showFooter(){this.ne.style.display="",this.ae.style.bottom=this.ne.clientHeight+1+"px"}hideFooter(){this.ne.style.display="none",this.ae.style.bottom="0"}focus(){this.e.focus(),this.Mt(),this.e.style.zIndex=""+ ++this.i.zIndex,this.emit("focus")}makeVisible(e,t){var i=this.e.getBoundingClientRect();e?(i.right>this.$.innerWidth&&(this.i.x=this.$.innerWidth-this.i.width-16,i.left<0&&(this.i.x=0),this.e.style.left=this.i.x+"px"),i.bottom>this.$.innerHeight&&(this.i.y=this.$.innerHeight-this.i.height-16,i.top<0&&(this.i.y=0),this.e.style.top=this.i.y+"px")):(i.left>this.$.innerWidth-16&&(this.i.x=this.$.innerWidth-16,this.e.style.left=this.i.x+"px"),i.top>this.$.innerHeight-16&&(this.i.y=this.$.innerHeight-16,this.e.style.top=this.i.y+"px")),t||this.emit("moved",this.i)}resetState(e){typeof e?.height=="number"?this.e.style.height=e.height+"px":e?.height&&e?.height.length>0?this.e.style.height=e.height:this.e.style.height="480px",typeof e?.minHeight=="number"?this.e.style.minHeight=e.minHeight+"px":e?.minHeight&&e?.minHeight.length>0?this.e.style.minHeight=e.minHeight:this.e.style.minHeight="150px",typeof e?.minWidth=="number"?this.e.style.minWidth=e.minWidth+"px":e?.minWidth&&e?.minWidth.length>0?this.e.style.minWidth=e.minWidth:this.e.style.minWidth="300px",typeof e?.width=="number"?this.e.style.width=e.width+"px":e?.width&&e?.width.length>0?this.e.style.width=e.width:this.e.style.width="640px",typeof e?.y=="number"?this.e.style.top=e.y+"px":e?.y&&e?.y.length>0?this.e.style.top=e.y:this.e.style.top="0",typeof e?.x=="number"?this.e.style.left=e.x+"px":e?.x&&e?.x.length>0?this.e.style.left=e.x:this.e.style.left="0";let t=this.$.getComputedStyle(this.e);this.i.x=this.s.x=parseInt(t.left,10),this.i.width=this.s.width=parseInt(t.width,10),this.i.y=this.s.y=parseInt(t.top,10),this.i.height=this.s.height=parseInt(t.height,10),e&&"maximized"in e&&e.maximized?this.maximize():this.restore(),(this.keepCentered||e&&"center"in e&&e.center)&&this.center(),e&&"position"in e&&e.position>0&&this.position(e.position),this.Le()}setBody(e,t){this.ae.innerHTML=e,t=t||{};let i=this.ae.querySelectorAll("script");for(let s=0,n=i.length;s<n;s++)new Function("body","dialog",...Object.keys(t),i[s].textContent).apply(client,[this.ae,this,...Object.values(t),this])}},Re=class extends R{constructor(r,e,t,i){super(typeof r=="string"?{title:he(t||4)+r,width:300,height:150,keepCentered:!0,center:!0,resizable:!1,moveable:!1,maximizable:!1,buttons:1,document:i?i.document:document}:r),this.body.classList.add("d-flex","justify-content-center","align-content-center","align-items-center"),e&&(this.body.innerHTML=`<div class="text-center" style="width: 64px;height:64px;font-size: 40px;">${he(t||4)}</div><div class="ms-3 align-self-center flex-fill">${e}</div></div>`)}},Le=class extends R{constructor(r,e,t,i,s){super(typeof r=="string"?{title:he(t||1)+r,width:300,height:150,keepCentered:!0,center:!0,resizable:!1,moveable:!1,maximizable:!1,buttons:i===void 0?12:i,document:s?s.document:document}:r),this.body.classList.add("d-flex","justify-content-center","align-content-center","align-items-center"),e&&(this.body.innerHTML=`<div class="text-center" style="width: 64px;height:64px;font-size: 40px;">${he(t||1)}</div><div class="ms-3 align-self-center flex-fill">${e}</div></div>`)}},Ee=class extends R{constructor(r,e,t,i){super(typeof r=="string"?{title:he(t||1)+r,width:300,height:150,keepCentered:!0,center:!0,resizable:!1,moveable:!1,maximizable:!1,buttons:2,closeable:!1,document:i?i.document:document}:r),this.body.classList.add("text-center","justify-content-center","align-content-center","align-items-center"),this.body.innerHTML=`<div class="align-self-center flex-fill" id="progress-message" style="padding:0 5px">${e||""}</div></div><div class="progress" role="progressbar" aria-label="${r}" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="margin: 5px;"><div class="progress-bar" style="width: 0%"></div></div>`,this.De=this.body.querySelector(".progress-bar")}set label(r){this.De.innerHTML=r}get label(){return this.De.innerHTML}set progress(r){r<0&&(r=0),r>100&&(r=100),this.De.style.width=r+"%"}get progress(){return parseInt(this.De.style.width,10)}get message(){return this.body.querySelector("#progress-message").textContent}set message(r){this.body.querySelector("#progress-message").textContent=r}};function he(o){if(typeof o=="string")return o+" ";switch(o){case 3:return'<i class="fa-regular fa-circle-xmark"></i> ';case 4:return'<i class="fa-solid fa-circle-exclamation"></i> ';case 1:return'<i class="fa-regular fa-circle-question"></i> '}return'<i class="fa-solid fa-circle-info"></i> '}window.confirm_box=(o,r,e,t,i)=>new Promise((s,n)=>{let a=new Le(o,r,e,t,i);a.showModal(),a.on("button-click",c=>s(c)),a.on("canceled",()=>n(null)),a.on("closed",c=>c==="Yes"?0:n(null))});window.alert_box=(o,r,e,t)=>{new Re(o,r,e,t).showModal()};window.progress_box=(o,r,e,t)=>new Ee(o,r,e,t);window.Dialog=R;function k(o){this.ok=!1,o.charAt(0)=="#"&&(o=o.substr(1,6)),o=o.replace(/ /g,""),o=o.toLowerCase();var r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var e in r)o==e&&(o=r[e]);for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1],10),parseInt(l[2],10),parseInt(l[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0,s=t.length;i<s;i++){var n=t[i].re,a=t[i].process,c=n.exec(o);if(c){var h=a(c);this.r=h[0],this.g=h[1],this.b=h[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+l+d+f}}var fe=class extends M{constructor(e,t){super();this.We=!0;this.yt=!1;this.wt={"No color":"Default",BLACK:"Black",RED:"Maroon",GREEN:"Green",ORANGE:"Olive",BLUE:"Navy",MAGENTA:"Purple",WHITE:"Silver",CYAN:"Teal","BOLD BLACK":"Grey","BOLD RED":"Red","BOLD GREEN":"Lime",YELLOW:"Yellow","BOLD YELLOW":"Yellow","BOLD BLUE":"Blue","BOLD MAGENTA":"Fuchsia","BOLD CYAN":"Aqua",BOLD:"White","BOLD WHITE":"White",RGB000:"Black",RGB001:"Navy Blue",RGB002:"Dark Blue",RGB003:"Blue",RGB004:"Blue",RGB005:"Blue",RGB010:"Dark Green",RGB011:"Deep Sky Blue",RGB012:"Deep Sky Blue",RGB013:"Deep Sky Blue",RGB014:"Cobalt/Dodger Blue",RGB015:"Dodger Blue",RGB020:"Green",RGB021:"Spring Green",RGB022:"Turquoise",RGB023:"Deep Sky Blue",RGB024:"Deep Sky Blue",RGB025:"Dodger Blue",RGB030:"Green",RGB031:"Spring Green",RGB032:"Dark Cyan",RGB033:"Light Sea Green",RGB034:"Deep Sky Blue",RGB035:"Deep Sky Blue",RGB040:"Green",RGB041:"Spring Green",RGB042:"Spring Green",RGB043:"Cyan",RGB044:"Dark Turquoise",RGB045:"Turquoise",RGB050:"Green",RGB051:"Spring Green",RGB052:"Spring Green",RGB053:"Medium Spring Green",RGB054:"Cyan",RGB055:"Cyan",RGB100:"Dark Red",RGB101:"Deep Pink",RGB102:"Purple",RGB103:"Purple",RGB104:"Purple",RGB105:"Blue Violet",RGB110:"Orange",RGB111:"Dark Grey",RGB112:"Medium Purple",RGB113:"Slate Blue",RGB114:"Slate Blue",RGB115:"Royal Blue",RGB120:"Chartreuse",RGB121:"Dark Sea Green",RGB122:"Pale Turquoise",RGB123:"Steel Blue",RGB124:"Steel Blue",RGB125:"Cornflower Blue",RGB130:"Chartreuse",RGB131:"Dark Sea Green",RGB132:"Cadet Blue",RGB133:"Cadet Blue",RGB134:"Sky Blue",RGB135:"Steel Blue",RGB140:"Chartreuse",RGB141:"Pale Green",RGB142:"Sea Green",RGB143:"Aquamarine",RGB144:"Medium Turquoise",RGB145:"Steel Blue",RGB150:"Chartreuse",RGB151:"Sea Green",RGB152:"Sea Green",RGB153:"Sea Green",RGB154:"Aquamarine",RGB155:"Dark Slate Gray",RGB200:"Dark Red",RGB201:"Deep Pink",RGB202:"Dark Magenta",RGB203:"Dark Magenta",RGB204:"Dark Violet",RGB205:"Purple",RGB210:"Orange",RGB211:"Light Pink",RGB212:"Plum",RGB213:"Medium Purple",RGB214:"Medium Purple",RGB215:"Slate Blue",RGB220:"Yellow",RGB221:"Wheat",RGB222:"Grey",RGB223:"Light Slate Grey",RGB224:"Medium Purple",RGB225:"Light Slate Blue",RGB230:"Yellow",RGB231:"Dark Olive Green",RGB232:"Dark Sea Green",RGB233:"Light Sky Blue",RGB234:"Light Sky Blue",RGB235:"Sky Blue",RGB240:"Chartreuse",RGB241:"Dark Olive Green",RGB242:"Pale Green",RGB243:"Dark Sea Green",RGB244:"Dark Slate Gray",RGB245:"Sky Blue",RGB250:"Chartreuse",RGB251:"Light Green",RGB252:"Light Green",RGB253:"Pale Green",RGB254:"Aquamarine",RGB255:"Dark Slate Gray",RGB300:"Red",RGB301:"Deep Pink",RGB302:"Medium Violet Red",RGB303:"Magenta",RGB304:"Dark Violet",RGB305:"Purple",RGB310:"Dark Orange",RGB311:"Indian Red",RGB312:"Hot Pink",RGB313:"Medium Orchid",RGB314:"Medium Orchid",RGB315:"Medium Purple",RGB320:"Dark Goldenrod",RGB321:"Light Salmon",RGB322:"Rosy Brown",RGB323:"Grey",RGB324:"Medium Purple",RGB325:"Medium Purple",RGB330:"Gold",RGB331:"Dark Khaki",RGB332:"Navajo White",RGB333:"Grey",RGB334:"Light Steel Blue",RGB335:"Light Steel Blue",RGB340:"Yellow",RGB341:"Dark Olive Green",RGB342:"Dark Sea Green",RGB343:"Dark Sea Green",RGB344:"Light Cyan",RGB345:"Light Sky Blue",RGB350:"Green Yellow",RGB351:"Dark Olive Green",RGB352:"Pale Green",RGB353:"Dark Sea Green",RGB354:"Dark Sea Green",RGB355:"Pale Turquoise",RGB400:"Crimson/Red",RGB401:"Deep Pink",RGB402:"Deep Pink",RGB403:"Magenta",RGB404:"Magenta",RGB405:"Magenta",RGB410:"Dark Orange",RGB411:"Indian Red",RGB412:"Hot Pink",RGB413:"Hot Pink",RGB414:"Orchid",RGB415:"Medium Orchid",RGB420:"Orange",RGB421:"Light Salmon/Bronze",RGB422:"Light Pink",RGB423:"Pink",RGB424:"Plum",RGB425:"Violet",RGB430:"Gold",RGB431:"Light Goldenrod",RGB432:"Tan",RGB433:"Misty Rose",RGB434:"Thistle",RGB435:"Plum",RGB440:"Yellow",RGB441:"Khaki",RGB442:"Light Goldenrod",RGB443:"Light Yellow",RGB444:"Grey",RGB445:"Light Steel Blue",RGB450:"Yellow",RGB451:"Dark Olive Green",RGB452:"Dark Olive Green",RGB453:"Dark Sea Green",RGB454:"Honeydew",RGB455:"Light Cyan",RGB500:"Red",RGB501:"Deep Pink",RGB502:"Deep Pink",RGB503:"Deep Pink",RGB504:"Magenta",RGB505:"Magenta",RGB510:"Orangered",RGB511:"Indian Red",RGB512:"Indian Red",RGB513:"Hot Pink",RGB514:"Hot Pink",RGB515:"Medium Orchid",RGB520:"Dark Orange",RGB521:"Salmon",RGB522:"Light Coral",RGB523:"Pale Violet Red",RGB524:"Orchid",RGB525:"Orchid",RGB530:"Orange",RGB531:"Sandy Brown",RGB532:"Light Salmon",RGB533:"Light Pink",RGB534:"Pink",RGB535:"Plum",RGB540:"Gold",RGB541:"Light Goldenrod",RGB542:"Light Goldenrod",RGB543:"Navajo White",RGB544:"Misty Rose",RGB545:"Thistle",RGB550:"Yellow",RGB551:"Light Goldenrod",RGB552:"Khaki",RGB553:"Wheat",RGB554:"Corn Silk",RGB555:"White",mono00:"Grey 3",mono01:"Grey 7",mono02:"Grey 11",mono03:"Grey 15",mono04:"Grey 19",mono05:"Grey 23",mono06:"Grey 27",mono07:"Grey 30",mono08:"Grey 35",mono09:"Grey 39",mono10:"Grey 32",mono11:"Grey 46",mono12:"Grey 50",mono13:"Grey 54",mono14:"Grey 58",mono15:"Grey 62",mono16:"Grey 66",mono17:"Grey 70",mono18:"Grey 74",mono19:"Grey 78",mono20:"Grey 82",mono21:"Grey 85",mono22:"Grey 89",mono23:"Grey 93"};this.et=[];if(!e)throw new Error("AdvEditor must be a selector, element or jquery object");if(typeof e=="string"){if(this.j=document.querySelector(e),!this.j)throw new Error("Invalid selector for AdvEditor.")}else if(e instanceof $)this.j=e[0];else if(e instanceof HTMLElement)this.j=e;else throw new Error("AdvEditor must be a selector, element or jquery object");this.simple=!t}get id(){return this.j?this.j.id:""}get element(){return this.j}get simple(){return this.We}set simple(e){e!==this.We&&(this.We=e,this.tinymceExist&&(e?this.remove():this.initialize()))}clear(){this.isSimple?this.j.value="":tinymce.activeEditor.setContent("")}get value(){return this.isSimple?this.j.value:this.getFormattedText().replace(/(?:\r)/g,"")}set value(e){this.isSimple?this.j.value=e:tinymce.activeEditor.setContent(e)}insert(e){if(this.isSimple)Se(this.j,e);else{e=T(e),e=e.replace(/ /g,"&nbsp;"),e=e.replace(/\t/g,"&nbsp;&nbsp;&nbsp;"),e=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");var t=this.getText();t===`
`?tinymce.activeEditor.undoManager.transact(()=>{tinymce.activeEditor.setContent(e)}):(t.endsWith(`
`)||(e="<br>"+e),tinymce.activeEditor.undoManager.transact(()=>{tinymce.activeEditor.dom.add(tinymce.activeEditor.getBody(),"span",{},e)}))}}get tinymceExist(){return typeof tinymce<"u"}get isSimple(){return this.We||!this.tinymceExist}Pt(){var e=We(),t,i,s,n,a,c,h=[],l;this.q=[],this.u={};var d=client.getOption("colors")||[];for(i=new k(d[0]||e[0]).toHex().substr(1).toUpperCase(),this.u[i]="BLACK",this.q.push(i,"BLACK"),i=new k(d[1]||e[1]).toHex().substr(1).toUpperCase(),this.u[i]="RED",this.q.push(i,"RED"),i=new k(d[2]||e[2]).toHex().substr(1).toUpperCase(),this.u[i]="GREEN",this.q.push(i,"GREEN"),i=new k(d[3]||e[3]).toHex().substr(1).toUpperCase(),this.u[i]="ORANGE",this.q.push(i,"ORANGE"),i=new k(d[4]||e[4]).toHex().substr(1).toUpperCase(),this.u[i]="BLUE",this.q.push(i,"BLUE"),i=new k(d[5]||e[5]).toHex().substr(1).toUpperCase(),this.u[i]="MAGENTA",this.q.push(i,"MAGENTA"),i=new k(d[6]||e[6]).toHex().substr(1).toUpperCase(),this.u[i]="CYAN",this.q.push(i,"CYAN"),i=new k(d[7]||e[7]).toHex().substr(1).toUpperCase(),this.u[i]="WHITE",this.q.push(i,"WHITE"),i=new k(d[8]||e[8]).toHex().substr(1).toUpperCase(),this.u[i]="mono11",this.q.push(i,"BOLD BLACK"),h.push(i),i=new k(d[9]||e[9]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^RED",this.q.push(i,"BOLD RED"),h.push(i),i=new k(d[10]||e[10]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^GREEN",this.q.push(i,"BOLD GREEN"),h.push(i),i=new k(d[11]||e[11]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^YELLOW",this.q.push(i,"BOLD YELLOW"),h.push(i),i=new k(d[11]||e[11]).toHex().substr(1).toUpperCase(),this.u[i]="YELLOW",this.q.push(i,"YELLOW"),h.push(i),i=new k(d[12]||e[12]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^BLUE",this.q.push(i,"BOLD BLUE"),h.push(i),i=new k(d[13]||e[13]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^MAGENTA",this.q.push(i,"BOLD MAGENTA"),h.push(i),i=new k(d[14]||e[14]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^CYAN",this.q.push(i,"BOLD CYAN"),h.push(i),i=new k(d[15]||e[15]).toHex().substr(1).toUpperCase(),this.u[i]="BOLD%^%^WHITE",this.q.push(i,"BOLD WHITE"),s=0;s<6;s++)for(n=0;n<6;n++)for(a=0;a<6;a++)c=`RGB${s}${n}${a}`,i="",t=0,t=s*40+55,t<16&&(i+="0"),i+=t.toString(16),t=0,t=n*40+55,t<16&&(i+="0"),i+=t.toString(16),t=0,t=a*40+55,t<16&&(i+="0"),i+=t.toString(16),i=i.toUpperCase(),this.u[i]||(this.u[i]=c),this.et.push({color:c,hex:"#"+i,rgb:{r:s*40+55,g:n*40+55,b:a*40+55}});for(s=232;s<=255;s++)n=(s-232)*10+8,n<16?n="0"+n.toString(16).toUpperCase():n=n.toString(16).toUpperCase(),n=n+n+n,s<242?this.u[n]||(this.u[n]="mono0"+(s-232)):this.u[n]||(this.u[n]="mono"+(s-232));for(a=0,l=h.length;a<l;a++)this.u["B"+h[a]]=this.u[this.$e("#"+h[a]).substr(1)].toUpperCase();this.u.BFFFFFF="RGB555",tinymce.activeEditor.options.set("color_map",this.q)}Ht(){let e=this;tinymce.PluginManager.add("pinkfishtextcolor",function(t,i){let s="#000000",n=["000000","BLACK","800000","RED","008000","GREEN","808000","ORANGE","0000EE","BLUE","800080","MAGENTA","008080","CYAN","BBBBBB","WHITE","808080","BOLD BLACK","FF0000","BOLD RED","00FF00","BOLD GREEN","FFFF00","YELLOW","5C5CFF","BOLD BLUE","FF00FF","BOLD MAGENTA","00FFFF","BOLD CYAN","FFFFFF","BOLD WHITE"],a,c=m=>{let b=m;return{get:()=>b,set:I=>{b=I}}},h=c(s),l=c(s),d=(m,b)=>{let y;return m.dom.getParents(m.selection.getStart(),G=>{let I;(I=G.style[b==="forecolor"?"color":"background-color"])&&(y=y||I)}),y},f=(m,b,y)=>{m.undoManager.transact(()=>{m.focus(),m.formatter.apply(b,{value:y}),m.nodeChanged()})},p=(m,b)=>{m.undoManager.transact(()=>{m.focus(),m.formatter.remove(b,{value:null},null,!0),m.nodeChanged()})},x=m=>{m.addCommand("mceApplyPinkfishcolor",(b,y)=>{f(m,b,y)}),m.addCommand("mceRemovePinkfishcolor",b=>{p(m,b)}),m.addCommand("mceSetPinkfishcolor",(b,y)=>{a&&(ve(a,b==="forecolor"?"pinkfishforecolor":b,y),(b==="forecolor"?h:l).set(y))})},K=m=>{let b="choiceitem",y={type:b,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return m?[y,{type:b,text:"Custom color",icon:"color-picker",value:"custom"}]:[y]},we=(m,b,y,G)=>{y==="custom"?e.vt(b,""):y==="remove"?(G(""),m.execCommand("mceRemovePinkfishcolor",b)):(G(y),m.execCommand("mceApplyPinkfishcolor",b,y))},Ze=m=>{let b=[];for(let y=0;y<m.length;y+=2)b.push({text:m[y+1],value:"#"+m[y],type:"choiceitem"});return b},et=(m,b)=>Ze(n).concat(K(b)),tt=(m,b)=>y=>{y(et(m,b))},ve=(m,b,y)=>{let G=b==="pinkfishforecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";m.setIconFill(G,y)},De=(m,b,y,G,I)=>{m.ui.registry.addSplitButton(b,{tooltip:G,presets:"color",icon:b==="pinkfishforecolor"?"text-color":"highlight-bg-color",select:W=>new k(d(m,y)||"").toHex().toLowerCase()===W.toLowerCase(),columns:5,fetch:tt(n,!0),onAction:W=>{a=W,we(m,y,I.get(),()=>{})},onItemAction:(W,ae)=>{a=W,we(m,y,ae,J=>{I.set(J),m.fire("TextColorChange",{name:b,color:J})})},onSetup:W=>{ve(W,b,I.get());let ae=J=>{J.name===b&&ve(W,J.name,J.color)};return m.on("TextColorChange",ae),()=>{m.off("TextColorChange",ae)}}})},Oe=(m,b,y,G)=>{m.ui.registry.addNestedMenuItem(b,{text:G,icon:b==="pinkfishforecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",onAction:I=>{we(m,y,I.value,()=>{})}}]})};x(t),De(t,"pinkfishforecolor","forecolor","Text color",h),De(t,"pinkfishbackcolor","hilitecolor","Background color",l),Oe(t,"pinkfishforecolor","forecolor","Text color"),Oe(t,"pinkfishbackcolor","hilitecolor","Background color")}),tinymce.PluginManager.add("pinkfish",function(t){t.addCommand("mceApplyFormat",(n,a)=>{t.undoManager.transact(()=>{t.focus(),e.tt($(".reverse",$(t.getDoc()).contents())),a?t.formatter.apply(n,{value:a}):t.formatter.apply(n),e.qe($(".reverse",$(t.getDoc()).contents())),t.nodeChanged()})}),t.addCommand("mceRemoveFormat",n=>{t.undoManager.transact(()=>{t.focus(),e.tt($(".reverse",$(t.getDoc()).contents())),t.formatter.remove(n,{value:null},null,!0),e.qe($(".reverse",$(t.getDoc()).contents())),t.nodeChanged()})});function i(n,a){t.on("init",()=>{t.formatter.formatChanged(a,function(c){n.setActive(c)})})}function s(n){(!n||typeof n!="string")&&(n=this.settings.format),tinymce.activeEditor.undoManager.transact(()=>{$("#tinymce",tinymce.activeEditor.getDoc()).removeClass("animate"),this.clearReverse($(".reverse",$(t.getDoc()).contents())),t.execCommand("mceToggleFormat",!1,n),this.addReverse($(".reverse",$(t.getDoc()).contents())),$("#tinymce",tinymce.activeEditor.getDoc()).addClass("animate")})}t.ui.registry.addIcon("overline",'<i class="mce-i-overline"></i>'),t.ui.registry.addIcon("dblunderline",'<i class="mce-i-dblunderline"></i>'),t.ui.registry.addIcon("flash",'<i class="mce-i-flash"></i>'),t.ui.registry.addIcon("reverse",'<i class="mce-i-reverse"></i>'),t.ui.registry.addIcon("pasteformatted",'<i class="mce-i-pasteformatted"></i>'),t.ui.registry.addIcon("copyformatted",'<i class="mce-i-copyformatted"></i>'),t.ui.registry.addSplitButton("send",{icon:"send",tooltip:"Send to mud",onAction:()=>{client.sendCommand(e.getFormattedText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close")},onItemAction:(n,a)=>{switch(a){case"formatted":client.sendCommand(e.getFormattedText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"text":client.sendCommand(e.getText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"formattednoecho":client.sendBackground(e.getFormattedText().replace(/(?:\r)/g,""),!0),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"textnoecho":client.sendBackground(e.getText().replace(/(?:\r)/g,""),!0),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"formattedverbatim":client.send(e.getFormattedText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"textverbatim":client.send(e.getText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"rawformatted":client.sendRaw(e.getFormattedText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break;case"rawtext":client.sendRaw(e.getText().replace(/(?:\r)/g,"")),client.getOption("editorClearOnSend")&&tinymce.activeEditor.setContent(""),client.getOption("editorCloseOnSend")&&e.emit("close");break}},fetch:n=>{n([{text:"Formatted as commands",value:"formatted",type:"choiceitem"},{text:"Text as commands",value:"text",type:"choiceitem"},{text:"Formatted as commands (No echo)",value:"formattednoecho",type:"choiceitem"},{text:"Text as commands (No echo)",value:"textnoecho",type:"choiceitem"},{text:"Formatted verbatim (No echo)",value:"formattedverbatim",type:"choiceitem"},{text:"Text verbatim (No echo)",value:"textverbatim",type:"choiceitem"},{text:"Raw formatted (No echo)",value:"rawformatted",type:"choiceitem"},{text:"Raw text (No echo)",value:"rawtext",type:"choiceitem"}])}}),t.ui.registry.addButton("append",{icon:"browse",tooltip:"Append file...",onAction:()=>e.Wt()}),t.ui.registry.addButton("clear",{icon:"remove",tooltip:"Clear",onAction:()=>e.clear()}),t.ui.registry.addButton("pasteformatted",{icon:"pasteformatted",tooltip:"Paste formatted",onAction:n=>{te().then(a=>{e.qt(a||"")}).catch(a=>{client.enableDebug&&client.debug(a),a.message&&a.message==="Permission not granted!"?alert("Paste permission not granted."):alert("Paste not supported.")})}}),t.ui.registry.addButton("pasteastext",{icon:"paste-text",tooltip:"Paste as text",onAction:n=>{te().then(a=>{tinymce.activeEditor.execCommand("mceInsertContent",!1,(a||"").replace(/(\r\n|\r|\n)/g,"<br/>").replaceAll("  ","&nbsp;&nbsp;"))}).catch(a=>{client.enableDebug&&client.debug(a),a.message&&a.message==="Permission not granted!"?alert("Paste permission not granted."):alert("Paste not supported.")})}}),t.ui.registry.addButton("copyformatted",{icon:"copyformatted",tooltip:"Copy formatted",onAction:n=>ee(e.getFormattedSelection().replace(/(?:\r)/g,""))}),t.ui.registry.addToggleButton("overline",{icon:"overline",tooltip:"Overline",format:"overline",onAction:n=>s("overline"),onSetup:n=>i(n,"overline")}),t.ui.registry.addToggleButton("dblunderline",{icon:"dblunderline",tooltip:"Double Underline",format:"dblunderline",onAction:n=>s("dblunderline"),onSetup:n=>i(n,"dblunderline")}),t.ui.registry.addToggleButton("flash",{tooltip:"Flash",format:"flash",icon:"flash",onAction:n=>s("flash"),onSetup:n=>i(n,"flash")}),t.ui.registry.addToggleButton("reverse",{icon:"reverse",tooltip:"Reverse",format:"reverse",onAction:n=>s("reverse"),onSetup:n=>i(n,"reverse")}),t.ui.registry.addMenuItem("style",{text:"Style",menu:[{image:"overline",text:"Overline",format:"overline",onclick:s,onpostrender:i},{image:"dblunderline",text:"Double Underline",format:"dblunderline",onclick:s,onpostrender:i},{text:"Flash",format:"flash",image:"flash",onclick:s,onpostrender:i},{image:"reverse",text:"Reverse",format:"reverse",onclick:s,onpostrender:i}]}),t.ui.registry.addMenuItem("overline",{image:"overline",text:"Overline",format:"overline",onclick:s,onpostrender:i}),t.ui.registry.addMenuItem("dblunderline",{image:"dblunderline",text:"Double Underline",format:"dblunderline",onclick:s,onpostrender:i}),t.ui.registry.addMenuItem("flash",{text:"Flash",format:"flash",image:"flash",onclick:s,onpostrender:i}),t.ui.registry.addMenuItem("reverse",{image:"reverse",text:"Reverse",format:"reverse",onclick:s,onpostrender:i}),t.on("Change",()=>{e.qe($(".reverse",$(t.getDoc()).contents()))}),t.addShortcut("ctrl+s","Strikethrough",()=>{s("strikethrough")}),t.addShortcut("ctrl+o","Overline",()=>{s("overline")}),t.addShortcut("ctrl+d","Double Underline",()=>{s("dblunderline")}),t.addShortcut("ctrl+f","Flash",()=>{s("flash")}),t.addShortcut("ctrl+r","Reverse",()=>{s("reverse")})})}tt(e,t){e.each(function(){if($(this).data("reverse")&&!(t&&$(this).hasClass("reverse"))){var i,s;t?(i=$(this).css("color"),s=$(this).css("background-color")):(s=$(this).parent().css("color"),i=$(this).parent().css("background-color")),i==="black"&&(i=""),s==="rgba(0, 0, 0, 0)"&&(s="black"),$(this).css("color",s),$(this).css("background-color",i),$(this).children().length&&this.clearReverse($(this).children(),!0)}})}qe(e,t){e.each(function(){if(!(t&&$(this).hasClass("reverse"))){var i,s;t?(i=$(this).css("color"),s=$(this).css("background-color")):(i=$(this).parent().css("color"),s=$(this).parent().css("background-color")),i==="rgba(0, 0, 0, 0)"&&(i="black"),s==="rgba(0, 0, 0, 0)"&&(s="black"),$(this).children().length&&(this.clearReverse($(this).children(),!0),this.addReverse($(this).children(),!0)),$(this).css("color",s),$(this).css("background-color",i),$(this).data("reverse",!0)}})}Oe(e,t){var i='<td class="mce-grid-cell'+(e==="transparent"?" mce-colorbtn-trans":"")+'">';return i+='<div id="'+t+'"',i+=' data-mce-color="'+e+'"',i+=' role="option"',i+=' tabIndex="-1"',i+=' style="background-color: '+(e==="transparent"?e:"#"+e)+'"',this.wt[t]?i+=' title="'+t+", "+this.wt[t]+'">':i+=' title="'+t+'">',e==="transparent"&&(i+="&#215;"),i+="</div>",i+="</td>",i}vt(e,t){if(!this.fe){this.fe=new R({noFooter:!0,title:'<i class="fas fa-palette"></i> Pick color',center:!0,resizable:!1,moveable:!1,maximizable:!1,width:380,height:340}),this.fe.body.style.alignItems="center",this.fe.body.style.display="flex";let n,a,c,h,l,d;var i='<table style="margin : auto !important;" class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody><tr>';for(n=0,a=this.q.length;n<a;n+=2)i+=this.Oe(this.q[n],this.q[n+1]),n/2%6===5&&(i+='<td class="mce-grid-cell"></td>');i+='<td class="mce-grid-cell"></td>',i+=this.Oe("transparent","No color"),i+="</tr><tr><td></td></tr>";var s="";for(c=0;c<6;c++){for(h<3?i+="<tr>":s+="<tr>",h=0;h<6;h++){for(l=0;l<6;l++)d=`RGB${c}${h}${l}`,t="",n=0,n=c*40+55,n<16&&(t+="0"),t+=n.toString(16),n=0,n=h*40+55,n<16&&(t+="0"),t+=n.toString(16),n=0,n=l*40+55,n<16&&(t+="0"),t+=n.toString(16),t=t.toUpperCase(),h<3?i+=this.Oe(t,d):s+=this.Oe(t,d);h===2?i+="</tr>":h<3?i+='<td class="mce-grid-cell"></td>':h<5&&(s+='<td class="mce-grid-cell"></td>')}h<3?i+="</tr>":s+="</tr>"}for(i+=s,i+="<tr><td></td></tr><tr>",c=232;c<=255;c++)h=(c-232)*10+8,h<16?h="0"+h.toString(16).toUpperCase():h=h.toString(16).toUpperCase(),h=h+h+h,i+=this.Oe(h,t),(c===237||c===249)&&(i+='<td class="mce-grid-cell"></td>'),c===243&&(i+="</tr><tr>");i+="</tr></tbody></table>",i+="<style>.mce-colorbtn-trans div {line-height: 14px;overflow: hidden;}.mce-grid td.mce-grid-cell div{border:1px solid #c5c5c5;width:15px;height:15px;margin:0;cursor:pointer}.mce-grid td.mce-grid-cell div:focus{border-color:#91bbe9}.mce-grid td.mce-grid-cell div[disabled]{cursor:not-allowed}.mce-grid{border-spacing:2px;border-collapse:separate}.mce-grid a{display:block;border:1px solid transparent}.mce-grid a:hover,.mce-grid a:focus{border-color:#91bbe9}.mce-grid-border{margin:0 4px 0 4px}.mce-grid-border a{border-color:#c5c5c5;width:13px;height:13px}.mce-grid-border a:hover,.mce-grid-border a.mce-active{border-color:#91bbe9;background:#bdd6f2}</style>",this.fe.body.innerHTML=i;let f=this.fe.body.querySelectorAll("div");for(n=0,a=f.length;n<a;n++)f[n].addEventListener("click",p=>{t=p.currentTarget.dataset.mceColor,t==="transparent"?tinymce.activeEditor.execCommand("mceRemoveFormat",this.fe.dialog.dataset.type):tinymce.activeEditor.execCommand("mceApplyFormat",this.fe.dialog.dataset.type,"#"+t),tinymce.activeEditor.execCommand("mceSetTextcolor",this.fe.dialog.dataset.type,"#"+t),this.fe.close()})}this.fe.dialog.dataset.type=e,this.fe.showModal()}Wt(){q("Append file(s)",!0).then(e=>{for(var t=0,i=e.length;t<i;t++)z(e[t]).then(s=>{this.insert(s)}).catch(client.error)}).catch(()=>{})}qt(e){this.isSimple?Se(this.j,e):tinymce.activeEditor.execCommand("insertHTML",!1,Ce(e).replace(/(\r\n|\r|\n)/g,"<br/>"))}setFormatted(e){this.isSimple?this.j.value=e:tinymce.activeEditor.getBody().innerHTML=Ce(e).replace(/(\r\n|\r|\n)/g,"<br/>")}it(e){for(var t,i,s,n,a=[],c,h=0,l=e.length;h<l;h++)if(i=$(e[h]),t=i.prop("tagName"),t==="EM"||t==="I"?t="ITALIC":(t==="STRONG"||t==="B")&&(t="BOLD"),!t)a.push('"'+i.text()+'"');else if(t==="SPAN"){if(c=[],e[h].className!="")for(t=e[h].className.toUpperCase().split(/\s+/g),n=t.length,s=0;s<n;s++)t[s]==="NOFLASH"?c.push("FLASH"):t[s].length>0&&c.push(t[s]);if(i.css("text-decoration")==="line-through"&&c.push("STRIKEOUT"),i.css("text-decoration")==="underline"&&c.push("UNDERLINE"),i.data("mce-style"))for(t=i.data("mce-style").toUpperCase().split(";"),n=t.length,s=0;s<n;s++)t[s].endsWith("INHERIT")||t[s].endsWith("BLACK")||(t[s]=t[s].trim(),t[s]=t[s].replace("BACKGROUND:","BACKGROUND-COLOR:"),t[s].length>0&&c.push(t[s]));else if(i.css("color")||i.css("background-color")||i.css("background"))for(t=[],i.css("color")&&t.push("COLOR: "+new k(i.css("color")).toHex().toUpperCase()),i.css("background-color")&&t.push("BACKGROUND-COLOR: "+new k(i.css("background-color")).toHex().toUpperCase()),i.css("background")&&t.push("BACKGROUND-COLOR: "+new k(i.css("background")).toHex().toUpperCase()),n=t.length,s=0;s<n;s++)t[s].length>0&&c.push(t[s].trim());for(n=c.length,s=0;s<n;s++)c[s].length&&a.push(c[s].trim());for(a=a.concat(this.it(i.contents())),s=n-1;s>=0;s--)c[s].length&&a.push("/"+c[s].trim())}else t=="BR"&&i.data("mce-bogus")?a.push("RESET"):(a.push(t),a=a.concat(this.it(i.contents())),a.push("/"+t));return a}getFormattedSelection(){for(var e=tinymce.activeEditor.dom.getParents(tinymce.activeEditor.selection.getNode()),t=0,i=e.length,s="<html>",n="</html>";t<i;t++){var a=e[t].tagName;if(a==="EM"||a==="I"||a==="STRONG"||a==="B")s+="<"+a+">",n="</"+a+">"+n;else if(a==="SPAN"){s+="<"+a,e[t].className!=""&&(s+=' class="'+e[t].className+'"');var c="";e[t].style.textDecoration!=""&&(c+="text-decoration:"+e[t].style.textDecoration+";"),e[t].style.color!=""&&(c+="color:"+e[t].style.color+";"),e[t].style.background!=""&&(c+="background:"+e[t].style.background+";"),e[t].style.backgroundColor!=""&&(c+="background-color:"+e[t].style.backgroundColor+";"),c.length>0&&(s+=' style="'+c+'"'),e[t].dataset&&e[t].dataset.mceStyle&&(s+=' data-mce-style="'+e[t].dataset.mceStyle+'"'),s+=" >",n="</"+a+">"+n}else if(a==="BODY"){s+="<"+a+">",n="</"+a+">"+n;break}}return this.kt($(s+tinymce.activeEditor.selection.getContent({format:"raw"}).replace(/<\/div><div>/g,"<br>")+n))}getFormattedText(){return this.isSimple?this.j.value:this.kt($("<html>"+this.getRaw()+"</html>"))}getText(){return this.isSimple?this.j.value:tinymce.activeEditor.getContent({format:"text"})}getHTML(){return this.isSimple?this.j.value:tinymce.activeEditor.getContent({format:"html"})}getRaw(){return this.isSimple?this.j.value:tinymce.activeEditor.getContent({format:"raw"})}kt(e){var t=this.it(e),i=[],s=[],n,a,c,h;for(a=t.length-1;a>=0&&(!t[a].startsWith('"')&&t[a]!="BR"&&t[a]!="RESET");a--)t.pop();for(t[0]==="DIV"&&t.shift(),a=0,c=t.length;a<c;a++)switch(t[a]){case"BOLD":case"ITALIC":case"UNDERLINE":case"STRIKEOUT":case"DBLUNDERLINE":case"OVERLINE":case"FLASH":case"REVERSE":s.push("%^"+t[a]+"%^"),i.push("%^"+t[a]+"%^");break;case"/DBLUNDERLINE":case"/OVERLINE":case"/FLASH":case"/REVERSE":case"/UNDERLINE":case"/BOLD":case"/ITALIC":case"/STRIKEOUT":s.pop(),this.Te(i),i.push("%^RESET%^"),s.length>0&&i.push(s.join(""));break;case"SPAN":case"/SPAN":case"/BR":case"/DIV":break;case"DIV":case"BR":s.length>0&&i.length>0&&!i[i.length-1].endsWith("%^RESET%^")&&(this.Te(i),i.push("%^RESET%^")),i.push(`
`),s.length>0&&i.push(s.join(""));break;case"RESET":s.length>0&&i.length>0&&!i[i.length-1].endsWith("%^RESET%^")&&(this.Te(i),i.push("%^RESET%^")),s.length>0&&i.push(s.join(""));break;default:t[a].startsWith("COLOR: #")?(n=t[a].substr(8),this.u[n]||(h=new k(n),n=this.$e(h.toHex()).substr(1)),n=this.u[n],(n==="BOLD BLACK"||n==="BOLD%^%^BLACK")&&(n="mono11"),s.push("%^"+n+"%^"),i.push("%^"+n+"%^")):t[a].startsWith("COLOR: ")?(n=new k(t[a].substr(7)).toHex().substr(1),this.u[n]||(n=this.$e("#"+n).substr(1)),n=this.u[n],(n==="BOLD BLACK"||n==="BOLD%^%^BLACK")&&(n="mono11"),s.push("%^"+n+"%^"),i.push("%^"+n+"%^")):t[a].startsWith("/COLOR: ")?(s.pop(),this.Te(i),i.push("%^RESET%^"),s.length>0&&i.push(s.join(""))):t[a].startsWith("BACKGROUND-COLOR: #")?(n=t[a].substr(19),this.u[n]||(h=new k(n),n=this.$e(h.toHex()).substr(1)),this.u["B"+n]?n=this.u["B"+n]:n=this.u[n],n="%^B_"+n+"%^",s.push(n),i.push(n)):t[a].startsWith("BACKGROUND-COLOR: ")?(n=new k(t[a].substr(18)).toHex().substr(1),this.u[n]||(n=this.$e("#"+n).substr(1)),this.u["B"+n]?n=this.u["B"+n]:n=this.u[n],n="%^B_"+n+"%^",s.push(n),i.push(n)):t[a].startsWith("/BACKGROUND-COLOR: ")?(s.pop(),this.Te(i),i.push("%^RESET%^"),s.length>0&&i.push(s.join(""))):t[a].startsWith('"')&&i.push(t[a].substring(1,t[a].length-1));break}return i.join("")}Te(e){let t=e.length-1;for(;t>=0;t--)if(e[t].startsWith("%^"))e.pop();else return e;return e}$e(e){var t=this,i=function(n){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(a,function(d,f,p,x){return[f,f,p,p,x,x].join()});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?/i,h=c.exec(n),l=h?{r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)}:null;return l},s=function(n){if(!n)throw new Error("The hex you provided is not formatted correctly. Please try in a format such as '#FFF' or '#DDFFDD'.");for(var a=Number.MAX_SAFE_INTEGER,c=null,h=0;h<t.et.length;h++){var l=t.et[h],d=Math.sqrt(Math.pow(n.r-l.rgb.r,2)+Math.pow(n.g-l.rgb.g,2)+Math.pow(n.b-l.rgb.b,2));d<a&&(a=d,c=l.hex)}return c};return s(i(e))}remove(){tinymce.remove(`#${this.j.id}`)}initialize(){this.isSimple||(this.Ht(),tinymce.init({license_key:"gpl",custom_colors:!1,selector:`textarea#${this.j.id}`,height:500,menubar:!1,browser_spellcheck:!0,resize:!0,statusbar:!1,nowrap:!0,force_br_newlines:!0,forced_root_block:"div",plugins:"pinkfish insertdatetime pinkfishtextcolor nonbreaking",color_picker_callback:(e,t,i)=>{this.vt(i,t||"")},color_picker_caption:"More&hellip;",textcolor_rows:"3",textcolor_cols:"8",toolbar:"send | append | undo redo | pinkfishforecolor pinkfishbackcolor | italic underline strikethrough overline dblunderline flash reverse | clear | copy copyformatted | insertdatetime",toolbar_mode:"sliding",content_css:"css/tinymce.content.min.css",formats:{bold:{inline:"strong",exact:!0,links:!0,remove_similar:!0},italic:{inline:"em",exact:!0,links:!0,remove_similar:!0},overline:{inline:"span",classes:"overline",links:!0,remove_similar:!0},dblunderline:{inline:"span",classes:"dblunderline",links:!0,remove_similar:!0},flash:{inline:"span",classes:"flash",links:!0,remove_similar:!0},reverse:{inline:"span",classes:"reverse",links:!0,remove_similar:!0},underline:{inline:"span",classes:"underline",links:!0,remove_similar:!0},strikethrough:{inline:"span",classes:"strikeout",links:!0,remove_similar:!0}},init_instance_callback:e=>{e.shortcuts.add("ctrl+shift+c","Copy formatted",()=>ee(this.getFormattedSelection().replace(/(?:\r)/g,""))),e.on("PastePreProcess",t=>{client.getOption("enableDebug")&&client.debug("Advanced Before Editor PastePreProcess: "+t.content),this.tt($(".reverse",$(e.getDoc()).contents())),t.content=t.content.replace(/<\/p>/g,"<br>"),t.content=t.content.replace(/<\/h[1-6]>/g,"<br>"),t.content=t.content.replace(/<\/li>/g,"<br>"),t.content=t.content.replace(/ background: #000000;/g,""),t.content=t.content.replace(/background: #000000;/g,""),t.content=t.content.replace(/ background-color: #000000;/g,""),t.content=t.content.replace(/background-color: #000000;/g,""),t.content=t.content.replace(/ color: #BBBBBB;/g,""),t.content=t.content.replace(/color: #BBBBBB;/g,"");for(var i=/<pre(.*?)>((.|\s)*)<\/pre>/mgi,s;(s=i.exec(t.content))!==null;)s.index===i.lastIndex&&i.lastIndex++,t.content=t.content.substring(0,s.index)+t.content.substring(s.index,i.lastIndex).replace(/(\r\n|\r|\n)/g,"<br/>").replaceAll("  ","&nbsp;&nbsp;")+t.content.substring(i.lastIndex);client.getOption("enableDebug")&&client.debug("Advanced After Editor PastePreProcess: "+t.content)}),e.on("PastePreProcess",()=>{this.qe($(".reverse",$(e.getDoc()).contents()))}),$(".mce-content-body",tinymce.activeEditor.getDoc()).css("font-size",client.getOption("cmdfontSize")),$(".mce-content-body",tinymce.activeEditor.getDoc()).css("font-family",client.getOption("cmdfont")+", monospace"),tinymce.activeEditor.formatter?tinymce.activeEditor.formatter.register("flash",{inline:"span",classes:client.getOption("flashing")?"flash":"noflash",links:!0,remove_similar:!0}):tinymce.activeEditor.settings.formats.flash={inline:"span",classes:client.getOption("flashing")?"flash":"noflash",links:!0,remove_similar:!0},this.Pt(),this.setFormatted(this.j.value),e.on("click",t=>{this.emit("click",t)}),this.emit("editor-init"),this.yt=!0},paste_data_images:!1,paste_webkit_styles:"color background background-color text-decoration",valid_elements:"strong/b,em/i,u,span[style|class],strike/s,br",valid_styles:{"*":"color,background,background-color,text-decoration,font-weight"},color_map:this.q}))}focus(){this.isSimple?this.j.focus():this.yt&&tinymce.activeEditor&&tinymce.activeEditor.initialized&&tinymce.activeEditor.focus()}};var C=[["bufferSize",0,2,500],["commandDelay",0,2,500],["commandDelayCount",0,2,5],["commandHistorySize",0,2,20],["fontSize",0,0,"1em",0],["cmdfontSize",0,0,"1em",0],["commandEcho",0,1,!0],["flashing",0,1,!1],["autoConnect",0,1,!0],["enableAliases",-1,1,!0],["enableTriggers",-1,1,!0],["enableMacros",-1,1,!0],["showScriptErrors",0,1,!1],["commandStacking",0,1,!0],["commandStackingChar",0,0,";",1],["htmlLog",0,1,!0],["keepLastCommand",0,1,!0],["enableMCCP",0,1,!0],["enableUTF8",0,1,!0],["font",0,5,"'Courier New', Courier, monospace",0],["cmdfont",0,5,"'Courier New', Courier, monospace",0],["aliases",-1,4],["macros",-1,4],["triggers",-1,4],["mapFollow","mapper.follow",1,!0],["mapEnabled","mapper.enabled",1,!0],["MapperSplitArea","mapper.split",1,!1],["MapperFillWalls","mapper.fill",1,!1],["MapperOpen","showMapper",1,!1],["fullScreen",-1,3,!1],["enableMXP",0,1,!0],["enableMSP",0,1,!0],["parseCommands",0,3,!0],["lagMeter",0,1,!0],["enablePing",0,1,!1],["enableEcho",0,1,!0],["enableSpeedpaths",0,1,!0],["speedpathsChar",0,0,"!",1],["parseSpeedpaths",0,1,!0],["profile",-1,0,"Default",1],["parseSingleQuotes",0,1,!1],["parseDoubleQuotes",0,1,!0],["logEnabled",0,1,!1],["logPrepend",0,1,!1],["logOffline",0,1,!1],["logUniqueOnConnect",0,1,!0],["enableURLDetection",0,1,!0],["colors",0,4],["notifyMSPPlay",0,1,!1],["CommandonClick",0,1,!0],["allowEval",0,1,!0],["allowEscape",0,1,!0],["AutoCopySelectedToClipboard",0,1,!1],["enableDebug",0,1,!1],["editorPersistent",0,1,!1],["askonclose",0,1,!0],["dev",0,1,!1],["chat.captureLines",0,1,!1],["chat.captureAllLines",0,1,!1],["chat.captureReviews",0,1,!1],["chat.captureTells",0,1,!1],["chat.captureTalk",0,1,!1],["chat.gag",0,1,!1],["chat.CaptureOnlyOpen",0,1,!1],["checkForUpdates",0,1,!1],["autoCreateCharacter",0,1,!1],["askonchildren",0,1,!0],["mapper.legend",0,1,!1],["mapper.room",0,1,!1],["mapper.importType",0,2,1],["mapper.vscroll",0,2,0],["mapper.hscroll",0,2,0],["mapper.scale",0,2,100],["mapper.alwaysOnTop",0,1,!1],["mapper.alwaysOnTopClient",0,1,!0],["mapper.memory",0,1,!1],["mapper.memorySavePeriod",0,2,9e5],["mapper.active.ID",0,0,null],["mapper.active.x",0,2,0],["mapper.active.y",0,2,0],["mapper.active.z",0,2,0],["mapper.active.area",0,0,null],["mapper.active.zone",0,2,0],["mapper.persistent",0,1,!0],["profiles.split",0,2,204],["profiles.askoncancel",0,1,!0],["profiles.triggersAdvanced",0,1,!1],["profiles.aliasesAdvanced",0,1,!1],["profiles.buttonsAdvanced",0,1,!1],["profiles.macrosAdvanced",0,1,!1],["profiles.contextsAdvanced",0,1,!1],["profiles.codeEditor",0,1,!0],["profiles.watchFiles",0,1,!0],["chat.alwaysOnTop",0,1,!1],["chat.alwaysOnTopClient",0,1,!0],["chat.log",0,1,!1],["chat.persistent",0,1,!1],["chat.zoom",0,2,1],["chat.font",0,5,"'Courier New', Courier, monospace"],["chat.fontSize",0,0,"1em"],["title",0,0,"$t"],["logGagged",0,1,!1],["logTimeFormat",0,0,"YYYYMMDD-HHmmss"],["autoConnectDelay",0,2,600],["autoLogin",0,1,!0],["onDisconnect",0,2,2],["enableKeepAlive",0,1,!1],["keepAliveDelay",0,2,0],["newlineShortcut",0,2,1],["logWhat",0,2,1],["logErrors",0,1,!0],["showErrorsExtended",0,1,!1],["reportCrashes",0,1,!1],["enableCommands",0,1,!0],["commandChar",0,0,"#",1],["escapeChar",0,0,"\\",1],["enableVerbatim",0,1,!0],["verbatimChar",0,0,"`"],["soundPath",0,0,""],["logPath",0,0,""],["theme",0,0,""],["gamepads",0,1,!1],["buttons.connect",0,1,!0],["buttons.characters",0,1,!0],["buttons.preferences",0,1,!0],["buttons.log",0,1,!0],["buttons.clear",0,1,!0],["buttons.lock",0,1,!0],["buttons.map",0,1,!0],["buttons.user",0,1,!0],["buttons.mail",0,1,!1],["buttons.compose",0,1,!1],["buttons.immortal",0,1,!0],["buttons.codeEditor",0,1,!1],["find.case",0,1,!1],["find.word",0,1,!1],["find.reverse",0,1,!1],["find.regex",0,1,!1],["find.selection",0,1,!1],["find.show",0,1,!1],["display.split",0,1,!1],["display.splitHeight",0,2,-1],["display.splitLive",0,1,!0],["display.roundedOverlays",0,1,!0],["backupLoad",0,2,30],["backupSave",0,2,30],["backupAllProfiles",0,1,!0],["scrollLocked",0,1,!1],["showStatus",0,1,!ce()],["showCharacterManager",0,1,!1],["showChat",0,1,!1],["showEditor",0,1,!1],["showArmor",0,1,!1],["showStatusWeather",0,1,!0],["showStatusLimbs",0,1,!0],["showStatusHealth",0,1,!0],["showStatusExperience",0,1,!0],["showStatusPartyHealth",0,1,!0],["showStatusCombatHealth",0,1,!0],["showButtonBar",0,1,!0],["allowNegativeNumberNeeded",0,1,!1],["spellchecking",0,1,!0],["hideOnMinimize",0,1,!1],["showTrayIcon",0,1,!1],["statusExperienceNeededProgressbar",0,1,!1],["trayClick",0,2,0],["trayDblClick",0,2,0],["pasteSpecialPrefix",0,0,""],["pasteSpecialPostfix",0,0,""],["pasteSpecialReplace",0,0,""],["pasteSpecialPrefixEnabled",0,1,!0],["pasteSpecialPostfixEnabled",0,1,!0],["pasteSpecialReplaceEnabled",0,1,!0],["display.showSplitButton",0,1,!0],["chat.split",0,1,!1],["chat.splitHeight",0,2,-1],["chat.splitLive",0,1,!0],["chat.roundedOverlays",0,1,!0],["chat.showSplitButton",0,1,!0],["chat.bufferSize",0,2,500],["chat.flashing",0,1,!1],["display.hideTrailingEmptyLine",0,1,!0],["display.enableColors",0,1,!0],["display.enableBackgroundColors",0,1,!0],["enableSound",0,1,!0],["allowHalfOpen",0,1,!0],["editorClearOnSend",0,1,!0],["editorCloseOnSend",0,1,!0],["askOnCloseAll",0,1,!0],["askonloadCharacter",0,1,!0],["mapper.roomWidth",0,2,200],["mapper.roomGroups",0,2,7],["mapper.showInTaskBar",0,1,!1],["profiles.enabled",0,4,[]],["profiles.sortOrder",0,2,12],["profiles.sortDirection",0,2,1],["profiles.showInTaskBar",0,1,!1],["profiles.profileSelected",0,0,"default"],["profiles.profileExpandSelected",0,1,!0],["chat.lines",0,4,[]],["chat.showInTaskBar",0,1,!1],["chat.showTimestamp",0,2,0],["chat.timestampFormat",0,0,"[[]MM-DD HH:mm:ss.SSS[]] "],["chat.tabWidth",0,2,8],["chat.displayControlCodes",0,1,!1],["chat.emulateTerminal",0,1,!1],["chat.emulateControlCodes",0,1,!0],["chat.wordWrap",0,1,!1],["chat.wrapAt",0,2,0],["chat.indent",0,2,4],["chat.scrollLocked",0,1,!1],["chat.find.case",0,1,!1],["chat.find.word",0,1,!1],["chat.find.reverse",0,1,!1],["chat.find.regex",0,1,!1],["chat.find.selection",0,1,!1],["chat.find.show",0,1,!1],["chat.find.highlight",0,1,!1],["chat.find.location",0,4,[5,20]],["codeEditor.showInTaskBar",0,1,!1],["codeEditor.persistent",0,1,!1],["codeEditor.alwaysOnTop",0,1,!1],["codeEditor.alwaysOnTopClient",0,1,!0],["autoTakeoverLogin",0,1,!1],["fixHiddenWindows",0,1,!0],["maxReconnectDelay",0,2,3600],["enableBackgroundThrottling",0,1,!0],["enableBackgroundThrottlingClients",0,1,!1],["showInTaskBar",0,1,!0],["showLagInTitle",0,1,!1],["mspMaxRetriesOnError",0,2,0],["logTimestamp",0,2,0],["logTimestampFormat",0,0,"[[]MM-DD HH:mm:ss.SSS[]] "],["disableTriggerOnError",0,1,!0],["prependTriggeredLine",0,1,!0],["enableParameters",0,1,!0],["parametersChar",0,0,"%",1],["enableNParameters",0,1,!0],["nParametersChar",0,0,"$",1],["enableParsing",0,1,!0],["externalWho",0,1,!0],["externalHelp",0,1,!0],["watchForProfilesChanges",0,1,!1],["onProfileChange",0,2,0],["onProfileDeleted",0,2,0],["enableDoubleParameterEscaping",0,1,!1],["ignoreEvalUndefined",0,1,!0],["enableInlineComments",0,1,!0],["enableBlockComments",0,1,!0],["inlineCommentString",0,0,"//"],["blockCommentString",0,0,"/*"],["allowCommentsFromCommand",0,1,!1],["saveTriggerStateChanges",0,1,!0],["groupProfileSaves",0,1,!1],["groupProfileSaveDelay",0,2,2e4],["returnNewlineOnEmptyValue",0,1,!1],["pathDelay",0,2,0],["pathDelayCount",0,2,1],["echoSpeedpaths",0,1,!1],["alwaysShowTabs",0,1,!1],["scriptEngineType",0,2,4],["initializeScriptEngineOnLoad",0,1,!1],["find.highlight",0,1,!1],["find.location",0,4,[5,20]],["display.showInvalidMXPTags",0,1,!1],["display.showTimestamp",0,2,0],["display.timestampFormat",0,0,"[[]MM-DD HH:mm:ss.SSS[]] "],["display.displayControlCodes",0,1,!1],["display.emulateTerminal",0,1,!1],["display.emulateControlCodes",0,1,!0],["display.wordWrap",0,1,!1],["display.tabWidth",0,2,8],["display.wrapAt",0,2,0],["display.indent",0,2,4],["statusWidth",0,2,-1],["showEditorInTaskBar",0,1,!0],["trayMenu",0,2,0],["lockLayout",0,1,!1],["loadLayout",0,0,""],["useSingleInstance",0,1,!0],["onSecondInstance",0,2,0],["characterManagerDblClick",0,2,0],["enableTabCompletion",1,!0],["ignoreCaseTabCompletion",0,1,!1],["tabCompletionBufferLimit",0,2,100],["enableNotifications",0,1,!0],["echo",0,2,0],["commandAutoSize",0,1,!1],["commandWordWrap",0,1,!1],["commandScrollbars",0,1,!1],["tabCompletionList",0,0,""],["tabCompletionLookupType",0,2,1],["tabCompletionReplaceCasing",0,2,0],["characterManagerAddButtonAction",0,2,0],["enableCrashReporting",0,1,!1],["characterManagerPanelWidth",0,2,0],["ignoreInputLeadingWhitespace",0,1,!1],["profiles.find.case",0,1,!1],["profiles.find.word",0,1,!1],["profiles.find.reverse",0,1,!1],["profiles.find.regex",0,1,!1],["profiles.find.selection",0,1,!1],["profiles.find.show",0,1,!1],["profiles.find.value",0,1,!1],["skipMore",0,1,!1],["skipMoreDelay",0,2,5e3],["commandMinLines",0,2,1],["backupReplaceCharacters",0,1,!0],["simpleAlarms",0,1,!1],["simpleEditor",0,1,!1],["selectLastCommand",0,1,!0],["statusMode",0,2,ce()?1:0],["logger.split",0,2,204],["showChatWindow",0,2,0],["chat.enableColors",0,2,!0],["chat.enableBackgroundColors",0,2,!0]];var ie=class o{constructor(){for(var r=0,e=C.length;r<e;r++)C[r][2]!==4&&(this[C[r][0]]=o.getValue(C[r][0]),C[r][1]&&C[r][1].length&&(this[C[r][1]]=o.getValue(C[r][1])));this.colors=o.getValue("colors")}static{this.settingError=!1}static getValue(r,e){var t;if(o.settingError)return e===null||typeof e>"u"?o.defaultValue(r):e;try{if(t=$.jStorage.get(r),typeof t>"u"||t===null)return e===null||typeof e>"u"?o.defaultValue(r):e;switch(r){case"showChat":case"showStatus":case"showButtons":case"enableCommands":case"enableVerbatim":case"allowEscape":case"autoConnect":case"mapFollow":case"mapEnabled":case"flashing":case"commandEcho":case"enableAliases":case"enableTriggers":case"enableButtons":case"enableMacros":case"commandStacking":case"htmlLog":case"keepLastCommand":case"fullScreen":case"enableMXP":case"enableURLDetection":case"enableMCCP":case"enableUTF8":case"parseCommands":case"lagMeter":case"showScriptErrors":case"enablePing":case"enableEcho":case"enableSpeedpaths":case"parseSpeedpaths":case"mapper.enabled":case"MapperSplitArea":case"mapper.split":case"MapperFillWalls":case"mapper.fill":case"mapper.follow":case"MapperOpen":case"showMapper":case"parseSingleQuotes":case"parseDoubleQuotes":case"logEnabled":case"logOffline":case"logPrepend":case"logUniqueOnConnect":case"toolsPinned":case"notifyMSPPlay":case"CommandonClick":case"allowEval":case"disableTriggerOnError":case"prependTriggeredLine":case"chat.captureLines":case"chat.captureAllLines":case"chat.captureReviews":case"chat.captureTells":case"chat.captureTalk":case"chat.gag":case"chat.CaptureOnlyOpen":case"simpleAlarms":case"simpleEditor":case"selectLastCommand":case"showLagInTitle":return t==1;case"colors":case"chat.lines":return t===null||typeof t>"u"||t.length===0?[]:JSON.parse(t)}return t}catch(i){return o.settingError||(alert(`Unable to save to localStorage so reverting to default,

Error description: `+i.message),o.settingError=!0),e===null||typeof e>"u"?o.defaultValue(e):e}}static setValue(r,e){switch(r){case"colors":case"chat.lines":e===null||typeof e>"u"||e.length===0?$.jStorage.deleteKey(r):$.jStorage.set(r,JSON.stringify(e));break;default:typeof e=="boolean"?e?$.jStorage.set(r,1):$.jStorage.set(r,0):$.jStorage.set(r,e);break}}static clearValue(r){$.jStorage.deleteKey(r)}static defaultValue(r){switch(r){case"bufferSize":return 500;case"commandDelay":return 500;case"commandDelayCount":return 5;case"commandHistorySize":return 20;case"fontSize":return"1em";case"cmdfontSize":return"1em";case"commandEcho":return!0;case"flashing":return!1;case"autoConnect":return!0;case"enableAliases":return!0;case"enableTriggers":return!0;case"enableMacros":return!0;case"showScriptErrors":return!1;case"commandStacking":return!0;case"commandStackingChar":return";";case"htmlLog":return!0;case"keepLastCommand":return!0;case"enableMCCP":return!0;case"enableUTF8":return!0;case"font":return"'Courier New', Courier, monospace";case"cmdfont":return"'Courier New', Courier, monospace";case"mapFollow":case"mapper.follow":return!0;case"mapEnabled":case"mapper.enabled":return!0;case"MapperSplitArea":case"mapper.split":return!1;case"MapperFillWalls":case"mapper.fill":return!1;case"MapperOpen":case"showMapper":return!1;case"fullScreen":return!1;case"enableMXP":return!0;case"enableMSP":return!0;case"parseCommands":return!0;case"lagMeter":return!0;case"enablePing":return!1;case"enableEcho":return!0;case"enableSpeedpaths":return!0;case"speedpathsChar":return"!";case"parseSpeedpaths":return!0;case"profile":return"Default";case"parseSingleQuotes":return!1;case"parseDoubleQuotes":return!0;case"logEnabled":return!1;case"logPrepend":return!1;case"logOffline":return!1;case"logUniqueOnConnect":return!0;case"enableURLDetection":return!0;case"notifyMSPPlay":return!1;case"CommandonClick":return!0;case"allowEval":return!0;case"allowEscape":return!0;case"AutoCopySelectedToClipboard":return!1;case"enableDebug":return!1;case"editorPersistent":return!1;case"askonclose":return!0;case"dev":return!1;case"chat.captureLines":return!1;case"chat.captureAllLines":return!1;case"chat.captureReviews":return!1;case"chat.captureTells":return!1;case"chat.captureTalk":return!1;case"chat.gag":return!1;case"chat.CaptureOnlyOpen":return!1;case"checkForUpdates":return!1;case"autoCreateCharacter":return!1;case"askonchildren":return!0;case"mapper.legend":return!1;case"mapper.room":return!1;case"mapper.importType":return 1;case"mapper.vscroll":return 0;case"mapper.hscroll":return 0;case"mapper.scale":return 100;case"mapper.active":return{ID:null,x:0,y:0,z:0,area:null,zone:0};case"mapper.active.ID":return null;case"mapper.active.x":return 0;case"mapper.active.y":return 0;case"mapper.active.z":return 0;case"mapper.active.area":return null;case"mapper.active.zone":return 0;case"profiles.split":return 204;case"logger.split":return 204;case"profiles.askoncancel":return!0;case"profiles.triggersAdvanced":return!1;case"profiles.aliasesAdvanced":return!1;case"profiles.buttonsAdvanced":return!1;case"profiles.macrosAdvanced":return!1;case"profiles.contextsAdvanced":return!1;case"profiles.codeEditor":return!0;case"chat.log":return!1;case"chat.zoom":return 1;case"chat.font":return"'Courier New', Courier, monospace";case"chat.fontSize":return"1em";case"title":return"$t";case"logGagged":return!1;case"logTimeFormat":return"YYYYMMDD-HHmmss";case"autoConnectDelay":return 600;case"autoLogin":return!0;case"onDisconnect":return 2;case"enableKeepAlive":return!1;case"keepAliveDelay":return 0;case"newlineShortcut":return 1;case"logWhat":return 1;case"logErrors":return!0;case"showErrorsExtended":return!1;case"reportCrashes":return!1;case"enableCommands":return!0;case"commandChar":return"#";case"escapeChar":return"\\";case"enableVerbatim":return!0;case"verbatimChar":return"`";case"soundPath":return"";case"logPath":return"";case"theme":return"";case"gamepads":return!1;case"backupLoad":return 30;case"backupSave":return 30;case"backupAllProfiles":return!0;case"backupReplaceCharacters":return!0;case"scrollLocked":return!1;case"showStatus":return!ce();case"showChat":return!1;case"showEditor":return!1;case"showArmor":return!1;case"showStatusWeather":return!0;case"showStatusLimbs":return!0;case"showStatusHealth":return!0;case"showStatusExperience":return!0;case"showStatusPartyHealth":return!0;case"showStatusCombatHealth":return!0;case"allowNegativeNumberNeeded":return!1;case"spellchecking":return!0;case"statusExperienceNeededProgressbar":return!1;case"pasteSpecialPrefix":return"";case"pasteSpecialPostfix":return"";case"pasteSpecialReplace":return"";case"pasteSpecialPrefixEnabled":return!0;case"pasteSpecialPostfixEnabled":return!0;case"pasteSpecialReplaceEnabled":return!0;case"display.showSplitButton":return!0;case"chat.bufferSize":return 500;case"chat.flashing":return!1;case"display.hideTrailingEmptyLine":return!0;case"display.enableColors":return!0;case"display.enableBackgroundColors":return!0;case"enableSound":return!0;case"editorClearOnSend":return!0;case"editorCloseOnSend":return!0;case"askOnCloseAll":return!0;case"askonloadCharacter":return!0;case"mapper.roomWidth":return 200;case"mapper.roomGroups":return 7;case"mapper.showInTaskBar":return!1;case"profiles.enabled":return[];case"profiles.sortOrder":return 12;case"profiles.sortDirection":return 1;case"profiles.profileSelected":return"default";case"profiles.profileExpandSelected":return!0;case"chat.lines":return[];case"chat.showTimestamp":return 0;case"chat.timestampFormat":return"[[]MM-DD HH:mm:ss.SSS[]] ";case"chat.tabWidth":return 8;case"chat.displayControlCodes":return!1;case"chat.emulateTerminal":return!1;case"chat.emulateControlCodes":return!0;case"chat.wordWrap":return!1;case"chat.wrapAt":return 0;case"chat.indent":return 4;case"chat.enableColors":return!0;case"chat.enableBackgroundColors":return!0;case"autoTakeoverLogin":return!1;case"maxReconnectDelay":return 3600;case"showLagInTitle":return!1;case"mspMaxRetriesOnError":return 0;case"logTimestamp":return 0;case"logTimestampFormat":return"[[]MM-DD HH:mm:ss.SSS[]] ";case"disableTriggerOnError":return!0;case"prependTriggeredLine":return!0;case"enableParameters":return!0;case"parametersChar":return"%";case"enableNParameters":return!0;case"nParametersChar":return"$";case"enableParsing":return!0;case"onProfileChange":return 0;case"onProfileDeleted":return 0;case"enableDoubleParameterEscaping":return!1;case"ignoreEvalUndefined":return!0;case"enableInlineComments":return!0;case"enableBlockComments":return!0;case"inlineCommentString":return"//";case"blockCommentString":return"/*";case"allowCommentsFromCommand":return!1;case"saveTriggerStateChanges":return!0;case"groupProfileSaves":return!1;case"groupProfileSaveDelay":return 2e4;case"returnNewlineOnEmptyValue":return!1;case"pathDelay":return 0;case"pathDelayCount":return 1;case"echoSpeedpaths":return!1;case"scriptEngineType":return 4;case"initializeScriptEngineOnLoad":return!1;case"display.showInvalidMXPTags":return!1;case"display.showTimestamp":return 0;case"display.timestampFormat":return"[[]MM-DD HH:mm:ss.SSS[]] ";case"display.displayControlCodes":return!1;case"display.emulateTerminal":return!1;case"display.emulateControlCodes":return!0;case"display.wordWrap":return!1;case"display.tabWidth":return 8;case"display.wrapAt":return 0;case"display.indent":return 4;case"statusWidth":return-1;case"extensions":return{};case"warnAdvancedSettings":return!0;case"showAdvancedSettings":return!1;case"enableTabCompletion":return!0;case"ignoreCaseTabCompletion":return!1;case"tabCompletionBufferLimit":return 100;case"enableNotifications":return!0;case"echo":return 0;case"commandAutoSize":return!1;case"commandWordWrap":return!1;case"commandMinLines":return 1;case"tabCompletionLookupType":return 1;case"tabCompletionList":return"";case"tabCompletionReplaceCasing":return 0;case"ignoreInputLeadingWhitespace":return!1;case"skipMore":return!1;case"skipMoreDelay":return 5e3;case"simpleAlarms":return!1;case"simpleEditor":return!1;case"selectLastCommand":return!0;case"statusMode":ce();case"showChatWindow":return 0}return null}save(){for(var r in this)this.hasOwnProperty(r)&&o.setValue(r,this[r])}reset(){for(var r=0,e=C.length;r<e;r++)C[r][2]!==4&&(this[C[r][0]]=o.defaultValue(C[r][0]));this.colors=[]}};function P(o,r){let e="",t=o.length-1;r=Object.assign({sep:"-",formatter:i=>B(i.match(/([A-Z]|^[a-z])[a-z]+/g).join(" ")),icon:'<i class="bi bi-question-circle"></i>'},r||{}),o.length===1?e+=`<li class="breadcrumb-icon">${r.icon}</li>`:e+=`<li class="breadcrumb-icon"><a href="#${o.slice(0,1).join("-")}">${r.icon}</a></li>`;for(let i=0,s=o.length;i<s;i++){let n=r.formatter(o[i],i,t);i===t?e+='<li class="breadcrumb-item active">'+n+"</li>":e+='<li class="breadcrumb-item" aria-current="page"><a href="#'+o.slice(0,i+1).join(r.sep)+'">'+n+"</a></li>"}return r.small?`<ol class="breadcrumb${this.le?" breadcrumb-sm":""}" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;flex-wrap: nowrap;">${e}</ol>`:'<ol class="float-start breadcrumb">'+e+"</ol>"}var Fe='<div class="contents list-group list-group-flush" style="top:0;position:absolute;left:0;bottom:49px;right:0"><a href="#settings-general" class="list-group-item list-group-item-action"><i class="fas fa-cogs"></i> General</a> <a href="#settings-display" class="list-group-item list-group-item-action"><i class="fas fa-display"></i> Display</a> <a href="#settings-colors" class="list-group-item list-group-item-action"><i class="fas fa-palette"></i> Colors</a> <a href="#settings-commandLine" class="list-group-item list-group-item-action"><i class="fas fa-terminal"></i> Command line</a> <a href="#settings-tabCompletion" class="list-group-item list-group-item-action"><i class="fa-solid fa-arrow-right-to-bracket"></i> Tab completion</a> <a href="#settings-telnet" class="list-group-item list-group-item-action"><i class="fas fa-network-wired"></i> Telnet</a> <a href="#settings-scripting" class="list-group-item list-group-item-action"><i class="fas fa-code"></i> Scripting</a> <a href="#settings-specialCharacters" class="list-group-item list-group-item-action"><i class="fa-regular fa-file-code"></i> Special characters</a> <a href="#settings-advanced" class="list-group-item list-group-item-action"><i class="fa-solid fa-sliders"></i> Advanced</a></div>';var me=class o extends R{constructor(){super({title:'<i class="fas fa-cogs"></i> Settings',keepCentered:!0,resizable:!1,moveable:!1,center:!0,maximizable:!1}),this.body.style.padding="10px",this.be();let r="";r+=`<button id="${this.id}-cancel" type="button" class="btn-sm float-end btn btn-light" title="Cancel dialog"><i class="bi bi-x-lg"></i><span class="icon-only"> Cancel</span></button>`,r+=`<button id="${this.id}-save" type="button" class="btn-sm float-end btn btn-primary" title="Confirm dialog"><i class="bi bi-save"></i><span class="icon-only"> Save</span></button>`,r+=`<button id="${this.id}-reset" type="button" class="btn-sm float-start btn btn-warning" title="Reset settings"><i class="bi bi-arrow-clockwise"></i><span class="icon-only"> Reset</span></button>`,r+=`<button id="${this.id}-reset-all" type="button" class="btn-sm float-start btn btn-warning" title="Reset All settings"><i class="bi bi-arrow-repeat"></i><span class="icon-only"> Reset All</span></button>`,r+='<div class="vr float-start" style="margin-right: 4px;height: 29px;"></div>',r+=`<button id="${this.id}-export" type="button" class="btn-sm float-start btn btn-light" title="Export settings"><i class="bi bi-box-arrow-up"></i><span class="icon-only"> Export</span></button>`,r+=`<button id="${this.id}-import" type="button" class="btn-sm float-start btn btn-light" title="Import settings"><i class="bi bi-box-arrow-in-down"></i><span class="icon-only"> Import</span></button>`,this.footer.innerHTML=r,this.footer.querySelector(`#${this.id}-cancel`).addEventListener("click",()=>{S(this.o),this.close()}),this.footer.querySelector(`#${this.id}-export`).addEventListener("click",()=>{var e=Z(this.settings);e.version=2,fileSaveAs.show(JSON.stringify(e),"oiMUD.settings.txt","text/plain")}),this.footer.querySelector(`#${this.id}-import`).addEventListener("click",()=>{q("Import settings").then(e=>{z(e[0]).then(t=>{try{var i=JSON.parse(t),s,n;if(i.version===1){for(s=0,n=C.length;s<n;s++)this.settings[C[s][0]]=i[C[s][0]];this.emit("import-rooms",i.rooms)}else if(i.version===2&&!i.profiles)for(s=0,n=C.length;s<n;s++)this.settings[C[s][0]]=i[C[s][0]];else setTimeout(function(){alert_box("Invalid file","Unable to import file, not a valid settings file",4)},50);this.xt()}catch(a){setTimeout(function(){alert_box("Error importing","Error importing file.",3)},50),client.error(a)}}).catch(client.error)}).catch(()=>{})}),this.footer.querySelector(`#${this.id}-reset`).addEventListener("click",()=>{if(this.o==="settings-colors")confirm_box("Reset colors","Reset colors?").then(e=>{if(e.button===4){var t,i=this.settings.colors=[];for(t=0;t<16;t++)this.setColor("color"+t,i[t]||this.getDefaultColor(t));for(t=256;t<280;t++)this.setColor("color"+t,i[t]||this.getDefaultColor(t));this.body.querySelector("#colorScheme").value=0}});else if(this.o&&this.o!=="settings"&&this.o.length){let e=this.o.split("-"),t=B(e[e.length-1].match(/([A-Z]|^[a-z])[a-z]+/g).join(" "));confirm_box(`Reset ${t} settings`,`Reset ${t} settings?`).then(i=>{if(i.button===4){let s=this.body.querySelectorAll("input,select,textarea");for(let n=0,a=s.length;n<a;n++){let c=s[n].name||s[n].id;this.settings[c]=ie.defaultValue(c),s[n].type==="checkbox"||s[n].type==="radio"?s[n].checked=this.settings[c]:s[n].value=this.settings[c]}}})}else confirm_box("Reset all settings","Reset all settings?").then(e=>{e.button===4&&this.settings.reset()})}),this.footer.querySelector(`#${this.id}-reset-all`).addEventListener("click",()=>{confirm_box("Reset all settings","Reset all settings?").then(e=>{e.button===4&&this.settings.reset()})}),this.footer.querySelector(`#${this.id}-save`).addEventListener("click",()=>{S(this.o);for(var e in this.settings)this.settings.hasOwnProperty(e)&&ie.setValue(e,this.settings[e]);client.clearCache(),client.loadOptions(),this.close()}),this.settings=new ie,this.on("closed",()=>{S(this.o)}),this.on("canceled",()=>{S(this.o)})}setBody(r,e){super.setBody(this.dialog.dataset.path==="settings"?Fe:r,e),this.o=this.dialog.dataset.path;let t=this.o.split("-");if(this.title=P(t,{icon:'<i class="float-start fas fa-cogs" style="padding: 2px;margin-right: 2px;"></i>'}),this.n){let i=this.n.querySelectorAll("a.active");i.forEach(s=>s.classList.remove("active")),i=this.n.querySelector(`a[href="#${this.o}"]`),i&&i.classList.add("active")}this.o==="settings"?(this.n&&(this.n.style.display="none"),this.body.style.left="",this.footer.querySelector(`#${this.id}-reset`)&&(this.footer.querySelector(`#${this.id}-reset`).style.display="none"),o.addPlugins(this.body.querySelector("div.contents"))):(this.n&&(this.n.style.display=""),this.footer.querySelector(`#${this.id}-reset`)&&(this.footer.querySelector(`#${this.id}-reset`).style.display=""),this.body.style.left="200px"),this.body.scrollTop=0,this.xt()}be(){this.dialog.insertAdjacentHTML("beforeend",Fe.replace(' style="top:0;position:absolute;left:0;bottom:49px;right:0"',"")),this.n=this.dialog.querySelector(".contents"),this.n.classList.add("settings-menu"),o.addPlugins(this.n),this.o==="settings"&&(this.n.style.display="none"),this.body.style.left="200px"}xt(){let r=this.body.querySelectorAll("input,select,textarea"),e;if(this.o==="settings-colors"){var t,i=this.settings.colors||[];for(t=0;t<16;t++)this.setColor("color"+t,i[t]||this.getDefaultColor(t));for(t=256;t<280;t++)this.setColor("color"+t,i[t]||this.getDefaultColor(t));for(let s=0,n=r.length;s<n;s++)r[s].addEventListener("change",a=>{let c=a.currentTarget||a.target,h=c.value,l=parseInt(c.id.substring(5),10);var d=this.settings.colors||[];!d[l]||d[l].length===0?this.getDefaultColor(l)!==h&&(d[l]=h):this.getDefaultColor(l)!==h?delete d[l]:d[l]=h,this.settings.colors=d}),r[s].addEventListener("input",a=>{let c=a.currentTarget||a.target,h=c.value,l=parseInt(c.id.substring(5),10);!this.settings.colors[l]||this.settings.colors[l].length===0?this.getDefaultColor(l)!==h&&(this.settings.colors[l]=h):this.getDefaultColor(l)!==h?delete this.settings.colors[l]:this.settings.colors[l]=h})}else for(let s=0,n=r.length;s<n;s++)if(r[s].type==="radio")r[s].checked=""+this.settings[r[s].name]===r[s].value,r[s].addEventListener("change",a=>{let c=a.currentTarget||a.target;c.checked&&(this.settings[c.name]=this.convertType(c.value,typeof this.settings[c.name]))});else if(r[s].type==="checkbox"){let a;if(r[s].dataset.enum==="true"){a=r[s].name||r[s].id.substring(0,r[s].id.lastIndexOf("-"));let c=+r[s].id.substring(r[s].id.lastIndexOf("-")+1);r[s].checked=(this.settings[a]&c)===c}else a=r[s].name||r[s].id,r[s].checked=this.settings[a];r[s].addEventListener("change",c=>{let h=c.currentTarget||c.target,l;if(h.dataset.enum==="true"){l=h.name||h.id.substring(0,h.id.lastIndexOf("-"));let f=this.body.querySelectorAll(`[name=${l}]`),p=0;for(let x=0,K=f.length;x<K;x++)f[x].checked&&(p|=+f[x].value);this.settings[l]=p}else l=h.name||h.id,this.settings[l]=h.checked||!1;this.body.querySelectorAll(`[data-require="${l}"]`).forEach(f=>{f.disabled=!this.settings[l]})}),e=this.body.querySelectorAll(`[data-require="${a}"]`),e.forEach(c=>{c.disabled=!this.settings[a]})}else r[s].dataset.join&&r[s].dataset.join.length?r[s].value=(this.settings[r[s].id]||[]).map(a=>a.trim()).join(r[s].dataset.join):r[s].value=this.settings[r[s].id],r[s].addEventListener("change",a=>{let c=a.currentTarget||a.target;r[s].dataset.join&&r[s].dataset.join.length?this.setValue(c.name||c.id,c.value.split(r[s].dataset.join).map(h=>h.trim())):this.setValue(c.name||c.id,c.value)}),r[s].addEventListener("input",a=>{let c=a.currentTarget||a.target;r[s].dataset.join&&r[s].dataset.join.length?this.setValue(c.name||c.id,c.value.split(r[s].dataset.join).map(h=>h.trim())):this.setValue(c.name||c.id,c.value)})}setColor(r,e){!e||typeof e>"u"||e.length===0?this.body.querySelector("#"+r).value="":this.body.querySelector("#"+r).value=this.colorHex(e)}colorHex(r){return r?(r=new k(r),r.ok?r.toHex():""):!1}getDefaultColor(r){return r===0?"rgb(0,0,0)":r===1?"rgb(128, 0, 0)":r===2?"rgb(0, 128, 0)":r===3?"rgb(128, 128, 0)":r===4?"rgb(0, 0, 128)":r===5?"rgb(128, 0, 128)":r===6?"rgb(0, 128, 128)":r===7?"rgb(192, 192, 192)":r===8?"rgb(128, 128, 128)":r===9?"rgb(255, 0, 0)":r===10?"rgb(0, 255, 0)":r===11?"rgb(255, 255, 0)":r===12?"rgb(0, 0, 255)":r===13?"rgb(255, 0, 255)":r===14?"rgb(0, 255, 255)":r===15?"rgb(255, 255, 255)":r===256?"rgb(0, 0, 0)":r===257?"rgb(118, 0, 0)":r===258?"rgb(0, 108, 0)":r===259?"rgb(145, 136, 0)":r===260?"rgb(0, 0, 108)":r===261?"rgb(108, 0, 108)":r===262?"rgb(0, 108, 108)":r===263?"rgb(160, 160, 160)":r===264?"rgb(0, 0, 0)":r===265?"rgb(128, 0, 0)":r===266?"rgb(0, 128, 0)":r===267?"rgb(128, 128, 0)":r===268?"rgb(0, 0, 128)":r===269?"rgb(128, 0, 128)":r===270?"rgb(0, 128, 128)":r===271?"rgb(192, 192, 192)":r===272?"rgb(0,0,0)":r===273?"rgb(0, 255, 255)":r===274?"rgb(0,0,0)":r===275?"rgb(255, 255, 0)":r===276?"rgb(0, 0, 0)":r===277?"rgb(192, 192, 192)":r===278?"rgb(128, 0, 0)":r===279?"rgb(192, 192, 192)":r===280?"rgb(255,255,255)":""}setValue(r,e){e=="false"&&(e=!1),e=="true"&&(e=!0),e=="null"&&(e=null),e=="undefined"&&(e=void 0),typeof e=="string"&&parseFloat(e).toString()==e&&(e=parseFloat(e)),this.settings[r]=this.convertType(e,typeof this.settings[r])}convertType(r,e){if(typeof r===e)return r;switch(e){case"number":return typeof r=="string"&&parseFloat(r).toString()==r?parseFloat(r):Number(r);case"boolean":return!!r;case"string":return""+r}return r}static addPlugins(r){let e=client.plugins.length,t,i;for(let s=0;s<e;s++)if(client.plugins[s].settings&&client.plugins[s].settings.length)for(i=client.plugins[s].settings.length,t=0;t<i;t++){let n=client.plugins[s].settings[t];if(typeof n.action!="string")continue;let a=`<a href="#${n.action}" class="list-group-item list-group-item-action">${n.icon||""}${n.name||""}</a>`;if("position"in n){if(typeof n.position=="string"){if(r.querySelector(n.position)){r.querySelector(n.position).insertAdjacentHTML("afterend",a);continue}}else if(n.position>=0&&n.position<r.children.length){r.children[n.position].insertAdjacentHTML("afterend",a);continue}}r.insertAdjacentHTML("beforeend",a)}}};var se=class extends M{constructor(e){super();this.m=200;this.w=200;this.f=4;this.ee=204;this.st=!1;this.de=0;this.live=!0;e&&e.id&&(this.ze=e.id),e&&(this.d=e.panel1,this.a=e.panel2),e&&e.container?this.parent=e.container.container?e.container.container:e.container:e&&e.parent?this.parent=e.parent:this.parent=document.body,e?("anchor"in e?this.te=e.anchor:this.te=2,this.orientation=e.orientation||0):(this.te=2,this.orientation=0)}hide(){this._.style.display="none"}show(){this._.style.display=""}get id(){return this.ze||this.parent.id}set id(e){e!==this.ze&&(this.ze=e,this._.id=this.id+"-splitter",this.d.id=this.id+"-splitter-panel1",this.a.id=this.id+"-splitter-panel2",this.v.id=this.id+"-splitter-drag-bar",this.p&&(this.p.id=this.id+"-ghost-bar"))}set parent(e){typeof e=="string"?e.startsWith("#")?this.Ee=document.getElementById(e.substr(1)):this.Ee=document.getElementById(e):e instanceof $?this.Ee=e[0]:e instanceof HTMLElement&&(this.Ee=e),this.Ee||(this.Ee=document.body),this.zt()}get parent(){return this.Ee}get panel1(){return this.d}get panel2(){return this.a}get anchor(){return this.te}set anchor(e){this.te!==e&&(this.te=2,this.ye())}set SplitterDistance(e){this.ee!==e&&(this.ee=e,this.ye(),this.emit("splitter-moved",e))}get SplitterDistance(){return this.ee}set Panel1MinSize(e){this.m!==e&&(this.m=e,this.he===0?this.d.clientWidth<e&&(this.ee=this.parent.clientWidth-this.m):this.d.clientHeight<e&&(this.ee=this.parent.clientHeight-this.m),this.ye())}get Panel1MinSize(){return this.m}set Panel2MinSize(e){this.w!==e&&(this.w=e,this.he===0?this.a.clientWidth<e&&(this.ee=e):this.a.clientHeight<e&&(this.ee=e),this.ye())}get Panel2MinSize(){return this.w}get orientation(){return this.he}set orientation(e){e!==this.he&&(this.he=e,this.ye())}get panel1Collapsed(){return this.de===1}set panel1Collapsed(e){if(e){if(this.de===1)return;this.de=1,this.panel1.dataset.collapsed="true",this.panel2.dataset.collapsed="false",this.emit("collapsed",1),this.ye()}else this.de===1&&(this.de=0,delete this.panel1.dataset.collapsed,delete this.panel2.dataset.collapsed,this.emit("collapsed",0),this.ye())}get panel2Collapsed(){return this.de===2}set panel2Collapsed(e){if(e){if(this.de===2)return;this.de=2,this.panel1.dataset.collapsed="false",this.panel2.dataset.collapsed="true",this.emit("collapsed",2),this.ye()}else this.de===2&&(this.de=0,delete this.panel1.dataset.collapsed,delete this.panel2.dataset.collapsed,this.emit("collapsed",0),this.ye())}ye(){this.he===0?(this.d.style.left="0",this.d.style.top="0",this.d.style.right="0",this.a.style.left="0",this.a.style.top="",this.a.style.right="0",this.a.style.bottom="0",this.v.style.left="0",this.v.style.right="0",this.te===1?(this.v.style.bottom="",this.v.style.top=this.ee+"px"):(this.v.style.top="",this.v.style.bottom=this.ee-this.f+"px"),this.v.style.height=this.f+"px",this.v.style.cursor="ns-resize",this.de===1?(this.d.style.display="none",this.a.style.display="",this.a.style.top="0",this.a.style.height="",this.v.style.display="none"):this.de===2?(this.d.style.display="",this.d.style.bottom="0",this.d.style.height="",this.a.style.display="none",this.v.style.display="none"):this.te===1?(this.d.style.display="",this.d.style.height=this.ee-this.f+"px",this.a.style.display="",this.a.style.top=this.ee-this.f+"px",this.a.style.height="",this.v.style.display=""):(this.d.style.display="",this.d.style.bottom=this.ee+"px",this.a.style.display="",this.a.style.height=this.ee-this.f+"px",this.v.style.display=""),this._.classList.remove("vertical"),this._.classList.add("horizontal")):(this.d.style.left="0",this.d.style.top="0",this.d.style.bottom="0",this.d.classList.remove("horizontal"),this.d.classList.add("vertical"),this.a.style.left="",this.a.style.top="0",this.a.style.right="0",this.a.style.bottom="0",this.te===1?(this.v.style.right="",this.v.style.left=this.ee-this.f+"px"):(this.v.style.left="",this.v.style.right=this.ee-this.f+"px"),this.v.style.top="0",this.v.style.bottom="0",this.v.style.width=this.f+"px",this.v.style.cursor="ew-resize",this.de===1?(this.d.style.display="none",this.a.style.display="",this.a.style.left="0",this.a.style.width="",this.v.style.display="none"):this.de===2?(this.d.style.display="",this.d.style.right="0",this.d.style.width="",this.a.style.display="none",this.v.style.display="none"):this.te===1?(this.d.style.display="",this.d.style.width=this.ee-this.f+"px",this.a.style.display="",this.a.style.left=this.ee-this.f+"px",this.a.style.width="",this.v.style.display=""):(this.d.style.display="",this.d.style.right=this.ee+"px",this.a.style.display="",this.a.style.width=this.ee-this.f+"px",this.v.style.display=""),this._.classList.remove("horizontal"),this._.classList.add("vertical"))}zt(){this._=document.createElement("div"),this._.id=this.id+"-splitter",this._.classList.add("splitter"),this.d||(this.d=document.createElement("div"),this.d.id=this.id+"-splitter-panel1"),this.d.classList.add("splitter-panel","splitter-panel-1"),this._.appendChild(this.d),this.a||(this.a=document.createElement("div"),this.a.id=this.id+"-splitter-panel2"),this.a.classList.add("splitter-panel","splitter-panel-2"),this._.appendChild(this.a),this.v=document.createElement("div"),this.v.id=this.id+"-splitter-drag-bar",this.v.classList.add("spitter-drag-bar"),this._.appendChild(this.v),this.v.tabIndex=1,this.v.addEventListener("mousedown",e=>{this.v.focus(),e.preventDefault(),this.d.style.pointerEvents="none",this.a.style.pointerEvents="none",this.st=!0,this.p=document.createElement("div"),this.p.id=this.id+"-ghost-bar",this.p.classList.add("splitter-ghost-bar");let t=this.a.getBoundingClientRect();this.te===1&&(t=this.d.getBoundingClientRect()),this.he===0?(this.p.style.left="0",this.te===1?this.p.style.top=t.bottom-this.me.top+"px":this.p.style.top=t.top-this.me.top-this.f+"px",this.p.style.right="0",this.p.style.bottom="",this.p.style.width="",this.p.style.height=this.f+"px",this.p.style.cursor="ns-resize"):(this.te===1?this.p.style.left=t.right-this.me.left+"px":this.p.style.left=t.left-this.me.left-this.f+"px",this.p.style.top="0",this.p.style.bottom="0",this.p.style.right="",this.p.style.height="",this.p.style.width=this.f+"px",this.p.style.cursor="ew-resize"),this.p.move=i=>{let s;this.he===0&&this.te===1?(s=i.pageY-this.me.top,s<this.m+this.f?this.p.style.top=this.m+"px":s>this.parent.clientHeight-this.w-this.f?this.p.style.top=this.parent.clientHeight-this.w-this.f+"px":this.p.style.top=s-2+"px",this.live&&(s<this.m+this.f?this.SplitterDistance=this.m+this.f:s>this.parent.clientHeight-this.w-this.f?this.SplitterDistance=this.parent.clientHeight-this.w:this.SplitterDistance=s-2+this.f)):this.he===0?(s=i.pageY-this.me.top,s<this.m?this.p.style.top=this.m+"px":s>this.parent.clientHeight-this.w?this.p.style.top=this.parent.clientHeight-this.w+"px":this.p.style.top=s-2+"px",this.live&&(s<this.m?this.SplitterDistance=this.parent.clientHeight-this.m:s>this.parent.clientHeight-this.w?this.SplitterDistance=this.w:this.SplitterDistance=this.parent.clientHeight-s+2)):this.he===1&&this.te===1?(s=i.pageX-this.me.left,s<this.m+this.f?this.p.style.left=this.m+"px":s>=this.parent.clientWidth-this.w-this.f?this.p.style.left=this.parent.clientWidth-this.w-this.f+"px":this.p.style.left=s-2+"px",this.live&&(s<this.m+this.f?this.SplitterDistance=this.m+this.f:s>=this.parent.clientWidth-this.w-this.f?this.SplitterDistance=this.parent.clientWidth-this.w:this.SplitterDistance=s-2+this.f)):(s=i.pageX-this.me.left,s<this.m?this.p.style.left=this.m+"px":s>this.parent.clientWidth-this.w?this.p.style.left=this.parent.clientWidth-this.w+"px":this.p.style.left=s-2+"px",this.live&&(s<this.m?this.SplitterDistance=this.parent.clientWidth-this.m:s>this.parent.clientWidth-this.w?this.SplitterDistance=this.w:this.SplitterDistance=this.parent.clientWidth-s+2)),this.emit("splitter-moving",s)},this._.appendChild(this.p),document.addEventListener("mousemove",this.p.move)}),this.v.addEventListener("dblclick",e=>{this.emit("dblclick",e)}),window.addEventListener("resize",()=>{this.resize()}),document.addEventListener("mouseup",e=>{if(!this.st)return;e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0;let t;this.he===0?(t=e.pageY-this.me.top,this.te===1?t<this.m+this.f?this.SplitterDistance=this.m+this.f:t>this.parent.clientHeight-this.w-this.f?this.SplitterDistance=this.parent.clientHeight-this.w:this.SplitterDistance=t-2+this.f:t<this.m?this.SplitterDistance=this.parent.clientHeight-this.m-2:t>this.parent.clientHeight-this.w?this.SplitterDistance=this.w:this.SplitterDistance=this.parent.clientHeight-t+2):(t=e.pageX-this.me.left,this.te===1?t<this.m+this.f?this.SplitterDistance=this.m+this.f:t>this.parent.clientWidth-this.w-this.f?this.SplitterDistance=this.parent.clientWidth-this.w:this.SplitterDistance=t-2+this.f:t<this.m?this.SplitterDistance=this.parent.clientWidth-this.m-2:t>this.parent.clientWidth-this.w?this.SplitterDistance=this.w:this.SplitterDistance=this.parent.clientWidth-t+2),this._.removeChild(this.p),document.removeEventListener("mousemove",this.p.move),this.p=null,this.st=!1,this.d.style.pointerEvents="",this.a.style.pointerEvents=""}),this.parent.appendChild(this._),setTimeout(()=>{this.me=this._.getBoundingClientRect()},10),this.Bt=new ResizeObserver((e,t)=>{e.length!==0&&(!e[0].contentRect||e[0].contentRect.width===0||e[0].contentRect.height===0||(!this.Ue||this.Ue.width!==e[0].contentRect.width||this.Ue.height!==e[0].contentRect.height)&&(this.Ue={width:e[0].contentRect.width,height:e[0].contentRect.height},this.resize()))}),this.Bt.observe(this._),this.Ct=new MutationObserver(e=>{let t;for(t of e)t.type==="attributes"&&t.attributeName==="style"&&t.oldValue==="display: none;"&&this.resize()}),this.Ct.observe(this._,{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}resize(){this.he===0&&this.te===1?this.a.clientHeight&&this.a.clientHeight<this.w&&this.d.clientHeight>this.m&&(this.SplitterDistance=this.parent.clientHeight-this.w):this.he===0?this.d.clientHeight&&this.d.clientHeight<this.m&&this.a.clientHeight>this.w&&(this.SplitterDistance=this.m):this.he===1&&this.te===1?this.a.clientWidth&&this.a.clientWidth<this.w&&this.d.clientWidth>this.m&&(this.SplitterDistance=this.parent.clientWidth-this.w):this.d.clientWidth<this.m&&this.a.clientWidth>this.w&&(this.SplitterDistance=this.m),this.me=this._.getBoundingClientRect()}};function qe(o){let r=[];if(o.gamepad>0)return r.push("Gamepad "+o.gamepad),o.key>0?r.push("Button "+o.key):o.gamepadAxes<0?r.push("Axis "+-o.gamepadAxes):o.gamepadAxes>0&&r.push("Axis "+o.gamepadAxes),r.length===1?"None":r.join("+");if(o.key===0)return o.name&&o.name.length>0?"None - "+o.name:"None";if((o.modifiers&4)===4&&r.push("Ctrl"),(o.modifiers&2)===2&&r.push("Alt"),(o.modifiers&8)===8&&r.push("Shift"),(o.modifiers&16)===16&&r.push("Meta"),Q[o.key])r.push(Q[o.key]);else return o.name&&o.name.length>0?"None - "+o.name:"None";return o.name&&o.name.length>0?r.join("+")+" - "+o.name:r.join("+")}var _=class o{constructor(r,e){this.name="";this.priority=0;this.display="name";this.displaytype=0;this.value="";this.style=1;this.group="";this.enabled=!0;this.notes="";if(typeof r=="object"){let t;for(t in r)r.hasOwnProperty(t)&&(this[t]=r[t])}this.profile=e}clone(){return new o(this)}},L=class o extends _{constructor(e,t){super(e);this.caption="";this.icon="";this.append=!1;this.send=!0;this.chain=!1;this.stretch=!1;this.parse=!1;this.top=-1;this.left=-1;this.right=-1;this.bottom=-1;this.width=64;this.height=64;this.iconOnly=!1;if(this.caption="NewButton",this.display="caption",typeof e=="object"){let i;for(i in e)e.hasOwnProperty(i)&&(this[i]=e[i])}this.profile=t}clone(){return new o(this)}},j=class o extends _{constructor(e,t){super();this.key=0;this.append=!1;this.send=!0;this.modifiers=0;this.chain=!1;this.gamepad=0;this.gamepadAxes=0;if(this.display="return MacroDisplay(item)",this.displaytype=1,typeof e=="object"){let i;for(i in e)e.hasOwnProperty(i)&&(this[i]=e[i])}this.profile=t}clone(){return new o(this)}},ne=class o extends _{constructor(e,t,i){super();this.pattern="NewAlias";this.regexp=!1;this.multi=!1;this.append=!0;this.params="";if(typeof e=="string"&&(this.pattern=e),t!=null&&(this.value=t),this.display="pattern",typeof e=="object"){let s;for(s in e)e.hasOwnProperty(s)&&(this[s]=e[s])}this.profile=i}clone(){return new o(this)}},Y=class o extends _{constructor(e,t){super(e);this.pattern="NewTrigger";this.verbatim=!1;this.triggerNewline=!0;this.triggerPrompt=!1;this.type=0;this.temp=!1;this.caseSensitive=!1;this.raw=!1;this.state=0;this.params="";this.triggers=[];this.fired=!1;if(this.display="pattern",typeof e=="object"){let i;for(i in e)if(e.hasOwnProperty(i))if(i==="triggers"){this.triggers=[];let s=e.triggers.length;for(let n=0;n<s;n++)this.triggers.push(new o(e.triggers[n]))}else this[i]=e[i]}this.profile=t}clone(){return new o(this)}getState(e){return e===0?this:(e--,e>=this.triggers.length||e<0?null:this.triggers[e])}},re=class o extends _{constructor(e,t){super(e);this.caption="";this.icon="";this.append=!1;this.send=!0;this.chain=!1;this.parent="";this.items=[];this.parse=!1;if(this.caption="NewContext",this.display="caption",typeof e=="object"){let i;for(i in e)if(e.hasOwnProperty(i))if(i==="items"){let s=0,n=e[i].length;for(;s<n;s++)this.items.push(new o(e[i][s]))}else this[i]=e[i]}this.profile=t}clone(){return new o(this)}};var V=class o{constructor(r,e){this.name="";this.file="";this.priority=0;this.enabled=!0;this.aliases=[];this.triggers=[];this.macros=[];this.buttons=[];this.contexts=[];this.enableMacros=!0;this.enableTriggers=!0;this.enableAliases=!0;this.enableButtons=!0;this.enableContexts=!0;this.enableDefaultContext=!0;typeof r=="string"?(this.name=r,this.file=r.toLowerCase(),(e==null||e)&&(this.macros=o.DefaultMacros)):typeof r=="boolean"?r&&(this.macros=o.DefaultMacros):(e==null||e)&&(this.macros=o.DefaultMacros)}static get Default(){return new o("Default")}static get DefaultMacros(){let r=[{key:97,display:"return MacroDisplay(item)",displaytype:1,value:"sw",style:1,append:!1,send:!0,name:"SouthWest",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:98,display:"return MacroDisplay(item)",displaytype:1,value:"s",style:1,append:!1,send:!0,name:"South",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:99,display:"return MacroDisplay(item)",displaytype:1,value:"se",style:1,append:!1,send:!0,name:"SouthEast",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:100,display:"return MacroDisplay(item)",displaytype:1,value:"w",style:1,append:!1,send:!0,name:"West",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:101,display:"return MacroDisplay(item)",displaytype:1,value:"l",style:1,append:!1,send:!0,name:"Look",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:102,display:"return MacroDisplay(item)",displaytype:1,value:"e",style:1,append:!1,send:!0,name:"East",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:103,display:"return MacroDisplay(item)",displaytype:1,value:"nw",style:1,append:!1,send:!0,name:"NorthWest",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:104,display:"return MacroDisplay(item)",displaytype:1,value:"n",style:1,append:!1,send:!0,name:"North",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""},{key:105,display:"return MacroDisplay(item)",displaytype:1,value:"ne",style:1,append:!1,send:!0,name:"NorthEast",group:"",enabled:!0,modifiers:0,chain:!0,priority:0,notes:""}],e=[],t=r.length;for(let i=0;i<t;i++)e.push(new j(r[i]));return e}static get DefaultButtons(){let r=[],e;return e=new L,e.right=176,e.top=14,e.caption="fa-solid fa-angle-double-up",e.value="up",e.width=48,e.height=48,r.push(e),e=new L,e.right=124,e.top=14,e.caption="fa-solid fa-caret-up,rotate--45",e.value="northwest",e.width=48,e.height=48,r.push(e),e=new L,e.right=72,e.top=14,e.caption="fa-solid fa-caret-up",e.value="north",e.width=48,e.height=48,r.push(e),e=new L,e.right=20,e.top=14,e.caption="fa-solid fa-caret-up,rotate-45",e.value="northeast",e.width=48,e.height=48,r.push(e),e=new L,e.right=176,e.top=66,e.caption="fa-solid fa-crosshairs",e.value="kill ${selected}",e.width=48,e.height=48,r.push(e),e=new L,e.right=124,e.top=66,e.caption="fa-solid fa-caret-left",e.value="west",e.width=48,e.height=48,r.push(e),e=new L,e.right=72,e.top=66,e.caption="fa-solid fa-magnifying-glass",e.value="look ${selected}",e.width=48,e.height=48,r.push(e),e=new L,e.right=20,e.top=66,e.caption="fa-solid fa-caret-right",e.value="east",e.width=48,e.height=48,r.push(e),e=new L,e.right=176,e.top=118,e.caption="fa-solid fa-angle-double-down",e.value="down",e.width=48,e.height=48,r.push(e),e=new L,e.right=124,e.top=118,e.caption="fa-solid fa-caret-down,rotate-45",e.value="southwest",e.width=48,e.height=48,r.push(e),e=new L,e.right=72,e.top=118,e.caption="fa-solid fa-caret-down",e.value="south",e.width=48,e.height=48,r.push(e),e=new L,e.right=20,e.top=118,e.caption="fa-solid fa-caret-down,rotate--45",e.value="southeast",e.width=48,e.height=48,r.push(e),r}static load(r){let e,t;if(typeof r=="object")t=r;else return new o;e=new o(!1);let i;for(i in t)t.hasOwnProperty(i)&&(i==="aliases"||i==="triggers"||i==="macros"||i==="buttons"||i==="contexts"||i==="variables"||(e[i]=t[i]));let s,n;if(t.aliases&&t.aliases.length>0)for(n=t.aliases.length,s=0;s<n;s++)e.aliases.push(new ne(t.aliases[s],null,e));if(t.triggers&&t.triggers.length>0)for(n=t.triggers.length,s=0;s<n;s++)e.triggers.push(new Y(t.triggers[s],e));if(t.macros&&t.macros.length>0)for(n=t.macros.length,e.macros=[],s=0;s<n;s++)e.macros.push(new j(t.macros[s],e));if(t.buttons&&t.buttons.length>0)for(n=t.buttons.length,s=0;s<n;s++)e.buttons.push(new L(t.buttons[s],e));if(t.contexts&&t.contexts.length>0)for(n=t.contexts.length,s=0;s<n;s++)e.contexts.push(new re(t.contexts[s],e));return e.file=e.name,e}clone(r){let e,t,i;if(r===2){if(e={name:this.name,priority:this.priority,enabled:this.enabled,aliases:[],triggers:[],macros:[],buttons:[],contexts:[],enableMacros:this.enableMacros,enableTriggers:this.enableTriggers,enableAliases:this.enableAliases,enableButtons:this.enableButtons,enableContexts:this.enableContexts,enableDefaultContext:this.enableDefaultContext},this.aliases.length>0)for(i=this.aliases.length,t=0;t<i;t++)e.aliases.push({pattern:this.aliases[t].pattern,value:this.aliases[t].value,priority:this.aliases[t].priority,regexp:this.aliases[t].regexp,style:this.aliases[t].style,multi:this.aliases[t].multi,append:this.aliases[t].append,name:this.aliases[t].name,group:this.aliases[t].group,enabled:this.aliases[t].enabled,params:this.aliases[t].params,display:this.aliases[t].display,notes:this.aliases[t].notes||""});if(this.triggers.length>0)for(i=this.triggers.length,t=0;t<i;t++){let a={pattern:this.triggers[t].pattern,value:this.triggers[t].value,priority:this.triggers[t].priority,verbatim:this.triggers[t].verbatim,style:this.triggers[t].style,name:this.triggers[t].name,group:this.triggers[t].group,enabled:this.triggers[t].enabled,display:this.triggers[t].display,triggernewline:this.triggers[t].triggerNewline,caseSensitive:this.triggers[t].caseSensitive,triggerprompt:this.triggers[t].triggerPrompt,raw:this.triggers[t].raw,type:this.triggers[t].type,notes:this.triggers[t].notes||"",state:this.triggers[t].state||0,params:this.triggers[t].params||"",triggers:[]};if(this.triggers[t].triggers&&this.triggers[t].triggers.length){let c=this.triggers[t].triggers.length;for(let h=0;h<c;h++)a.triggers.push({pattern:this.triggers[t].triggers[h].pattern,value:this.triggers[t].triggers[h].value,priority:this.triggers[t].triggers[h].priority,verbatim:this.triggers[t].triggers[h].verbatim,style:this.triggers[t].triggers[h].style,name:this.triggers[t].triggers[h].name,group:this.triggers[t].triggers[h].group,enabled:this.triggers[t].triggers[h].enabled,display:this.triggers[t].triggers[h].display,triggernewline:this.triggers[t].triggers[h].triggerNewline,caseSensitive:this.triggers[t].triggers[h].caseSensitive,triggerprompt:this.triggers[t].triggers[h].triggerPrompt,raw:this.triggers[t].triggers[h].raw,type:this.triggers[t].triggers[h].type,notes:this.triggers[t].triggers[h].notes||"",state:this.triggers[t].triggers[h].state||0,params:this.triggers[t].triggers[h].params||"",triggers:[]})}e.triggers.push(a)}if(this.macros.length>0)for(i=this.macros.length,t=0;t<i;t++)e.macros.push({key:this.macros[t].key,value:this.macros[t].value,style:this.macros[t].style,append:this.macros[t].append,send:this.macros[t].send,name:this.macros[t].name,group:this.macros[t].group,enabled:this.macros[t].enabled,display:'if(item.key === 0) return "None"; return keyCodeToChar[item.key]',displaytype:1,modifiers:this.macros[t].modifiers,chain:this.macros[t].chain,notes:this.macros[t].notes||""});if(this.buttons.length>0)for(i=this.buttons.length,t=0;t<i;t++)e.buttons.push(Z(this.buttons[t],(a,c)=>{if(a!=="profile")return c}));if(this.contexts.length>0)for(i=this.contexts.length,t=0;t<i;t++)e.contexts.push(Z(this.contexts[t],(a,c)=>{if(a!=="profile")return c}));return e}e=Z(this,(a,c)=>{if(a!=="profile")return c});let s=new o(!1),n;for(n in e)e.hasOwnProperty(n)&&(n==="aliases"||n==="triggers"||n==="macros"||n==="buttons"||n==="contexts"||n==="variables"||(s[n]=e[n]));if(e.aliases&&e.aliases.length>0)for(i=e.aliases.length,t=0;t<i;t++)s.aliases.push(new ne(e.aliases[t],null,s));if(e.triggers&&e.triggers.length>0)for(i=e.triggers.length,t=0;t<i;t++)s.triggers.push(new Y(e.triggers[t],s));if(e.macros&&e.macros.length>0)for(i=e.macros.length,s.macros=[],t=0;t<i;t++)s.macros.push(new j(e.macros[t],s));if(e.buttons&&e.buttons.length>0)for(i=e.buttons.length,t=0;t<i;t++)s.buttons.push(new L(e.buttons[t],s));if(e.contexts&&e.contexts.length>0)for(i=e.contexts.length,t=0;t<i;t++)s.contexts.push(new re(e.contexts[t],s));return s}find(r,e,t){let i;if(!r||r.length===0||!this[r]||this[r].length===0)return null;i=le(this[r]);let s=i.length;for(let n=0;n<s;n++)if(i[n][e]===t)return i[n];return null}findAny(r,e,t){let i;if(!r||r.length===0||!this[r]||this[r].length===0)return null;i=le(this[r]);let s=i.length;if(typeof e=="object"){for(let n=0;n<s;n++)for(let a in e)if(e.hasOwnProperty(a)&&i[n][a]===e[a])return i[n];return-1}for(let n=0;n<s;n++)if(i[n][e]===t)return i[n];return null}indexOfAny(r,e,t){let i;if(!r||r.length===0||!this[r]||this[r].length===0)return null;i=le(this[r]);let s=i.length;if(typeof e=="object"){for(let n=0;n<s;n++)for(let a in e)if(e.hasOwnProperty(a)&&i[n][a]===e[a])return this[r].indexOf(i[n]);return-1}for(let n=0;n<s;n++)if(i[n][e]===t)return this[r].indexOf(i[n]);return-1}indexOf(r,e,t){let i;if(!r||r.length===0||!this[r]||this[r].length===0)return null;i=le(this[r]);let s=i.length;if(typeof e=="object"){for(let n=0;n<s;n++){for(let a in e)e.hasOwnProperty(a)&&(i[n][a],e[a]);return this[r].indexOf(i[n])}return-1}for(let n=0;n<s;n++)if(i[n][e]===t)return this[r].indexOf(i[n]);return-1}};var ge=class extends R{constructor(){super(Object.assign({},client.getOption("windows.profiles")||{center:!0},{title:'<i class="fas fa-users"></i> Profiles',minWidth:410}));this.je=!1;this.t={profile:null,profileName:"",item:null,parent:null,itemIdx:-1,collection:"",itemSubIdx:-1};this.rt=!1;this.le=!1;this.on("resized",t=>{this.ge(t.width),client.setOption("windows.profiles",t)}),client.on("profiles-loaded",()=>{this.profiles||(this.profiles=client.profiles.clone(),this.profiles.SortByPriority(),this.be())}),client.on("profiles-updated",()=>{}),client.on("options-loaded",()=>{this.resetState(client.getOption("windows.profiles")||{center:!0})}),client.on("initialized",()=>{this.profiles||(this.profiles=client.profiles.clone(),this.profiles.SortByPriority(),this.be())}),this.body.style.padding="10px",this.ie=new se({id:"profile",parent:this.body,orientation:1,anchor:1}),client.getOption("profiles.split")>=200&&(this.ie.SplitterDistance=client.getOption("profiles.split")),this.ie.on("splitter-moved",t=>{client.setOption("profiles.split",t)}),this.n=this.ie.panel1,this.n.style.overflow="hidden",this.n.style.overflowY="auto",this.c=this.ie.panel2,this.c.style.overflow="auto",this.c.style.padding="10px",this.c.style.paddingLeft="14px",client.profiles&&(this.profiles=client.profiles.clone(),this.profiles.SortByPriority(),this.be());let e="";e+=`<button id="${this.id}-back" type="button" class="btn-sm float-start btn btn-light" title="Go back"><i class="bi bi-arrow-left"></i><span class="icon-only"> Back</span></button>`,e+='<button id="btn-profile-menu" class="btn-sm float-start btn btn-outline-secondary" type="button" aria-controls="profile-menu" title="Show menu" data-bs-toggle="dropdown" aria-expanded="false" style="margin-right: 4px;"><i class="fa-solid fa-bars"></i></button>',e+=`<ul id="${this.id}-dropdown-menu" class="dropdown-menu" style="overflow: auto;">`,e+=`<li id="${this.id}-add-profile"><a class="dropdown-item">Add profile</a></li>`,e+=`<li id="${this.id}-add-empty-profile"><a class="dropdown-item">Add empty profile</a></li>`,e+=`<li id="${this.id}-add-sep"><hr class="dropdown-divider"></li>`,e+=`<li id="${this.id}-add-alias"><a class="dropdown-item">Add alias</a></li>`,e+=`<li id="${this.id}-add-macro"><a class="dropdown-item">Add macro</a></li>`,e+=`<li id="${this.id}-add-trigger"><a class="dropdown-item">Add trigger</a></li>`,e+=`<li id="${this.id}-add-button"><a class="dropdown-item">Add button</a></li>`,e+=`<li id="${this.id}-add-sep2"><hr class="dropdown-divider"></li>`,e+=`<li id="${this.id}-add-default-buttons"><a class="dropdown-item">Add default buttons</a></li>`,e+=`<li id="${this.id}-add-default-macros"><a class="dropdown-item">Add default macros</a></li>`,e+='<li><hr class="dropdown-divider"></li>',e+=`<li id="${this.id}-export-current"><a class="dropdown-item">Export current profile</a></li>`,e+=`<li id="${this.id}-export"><a class="dropdown-item">Export profiles</a></li>`,e+=`<li id="${this.id}-import"><a class="dropdown-item">Import profiles</a></li>`,e+='<li><hr class="dropdown-divider"></li>',e+=`<li id="${this.id}-refresh"><a class="dropdown-item">Refresh</a></li>`,e+="</ul>",e+='<span id="profile-page-buttons"></span>',e+=`<button id="${this.id}-cancel" type="button" class="btn-sm float-end btn btn-light" title="Close dialog"><i class="bi bi-x-lg"></i><span class="icon-only"> Cancel</span></button>`,e+=`<button id="${this.id}-save" type="button" class="btn-sm float-end btn btn-primary" title="Save changes" disabled><i class="bi bi-save"></i><span class="icon-only"> Save</span></button>`,e+=`<button id="${this.id}-apply" type="button" class="btn-sm float-end btn btn-secondary" title="Apply changes" disabled><i class="bi bi-check-lg"></i><span class="icon-only"> Apply</span></button>`,this.footer.innerHTML=e,this.footer.classList.add("dropup"),document.getElementById("btn-profile-menu").addEventListener("shown.bs.dropdown",()=>{setTimeout(()=>{let t=this.footer.querySelector("#"+this.id+"-dropdown-menu"),i=t.getBoundingClientRect();i.y<10&&(t.style.height=i.height+i.y-10+"px"),i.bottom>document.body.clientHeight-10&&(t.style.height=document.body.clientHeight-i.y-10+"px")},0)}),document.getElementById("btn-profile-menu").addEventListener("hidden.bs.dropdown",()=>{let t=this.footer.querySelector("#"+this.id+"-dropdown-menu");t.style.height=""}),this.footer.querySelector(`#${this.id}-cancel`).addEventListener("click",()=>{S(this.o),this.close()}),this.footer.querySelector(`#${this.id}-back`).addEventListener("click",()=>{this.St()}),this.on("closed",()=>{client.setOption("windows.profiles",this.windowState),S(this.o)}),this.on("canceled",()=>{client.setOption("windows.profiles",this.windowState),S(this.o)}),this.on("moved",t=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.profiles",t)}),this.on("maximized",()=>{client.setOption("windows.profiles",this.windowState)}),this.on("restored",()=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.profiles",this.windowState)}),this.on("shown",()=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.profiles",this.windowState)}),this.footer.querySelector(`#${this.id}-add-profile a`).addEventListener("click",()=>{this.ot(!0)}),this.footer.querySelector(`#${this.id}-add-empty-profile a`).addEventListener("click",()=>{this.ot(!1)}),this.footer.querySelector(`#${this.id}-add-alias a`).addEventListener("click",()=>{this.Se("aliases")}),this.footer.querySelector(`#${this.id}-add-macro a`).addEventListener("click",()=>{this.Se("macros")}),this.footer.querySelector(`#${this.id}-add-trigger a`).addEventListener("click",()=>{this.Se("triggers")}),this.footer.querySelector(`#${this.id}-add-button a`).addEventListener("click",()=>{this.Se("buttons")}),this.footer.querySelector(`#${this.id}-add-default-buttons a`).addEventListener("click",()=>{let t=V.DefaultButtons,i=t.length;for(let s=0;s<i;s++)this.Se("buttons",t[s])}),this.footer.querySelector(`#${this.id}-add-default-macros a`).addEventListener("click",()=>{let t=V.DefaultMacros,i=t.length;for(let s=0;s<i;s++)this.Se("macros",t[s])}),this.footer.querySelector(`#${this.id}-export-current a`).addEventListener("click",()=>{let t={version:2,profiles:{}};t.profiles[this.t.profileName]=this.t.profile.clone(2),fileSaveAs.show(JSON.stringify(t),`oiMUD.${this.t.profileName}.txt`,"text/plain")}),this.footer.querySelector(`#${this.id}-export a`).addEventListener("click",()=>{let t={version:2,profiles:this.profiles.clone(2)};fileSaveAs.show(JSON.stringify(t),"oiMUD.profiles.txt","text/plain")}),this.footer.querySelector(`#${this.id}-import a`).addEventListener("click",()=>{q("Import profile(s)").then(t=>{z(t[0]).then(i=>{try{var s=JSON.parse(i);if(s.version==2){if(s.profiles){for(var n=Object.keys(s.profiles),a,c,h=0,l=n.length;h<l;h++){for(a=n[h],c=0;this.profiles.contains(a);)c===0?a=n[h]+" Copy":a=n[h]+" Copy ("+c+")",c++;s.profiles[n[h]].name=a;let d=V.load(s.profiles[n[h]]);this.profiles.add(d)}if(l===0)return;this.changed=!0,this.be(),this._e(this.o)}}else setTimeout(function(){alert_box("Invalid file","Unable to import file, not a valid profile file",4)},50)}catch(d){setTimeout(function(){alert_box("Error importing","Error importing file.",3)},50),client.error(d)}}).catch(client.error)}).catch(()=>{})}),this.footer.querySelector(`#${this.id}-refresh a`).addEventListener("click",()=>{this.be(),this.setBody(this.o)}),this.footer.querySelector(`#${this.id}-save`).addEventListener("click",()=>{if(this.se){this.se.focus();return}this.at(),this.close()}),this.footer.querySelector(`#${this.id}-apply`).addEventListener("click",()=>{if(this.se){this.se.focus();return}this.at()})}set errorField(e){this.se=e}get errorField(){return this.se}get current(){return this.t}set changed(e){e!==this.je&&(this.je=e,this.footer.querySelector(`#${this.id}-save`).disabled=!e,this.footer.querySelector(`#${this.id}-apply`).disabled=!e)}get changed(){return this.je}get contents(){return this.c}lt(e,t,i,s,n){if(!e||e.length===0)return"";let a="";n=n||0;let c=n*20+16;return a+=`<li class="nav-item" title="${T(N(e[t]))}" id="${i+"-"+(e[t].useName?this.k(e[t].name.toLowerCase()):t)}">`,e[t].items&&e[t].items.length?(a+=`<a style="padding-left: ${c}px" class="nav-link text-dark" href="#${s}/${encodeURIComponent(e[t].name.toLowerCase())}"><i class="align-middle float-start bi bi-chevron-right"></i> <input data-page="${s}/${encodeURIComponent(e[t].name.toLowerCase())}" type="checkbox" class="form-check-input" id="enabled-${i}-${this.k(e[t].name.toLowerCase())}"${e[t].enabled?" checked":""}> ${T(N(e[t]))}</a>`,a+=this.Rt(e[t].items,i+"-"+this.k(e[t].name.toLowerCase()),s+"/"+encodeURIComponent(e[t].name.toLowerCase()),n+1)):e[t].useName?a+=`<a style="padding-left: ${c}px" class="nav-link text-dark " href="#${s}/${encodeURIComponent(e[t].name.toLowerCase())}"><i class="align-middle float-start no-icon"></i> <input data-page="${s}/${encodeURIComponent(e[t].name.toLowerCase())}" type="checkbox" class="form-check-input" id="enabled-${i}-${this.k(e[t].name.toLowerCase())}"${e[t].enabled?" checked":""}> ${T(N(e[t]))}</a>`:a+=`<a style="padding-left: ${c}px" class="nav-link text-dark" href="#${s}/${t}"><i class="align-middle float-start no-icon"></i><input type="checkbox" class="form-check-input" data-page="${s}/${t}" id="enabled-${i}-${t}"${e[t].enabled?" checked":""}> ${T(N(e[t]))}</a>`,a+="</li>",a}Rt(e,t,i,s){if(!e||e.length===0)return"";let n="";for(let a=0,c=e.length;a<c;a++)n+=this.lt(e,a,t,i,s);return'<ul class="dropdown-menu dropdown-inline">'+n+"</ul>"}be(){let e="";for(let i=0,s=this.profiles.keys.length;i<s;i++)e+=this.Lt(this.profiles.keys[i]);this.n.innerHTML='<ul class="nav" id="profile-menu">'+e+"</ul>";let t=this.n.querySelectorAll("a");for(let i=0,s=t.length;i<s;i++)this.Ye(t[i])}Ye(e){let t=e.querySelectorAll(".bi-chevron-right"),i,s;for(i=0,s=t.length;i<s;i++)t[i].addEventListener("click",n=>{n.target.closest("li").querySelector(".dropdown-menu").classList.toggle("show"),n.target.classList.toggle("bi-chevron-right"),n.target.classList.toggle("bi-chevron-down"),n.preventDefault()});for(t=e.querySelectorAll("input"),i=0,s=t.length;i<s;i++)t[i].addEventListener("change",n=>{let a=n.target.dataset.page.split("/"),c=n.target.checked;switch(a.length){case 2:if(!c&&this.profiles.keys.filter(h=>this.profiles.enabled(h)).length===1){alert_box("Cannot disable","One profile must always be enabled."),n.target.checked=!0;return}this.n.querySelector(`#enabled-${this.k(a[1])}`).checked=c,this.n.querySelector(`#enabled-${this.k(a[1])}-switch`).checked=c,this.o===n.target.dataset.page&&(this.c.querySelector("#enabled").checked=c),this.profiles.items[a[1]].enabled=c,this.changed=!0;break;case 3:this.n.querySelector(`#enabled-${this.k(a[1])}-${a[2]}`).checked=c,this.o===`profiles/${a[1]}`&&(this.c.querySelector("#enable"+B(a[2])).checked=c),this.profiles.items[a[1]]["enable"+B(a[2])]=c,this.changed=!0;break;case 4:this.n.querySelector(`#enabled-${this.k(a[1])}-${a[2]}-${a[3]}`).checked=c,this.o===n.target.dataset.page?this.c.querySelector("#enabled").checked=c:this.o===`profiles/${a[1]}/${a[2]}`&&(this.c.querySelector("#check-"+a[3]).checked=c),this.profiles.items[a[1]][a[2]][+a[3]].enabled=c,this.changed=!0;break}n.stopPropagation(),n.cancelBubble=!0});for(t=e.querySelectorAll(".list-badge-button"),i=0,s=t.length;i<s;i++)t[i].addEventListener("click",n=>{this.Et(n.target.parentElement.dataset.profile),n.preventDefault()})}Lt(e){let t=`<li class="nav-item" data-profile="${e}" title="${B(e)}" id="${this.k(e)}">`;return t+=`<a class="nav-link text-dark" href="#profiles/${encodeURIComponent(e)}">`,e!=="default"&&(t+=`<span class="list-badge-button badge text-bg-danger" data-profile="${e}"><i class="bi bi-trash"></i></span>`),t+='<i class="align-middle float-start bi bi-chevron-right"></i> ',t+=this.Ut(B(e),"enabled-"+e,this.profiles.items[e].enabled),t+="</a>",t+=this.Rt([{name:"Aliases",items:this.profiles.items[e].aliases,useName:!0,enabled:this.profiles.items[e].enableAliases},{name:"Macros",items:this.profiles.items[e].macros,useName:!0,enabled:this.profiles.items[e].enableMacros},{name:"Triggers",items:this.profiles.items[e].triggers,useName:!0,enabled:this.profiles.items[e].enableTriggers},{name:"Buttons",items:this.profiles.items[e].buttons,useName:!0,enabled:this.profiles.items[e].enableButtons}],this.k(e),"profiles/"+encodeURIComponent(e),1),t+="</li>",t}Ut(e,t,i){return`<span><input type="checkbox" data-page="profiles/${e.toLowerCase()}" class="form-check-input" id="${this.k(t)}"${i?" checked":""}> ${e}</span><div class="form-check form-switch"><input type="checkbox" class="form-check-input" id="${t}-switch"${i?" checked":""}> ${e}</div>`}setBody(e,t){if(!this.profiles){setTimeout(()=>{this.setBody(e,t)},100);return}if(this.se){setTimeout(()=>this.se.focus(),100),window.location.hash=this.o;return}this.o=this.dialog.dataset.path,this.o==="profiles"?this.dialog.dataset.panel="left":this.dialog.dataset.panel="right";let i=this.o.split("/"),s,n,a;if(this._e(i),this.footer.querySelector("#profile-page-buttons").innerHTML="",this.footer.querySelector(`#${this.id}-export-current`).style.display="",this.c.scrollTop=0,!this.Ft(i)){this.title=P(i,{small:this.le,sep:"/",icon:'<i class="fas fa-users" style="padding: 2px;margin-right: 2px;"></i>'});return}if(i.length===4?this.title=P(i,{small:this.le,sep:"/",formatter:(c,h,l)=>h===l?T(N(this.t.item)):B(c),icon:'<i class="fas fa-users" style="padding: 2px;margin-right: 2px;"></i>'}):i.length===5?this.title=P(i,{small:this.le,sep:"/",formatter:(c,h,l)=>h===l?T(N(this.t.parent)):h===l-1?T(N(this.t.item)):B(c),icon:'<i class="fas fa-users" style="padding: 2px;margin-right: 2px;"></i>'}):this.title=P(i,{small:this.le,sep:"/",icon:'<i class="fas fa-users" style="padding: 2px;margin-right: 2px;"></i>'}),i.length<2?(this.footer.querySelector(`#${this.id}-export-current`).style.display="none",this.footer.querySelector(`#${this.id}-add-sep`).style.display="none",this.footer.querySelector(`#${this.id}-add-alias`).style.display="none",this.footer.querySelector(`#${this.id}-add-macro`).style.display="none",this.footer.querySelector(`#${this.id}-add-trigger`).style.display="none",this.footer.querySelector(`#${this.id}-add-button`).style.display="none",this.footer.querySelector(`#${this.id}-add-sep2`).style.display="none",this.footer.querySelector(`#${this.id}-add-default-buttons`).style.display="none",this.footer.querySelector(`#${this.id}-add-default-macros`).style.display="none",this.ie.panel2Collapsed=!0,this.footer.querySelector(`#${this.id}-back`).style.display="none"):(this.footer.querySelector(`#${this.id}-add-sep`).style.display="",this.footer.querySelector(`#${this.id}-add-alias`).style.display="",this.footer.querySelector(`#${this.id}-add-macro`).style.display="",this.footer.querySelector(`#${this.id}-add-trigger`).style.display="",this.footer.querySelector(`#${this.id}-add-button`).style.display="",this.footer.querySelector(`#${this.id}-back`).style.display="",this.footer.querySelector(`#${this.id}-add-sep2`).style.display="",this.footer.querySelector(`#${this.id}-add-default-buttons`).style.display="",this.footer.querySelector(`#${this.id}-add-default-macros`).style.display="",this.ie.panel2Collapsed=!1),i.length===2){if(this.ue!=="properties")this.Ne("properties").then(c=>{this.ue="properties",this.oe(c);let h=this.c.querySelectorAll("input");this.c.querySelector("#name").disabled=this.t.profileName==="default";for(let l=0,d=h.length;l<d;l++)h[l].type==="checkbox"?(h[l].checked=this.t.profile[h[l].id],h[l].addEventListener("change",f=>{let p=f.target.checked;if(f.target.id==="enabled"){if(!p&&this.profiles.keys.filter(x=>this.profiles.enabled(x)).length===1){alert_box("Cannot disable","One profile must always be enabled."),f.target.checked=!0;return}this.n.querySelector(`#enabled-${this.k(this.t.profileName)}`).checked=p,this.n.querySelector(`#enabled-${this.k(this.t.profileName)}-switch`).checked=p,this.o===f.target.dataset.page&&(this.c.querySelector("#enabled").checked=p),this.profiles.items[this.t.profileName].enabled=p}else this.t.profile[f.target.id]=p,this.n.querySelector(`#enabled-${this.k(this.t.profileName)}-${f.target.id.substring(6).toLowerCase()}`).checked=p,this.changed=!0;this.changed=!0})):(h[l].value=this.t.profile[h[l].id],h[l].addEventListener("change",f=>{let p=f.currentTarget||f.target;p.id==="name"?A(()=>{let x=this.At(p.value);x===!0?(h[l].classList.remove("is-invalid"),this.se=null):(h[l].classList.add("is-invalid"),this.se=h[l],this.c.querySelector("#name-feedback").textContent=x),this.Ve()},200,"renameProfile"):(this.t.profile[p.id]=p.value,A(()=>this.Ve(),200,"sortProfiles")),this.changed=!0}),h[l].addEventListener("input",f=>{let p=f.currentTarget||f.target;p.id==="name"?A(()=>{let x=this.At(p.value);x===!0?(h[l].classList.remove("is-invalid"),this.se=null):(h[l].classList.add("is-invalid"),this.se=h[l],this.c.querySelector("#name-feedback").textContent=x),this.Ve()},200,"renameProfile"):(this.t.profile[p.id]=p.value,A(()=>this.Ve(),200,"sortProfiles")),this.changed=!0}))}).catch(()=>{});else{this.c.querySelector("#name").disabled=this.t.profileName==="default";let c=this.c.querySelectorAll("input");for(let h=0,l=c.length;h<l;h++)c[h].type==="checkbox"?c[h].checked=this.t.profile[c[h].id]:c[h].value=this.t.profile[c[h].id]}if(this.t.profileName!=="default"){let c=`<button id="${this.id}-remove" type="button" class="btn-sm btn btn-danger" title="Remove profile"><i class="bi bi-trash"></i></button>`;this.footer.querySelector("#profile-page-buttons").innerHTML=c,this.footer.querySelector(`#${this.id}-remove`).addEventListener("click",h=>{this.se&&(this.se=null),this.Et(this.t.profileName)})}}else if(i.length===3){let c="";if(this.t.item.length===0)a='<h1 id="empty" style="width: 100%;text-align:center">No '+this.t.collection+".</h1>",a+=`<button id="${this.id}-add-contents" type="button" class="btn-sm float-start btn btn-outline-secondary" title="Add ${this.we()}"><i class="bi bi-plus-lg"></i> Add ${this.we()}</button>`;else{for(a="",s=0,n=this.t.item.length;s<n;s++)a+=`<a data-profile ="${this.t.profileName}" id="item-${s}" data-index="${s}" href="#profiles/${encodeURIComponent(this.t.profileName)}/${this.t.collection}/${s}" class="list-group-item list-group-item-action">`,a+=`<span data-index="${s}" class="list-badge-button badge text-bg-danger"><i class="bi bi-trash"></i></span>`,a+='<div class="form-check-inline form-switch" style="margin: 0;">',a+=`<input type="checkbox" class="form-check-input" id="check-${s}" data-profile="${this.t.profileName}" data-index="${s}" data-field="enabled" data-items="${this.t.collection}"${this.t.item[s].enabled?' checked="checked"':""}>`,a+=`</div>${T(N(this.t.item[s]))}</a>`;c=`<button id="${this.id}-add-contents" type="button" class="btn-sm btn btn-outline-secondary" title="Add ${this.we()}" style="margin-bottom: 5px;width:100%;"><i class="bi bi-plus-lg"></i> Add ${this.we()}</button>`}let h=`<button id="${this.id}-add" type="button" class="btn-sm float-start btn btn-outline-secondary" title="Add ${this.we()}"><i class="bi bi-plus-lg"></i></button>`;this.footer.querySelector("#profile-page-buttons").innerHTML=h,this.oe(c+'<div class="list-group">'+a+"</div>");let l=this.c.querySelectorAll(".list-badge-button");for(let d=0,f=l.length;d<f;d++)l[d].addEventListener("click",p=>{this.ct(+p.target.parentElement.dataset.index),p.stopPropagation(),p.cancelBubble=!0,p.preventDefault()});this.ue=null,this.footer.querySelector(`#${this.id}-add`).addEventListener("click",()=>{this.Se()}),this.c.querySelector(`#${this.id}-add-contents`)&&this.c.querySelector(`#${this.id}-add-contents`).addEventListener("click",()=>{this.Se()}),l=this.c.querySelectorAll("input");for(let d=0,f=l.length;d<f;d++)l[d].addEventListener("change",p=>{let x=p.currentTarget||p.target,K=x.checked;this.n.querySelector(`#enabled-${this.k(this.t.profileName)}-${this.t.collection}-${x.dataset.index}`).checked=K,this.t.profile[this.t.collection][+x.dataset.index].enabled=K,this.changed=!0})}else if(i.length===4){let c=`<button id="${this.id}-remove" type="button" class="btn-sm btn btn-danger" title="Remove ${this.we()}"><i class="bi bi-trash"></i></button>`;this.footer.querySelector("#profile-page-buttons").innerHTML=c,this.footer.querySelector(`#${this.id}-remove`).addEventListener("click",h=>{this.ct(this.t.itemIdx,0,!0),h.stopPropagation(),h.cancelBubble=!0,h.preventDefault()}),this.ue!==this.t.collection?(this.ue=this.t.collection,this.Ne(this.t.collection).then(h=>{this.oe(h),this.Ie(!0)}).catch(()=>{})):this.Ie()}else if(i.length===5){let c=`<button id="${this.id}-remove" type="button" class="btn-sm btn btn-danger" title="Remove ${this.we()}"><i class="bi bi-trash"></i></button>`;this.footer.querySelector("#profile-page-buttons").innerHTML=c,this.footer.querySelector(`#${this.id}-remove`).addEventListener("click",h=>{this.ct(this.t.itemIdx,0,!0),h.stopPropagation(),h.cancelBubble=!0,h.preventDefault()}),this.ue!==this.t.collection?(this.ue=this.t.collection,this.Ne(this.t.collection).then(h=>this.oe(h)).catch(()=>{this.Ie(!0)})):this.Ie()}else{let c=`<button id="btn-${this.id}-add-profile" type="button" class="btn-sm btn btn-outline-secondary" title="Add profile"><i class="bi bi-plus-lg"></i></button>`;this.footer.querySelector("#profile-page-buttons").innerHTML=c,this.footer.querySelector(`#btn-${this.id}-add-profile`).addEventListener("click",()=>{this.ot(!0)}),this.ue=null,this.oe("")}}Ft(e){if(!e)return!1;if(this.t.itemIdx=this.t.itemSubIdx=-1,this.t.parent=null,e.length>1){if(this.t.profileName=e[1],!this.profiles.contains(this.t.profileName))return this.oe(`<h1 id="empty" style="width: 100%;text-align:center">Profile ${this.t.profileName} not found.</h1>`),this.ue=null,!1;this.t.profile=this.profiles.items[this.t.profileName]}if(e.length>2){if(this.t.collection=e[2],!this.t.profile[this.t.collection])return this.oe(`<h1 id="empty" style="width: 100%;text-align:center">${B(this.t.collection)} not found in ${this.t.profileName}.</h1>`),this.ue=null,!1;this.t.item=this.t.profile[e[2]]}if(e.length>3){if(this.t.itemIdx=+e[3],this.t.itemIdx<0||this.t.itemIdx>=this.t.item.length){this.oe(`<h1 id="empty" style="width: 100%;text-align:center">${B(this.we())} not found.</h1>`),this.ue=null;return}this.t.item=this.t.profile[e[2]][this.t.itemIdx]}if(e.length>4){if(this.t.itemSubIdx=+e[4],!this.t.item.triggers){this.oe('<h1 id="empty" style="width: 100%;text-align:center">Invalid trigger.</h1>'),this.ue=null;return}if(this.t.itemSubIdx<0||this.t.itemSubIdx>=this.t.item.triggers.length){this.oe('<h1 id="empty" style="width: 100%;text-align:center">Trigger state not found.</h1>'),this.ue=null;return}this.t.parent=this.t.item,this.t.item=this.t.item.triggers[this.t.itemSubIdx]}return!0}Ne(e){return new Promise((t,i)=>{$.ajax({url:"dialogs/profiles-"+e+".htm",cache:!1,type:"GET"}).done(s=>{s=s.replace(/{profileURL}/g,encodeURIComponent(this.t.profileName)).replace(/{profile}/g,this.t.profileName),t(s)}).fail(function(){i("")})})}oe(e){this.c.innerHTML=e;let t=this.c.querySelectorAll("script"),i={client,item:this.t.item,FilterArrayByKeyValue:Me,keyCharToCode:He,keyCodeToChar:Q,profile:this.t.profile,profileName:this.t.profileName,parent:this.t.parent,current:this.t,GetDisplay:N,Trigger:Y,debounce:A,updateHash:D,DialogButtons:de};this.emit("content-changing");for(let s=0,n=t.length;s<n;s++)new Function("body","dialog",...Object.keys(i),"try { "+t[s].textContent+"}catch(e){client.error(e)}").apply(client,[this.c,this,...Object.values(i),this]);this.emit("content-changed")}Ie(e){let t=this.c.querySelectorAll("input,select,textarea");for(let i=0,s=t.length;i<s;i++)if(!(!(t[i].id in this.t.item)&&t[i].dataset.enum!=="true"))if(t[i].type==="checkbox"){if(t[i].dataset.enum==="true"){let n=t[i].name||t[i].id.substring(0,t[i].id.lastIndexOf("-")),a=+t[i].id.substring(t[i].id.lastIndexOf("-")+1);t[i].checked=(this.t.item[n]&a)===a}else t[i].checked=this.t.item[t[i].id];e&&t[i].addEventListener("change",n=>{let a=n.currentTarget||n.target;if(a.style.display!=="none"){if(a.dataset.enum==="true"){let c=a.name||a.id.substring(0,a.id.lastIndexOf("-")),h=this.body.querySelectorAll(`[name=${c}]`),l=0;for(let d=0,f=h.length;d<f;d++)h[d].checked&&(l|=+h[d].value);this.t.item[c]=l}else this.t.item[a.id]=a.checked||!1,a.id==="enabled"&&(this.n.querySelector(`#enabled-${this.k(this.t.profileName)}-${this.t.collection}-${this.t.itemIdx}`).checked=this.t.item[a.id]);this.changed=!0,this.Xe()}})}else{t[i].value=this.t.item[t[i].id],e&&(t[i].addEventListener("change",a=>{let c=a.currentTarget||a.target;c.style.display!=="none"&&(this.setValue(this.t.item,c.id,c.value),this.changed=!0,this.Xe())}),t[i].addEventListener("input",a=>{let c=a.currentTarget||a.target;c.style.display!=="none"&&(this.setValue(this.t.item,c.id,c.value),this.changed=!0,this.Xe())}));let n=this.changed;t[i].dispatchEvent(new Event("change")),this.changed=n}this.emit("item-loaded",this.t)}Xe(e,t,i,s){t=t||this.t.profileName,i=i||this.t.collection,typeof s!="number"&&(s=this.t.itemIdx);let n=this.t.parent;e=e||this.t.item,A(()=>{let a=this.body.querySelector(`#${this.k(t)}-${i}-${s}`);if(!a)return;let c;c=N(n||e),a.title=c,a.firstChild.childNodes[2].textContent=" "+c;let h=this.header.querySelector("ol").children;h.length>4&&(h[4].children.length?h[4].children[0].textContent=c:h[4].textContent=c),h.length>5&&(h[5].textContent=N(e))},200,"updateItemMenu")}_e(e,t){Array.isArray(e)||(e=e.split("/"));let i,s,n,a=0;e[0]==="profiles"&&(a=1);let c=e.length-1;for(let h=a,l=e.length;h<l;h++)if(i=this.k(e.slice(a,h+1).join("-")),s=document.getElementById(i),!!s)if(h===c)setTimeout(()=>{let d=this.n.querySelectorAll(".active");for(let f=0,p=d.length;f<p;f++)d[f].classList.remove("active");pe(this.n,s),s.classList.add("active"),t&&s.firstChild.click()},100);else{if(n=s.querySelector(".dropdown-menu"),!n||n.classList.contains("show"))continue;s=s.querySelector("i"),s&&(s.closest("li").querySelector(".dropdown-menu").classList.toggle("show"),s.classList.toggle("bi-chevron-right"),s.classList.toggle("bi-chevron-down"))}}St(){if(this.se){this.se.focus();return}let e=this.o.split("/");e.length===5?D(e.slice(0,e.length-2).join("/"),this.o):D(e.slice(0,e.length-1).join("/"),this.o)}ot(e){let t=this.profiles.length,i="NewProfile"+t;for(;this.profiles.contains(i);)t++,i="NewProfile"+t;let s=new V(i,e);i=i.toLowerCase(),this.profiles.add(s),this.profiles.SortByPriority();let n=this.Lt(i);t=this.profiles.keys.indexOf(i);let a=document.getElementById("profile-menu");(t===-1||t>=a.children.length)&&(t=a.children.length-1),t<0&&(t=0),a.children[t].insertAdjacentHTML("afterend",n),this.Ye(a.children[t+1]),this.changed=!0,D("profiles/"+i,this.o)}Et(e){if(!e)return!1;confirm_box("Remove profile?",`Delete "${e}"?`).then(t=>{t.button===4&&(this.profiles.remove(e),this.n.querySelector("#"+e).remove(),this.o.startsWith("profiles/"+e)&&D("profiles",this.o),this.changed=!0)})}At(e,t){if(!e)return"Name can not be empty!";if(t=(t||this.t.profileName).toLowerCase(),e=e.toLowerCase(),e===t)return!0;if(this.profiles.contains(e))return"A profile named "+e+" already exists!";this.profiles.remove(t),this.t.profile.name=e,this.t.profileName=e,this.profiles.add(this.t.profile);let i=this.k(t),s=this.k(e),n;return n=this.body.querySelector(`#${i} a`),n.children[2].childNodes[1].textContent=" "+B(e),document.querySelector(`#${i} a`).children[3].childNodes[1].textContent=" "+B(e),n=this.body.querySelector(`#${i}`),n.id=s,n.title=e,this.Gt(this.n.firstChild,t,e),this.Gt(this.c,t,e),this.header.querySelector("ol").children[2].textContent=B(e),!0}Gt(e,t,i){let s,n,a,c=this.k(t),h=this.k(i);for(s=e.querySelectorAll(`[id*="-${c}-"]`),n=0,a=s.length;n<a;n++)s[n].id=s[n].id.replace(`-${c}-`,`-${h}-`);for(s=e.querySelectorAll(`[id$="-${c}"]`),n=0,a=s.length;n<a;n++)s[n].id=s[n].id.replace(`-${c}`,`-${h}`);for(s=e.querySelectorAll(`[id^="${c}-"]`),n=0,a=s.length;n<a;n++)s[n].id=s[n].id.replace(`${c}-`,`${h}-`);for(s=e.querySelectorAll(`[data-profile="${c}"]`),n=0,a=s.length;n<a;n++)s[n].dataset.profile=h;let l=encodeURIComponent(t),d=encodeURIComponent(i);for(s=e.querySelectorAll(`[href*="/${l}/"]`),n=0,a=s.length;n<a;n++)s[n].href=s[n].getAttribute("href").replace(`/${l}/`,`/${d}/`);for(s=e.querySelectorAll(`[href$="/${l}"]`),n=0,a=s.length;n<a;n++)s[n].href=s[n].getAttribute("href").replace(`/${l}`,`/${d}`);for(s=e.querySelectorAll(`[href^="${l}/"]`),n=0,a=s.length;n<a;n++)s[n].href=s[n].getAttribute("href").replace(`${l}/`,`${d}/`);for(s=e.querySelectorAll(`[data-path*="/${l}/"]`),n=0,a=s.length;n<a;n++)s[n].dataset.path=s[n].dataset.path.replace(`/${l}`,`/${d}`);for(s=e.querySelectorAll(`[data-page*="/${l}/"]`),n=0,a=s.length;n<a;n++)s[n].dataset.page=s[n].dataset.page.replace(`/${l}/`,`/${d}/`);for(s=e.querySelectorAll(`[data-page$="/${l}"]`),n=0,a=s.length;n<a;n++)s[n].dataset.page=s[n].dataset.page.replace(`/${l}`,`/${d}`)}Ve(){this.profiles.SortByPriority();let e=this.n.firstChild,t=Array.from(e.children);t.sort((i,s)=>{let n=this.profiles.items[i.dataset.profile].priority,a=this.profiles.items[s.dataset.profile].priority;return n>a?-1:n<a?1:i.dataset.profile==="default"?-1:s.dataset.profile==="default"||(n=i.dataset.profile,a=s.dataset.profile,n>a)?1:n<a?-1:0}),t.forEach(i=>e.appendChild(i))}at(){return this.changed?this.se?(this.se.focus(),!1):(this.profiles.save().then(()=>{client.loadProfiles().then(()=>{})}),this.changed=!1,!0):!0}close(){this.rt?super.close():this.jt().then(e=>{e&&!this.at()||(this.rt=!0,this.close())}).catch(()=>{this.rt=!1})}reload(){this.Ft(this.o.split("/"))&&(this.Ie(),this.Xe())}jt(){return new Promise((e,t)=>{this.je?confirm_box("Save changes?","Save changes to profiles?",null,14).then(i=>{i.button===4?e(!0):i.button===8?e(!1):t()}).catch(i=>{t()}):e(!0)})}k(e){return e.toLowerCase().replace(/[^a-z0-9:.-]+/gi,"_")}we(e){if(e=e||this.t.collection,!!e)return e==="aliases"?"alias":e.substring(0,e.length-1)}Se(e,t){if(e||(e=this.t.collection),!e)return;var i=this.t.profile[e].length;let s;t||(e==="aliases"?t=new ne:e==="triggers"?t=new Y:e==="buttons"?t=new L:e==="macros"?t=new j:e==="context"&&(t=new re)),this.t.profile[e].push(t);let n=this.n.querySelector(`#${this.k(this.t.profileName)}-${e}`);if(i===0){s=this.lt([{name:B(e),items:this.t.profile[e],useName:!0,enabled:this.t.profile[e]}],0,this.k(this.t.profileName),"profiles/"+encodeURIComponent(this.t.profileName),1);var a=document.createElement("div");a.innerHTML=s,n.replaceWith?n.replaceWith(a.firstChild):n.replaceChild?n.parentNode.replaceChild(a.firstChild,n):n.outerHTML=s,n=this.n.querySelector(`#${this.k(this.t.profileName)}-${e}`),this.Ye(n)}else s=this.lt(this.t.profile[e],i,`${this.k(this.t.profileName)}-${e}`,`profiles/${encodeURIComponent(this.t.profileName)}/${e}`,2),n=n.querySelector("ul"),n.insertAdjacentHTML("beforeend",s),n=this.n.querySelector(`#${this.k(this.t.profileName)}-${e}`),this.Ye(n.lastChild);D(`profiles/${encodeURIComponent(this.t.profileName)}/${e}/${i}`,this.o),this.changed=!0}ct(e,t,i){t||(t=this.t.collection),t&&confirm_box("Remove profile?",`Delete ${this.we()}?`).then(s=>{if(s.button===4){let n=`${this.k(this.t.profileName)}-${t}`,a=this.t.profile[t];if(a.splice(e,1),this.n.querySelector(`#${n}-${e}`).remove(),this.t.itemIdx===-1&&this.setBody(this.o),a.length===0)this.n.querySelector(`#${n} i`).remove(),this.n.querySelector(`#${n} a`).insertAdjacentHTML("afterbegin",'<i class="align-middle float-start no-icon"></i>');else{let c=this.n.querySelector(`#${n} ul`),h=c.children.length,l=`#profiles/${encodeURIComponent(this.t.profileName)}/${t}/`;for(;e<h;e++){let d=c.children[e];d.id=`${n}-${e}`,d.firstChild.href=`${l}${e}`,d.firstChild.children[1].id=`enabled-${n}-${e}`}}this.changed=!0,i&&this.St()}})}setValue(e,t,i){i=="false"&&(i=!1),i=="true"&&(i=!0),i=="null"&&(i=null),i=="undefined"&&(i=void 0),typeof i=="string"&&parseFloat(i).toString()==i&&(i=parseFloat(i)),e[t]=this.convertType(i,typeof e[t])}convertType(e,t){if(typeof e===t)return e;switch(t){case"number":return typeof e=="string"&&parseFloat(e).toString()==e?parseFloat(e):Number(e);case"boolean":return!!e;case"string":return""+e}return e}ge(e){if(!this.header.querySelector(".breadcrumb")){setTimeout(()=>{this.ge(e)},10);return}if(e<430){if(this.le)return;this.header.querySelector(".breadcrumb").classList.add("breadcrumb-sm"),this.le=!0}else this.le&&(this.header.querySelector(".breadcrumb").classList.remove("breadcrumb-sm"),this.le=!1)}};function N(o){return o.displaytype===1?new Function("item","keyCodeToChar","MacroDisplay",o.display)(o,Q,qe):$.isFunction(o.display)?o.display(o):$.isFunction(o[o.display])?o[o.display](o):o[o.display]?o[o.display]:o.name}var be=class extends R{constructor(){super(Object.assign({},client.getOption("windows.help")||{center:!0},{title:'<ol class="float-start breadcrumb"><li class="breadcrumb-icon"><i class="bi bi-question-circle" style="margin-right: 2px;"></i></li><li class="breadcrumb-item active">Help</li></ol>',minWidth:410,noFooter:!0}));this.le=!1;this.ce=[];this.t=0;this.on("resized",t=>{this.ge(t.width),A(()=>{this.ie.panel1.parentElement.style.top=e.offsetHeight+"px"},25,"mapper-resize"),client.setOption("windows.help",t)}),client.on("options-loaded",()=>{this.resetState(client.getOption("windows.help")||{center:!0})}),this.on("closed",()=>{client.setOption("windows.help",this.windowState),this.oe(""),S(this.o),delete this.ke,this.ke=null}),this.on("canceled",()=>{client.setOption("windows.help",this.windowState),S(this.o),delete this.ke,this.ke=null}),this.on("moved",t=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.help",t)}),this.on("maximized",()=>{client.setOption("windows.help",this.windowState)}),this.on("restored",()=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.help",this.windowState),this.ie.panel1.parentElement.style.top=e.offsetHeight+"px"}),this.on("shown",()=>{this.ge(this.dialog.offsetWidth||this.dialog.clientWidth),client.setOption("windows.help",this.windowState),this.ie.panel1.parentElement.style.top=e.offsetHeight+"px"}),this.body.style.padding="10px",this.ie=new se({id:"help",parent:this.body,orientation:1,anchor:1}),client.getOption("help.split")>=200&&(this.ie.SplitterDistance=client.getOption("help.split")),this.ie.on("splitter-moved",t=>{client.setOption("help.split",t)}),this.n=this.ie.panel1,this.n.style.overflow="hidden",this.n.style.overflowY="auto",this.c=document.createElement("iframe"),this.c.src="about:blank",this.c.addEventListener("load",()=>{this.c.contentWindow.document.body.onclick=()=>{this.focus(),ze()};var t=this.c.contentWindow.document.createElement("script");t.addEventListener("load",()=>{this.ke=this.c.contentWindow.markdownit({html:!0,typographer:!0});var i=this.ke.renderer.rules.link_open||function(s,n,a,c,h){return h.renderToken(s,n,a)};this.ke.renderer.rules.link_open=(s,n,a,c,h)=>{var l=s[n].attrGet("href");return l&&(l.startsWith("https:")||l.startsWith("http:")||l.startsWith("mailto:")?s[n].attrPush(["target","_blank"]):(s[n].attrs[s[n].attrIndex("href")][1]="#",s[n].attrPush(["onclick",`event.preventDefault();openLink('${l}', 1);return false;`]))),i(s,n,a,c,h)}}),t.setAttribute("src","https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"),t.setAttribute("type","text/javascript"),this.c.contentWindow.document.querySelector("head").appendChild(t),t=this.c.contentWindow.document.createElement("link"),t.setAttribute("href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"),t.setAttribute("rel","stylesheet"),this.c.contentWindow.document.querySelector("head").appendChild(t),this.c.contentWindow.document.openLink=(i,s)=>{this.ht=document.querySelector("#help-jump-menu option:checked"),i.startsWith("docs/")?i=i.substr(5):s&&(i=this.Ke+i),i=i.split("#"),i=i[0].substr(0,i[0].length-3),D("help/"+i,this.o)},this.c.contentWindow.document.body.style.margin="10px"}),this.c.classList.add("full-page"),this.c.style.backgroundColor="white",this.ie.panel2.append(this.c);let e=document.createElement("nav");e.id="help-toolbar",e.classList.add("navbar","bg-light","align-items-center"),e.innerHTML='<form class="container-fluid justify-content-start"><div class="btn-group me-2 mb-1" role="group" aria-label="History navigation"><button id="btn-help-back" type="button" class="btn btn-sm btn-outline-secondary" title="Back" disabled><i class="bi bi-arrow-left"></i></button><button id="btn-help-forward" type="button" class="btn btn-sm btn-outline-secondary" title="Forward" disabled><i class="bi bi-arrow-right"></i></button><button id="btn-help-history" type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false" disabled><span class="visually-hidden">Toggle Dropdown</span></button><ul class="dropdown-menu" id="help-history-menu"></ul></div><select id="help-jump-menu" class="form-select form-select-sm mb-1" title="Select help topic"></select></form>',this.body.appendChild(e),e.querySelector("#help-jump-menu").addEventListener("change",t=>{let i=e.querySelector("#help-jump-menu").value;!i||!i.length?i=this.ht?this.ht.value:"":this.dt("help/"+i),!i||!i.length?D("help",this.o):D("help/"+i,this.o)}),e.querySelector("#btn-help-back").addEventListener("click",()=>this.Dt(-1)),e.querySelector("#btn-help-forward").addEventListener("click",()=>this.Dt(1)),e.querySelector("#btn-help-history").addEventListener("show.bs.dropdown",()=>{let t="",i=document.getElementById("help-history-menu"),s=this.ce;for(let a=0,c=s.length;a<c;a++)t+=`<li id="help-history-item-${a}"><a data-index="${a}" class="dropdown-item${a===this.t?" active":""}" href="#${s[a]}">${e.querySelector(`#help-jump-menu option[value="${s[a].substring(5)}"]`).textContent.trim()}</a></li>`;i.innerHTML=t;let n=document.querySelectorAll('[id^="help-history-item"] a');for(let a=0,c=n.length;a<c;a++)n[a].addEventListener("click",h=>{this.t=+h.currentTarget.dataset.index})}),e.querySelector("#btn-help-history").addEventListener("shown.bs.dropdown",()=>{setTimeout(()=>{let t=e.querySelector("#help-history-menu"),i=t.getBoundingClientRect();i.height>this.body.clientHeight-50&&i.height>150&&(this.body.clientHeight-50<150?t.style.height="150px":t.style.height=this.body.clientHeight-50+"px")},0)}),e.querySelector("#btn-help-history").addEventListener("hidden.bs.dropdown",function(){let t=e.querySelector("#help-history-menu");t.style.height=""}),this.ie.panel1.parentElement.style.top=e.offsetHeight+"px",this.be()}setBody(e,t){if(!this.ve){setTimeout(()=>{this.setBody(e,t)},10);return}if(this.o===this.dialog.dataset.path)return;this.o=this.dialog.dataset.path,this.o==="help"?this.dialog.dataset.panel="left":this.dialog.dataset.panel="right";let i=this.o.split("/");(!this.ce.length||this.ce[this.t]!==this.o)&&this.dt(this.o),this._e(i),this.body.querySelector("#help-jump-menu").value=i.slice(1).join("/"),this.title=P(i,{small:this.le,sep:"/",icon:'<i class="bi bi-question-circle" style="margin-right: 2px;"></i>',formatter:(s,n)=>{if(n===0)return B(s);let a=this.ve.findIndex(l=>l.id===i[1]);if(a===-1||!this.ve[a])return s;if(n===1||!this.ve[a].nodes)return this.ve[a].text;let c=i.slice(1,n+1).join("/"),h=this.ve[a].nodes.findIndex(l=>l.id===c);return h===-1?s:this.ve[a].nodes[h].text}}),this.ie.panel2Collapsed=i.length<2,this.ie.panel2Collapsed?(this.oe(""),this.Ke=""):(i.length<3?this.Ke="":this.Ke=i.slice(1,i.length-1).join("/")+"/",this.Ne(i.slice(1).join("/")).then(s=>this.oe(s)).catch(()=>this.oe('<h1 id="empty" style="width: 100%;text-align:center">Help not found for: '+i[i.length-1]+".</h1>")))}oe(e){if(!this.c.contentWindow||!this.ke){setTimeout(()=>{this.oe(e)},10);return}this.c.contentWindow.document.body.innerHTML=this.ke.render(e),this.c.contentWindow.scroll(0,0),this.emit("content-changed")}k(e){return e.toLowerCase().replace(/[^a-z0-9:.-]+/gi,"_")}_e(e,t){Array.isArray(e)||(e=e.split("/"));let i,s,n,a=0;e[0]==="help"&&(a=1);let c=e.length-1;for(let h=a,l=e.length;h<l;h++)if(i=this.k(e.slice(a,h+1).join("/")),s=document.getElementById(i),!!s)if(h===c)setTimeout(()=>{let d=this.n.querySelectorAll(".active");for(let f=0,p=d.length;f<p;f++)d[f].classList.remove("active");pe(this.n,s),s.classList.add("active"),t&&s.firstChild.click()},100);else{if(n=s.querySelector(".dropdown-menu"),!n||n.classList.contains("show"))continue;s=s.querySelector("i"),s&&(s.closest("li").querySelector(".dropdown-menu").classList.toggle("show"),s.classList.toggle("bi-chevron-right"),s.classList.toggle("bi-chevron-down"))}}Ne(e){return new Promise((t,i)=>{$.ajax({url:"docs/"+e+".md",cache:!1,type:"GET"}).done(t).fail(i)})}$t(e,t){let i="";t=t||0;let s=t*20+16;if(t++,i+=`<li class="nav-item" title="${e.text}" id="${this.k(e.id)}">`,e.nodes&&e.nodes.length){i+=`<a data-id="help/${e.id}" style="padding-left: ${s}px" class="nav-link text-dark" href="#help/${e.id}"><i class="align-middle float-start bi bi-chevron-right"></i> ${e.text}</a>`,i+='<ul class="dropdown-menu dropdown-inline">';for(let n=0,a=e.nodes.length;n<a;n++)i+=this.$t(e.nodes[n],t);i+="</ul>"}else i+=`<a data-id="help/${e.id}" style="padding-left: ${s}px" class="nav-link text-dark" href="#help/${e.id}"><i class="align-middle float-start no-icon"></i> ${e.text}</a>`;return i+="</li>",i}_t(e){let t=e.querySelectorAll(".bi-chevron-right"),i,s;for(i=0,s=t.length;i<s;i++)t[i].addEventListener("click",n=>{n.target.closest("li").querySelector(".dropdown-menu").classList.toggle("show"),n.target.classList.toggle("bi-chevron-right"),n.target.classList.toggle("bi-chevron-down"),n.preventDefault()})}be(){this.ve||$.ajax({url:"docs/menu.json",cache:!1,type:"GET"}).done(e=>{this.ve=e;let t="";for(let c=0,h=e.length;c<h;c++)t+=this.$t(e[c]);this.n.innerHTML='<ul class="nav" id="help-menu">'+t+"</ul>";let i=this.n.querySelectorAll("a");for(let c=0,h=i.length;c<h;c++)this._t(i[c]),i[c].addEventListener("click",l=>{this.dt(l.currentTarget.dataset.id)});for(var s=[],n=0;n<e.length;n++)if(s.push('<option value="',e[n].id,'">',e[n].text,"</option>"),e[n].nodes&&e[n].nodes.length)for(var a=0;a<e[n].nodes.length;a++)s.push('<option value="',e[n].nodes[a].id,'">&nbsp;&nbsp;&nbsp;&nbsp;',e[n].nodes[a].text,"</option>");this.body.querySelector("#help-jump-menu").innerHTML=s.join("")}).fail(e=>client.error(e))}Ot(){this.t===0||this.ce.length===0?this.body.querySelector("#btn-help-back").disabled=!0:this.body.querySelector("#btn-help-back").disabled=!1,this.t===this.ce.length-1||this.ce.length===0?this.body.querySelector("#btn-help-forward").disabled=!0:this.body.querySelector("#btn-help-forward").disabled=!1,this.body.querySelector("#btn-help-history").disabled=this.ce.length<=1}Dt(e){this.t+=e,this.t<0&&(this.t=0),this.t>=this.ce.length&&(this.t=this.ce.length),this.Ot(),this.body.querySelector("#help-jump-menu").value=this.ce[this.t],D(this.ce[this.t],this.o)}dt(e){this.ce.length!==0&&(this.ce.length=this.t+1),this.ce.push(e),this.t=this.ce.length-1,this.Ot()}ge(e){if(!this.header.querySelector(".breadcrumb")){setTimeout(()=>{this.ge(e)},10);return}if(e<430){if(this.le)return;this.header.querySelector(".breadcrumb").classList.add("breadcrumb-sm"),this.le=!0}else this.le&&(this.header.querySelector(".breadcrumb").classList.remove("breadcrumb-sm"),this.le=!1)}};var ye=class o extends M{constructor(e,t){super();this.Fe=()=>{window.removeEventListener("click",this.Fe),window.removeEventListener("mousedown",this.Tt),window.removeEventListener("keydown",this.Fe),this.n&&this.n.remove()};this.Tt=e=>{this.n.contains(e.srcElement)||this.Fe()};this.Ae=e||[],this.l=t||new Date().getTime(),this.Yt()}Yt(){if(!this.n){let s=`<ul id="${this.l}" class="dropdown-menu show">`;for(var e=0,t=this.Ae.length;e<t;e++)s+=`<li><a class="dropdown-item" data-index="${e}" href="#">${this.Ae[e].name}</a></li>`;s+="</ul>",document.body.insertAdjacentHTML("afterend",s),this.n=document.getElementById(this.l)}let i=this.n.querySelectorAll("li a");for(let s=0,n=i.length;s<n;s++)i[s].addEventListener("click",a=>{let c=+a.currentTarget.dataset.index;typeof this.Ae[c].action=="function"&&this.Ae[c].action(this.Ae[s],a),this.Fe()})}close(){this.Fe()}show(e,t){this.n.style.left=e+"px",this.n.style.top=t+"px",this.n.style.display="block",this.n.style.position="absolute",setTimeout(()=>{window.addEventListener("click",this.Fe),window.addEventListener("mousedown",this.Tt),window.addEventListener("keydown",this.Fe)},100)}static popup(e,t,i){new o(e).show(t,i)}};var w,g,Ae=-1,Ue="",je="",_e="",E;function pt(o){confirm_box("Open?",`Open '${o}'?`).then(r=>{r.button===4&&(window.open(o),client.getOption("CommandonClick")&&client.commandInput.focus())})}function ft(o,r){r.startsWith("OoMUD://")||r.startsWith("jiMUD://")||r.startsWith("client://")?Je(0,o,r.substring(8)):confirm_box("Open?",`Open '${r}'?`).then(e=>{e.button===4&&(window.open(r),client.getOption("CommandonClick")&&client.commandInput.focus())})}function Je(o,r,e,t,i){var s=r.querySelector("img[ismap]"),n="";if(s){var a=Pe(s),c=Math.floor(o.clientX-a.left),h=Math.floor(o.clientY-a.top);n="?"+c+","+h}if(e.constructor===Array||e.__proto__.constructor===Array||Object.prototype.toString.call(e)==="[object Array]"){let f=[];for(var l=0,d=e.length;l<d;l++)e[l]=e[l].replace("&text;",r.textContent),l<i.length?f.push({name:i[l],action:p=>Ge(p.cmd,p.pmt),pmt:t,cmd:e[l]+n}):f.push({name:e[l],action:p=>Ge(p.cmd,p.pmt),pmt:t,cmd:e[l]+n});ye.popup(f,o.clientX,o.clientY)}else t?(e=e.replace("&text;",r.textContent)+n,client.commandInput.value=e,Be(client.commandInput,e.length,e.length)):client.send(e.replace("&text;",r.textContent)+n+`
`,!0);setTimeout(()=>{client.getOption("CommandonClick")&&client.commandInput.focus()},0)}function Ge(o,r){r?(client.commandInput.value=o,Be(client.commandInput,o.length,o.length)):client.send(o,!0),setTimeout(()=>{client.getOption("CommandonClick")&&client.commandInput.focus()},0)}function mt(o){o.title=o.title.replace("&text;",o.textContent)}window.doLink=pt;window.doMXPLink=ft;window.doMXPSend=Je;window.MXPMenuHandler=Ge;window.doMXPTooltip=mt;function gt(){let o;X(0),Ne(),window.readClipboard=()=>te(),window.readClipboardHTML=()=>te(),client.readClipboard=window.readClipboard,client.readClipboardHTML=window.readClipboardHTML,window.writeClipboard=(r,e)=>ee(r),client.writeClipboard=window.writeClipboard,client.closeWindow=r=>{switch(r){case"editor":case"help":case"about":U(r);break;case"profiles":case"profiles-manager":case"profile-manager":case"manager":U("profiles");break;case"prefs":case"options":case"preferences":U("settings");break;case"history":case"command-history":U("history");break;default:client.emit("close-window",r);break}},["repeatnum","i"].forEach(r=>{Object.defineProperty(window,r,{get:function(){if(client)return client.repeatnum},configurable:!0})}),Object.defineProperty(window,"$selected",{get:function(){return client?client.display.selection:""},configurable:!0}),Object.defineProperty(window,"$copied",{get:function(){return""},configurable:!0}),Object.defineProperty(window,"$selword",{get:function(){return client?client.input.vStack.$selword||Ue||(E?client.display.getWordFromPosition(E.pageX,E.pageY):""):""},configurable:!0}),Object.defineProperty(window,"$selurl",{get:function(){if(!client)return"";let r=client.input.vStack.$selurl||je||"";if(r)return r;if(!E)return"";var e=E.srcElement.parentNode;return e&&e.classList&&e.classList.contains("URLLink")?e.title:e&&e.classList&&e.classList.contains("MXPLink")&&e.dataset&&e.dataset.href&&e.dataset.href.length>0?e.dataset.href:""},configurable:!0}),Object.defineProperty(window,"$selline",{get:function(){if(!client)return"";let r=client.input.vStack.$selline||_e||"";if(r)return r;if(!E)return"";var e=client.display.getLineOffset(E.pageX,E.pageY);return e.y<0||e.y>=client.display.lines.length?"":client.display.getLineText(e.y,!0)},configurable:!0}),Object.defineProperty(window,"$selectedword",{get:function(){return client?client.input.vStack.$selectedword||Ue||(E?client.display.getWordFromPosition(E.pageX,E.pageY):""):""},configurable:!0}),Object.defineProperty(window,"$selectedurl",{get:function(){if(!client)return"";let r=client.input.vStack.$selectedurl||je||"";if(r)return r;if(!E)return"";var e=E.srcElement.parentNode;return e&&e.classList&&e.classList.contains("URLLink")?e.title:e&&e.classList&&e.classList.contains("MXPLink")&&e.dataset&&e.dataset.href&&e.dataset.href.length>0?e.dataset.href:""},configurable:!0}),Object.defineProperty(window,"$selectedline",{get:function(){if(!client)return"";let r=client.input.vStack.$selectedline||_e||"";if(r)return r;if(!E)return"";var e=client.display.getLineOffset(E.pageX,E.pageY);return e.y<0||e.y>=client.display.lines.length?"":client.display.getLineText(e.y,!0)},configurable:!0}),Object.defineProperty(window,"$action",{get:function(){return client&&(client.input.vStack.$action||(client.input.lastTriggerExecuted?client.input.lastTriggerExecuted.value:""))||""},configurable:!0}),Object.defineProperty(window,"$trigger",{get:function(){return client&&(client.input.vStack.$trigger||client.input.lastTriggered)||""},configurable:!0}),Object.defineProperty(window,"$caption",{get:function(){return client&&client.input.vStack.$caption||""},configurable:!0}),client.input.on("history-navigate",()=>{(client.getOption("commandAutoSize")||client.getOption("commandScrollbars"))&&H()}),client.on("options-loaded",()=>{if(client.commandInput.removeEventListener("input",H),client.commandInput.removeEventListener("change",H),Xe(),Ke(),(client.getOption("commandAutoSize")||client.getOption("commandScrollbars"))&&H(),g&&(g.resetState(client.getOption("windows.editor")||{center:!0}),w.simple!=client.getOption("simpleEditor"))){let r="";w.isSimple||(r=w.getFormattedText().replace(/(?:\r)/g,"")),w.simple=client.getOption("simpleEditor"),w.isSimple?(w.value=r,g.showFooter(),g.header.querySelector("#adv-editor-switch")&&(g.header.querySelector("#adv-editor-switch").title="Switch to advanced"),setTimeout(()=>w.focus(),100)):(g.hideFooter(),g.header.querySelector("#adv-editor-switch")&&(g.header.querySelector("#adv-editor-switch").title="Switch to simple"))}u.history&&u.history.resetState(client.getOption("windows.history")||{center:!0,width:400,height:275}),u.profiles&&u.profiles.resetState(client.getOption("windows.profiles")||{center:!0,width:400,height:275}),u.help&&u.help.resetState(client.getOption("windows.help")||{center:!0,width:400,height:275})}),client.on("set-title",r=>{!r||!r.length?r=client.defaultTitle:r.indexOf(client.defaultTitle)===-1&&(r+=" - "+client.defaultTitle),client.connecting?r="Connecting - "+r:client.connected?r="Connected - "+r:r="Disconnected - "+r,window.document.title=r}),client.on("connected",()=>X(1)),client.on("closed",()=>X(0)),client.on("received-data",()=>{!client.active&&client.connected&&X(2)}),client.on("focus",()=>{client.connected?X(1):X(0)}),client.on("print",()=>{!client.active&&client.connected&&X(2)}),client.display.on("selection-done",r=>{client.getOption("AutoCopySelectedToClipboard")&&client.display.hasSelection&&(ee(client.display.selection),client.display.clearSelection())}),client.on("profiles-loaded",()=>{wt()}),client.on("notify",(r,e,t)=>{if(!(!client.getOption("enableNotifications")||!("Notification"in window))){switch(t=t||{silent:!0},Object.prototype.hasOwnProperty.call(t,"silent")||(t.silent=!0),Ae){case 1:t.icon=t.icon||"images/connected.png";break;case 2:t.icon=t.icon||"images/connectednonactive.png";break;default:t.icon=t.icon||"images/disconnected.png";break}if(e&&(t.body=e,t.body.length>127&&(t.body=t.body.substr(0,127)+"...")),Notification.permission==="granted"){var i=new window.Notification(r,t);i.onclick=()=>{client.emit("notify-clicked",r,e),client.raise("notify-clicked",[r,e])},i.onclose=()=>{client.emit("notify-closed",r,e),client.raise("notify-closed",[r,e])}}else Notification.permission!=="denied"?Notification.requestPermission().then(s=>{if(s==="granted"){var n=new window.Notification(r,t);n.onclick=()=>{client.emit("notify-clicked",r,e),client.raise("notify-clicked",[r,e])},n.onclose=()=>{client.emit("notify-closed",r,e),client.raise("notify-closed",[r,e])}}else client.echo("Notification permission denied.",-7,-8,!0,!0)}):client.echo("Notification permission denied.",-7,-8,!0,!0)}}),client.on("window",(r,e,t)=>{switch(r){case"editor":case"help":case"about":e==="close"?U(r):F(r);break;case"profiles":case"profiles-manager":case"profile-manager":case"manager":e==="close"?U("profiles"):F("profiles");break;case"prefs":case"options":case"preferences":e==="close"?U("settings"):F("settings");break;case"history":case"command-history":e==="close"?U("history"):F("history");break}}),document.getElementById("btn-adv-editor").addEventListener("click",r=>{F("editor")}),o=client.getOption("windows.editor"),o&&o.show&&document.getElementById("btn-adv-editor").click(),o=client.getOption("windows.history"),o&&o.show&&F("history"),o=client.getOption("windows.profiles"),o&&o.show&&F("profiles"),o=client.getOption("windows.help"),o&&o.show&&F("help"),document.getElementById("btn-command-history").addEventListener("show.bs.dropdown",function(){document.body.appendChild(document.getElementById("command-history-menu"));let r="",e=document.getElementById("command-history-menu"),t=client.commandHistory;for(let s=0,n=t.length;s<n;s++)r+=`<li id="command-history-item-${s}"><a data-index="${s}" class="dropdown-item" href="javascript:void(0)">${t[s]}</a></li>`;t.length&&(r+='<li><hr class="dropdown-divider"></li>',r+='<li><a id="history-clear" class="dropdown-item" href="javascript:void(0)">Clear history</a></li>'),r+='<li><a id="history-show" class="dropdown-item" href="javascript:void(0)">Show history window...</a></li>',e.innerHTML=r,t.length&&e.querySelector("#history-clear").addEventListener("click",()=>{confirm_box("Clear history?","Clear all history").then(s=>{s.button===4&&client.clearCommandHistory()})}),e.querySelector("#history-show").addEventListener("click",()=>F("history"));let i=document.querySelectorAll('[id^="command-history-item"] a');for(let s=0,n=i.length;s<n;s++)i[s].addEventListener("click",a=>{var c=client.commandHistory[parseInt(a.currentTarget.dataset.index,10)];client.AddCommandToHistory(c),client.sendCommand(c,null,client.getOption("allowCommentsFromCommand"))})}),document.getElementById("btn-command-history").addEventListener("hidden.bs.dropdown",function(){document.getElementById("btn-command-history").parentElement.appendChild(document.getElementById("command-history-menu"))}),client.commandInput.removeEventListener("input",H),client.commandInput.removeEventListener("change",H),Xe(),Ke(),(client.getOption("commandAutoSize")||client.getOption("commandScrollbars"))&&H(),window.addEventListener("keydown",r=>{r.which===33?client.display.pageUp():r.which===34&&client.display.pageDown()}),window.addEventListener("error",r=>{let{message:e,filename:t,lineno:i,colno:s,error:n}=r;if(!e.includes("ResizeObserver loop completed with undelivered notifications"))return client?(n?client.error(n):e.startsWith("Uncaught Error: ")?client.error(`${e.substr(16)}`):client.error(`${e}`),client.getOption("enableDebug")&&(client.error("Url: "+t),client.error("Line: "+i),client.error("Column: "+s),client.error(n))):(console.error("Message: "+e),console.error("Url: "+t),console.error("Line: "+i),console.error("Column: "+s),console.error(n)),!0}),window.addEventListener("mousemove",r=>{E=r}),window.addEventListener("hashchange",Ye,!1),window.addEventListener("load",Ye),client.on("command-history-changed",r=>{$e()}),Qe()}function S(o){if(!(!o||o.length===0)){o=o.trim(),o.startsWith("#")&&(o=o.substring(1));var r=decodeURI(window.location.hash.substring(1)).split(",").filter(e=>e.trim()!==o);window.location.hash=r.join(",")}}function rs(o){if(!(!o||o.length===0)){o=o.trim(),o.startsWith("#")&&(o=o.substring(1));var r=decodeURI(window.location.hash.substring(1)).split(",").filter(e=>e.trim()!==o);r.push(o),window.location.hash=r.join(",")}}function D(o,r){Array.isArray(o)||(o=[o]),r=r||[],Array.isArray(r)||(r=[r]),r=r.concat(...o);var e=decodeURI(window.location.hash.substring(1)).split(",").filter(t=>t.length&&!r.includes(t.trim()));e=e.concat(...o),window.location.hash=e.join(",")}function os(o){return!o||!o.length?!1:decodeURI(window.location.hash.substring(1)).split(",").map(r=>r.trim()).indexOf(o)!==-1}function as(o){return!o||!o.length?!1:decodeURI(window.location.hash.substring(1)).split(",").map(r=>r.startsWith(o)).length!==0}function Ye(){if(!(!window.location.hash||window.location.hash.length<2)){var o=decodeURI(window.location.hash.substring(1)).split(",").map(r=>r.trim());for(let r=o.length-1;r>=0;r--)switch(o[r]){case"about":F("about");break;case"editor":document.getElementById("btn-adv-editor").click();break;default:o[r]==="history"||o[r].startsWith("settings")||o[r].startsWith("profiles")||o[r].startsWith("help")?F(o[r]):client.emit("window",o[r]);break}}}var u={};function F(o){switch(o){case"about":return u.about||(u.about=new R({title:'<i class="bi-info-circle"></i> About',width:350,height:400,noFooter:!0,resizable:!1,center:!0,maximizable:!1}),u.about.on("closed",()=>{delete u.about,S(o)}),u.about.on("canceled",()=>{delete u.about,S(o)})),Ve(u.about,o,1,!0).catch(r=>{client.error(r)}),u.about;case"history":if(!u.history){u.history=new R(Object.assign({},client.getOption("windows.history")||{center:!0,width:400,height:275},{title:'<i class="bi bi-clock-history"></i> Command history',id:"command-history"})),u.history.on("closed",()=>{client.setOption("windows.history",u.history.windowState),delete u.history,S(o)}),u.history.on("canceled",()=>{client.setOption("windows.history",u.history.windowState),S("history"),delete u.history,S(o)}),u.history.on("resized",e=>{client.setOption("windows.history",e)}),u.history.on("moved",e=>{client.setOption("windows.history",e)}),u.history.on("maximized",()=>{client.setOption("windows.history",u.history.windowState)}),u.history.on("restored",()=>{client.setOption("windows.history",u.history.windowState)}),u.history.on("shown",()=>{client.setOption("windows.history",u.history.windowState)});let r="";r+=`<button id="${u.history.id}-clear" type="button" class="btn-sm float-end btn btn-danger" title="Clear history"><i class="bi bi-trash"></i><span class="icon-only"> Clear</span></button>`,r+=`<button id="${u.history.id}-send" type="button" class="btn-sm float-end btn btn-primary" title="Send"><i class="bi bi-send-fill"></i><span class="icon-only"> Send</span></button>`,r+=`<button id="${u.history.id}-refresh" type="button" class="btn-sm float-start btn btn-light" title="Refresh"><i class="bi bi-arrow-repeat"></i><span class="icon-only"> Refresh</span></button>`,u.history.footer.innerHTML=r,u.history.body.innerHTML='<select id="history-list" multiple="multiple" class="form-select"></select>',u.history.body.querySelector("#history-list").addEventListener("dblclick",e=>{let t=e.currentTarget.value;client.AddCommandToHistory(t),client.sendCommand(t,!1,client.getOption("allowCommentsFromCommand")),u.history.close()}),u.history.body.querySelector("#history-list").addEventListener("change",e=>{client.setHistoryIndex(e.currentTarget.selectedIndex),u.history.footer.querySelector(`#${u.history.id}-send`).style.display=history.length&&u.history.body.querySelector("#history-list").selectedIndex!==-1?"":"none"}),u.history.footer.querySelector(`#${u.history.id}-refresh`).addEventListener("click",()=>$e()),u.history.footer.querySelector(`#${u.history.id}-send`).addEventListener("click",()=>{let e=u.history.body.querySelector("#history-list"),t=[];for(let i=0,s=e.options.length;i<s;i++)e.options[i].selected&&t.push(e.options[i].value);for(let i=0,s=t.length;i<s;i++)client.AddCommandToHistory(t[i]),client.sendCommand(t[i],!1,client.getOption("allowCommentsFromCommand"))}),u.history.footer.querySelector(`#${u.history.id}-clear`).addEventListener("click",()=>{confirm_box("Clear history?","Clear all history").then(e=>{e.button===4&&client.clearCommandHistory()})})}return $e(),u.history.show(),u.history;case"editor":if(!g){g=new R(Object.assign({},client.getOption("windows.editor")||{center:!0},{title:'<i class="fas fa-edit"></i> Advanced editor',id:"adv-editor"})),g.on("resized",e=>{client.setOption("windows.editor",e)}),g.on("moved",e=>{client.setOption("windows.editor",e)}),g.on("maximized",()=>{client.setOption("windows.editor",g.windowState)}),g.on("restored",()=>{client.setOption("windows.editor",g.windowState)}),g.on("shown",()=>{client.setOption("windows.editor",g.windowState),w.initialize()}),g.on("closing",()=>{w.remove()}),g.on("closed",()=>{client.setOption("windows.editor",g.windowState),S("editor")}),g.on("canceling",()=>{w.remove()}),g.on("canceled",()=>{client.setOption("windows.editor",g.windowState),S("editor")}),g.on("focus",()=>w.focus());let r=document.createElement("textarea");r.classList.add("form-control","form-control-sm"),r.id="adv-editor-txt",g.body.appendChild(r),g.body.style.overflow="hidden",w||(w=new fe(r,!client.getOption("simpleEditor"))),w.on("close",()=>{g.close()}),w.on("editor-init",()=>w.focus()),w.on("click",()=>g.focus()),g.dialog.editor=w,tinymce&&g.header.querySelector("#adv-editor-max").insertAdjacentHTML("afterend",'<button type="button" class="btn btn-light float-end" id="adv-editor-switch" title="Switch to advanced" style="padding: 0 4px;margin-top: -1px;"><i class="bi-shuffle"></i></button>'),g.footer.innerHTML='<button id="btn-adv-editor-clear" type="button" class="btn-sm float-start btn btn-light" title="Clear editor"><i class="bi bi-journal-x"></i><span class="icon-only"> Clear</span></button><button id="btn-adv-editor-append" type="button" class="btn-sm float-start btn btn-light" title="Append file..."><i class="bi bi-box-arrow-in-down"></i><span class="icon-only"> Append file...</span></button><button id="btn-adv-editor-send" type="button" class="btn-sm float-end btn btn-primary" title="Send"><i class="bi bi-send-fill"></i><span class="icon-only"> Send</span></button>',g.header.querySelector("#adv-editor-switch")&&(w.isSimple||(g.header.querySelector("#adv-editor-switch").title="Switch to simple"),g.header.querySelector("#adv-editor-switch").addEventListener("click",()=>{client.setOption("simpleEditor",!w.simple);let e="";w.isSimple||(e=w.getFormattedText().replace(/(?:\r)/g,"")),w.simple=!w.simple,w.isSimple?(w.value=e,g.showFooter(),g.header.querySelector("#adv-editor-switch").title="Switch to advanced",setTimeout(()=>w.focus(),100)):(g.hideFooter(),g.header.querySelector("#adv-editor-switch").title="Switch to simple")})),document.getElementById("btn-adv-editor-append").addEventListener("click",()=>{q("Append file",!1).then(e=>{z(e[0]).then(t=>{w.insert(t)}).catch(client.error)}).catch(()=>{})}),document.getElementById("btn-adv-editor-send").addEventListener("click",()=>{client.sendCommand(w.value()),client.getOption("editorClearOnSend")&&w.clear(),client.getOption("editorCloseOnSend")&&g.close()}),document.getElementById("btn-adv-editor-clear").addEventListener("click",()=>{w.clear(),w.focus()}),w.isSimple||g.hideFooter()}return g.show(),w.isSimple&&w.focus(),g}if(o.startsWith("settings"))return u.settings||(u.settings=new me,u.settings.on("closed",()=>{delete u.settings}),u.settings.on("canceled",()=>{delete u.settings})),o==="settings"?(u.settings.dialog.dataset.path=o,u.settings.dialog.dataset.fullPath=o,u.settings.dialog.dataset.hash=window.location.hash,u.settings.setBody("",{client}),u.settings.showModal()):Ve(u.settings,o,2,!1).catch(r=>{client.error(r)}),u.settings;if(o.startsWith("profiles"))return u.profiles||(u.profiles=new ge,u.profiles.on("closed",()=>{delete u.profiles}),u.profiles.on("canceled",()=>{delete u.profiles})),u.profiles.dialog.dataset.path=o,u.profiles.dialog.dataset.fullPath=o,u.profiles.dialog.dataset.hash=window.location.hash,u.profiles.setBody("",{client}),u.profiles.show(),u.profiles;if(o.startsWith("help")){if(u.help||(u.help=new be,u.help.on("closed",()=>{delete u.help}),u.help.on("canceled",()=>{delete u.help})),o!==window.location.hash.substring(1)){let r=decodeURI(window.location.hash.substring(1)).split(",").map(e=>e.trim());for(let e=0,t=r.length;e<t;e++)if(r[e].startsWith("help")){o=r[e];break}}return u.help.dialog.dataset.path=o,u.help.dialog.dataset.fullPath=o,u.help.dialog.dataset.hash=window.location.hash,u.help.setBody("",!0),u.help.show(),u.help}}function Ve(o,r,e,t){return new Promise((i,s)=>{let n=r.split("/");$.ajax({url:"dialogs/"+n[0]+".htm",cache:!1,type:"GET"}).done(function(a){o.dialog.dataset.path=n[0],o.dialog.dataset.fullPath=r,o.dialog.dataset.hash=window.location.hash,o.setBody(a,{client}),e==1?o.show():e===2&&o.showModal(),i(a)}).fail(function(a){t&&client.enableDebug?o.setBody(`<h1 style="width: 100%;text-align:center">Error loading ${r}</h1> ${a.statusText}`):t?o.setBody(`<h1 style="width: 100%;text-align:center">Error loading ${r}</h1>`):o.setBody(""),s(r+": "+n.statusText)})})}function U(o){u[o]?u[o].close():o==="editor"&&g&&g.close()}function $e(){if(!u.history)return;let o=document.getElementById("history-list");o.innerHTML="";let r=client.commandHistory,e=document.createDocumentFragment();for(let t=0,i=r.length;t<i;t++){let s=document.createElement("option");s.appendChild(document.createTextNode(r[t])),s.value=r[t],e.append(s)}o.appendChild(e),u.history.footer.querySelector(`#${u.history.id}-clear`).style.display=r.length?"":"none",u.history.footer.querySelector(`#${u.history.id}-send`).style.display=r.length&&o.selectedIndex!==-1?"":"none"}function H(){A(()=>{bt()},250,"resizeCommand")}async function Xe(){(client.getOption("commandAutoSize")||client.getOption("commandScrollbars"))&&(client.commandInput.addEventListener("input",H),client.commandInput.addEventListener("change",H)),client.getOption("commandWordWrap")?(document.getElementById("commandMeasure").style.whiteSpace="pre-wrap",document.getElementById("commandMeasure").style.overflowWrap="anywhere"):(document.getElementById("commandMeasure").style.whiteSpace="",document.getElementById("commandMeasure").style.overflowWrap=""),client.getOption("commandScrollbars")?(document.getElementById("commandMeasure").style.overflow="auto",client.commandInput.style.overflow="auto"):(document.getElementById("commandMeasure").style.overflow="",client.commandInput.style.overflow="")}var oe={};function Ke(){let o=document.getElementById("commandMeasure");document.body.appendChild(o);let r=client.commandInput.parentElement,e=window.getComputedStyle(r);o.style.fontSize=client.commandInput.style.fontSize,o.style.fontFamily=client.commandInput.style.fontFamily,o.style.width=client.commandInput.offsetWidth+"px";let t=o.innerHTML;o.innerHTML="W";let i=client.getOption("commandMinLines"),s=o.offsetHeight;i=s*(i<1?1:i);let n=parseFloat(e.borderTopWidth)||0;n+=parseFloat(e.borderBottomWidth)||0,n+=parseFloat(e.paddingTop)||0,n+=parseFloat(e.paddingBottom)||0;let a=e.inset.split(" ");n+=(parseFloat(a[0])||0)*2,o.innerHTML=t,r.style.height=s+n+"px",client.commandInput.parentElement.style.height=s+"px",client.commandInput.closest("nav").style.height=s+"px",client.display.container.style.bottom=s+n+"px",oe={measure:o,cmd:r,cmdSize:e,height:s,padding:n,minHeight:i}}function bt(){let o=oe.measure,r=oe.cmd;o.innerHTML=client.commandInput.value+`
`;let e=o.offsetHeight;e<oe.minHeight&&(e=oe.minHeight);let t=oe.padding;r.style.height=e+t+"px",client.commandInput.parentElement.style.height=e+"px",client.commandInput.closest("nav").style.height=e+"px",client.display.container.style.bottom=e+t+"px"}function X(o){if(Ae===o)return;Ae=o;let r="disconnected";switch(o){case 1:r="connected";break;case 2:r="connectednonactive";break}document.getElementById("icon1").remove(),document.getElementById("icon2").remove(),document.getElementById("icon3").remove(),document.querySelector("head").insertAdjacentHTML("afterbegin",`<link id="icon1" rel="shortcut icon" href="images/${r}.ico" /><link id="icon2" rel="icon" href="images/${r}.ico" /><link id="icon3" rel="icon" type="image/x-icon" href="images/${r}.png" />`)}function Ie(){client.setOption("showButtons",!client.getOption("showButtons")),Qe()}function yt(o,r){var e="",t="",i=o.caption,s=0;if(i.substring(0,3)==="fa-"?(i=i.split(","),i.length>1?i='<i class="fas '+i[0]+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="fas '+i[0]+' fa-fw"></i>',s=26):i.substring(0,4)==="fas-"?(i=i.split(","),i.length>1?i='<i class="fas fa-'+i[0].substring(4)+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="fas fa-'+i[0].substring(4)+' fa-fw"></i>',s=26):i.substring(0,4)==="far-"?(i=i.split(","),i.length>1?i='<i class="far fa-'+i[0].substring(4)+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="far fa-'+i[0].substring(4)+' fa-fw"></i>',s=26):i.substring(0,4)==="fab-"?(i=i.split(","),i.length>1?i='<i class="fab fa-'+i[0].substring(4)+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="fab fa-'+i[0].substring(4)+' fa-fw"></i>',s=26):i.substring(0,4)==="fal-"?(i=i.split(","),i.length>1?i='<i class="fal fa-'+i[0].substring(4)+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="fal fa-'+i[0].substring(4)+' fa-fw"></i>',s=26):i.substring(0,4)==="fat-"?(i=i.split(","),i.length>1?i='<i class="fat fa-'+i[0].substring(4)+' fa-fw" data-fa-transform="'+i[1]+'"></i>':i='<i class="fat fa-'+i[0].substring(4)+' fa-fw"></i>',s=26):i.substring(0,3)==="bi-"?(i='<i class="bi '+i+'"></i>',s=26):i.substring(0,7)==="http://"||i.substring(0,7)==="https://"?i='<img src="'+i+'" style="max-width: '+o.width+"px;max-height:"+o.height+'px"/>':(o.iconOnly||(i=o.caption),t=o.caption),o.icon&&o.icon.length){var n=o.icon;n.substring(0,3)==="fa-"?(n=n.split(","),n.length>1?n='<i class="fas '+n[0]+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="fas '+n[0]+' fa-fw"></i>',s=26):n.substring(0,4)==="fas-"?(n=n.split(","),n.length>1?n='<i class="fas fa-'+n[0].substring(4)+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="fas fa-'+n[0].substring(4)+' fa-fw"></i>',s=26):n.substring(0,4)==="far-"?(n=n.split(","),n.length>1?n='<i class="far fa-'+n[0].substring(4)+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="far fa-'+n[0].substring(4)+' fa-fw"></i>',s=26):n.substring(0,4)==="fab-"?(n=n.split(","),n.length>1?n='<i class="fab fa-'+n[0].substring(4)+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="fab fa-'+n[0].substring(4)+' fa-fw"></i>',s=26):n.substring(0,4)==="fal-"?(n=n.split(","),n.length>1?n='<i class="fal fa-'+n[0].substring(4)+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="fal fa-'+n[0].substring(4)+' fa-fw"></i>',s=26):n.substring(0,4)==="falt-"?(n=n.split(","),n.length>1?n='<i class="fat fa-'+n[0].substring(4)+' fa-fw" data-fa-transform="'+n[1]+'"></i>':n='<i class="fat fa-'+n[0].substring(4)+' fa-fw"></i>',s=26):n.substring(0,3)==="bi-"?(n='<i class="bi '+n[0]+'"></i>',s=26):o.icon.length&&(n='<img src="'+n+'" style="max-width: '+o.width+"px;max-height:"+o.height+'px"/>'),o.iconOnly?i=n:i=n+i}return e+="<button",e+=' data-index="'+r+'"',o.name&&o.name.length!==0&&(e+=' id="button-'+o.name+'"'),e+=' class="user-button" style="',o.left===-1&&o.right===-1&&o.top===-1&&o.bottom===-1?e+="position: static;margin-right:2px;margin-top:2px;":(o.left>=0&&(e+="left:"+(o.left||0)+"px;"),o.top>=0&&(e+="top:"+(o.top||0)+"px;"),o.bottom>=0&&(e+="bottom:"+(o.bottom||0)+"px;"),o.right>=0&&(e+="right:"+(o.right||0)+"px;"),o.right===-1&&o.left===-1&&(e+="right:0px;"),o.bottom===-1&&o.top===-1&&(e+="top:0px;")),o.width?e+="width: "+o.width+"px;":s===26&&(e+="min-width: 26px;"),o.height&&(e+="height: "+o.height+"px;"),e+='" title="'+t+'" draggable="true" data-index="'+r+'">'+i+"</button>",e}function Qe(){client.getOption("showButtons")?document.getElementById("buttons").style.visibility="visible":document.getElementById("buttons").style.visibility=""}function wt(){var o="",r=client.buttons,e,t;for(e=0,t=r.length;e<t;e++)r[e].enabled&&(o+=yt(r[e],e));document.getElementById("buttons").innerHTML=o;let i=document.querySelectorAll("#buttons button");for(let s=0,n=i.length;s<n;s++)i[s].addEventListener("click",a=>{vt(a.currentTarget,+a.currentTarget.dataset.index)}),kt(i[s])}function vt(o,r){if(r<0)return!1;if(o.dataset.moving==="true"){delete o.dataset.moving;return}var e=client.buttons;if(r>=e.length)return!1;var t=e[r];if(!t.enabled)return!1;var i;switch(t.style){case 1:i=client.parseOutgoing(t.value);break;case 2:var s=new Function("try { "+t.value+"} catch (e) { if(this.options.showScriptErrors) this.error(e);}");i=s.apply(client);break;default:i=t.value;break}if(i===null||typeof i>"u")return!0;if(t.send){if(i.endsWith(`
`)||(i+=`
`),t.chain&&client.commandInput.value.endsWith(" "))return client.commandInput.value+=i,client.sendCommand(),!0;client.connected&&client.send(i),client.telnet.echo&&client.getOption("commandEcho")&&client.echo(i)}else t.append&&(client.commandInput.value+=i);return!0}function kt(o){var r=0,e=0,t;document.getElementById(o.id+"header")?document.getElementById(o.id+"header").onmousedown=i:(o.onmousedown=i,o.ontouchstart=a,o.onmouseleave=s);function i(l){if(l=l||window.event,l.buttons===1){l.preventDefault();var d=o.getBoundingClientRect();r=l.pageX-d.left,e=l.pageY-d.top,document.onmouseup=h,t=setTimeout(function(){document.onmousemove=n,t=null},500)}}function s(){t&&h()}function n(l){l=l||window.event,l.preventDefault(),o.style.position="absolute",o.style.top=l.pageY-e+"px",o.style.left=l.pageX-document.body.clientWidth-r+"px",o.dataset.moving="true"}function a(l){if(l=l||window.event,!!l.touches.length){var d=o.getBoundingClientRect();r=l.touches[0].pageX-d.left,e=l.touches[0].pageY-d.top,document.ontouchend=h,t=setTimeout(function(){document.ontouchmove=c,t=null},500)}}function c(l){l=l||window.event,l.preventDefault(),o.style.position="absolute",l.touches.length&&(o.style.top=l.touches[0].pageY-e+"px",o.style.left=l.touches[0].pageX-document.body.clientWidth-r+"px",o.dataset.moving="true")}function h(){var l=o.getBoundingClientRect(),d=parseInt(o.dataset.index,10);if(!(d<0)){var f=client.buttons;if(!(d>=f.length)){var p=f[d];p.enabled&&(p.left===-1&&p.right===-1&&p.top===-1&&p.bottom===-1?(p.top=l.top||-1,p.right=document.body.clientWidth-l.right||-1):(p.left>=0&&(p.left=document.body.clientWidth-l.left||-1),p.top>=0&&(p.top=l.top||-1),p.bottom>=0&&(p.bottom=l.bottom||-1),p.right>=0&&(p.right=document.body.clientWidth-l.right||-1),p.right===-1&&p.left===-1&&(p.right=document.body.clientWidth-l.right||-1),p.bottom===-1&&p.top===-1&&(p.top=l.top||-1)),document.onmouseup=null,document.onmousemove=null,document.ontouchend=null,document.ontouchmove=null,clearTimeout(t),client.saveProfiles())}}}}function ze(){document.querySelectorAll(".dropdown-menu.show,.dropdown-toggle.show").forEach(o=>{o.classList.remove("show"),o.ariaExpanded==="true"&&(o.ariaExpanded="false")})}window.initializeInterface=gt;})();
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * @link   http://www.phpied.com/rgb-color-parser-in-javascript/
 * @license Use it if you like it
 */
//# sourceMappingURL=oiMUD.interface.min.js.map
