{
  "version": 3,
  "sources": ["../src/interface/menu.ts", "../src/events.ts", "../src/library.ts", "../src/interface/dialog.ts", "../src/lib/rgbcolor.js", "../src/interface/adv.editor.ts", "../src/settings.ts", "../src/interface/settingsdialog.ts", "../src/interface/splitter.ts", "../src/profile.ts", "../src/interface/profilesdialog.ts", "../src/interface/interface.ts"],
  "sourcesContent": ["declare let client;\ndeclare let bootstrap;\n\nimport { showDialog, toggleButtons } from \"./interface\";\n\nexport function closeMenu() {\n    const instance = bootstrap.Offcanvas.getInstance(document.getElementById('clientMenu'));\n    if (!instance) return\n    instance.hide();\n}\n\nexport function showMenu() {\n    bootstrap.Offcanvas.getOrCreateInstance(document.getElementById('clientMenu')).show();\n}\n\nexport function initMenu() {\n    document.getElementById('btn-menu').addEventListener('click', showMenu);\n    client.on('connected', () => {\n        let el = document.getElementById('menu-connect');\n        let text = document.querySelector('#menu-connect a span');\n        let icon = document.querySelector('#menu-connect svg') || document.querySelector('#menu-connect i');\n        el.title = 'Disconnect';\n        el.classList.add('active');\n        text.textContent = 'Disconnect';\n        icon.classList.add('fa-plug-circle-xmark');\n        icon.classList.remove('fa-plug');\n    });\n    client.on('closed', () => {\n        let el = document.getElementById('menu-connect');\n        let text = document.querySelector('#menu-connect a span');\n        let icon = document.querySelector('#menu-connect svg') || document.querySelector('#menu-connect i');\n        el.title = 'Connect';\n        el.classList.remove('active');\n        text.textContent = 'Connect';\n        icon.classList.remove('fa-plug-circle-xmark');\n        icon.classList.add('fa-plug');\n    })\n    client.on('scroll-lock', updateScrollLock);\n    document.querySelector('#menu-connect a').addEventListener('click', e => {\n        if (client.connected)\n            client.close();\n        else {\n            client.connect();\n            closeMenu();\n        }\n    });\n    document.querySelector('#menu-clear a').addEventListener('click', e => {\n        client.clear();\n        closeMenu()\n    });\n    document.querySelector('#menu-lock a').addEventListener('click', e => {\n        client.toggleScrollLock();\n        closeMenu();\n    });\n    document.querySelector('#menu-editor a').addEventListener('click', e => {\n        closeMenu();\n        document.getElementById('btn-adv-editor').click();\n    });\n    document.querySelector('#menu-about a').addEventListener('click', e => {\n        showDialog('about');\n        closeMenu();\n    });\n    document.querySelector('#menu-settings a').addEventListener('click', e => {\n        showDialog('settings');\n        closeMenu();\n    });\n    document.querySelector('#menu-profiles a').addEventListener('click', e => {\n        showDialog('profiles');\n        closeMenu();\n    });\n    document.querySelector('#menu-fullscreen a').addEventListener('click', e => {\n        var doc: any = window.document;\n        var docEl: any = doc.documentElement;\n\n        var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;\n        var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;\n        let el = document.getElementById('menu-fullscreen');\n        let icon = document.querySelector('#menu-fullscreen svg') || document.querySelector('#menu-fullscreen i');\n        let text = document.querySelector('#menu-fullscreen a span');\n        if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {\n            el.title = 'Exit fullscreen';\n            text.textContent = 'Exit fullscreen';\n            requestFullScreen.call(docEl);\n            icon.classList.add('fa-minimize');\n            icon.classList.remove('fa-maximize');\n        }\n        else {\n            el.title = 'Enter fullscreen';\n            text.textContent = 'Enter fullscreen';\n            cancelFullScreen.call(doc);\n            icon.classList.add('fa-maximize');\n            icon.classList.remove('fa-minimize');\n        }\n        closeMenu();\n    });\n    document.querySelector('#menu-buttons a').addEventListener('click', e => {\n        toggleButtons();\n        let button = document.querySelector('#menu-buttons') as HTMLElement;\n        if (client.getOption('showButtons')) {\n            button.title = 'Hide buttons';\n            button.classList.add('active');\n            document.querySelector('#menu-buttons a span').textContent = 'Hide buttons';\n        }\n        else {\n            button.title = 'Show buttons';\n            button.classList.remove('active');\n            document.querySelector('#menu-buttons a span').textContent = 'Show buttons';\n        }\n        closeMenu();\n    });\n    updateScrollLock();\n\n    let pl = client.plugins.length;\n    let s;\n    let sl;\n    const list = document.querySelector('#clientMenu ul')\n    for (let p = 0; p < pl; p++) {\n        if (!client.plugins[p].settings) continue;\n        if (client.plugins[p].settings.length) {\n            sl = client.plugins[p].settings.length;\n            for (s = 0; s < sl; s++) {\n                let item = client.plugins[p].settings[s];\n                let code;\n                let id = 'menu-' + (item.name || '').toLowerCase().replace(/ /g, '-');\n                if (item.name === '-')\n                    code = '<li><hr class=\"dropdown-divider\"></li>';\n                else if (typeof item.action === 'string')\n                    code = `<li id=\"menu-${id}\" class=\"nav-item\" title=\"${item.name || ''}\"><a class=\"nav-link\" href=\"#${item.action}\">${item.icon || ''}${item.name || ''}</i><span>${item.name || ''}</span></a></li>`;\n                else\n                    code = `<li id=\"menu-${id}\" class=\"nav-item\" title=\"${item.name || ''}\"><a class=\"nav-link\" href=\"javascript:void(0)\">${item.icon || ''}${item.name || ''}<span>${item.name || ''}</span></a></li>`;\n                if ('position' in item) {\n                    if (typeof item.position === 'string') {\n                        if (list.querySelector(item.position)) {\n                            list.querySelector(item.position).insertAdjacentHTML('afterend', code);\n                            continue;\n                        }\n                    }\n                    else if (item.position >= 0 && item.position < list.children.length) {\n                        list.children[item.position].insertAdjacentHTML('afterend', code);\n                        continue;\n                    }\n                }\n                list.insertAdjacentHTML('beforeend', code);\n                if (item.name === '-') continue;\n                if (typeof item.action === 'function')\n                    document.querySelector(`#${id} a`).addEventListener('click', e => {\n                        const ie = { client: client, preventDefault: false };\n                        item.action(ie);\n                        if (ie.preventDefault) return;\n                        closeMenu();\n                    });\n            }\n        }\n    }\n    let button = document.querySelector('#menu-buttons') as HTMLElement;\n    if (client.getOption('showButtons')) {\n        button.title = 'Hide buttons';\n        button.classList.add('active');\n        document.querySelector('#menu-buttons a span').textContent = 'Hide buttons';\n    }\n    else {\n        button.title = 'Show buttons';\n        button.classList.remove('active');\n        document.querySelector('#menu-buttons a span').textContent = 'Show buttons';\n    }\n}\n\nfunction updateScrollLock() {\n    let el = document.getElementById('menu-lock');\n    let text = document.querySelector('#menu-lock a span');\n    let icon = document.querySelector('#menu-lock svg') || document.querySelector('#menu-lock i');\n    if (client.scrollLock) {\n        el.title = 'Unlock display';\n        el.classList.add('active');\n        text.textContent = 'Unlock display';\n        icon.classList.add('fa-unlock');\n        icon.classList.remove('fa-lock');\n    }\n    else {\n        el.title = 'Lock display';\n        el.classList.remove('active');\n        text.textContent = 'Lock display';\n        icon.classList.remove('fa-unlock');\n        icon.classList.add('fa-lock');\n    }\n}", "/**\r\n * A custom event emitter that will work in browsers or nodejs\r\n * Contains naming conventions from all standard formats\r\n */\r\nexport class EventEmitter {\r\n    #events = {};\r\n\r\n    public bind(type: string, listener: Function, caller?) {\r\n        if (!Array.isArray(this.#events[type]) || typeof this.#events[type] === 'undefined')\r\n            this.#events[type] = [];\r\n        this.#events[type].push({ listener: listener, caller: caller });\r\n    }\r\n\r\n    public on(type: string, listener: Function, caller?) {\r\n        this.bind(type, listener, caller);\r\n    }\r\n\r\n    public addEventListener(type: string, listener: Function, caller?) {\r\n        this.bind(type, listener, caller);\r\n    }\r\n\r\n    public fire(type, args?, caller?) {\r\n        if (!type || typeof type !== 'string')\r\n            throw new Error('Event missing.');\r\n        if (!Array.isArray(this.#events[type])) return;\r\n        if (!args || args === null || typeof args === 'undefined')\r\n            args = [];\r\n        else if (!Array.isArray(args))\r\n            args = [args];\r\n\r\n        caller = caller || this;\r\n        var events = this.#events[type];\r\n        for (var i = 0, len = events.length; i < len; i++) {\r\n            events[i].listener.apply(events[i].caller || caller, args);\r\n        }\r\n    }\r\n\r\n    public emit(type, ...args) {\r\n        this.fire(type, args);\r\n    }\r\n\r\n    public dispatchEvent(type: string, args?, caller?) {\r\n        this.fire(type, args, caller);\r\n    }\r\n\r\n    public unbind(type, listener) {\r\n        if (!type || !listener) return;\r\n        if (!Array.isArray(this.#events[type])) return;\r\n        const events = this.#events[type];\r\n        for (let i = events.length - 1; i >= 0; i--) {\r\n            if (events[i].listener === listener) {\r\n                events.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public remove(type, listener) {\r\n        this.unbind(type, listener);\r\n    }\r\n\r\n    public off(type, listener) {\r\n        this.unbind(type, listener);\r\n    }\r\n\r\n    public removeListener(type, listener) {\r\n        this.unbind(type, listener);\r\n    }\r\n\r\n    public removeAllListeners(type?) {\r\n        if (!type) {\r\n            this.#events = [];\r\n            return;\r\n        }\r\n        if (!Array.isArray(this.#events[type])) return;\r\n        delete this.#events[type];\r\n    }\r\n\r\n    public removeListenersFromCaller(caller, type?) {\r\n        if (!type) {\r\n            Object.keys(this.#events).forEach(key => {\r\n                const events = this.#events[key];\r\n                for (let i = events.length - 1; i >= 0; i--) {\r\n                    if (events[i].caller === caller) {\r\n                        events.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        if (!Array.isArray(this.#events[type])) return;\r\n        const events = this.#events[type];\r\n        for (let i = 0, len = events.length; i < len; i++) {\r\n            if (events[i].caller === caller) {\r\n                events.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public listeners(type?) {\r\n        if (!type) return this.#events;\r\n        return this.#events[type] || [];\r\n    }\r\n}", "/**\n * @file Core functions and helpers\n *\n * @author William\n */\n//spell-checker:ignore Eisu, Junja, Hanja, Nonconvert, Modechange, printscreen, jisho, Masshou, Touroku, loya, roya\n//spell-checker:ignore Wsctrl, Cusel, Enlw, Backtab, Crsel, Exsel, Ereof rtrim ltrim Dropdown DBLUNDERLINE noflash\ndeclare global {\n    interface String {\n        trimLeft(): string;\n        trimRight(): string;\n        rtrim(): string;\n        addSlashes(): string;\n    }\n\n    interface Uint8Array {\n        charAt;\n        charCodeAt;\n    }\n\n    interface Object {\n        toType;\n    }\n}\n\n/**\n * Copyright (c) Mozilla Foundation http://www.mozilla.org/\n * This code is available under the terms of the MIT License\n */\nif (!Array.prototype.filter) {\n    Array.prototype.filter = function (fun /*, thisp*/) {\n        var len = this.length >>> 0;\n        if (typeof fun != 'function') {\n            throw new TypeError();\n        } ``\n\n        var res = [];\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++) {\n            if (i in this) {\n                var val = this[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, this)) {\n                    res.push(val);\n                }\n            }\n        }\n\n        return res;\n    };\n}\n\nexport function SortArrayByPriority(a, b) {\n    if (a.priority > b.priority)\n        return -1;\n    if (a.priority < b.priority)\n        return 1;\n    return 0;\n}\n\nexport function SortMapByPriority(a, b) {\n    if (a.priority > b.priority)\n        return -1;\n    if (a.priority < b.priority)\n        return 1;\n    if (a.index < b.index)\n        return -1;\n    if (a.index > b.index)\n        return 1;\n    return 0;\n}\n\nexport function SortItemArrayByPriority(list) {\n    const map = list.map((el, i) => {\n        return { index: i, priority: el.priority };\n    });\n    map.sort(SortMapByPriority);\n    return map.map((el) => {\n        return list[el.index];\n    });\n}\n\nexport function FilterArrayByKeyValue(array, k, v) {\n    const res = [];\n    if (!array || array.length === 0) return res;\n    const al = array.length;\n    for (let i = 0; i < al; i++) {\n        if (array[i]['enabled'] && array[i][k] === v)\n            res.push(array[i]);\n    }\n    if (res.length <= 1) return res;\n    return res.sort(SortArrayByPriority);\n}\n\nconst _edCache = document.createElement('div');\n\nexport function htmlEncode2(value) {\n    _edCache.textContent = value.replace(/ /g, '\\u00A0');\n    return _edCache.innerHTML;\n}\n\nexport function htmlDecode2(value) {\n    _edCache.innerHTML = value;\n    return _edCache.textContent.replace(/\\u00A0/g, ' ');\n}\n\nexport function htmlEncode(value) {\n    _edCache.textContent = value;\n    return _edCache.innerHTML;\n}\n\nexport function htmlDecode(value) {\n    _edCache.innerHTML = value;\n    return _edCache.textContent;\n}\n\nexport function htmlEntities(str) {\n    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\nexport function stripHTML(html) {\n    _edCache.innerHTML = html;\n    return _edCache.textContent || _edCache.innerText || '';\n}\n\nexport function stripParentheses(str) {\n    return str.replace(/(^\\()|(\\)$)/g, '');\n}\n\nexport function stripQuotes(str) {\n    str = str.replace(/^\"(.+(?=\"$))?\"$/, '$1');\n    str = str.replace(/^'(.+(?='$))?'$/, '$1');\n    return str;\n}\n\nexport function offset(el) {\n    const box = el.getBoundingClientRect();\n    const docElem = document.documentElement;\n    return {\n        top: box.top + window.pageYOffset - docElem.clientTop,\n        left: box.left + window.pageXOffset - docElem.clientLeft\n    };\n}\n\nexport class StringBuffer {\n    public buffer: string[];\n    //public rawbuffer: string[];\n    public length: number = 0;\n    constructor(str?: string) {\n        if (typeof str == 'string' && str.length > 0)\n            this.buffer = [str];\n        else\n            this.buffer = [];\n        //this.rawbuffer = [];\n        this.length = 0;\n    }\n\n    public prepend(string) {\n        this.buffer.unshift(string);\n        //this.rawbuffer.unshift(string.charCodeAt(0));\n        this.length += string.length;\n        return this;\n    }\n\n    public append(string) {\n        this.buffer.push(string);\n        this.length += string.length;\n        //this.rawbuffer.push(string.charCodeAt(0));\n        return this;\n    }\n\n    public push(string) {\n        if (typeof string === 'number')\n            this.appendCode(string);\n        else\n            this.append(string);\n    }\n\n    public appendCode(b) {\n        this.buffer.push(String.fromCharCode(b));\n        //this.rawbuffer.push(b);\n        this.length++;\n        return this;\n    }\n\n    public toString() {\n        return this.buffer.join('');\n    }\n\n    public clear(str?) {\n        this.buffer = [];\n        //this.rawbuffer = [];\n        this.length = 0;\n        if (str && typeof str != 'undefined' && str.length) {\n            this.buffer.push(str);\n            this.length = str.length;\n        }\n        return this;\n    }\n\n    public concat(arr) {\n        this.buffer = this.buffer.concat(arr);\n        //this.rawbuffer.push(arr.charCodeAt(0));\n    }\n\n}\n\nexport function CharAllowedInURL(chr, proto) {\n    if (chr.length > 1)\n        return false;\n    if (\n        chr === '-' ||\n        chr === '_' ||\n        chr === '.' ||\n        chr === '~' ||\n        chr === '!' ||\n        chr === '*' ||\n        chr === '\\'' ||\n        chr === ';' ||\n        chr === ':' ||\n        chr === '@' ||\n        chr === '&' ||\n        chr === '=' ||\n        chr === '+' ||\n        chr === '$' ||\n        chr === ',' ||\n        chr === '/' ||\n        chr === '\\\\' ||\n        chr === '?' ||\n        chr === '%' ||\n        chr === '#' ||\n        chr === '[' ||\n        chr === ']' ||\n        chr === '(' ||\n        chr === ')'\n    )\n        return !proto;\n    const i = chr.charCodeAt(0);\n    if (i > 64 && i < 91)\n        return true;\n    if (i > 96 && i < 123)\n        return true;\n    if (i > 47 && i < 58)\n        return true;\n    if (i >= 160 && i <= 55295)\n        return true;\n    if (i >= 57344 && i <= 64975)\n        return true;\n    if (i >= 65008 && i <= 65533)\n        return true;\n    if (i >= 65536 && i <= 131069)\n        return true;\n    if (i >= 131072 && i <= 196605)\n        return true;\n    if (i >= 196608 && i <= 262141)\n        return true;\n    if (i >= 262144 && i <= 327677)\n        return true;\n    if (i >= 327680 && i <= 393213)\n        return true;\n    if (i >= 393216 && i <= 458749)\n        return true;\n    if (i >= 458752 && i <= 524285)\n        return true;\n    if (i >= 524288 && i <= 589821)\n        return true;\n    if (i >= 589824 && i <= 655357)\n        return true;\n    if (i >= 655360 && i <= 720893)\n        return true;\n    if (i >= 720896 && i <= 786429)\n        return true;\n    if (i >= 786432 && i <= 851965)\n        return true;\n    if (i >= 851968 && i <= 917501)\n        return true;\n    if (i >= 921600 && i <= 983037)\n        return true;\n    if (i >= 983040 && i <= 1048573)\n        return true;\n    if (i >= 1048576 && i <= 1114109)\n        return true;\n    return false;\n}\n\nexport let keyCodeToChar = {\n    3: 'Cancel',\n    6: 'Help',\n    8: 'Backspace',\n    9: 'Tab',\n    19: 'Pause/Break',\n    20: 'Caps Lock',\n    21: 'Kana',\n    22: 'Eisu',\n    23: 'Junja',\n    24: 'Final',\n    25: 'Hanja',\n    27: 'Esc',\n    28: 'Convert',\n    29: 'Nonconvert',\n    30: 'Accept',\n    31: 'Modechange',\n    32: 'Space',\n    33: 'Page Up',\n    34: 'Page Down',\n    35: 'End',\n    36: 'Home',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    41: 'Select',\n    42: 'Print',\n    43: 'Execute',\n    44: 'Printscreen',\n    45: 'Insert',\n    46: 'Delete',\n    48: '0',\n    49: '1',\n    50: '2',\n    51: '3',\n    52: '4',\n    53: '5',\n    54: '6',\n    55: '7',\n    56: '8',\n    57: '9',\n    58: 'Colon',\n    59: 'Semicolon',\n    60: 'Less Than',\n    61: 'Equals2',\n    62: 'Greater Than',\n    63: 'Question Mark',\n    65: 'A',\n    66: 'B',\n    67: 'C',\n    68: 'D',\n    69: 'E',\n    70: 'F',\n    71: 'G',\n    72: 'H',\n    73: 'I',\n    74: 'J',\n    75: 'K',\n    76: 'L',\n    77: 'M',\n    78: 'N',\n    79: 'O',\n    80: 'P',\n    81: 'Q',\n    82: 'R',\n    83: 'S',\n    84: 'T',\n    85: 'U',\n    86: 'V',\n    87: 'W',\n    88: 'X',\n    89: 'Y',\n    90: 'Z',\n    93: 'Context Menu',\n    95: 'Sleep',\n    96: 'Numpad 0',\n    97: 'Numpad 1',\n    98: 'Numpad 2',\n    99: 'Numpad 3',\n    100: 'Numpad 4',\n    101: 'Numpad 5',\n    102: 'Numpad 6',\n    103: 'Numpad 7',\n    104: 'Numpad 8',\n    105: 'Numpad 9',\n    106: 'Numpad *',\n    107: 'Numpad +',\n    109: 'Numpad -',\n    110: 'Numpad .',\n    111: 'Numpad /',\n    112: 'F1',\n    113: 'F2',\n    114: 'F3',\n    115: 'F4',\n    116: 'F5',\n    117: 'F6',\n    118: 'F7',\n    119: 'F8',\n    120: 'F9',\n    121: 'F10',\n    122: 'F11',\n    123: 'F12',\n    124: 'F13',\n    125: 'F14',\n    126: 'F15',\n    127: 'F16',\n    128: 'F17',\n    129: 'F18',\n    130: 'F19',\n    131: 'F20',\n    132: 'F21',\n    133: 'F22',\n    134: 'F23',\n    135: 'F24',\n    144: 'Num Lock',\n    145: 'Scroll Lock',\n    146: 'Win Oem Fj Jisho',\n    147: 'Win Oem Fj Masshou',\n    148: 'Win Oem Fj Touroku',\n    149: 'Win Oem Fj Loya',\n    150: 'Win Oem Fj Roya',\n    160: 'Circumflex',\n    161: 'Exclamation',\n    162: 'Double Quote',\n    163: 'Hash',\n    164: 'Dollar',\n    165: 'Percent',\n    166: 'Ampersand',\n    167: 'Underscore',\n    168: 'Open Paren',\n    169: 'Close Paren',\n    170: 'Asterisk',\n    171: 'Plus',\n    172: 'Pipe',\n    173: 'Hyphen Minus',\n    174: 'Open Curly Bracket',\n    175: 'Close Curly Bracket',\n    176: 'Tilde',\n    181: 'Volume Mute',\n    182: 'Volume Down',\n    183: 'Volume Up',\n    186: ';',\n    187: 'Equals',\n    188: ',',\n    189: 'Minus',\n    190: '.',\n    191: '/',\n    192: '`',\n    219: '[',\n    220: '\\\\',\n    221: ']',\n    222: '\\'',\n    227: 'Win Ico Help',\n    228: 'Win Ico 00',\n    230: 'Win Ico Clear',\n    233: 'Win Oem Reset',\n    234: 'Win Oem Jump',\n    235: 'Win Oem Pa1',\n    236: 'Win Oem Pa2',\n    237: 'Win Oem Pa3',\n    238: 'Win Oem Wsctrl',\n    239: 'Win Oem Cusel',\n    240: 'Win Oem Attn',\n    241: 'Win Oem Finish',\n    242: 'Win Oem Copy',\n    243: 'Win Oem Auto',\n    244: 'Win Oem Enlw',\n    245: 'Win Oem Backtab',\n    246: 'Attn',\n    247: 'Crsel',\n    248: 'Exsel',\n    249: 'Ereof',\n    250: 'Play',\n    251: 'Zoom',\n    253: 'Pa1',\n    254: 'Win Oem Clear'\n};\n\nexport let keyCharToCode = {\n    Cancel: 3,\n    Help: 6,\n    Backspace: 8,\n    Tab: 9,\n    'Pause/Break': 19,\n    'Caps Lock': 20,\n    Esc: 27,\n    Space: 32,\n    'Page Up': 33,\n    'Page Down': 34,\n    End: 35,\n    Home: 36,\n    Left: 37,\n    Up: 38,\n    Right: 39,\n    Down: 40,\n    Insert: 45,\n    Delete: 46,\n    0: 48,\n    1: 49,\n    2: 50,\n    3: 51,\n    4: 52,\n    5: 53,\n    6: 54,\n    7: 55,\n    8: 56,\n    9: 57,\n    A: 65,\n    B: 66,\n    C: 67,\n    D: 68,\n    E: 69,\n    F: 70,\n    G: 71,\n    H: 72,\n    I: 73,\n    J: 74,\n    K: 75,\n    L: 76,\n    M: 77,\n    N: 78,\n    O: 79,\n    P: 80,\n    Q: 81,\n    R: 82,\n    S: 83,\n    T: 84,\n    U: 85,\n    V: 86,\n    W: 87,\n    X: 88,\n    Y: 89,\n    Z: 90,\n    'Numpad 0': 96,\n    'Numpad 1': 97,\n    'Numpad 2': 98,\n    'Numpad 3': 99,\n    'Numpad 4': 100,\n    'Numpad 5': 101,\n    'Numpad 6': 102,\n    'Numpad 7': 103,\n    'Numpad 8': 104,\n    'Numpad 9': 105,\n    'Numpad *': 106,\n    'Numpad +': 107,\n    'Numpad -': 109,\n    'Numpad .': 110,\n    'Numpad /': 111,\n    F1: 112,\n    F2: 113,\n    F3: 114,\n    F4: 115,\n    F5: 116,\n    F6: 117,\n    F7: 118,\n    F8: 119,\n    F9: 120,\n    F10: 121,\n    F11: 122,\n    F12: 123,\n    'Num Lock': 144,\n    'Scroll Lock': 145,\n    ';': 186,\n    ',': 188,\n    '.': 190,\n    '/': 191,\n    '`': 192,\n    '[': 219,\n    '\\\\': 220,\n    ']': 221,\n    '\\'': 222,\n    Kana: 21,\n    Eisu: 22,\n    Junja: 23,\n    Final: 24,\n    Hanja: 25,\n    Convert: 28,\n    Nonconvert: 29,\n    Accept: 30,\n    Modechange: 31,\n    Select: 41,\n    Print: 42,\n    Execute: 43,\n    Printscreen: 44,\n    Colon: 58,\n    Semicolon: 59,\n    'Less Than': 60,\n    Equals2: 61,\n    'Greater Than': 62,\n    'Question Mark': 63,\n    'Context Menu': 93,\n    Sleep: 95,\n    F13: 124,\n    F14: 125,\n    F15: 126,\n    F16: 127,\n    F17: 128,\n    F18: 129,\n    F19: 130,\n    F20: 131,\n    F21: 132,\n    F22: 133,\n    F23: 134,\n    F24: 135,\n    'Win Oem Fj Jisho': 146,\n    'Win Oem Fj Masshou': 147,\n    'Win Oem Fj Touroku': 148,\n    'Win Oem Fj Loya': 149,\n    'Win Oem Fj Roya': 150,\n    Circumflex: 160,\n    Exclamation: 161,\n    'Double Quote': 162,\n    Hash: 163,\n    Dollar: 164,\n    Percent: 165,\n    Ampersand: 166,\n    Underscore: 167,\n    'Open Paren': 168,\n    'Close Paren': 169,\n    Asterisk: 170,\n    Plus: 171,\n    Pipe: 172,\n    'Hyphen Minus': 173,\n    'Open Curly Bracket': 174,\n    'Close Curly Bracket': 175,\n    Tilde: 176,\n    'Volume Mute': 181,\n    'Volume Down': 182,\n    'Volume Up': 183,\n    Equals: 187,\n    Minus: 189,\n    'Win Ico Help': 227,\n    'Win Ico 00': 228,\n    'Win Ico Clear': 230,\n    'Win Oem Reset': 233,\n    'Win Oem Jump': 234,\n    'Win Oem Pa1': 235,\n    'Win Oem Pa2': 236,\n    'Win Oem Pa3': 237,\n    'Win Oem Wsctrl': 238,\n    'Win Oem Cusel': 239,\n    'Win Oem Attn': 240,\n    'Win Oem Finish': 241,\n    'Win Oem Copy': 242,\n    'Win Oem Auto': 243,\n    'Win Oem Enlw': 244,\n    'Win Oem Backtab': 245,\n    Attn: 246,\n    Crsel: 247,\n    Exsel: 248,\n    Ereof: 249,\n    Play: 250,\n    Zoom: 251,\n    Pa1: 253,\n    'Win Oem Clear': 254\n\n};\n\n//var hasHorizontalScrollbar = div.scrollWidth > div.clientWidth;\n//var hasVerticalScrollbar = div.scrollHeight > div.clientHeight;\n(function ($) {\n    $.fn.hasHorizontalScrollBar = function () {\n        return $(this)[0].scrollWidth > $(this).innerWidth();\n    };\n})(jQuery);\n\nexport function clone(obj, replacer?) {\n    return JSON.parse(JSON.stringify(obj, replacer));\n}\n\nexport function cloneObject(obj) {\n    if (!obj) return obj;\n    const nObj = {};\n    let prop;\n    for (prop in obj) {\n        if (!obj.hasOwnProperty(prop)) continue;\n        if (obj[prop])\n            nObj[prop] = obj[prop];\n        else if (typeof obj[prop] === 'object')\n            nObj[prop] = cloneObject(obj[prop]);\n        else if (Array.isArray(obj[prop]))\n            nObj[prop] = cloneArray(obj[prop]);\n        else\n            nObj[prop] = obj[prop];\n    }\n    return nObj;\n}\n\nexport function cloneArray(arr) {\n    if (!arr || arr.length === 0) return new Array();\n    const nArr = new Array(arr.length);\n    let l = arr.length;\n    while (l--) {\n        if (typeof arr[l] === 'object')\n            nArr[l] = cloneObject(arr[l]);\n        else if (Array.isArray(arr[l]))\n            nArr[l] = cloneArray(arr[l]);\n        else\n            nArr[l] = cloneObject(arr[l]);\n    }\n    return nArr;\n}\n\nexport function copy(o) {\n    let output;\n    let v;\n    let key;\n    if (!o || (typeof o !== 'object' && !Array.isArray(o)))\n        return o;\n    output = Array.isArray(o) ? [] : {};\n    for (key in o) {\n        if (!o.hasOwnProperty(key)) continue;\n        v = o[key];\n        output[key] = (v && (typeof v === 'object' || Array.isArray(v))) ? copy(v) : v;\n    }\n    return output;\n}\n\nexport function setSelectionRange(input, selectionStart, selectionEnd) {\n    if (input.setSelectionRange) {\n        input.focus();\n        input.setSelectionRange(selectionStart, selectionEnd);\n    }\n    else if (input.createTextRange) {\n        const range = input.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', selectionEnd);\n        range.moveStart('character', selectionStart);\n        range.select();\n    }\n}\n\nexport function selectAll(input) {\n    if (!input || input.value.length === 0) return;\n    if (input.setSelectionRange) {\n        input.focus();\n        input.setSelectionRange(0, input.value.length);\n    }\n    else\n        input.select();\n}\n\nexport function getSelectionText() {\n    var text = \"\";\n    if (window.getSelection)\n        text = window.getSelection().toString();\n    return text;\n}\n\nCanvasRenderingContext2D.prototype.fillRoundedRect = function (this, x: number, y: number, w: number, h: number, r: number) {\n    this.beginPath();\n    this.moveTo(x + r, y);\n    this.lineTo(x + w - r, y);\n    this.quadraticCurveTo(x + w, y, x + w, y + r);\n    this.lineTo(x + w, y + h - r);\n    this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    this.lineTo(x + r, y + h);\n    this.quadraticCurveTo(x, y + h, x, y + h - r);\n    this.lineTo(x, y + r);\n    this.quadraticCurveTo(x, y, x + r, y);\n    this.closePath();\n    this.fill();\n};\n\nCanvasRenderingContext2D.prototype.strokeRoundedRect = function (this, x: number, y: number, w: number, h: number, r: number) {\n    this.beginPath();\n    this.moveTo(x + r, y);\n    this.lineTo(x + w - r, y);\n    this.quadraticCurveTo(x + w, y, x + w, y + r);\n    this.lineTo(x + w, y + h - r);\n    this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    this.lineTo(x + r, y + h);\n    this.quadraticCurveTo(x, y + h, x, y + h - r);\n    this.lineTo(x, y + r);\n    this.quadraticCurveTo(x, y, x + r, y);\n    this.closePath();\n    this.stroke();\n};\n\nif (!Object.keys) Object.keys = function (o) {\n    if (o !== Object(o))\n        throw new TypeError('Object.keys called on a non-object');\n    var k = [], p;\n    for (p in o) if (Object.prototype.hasOwnProperty.call(o, p)) k.push(p);\n    return k;\n};\n\nif (!Object.toType) Object.toType = function (obj) {\n    return ({}).toString.call(obj).match(/\\s([a-z|A-Z]+)/)[1].toLowerCase();\n};\n\nif (typeof String.prototype.startsWith != 'function') {\n    String.prototype.startsWith = function (str) {\n        return this.slice(0, str.length) == str;\n    };\n}\n\nif (typeof String.prototype.endsWith != 'function') {\n    String.prototype.endsWith = function (str) {\n        return this.slice(-str.length) == str;\n    };\n}\n\nif (typeof String.prototype.splice !== 'function') {\n    String.prototype.splice = function (this: string, idx: number, s: string, rem?: number) {\n        if (typeof rem === 'undefined') rem = 0;\n        return (this.slice(0, idx) + s + this.slice(idx + Math.abs(rem)));\n    };\n}\n\nif (typeof String.prototype.padStart !== 'function') {\n    String.prototype.padStart = function (this: string, paddingValue: (string | number)) {\n        if (typeof paddingValue === 'number')\n            paddingValue = ' '.repeat(paddingValue);\n        return String(paddingValue + this).slice(-paddingValue.length);\n    };\n}\n\nif (typeof String.prototype.padEnd !== 'function') {\n    String.prototype.padEnd = function (this: string, paddingValue: (string | number)) {\n        if (typeof paddingValue === 'number') {\n            if (paddingValue <= this.length) return this;\n            paddingValue = ' '.repeat(paddingValue - this.length);\n            return this + paddingValue;\n        }\n        if (paddingValue.length <= this.length) return this;\n        return this + paddingValue.slice(-this.length);\n    };\n}\n\nif (!String.prototype.replaceAll) {\n    String.prototype.replaceAll = function (str, newStr) {\n\n        // If a regex pattern\n        if (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {\n            return this.replace(str, newStr);\n        }\n\n        // If a string\n        return this.replace(new RegExp(str, 'g'), newStr);\n    };\n}\n\nif (typeof Uint8Array.prototype.charAt != 'function') {\n    Uint8Array.prototype.charAt = function (this: Uint8Array, idx: number) {\n        return String.fromCharCode(this[idx]);\n    };\n}\n\nif (typeof Uint8Array.prototype.charCodeAt != 'function') {\n    Uint8Array.prototype.charCodeAt = function (this: Uint8Array, idx: number) {\n        return this[idx];\n    };\n}\n\nexport function addSlashes(string, all?) {\n    if (!string || !string.length) return string;\n    if (all)\n        return string.replace(/\\\\/g, '\\\\\\\\').\n            replace(/\\u0008/g, '\\\\b').\n            replace(/\\t/g, '\\\\t').\n            replace(/\\n/g, '\\\\n').\n            replace(/\\f/g, '\\\\f').\n            replace(/\\r/g, '\\\\r').\n            replace(/'/g, '\\\\\\'').\n            replace(/\"/g, '\\\\\"').\n            replace(/\\u0000/g, '\\\\0');\n    return string.replace(/\\\\/g, '\\\\\\\\').\n        replace(/'/g, '\\\\\\'').\n        replace(/\"/g, '\\\\\"');\n}\n\nString.prototype.addSlashes = function (this: string) {\n    //no need to do (str+'') anymore because 'this' can only be a string\n    return addSlashes(this);\n}\n\nString.prototype.splitQuote = function (this: string, sep: string, type?, escape?, escapeChar?) {\n    if (this.length === 0)\n        return [];\n    if (!sep || !sep.length)\n        return [this];\n    if (!type) type = 1 | 2;\n    if (!escape) escape = 1 | 2;\n    if (!escapeChar) escapeChar = '\\\\';\n    let quote: boolean = false;\n    let sQuote: boolean = false;\n    const str = [];\n    let pS = 0;\n    let s = 0;\n    let c: string;\n    let pC = '';\n    let sp;\n    const spl = sep.length;\n    let spC: string;\n    const tl = this.length;\n    for (; s < tl; s++) {\n        c = this.charAt(s);\n        if (c === '\"' && (type & 2) === 2) {\n            if ((escape & 2) === 2) {\n                if (s === 0 || pC !== escapeChar)\n                    quote = !quote;\n            }\n            else\n                quote = !quote;\n        }\n        else if (c === '\\'' && (type & 1) === 1) {\n            if ((escape & 1) === 1) {\n                if (s === 0 || pC !== escapeChar)\n                    sQuote = !sQuote;\n            }\n            else\n                sQuote = !sQuote;\n        }\n        else if (!quote && !sQuote) {\n            for (sp = 0; sp < spl; sp++) {\n                spC = sep.charAt(sp);\n                if (c === spC) {\n                    if (s > pS || s === 0) {\n                        str.push(this.substr(pS, s - pS));\n                        pS = s + 1;\n                        break;\n                    }\n                    else if (s === pS) {\n                        str.push('');\n                        pS = s + 1;\n                        break;\n                    }\n                    else if (s === tl - 1)\n                        str.push('');\n                }\n            }\n        }\n        pC = c;\n    }\n    if (s === tl && s === pS && sep.indexOf(pC) !== -1) {\n        str.push('');\n        pS = s + 1;\n    }\n    if (s > pS)\n        str.push(this.substr(pS, s - pS));\n    return str;\n};\n\nexport function getTimeSpan(i: number): string {\n    let al;\n    const tmp = [];\n\n    al = Math.floor(i / (1000 * 60 * 60 * 24));\n    i -= al * (1000 * 60 * 60 * 24);\n    if (al === 1) tmp.push(al + ' day');\n    else if (al > 0) tmp.push(al + ' days');\n\n    al = Math.floor(i / (1000 * 60 * 60));\n    i -= al * (1000 * 60 * 60);\n    if (al === 1) tmp.push(al + ' hour');\n    else if (al > 0) tmp.push(al + ' hours');\n\n    al = Math.floor(i / (1000 * 60));\n    i -= al * (1000 * 60);\n    if (al === 1) tmp.push(al + ' minute');\n    else if (al > 0) tmp.push(al + ' minutes');\n\n    al = Math.floor(i / (1000));\n    i -= al * (1000);\n    if (al === 1) tmp.push(al + ' second');\n    else if (al > 0) tmp.push(al + ' seconds');\n    if (tmp.length === 0)\n        tmp.push('0 seconds');\n    return tmp.join(', ');\n}\n\nexport function naturalCompare(a, b) {\n    const ax = [];\n    const bx = [];\n\n    a.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => { ax.push([$1 || Infinity, $2 || '']); });\n    b.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => { bx.push([$1 || Infinity, $2 || '']); });\n\n    while (ax.length && bx.length) {\n        const an = ax.shift();\n        const bn = bx.shift();\n        const nn = (an[0] - bn[0]) || an[1].localeCompare(bn[1]);\n        if (nn) return nn;\n    }\n\n    return ax.length - bx.length;\n}\n\nexport function getScrollBarWidth(el) {\n    if (!el) return 0;\n    const inner = document.createElement('p');\n    inner.style.width = '100%';\n    inner.style.height = '100%';\n    inner.style.position = 'absolute';\n    inner.style.top = '0px';\n    inner.style.left = '0px';\n    inner.style.visibility = 'hidden';\n\n    el.style.overflowY = 'hidden';\n    el.style.overflowX = 'hidden';\n\n    el.appendChild(inner);\n    const w1 = inner.offsetWidth;\n    el.style.overflowY = '';\n    el.style.overflowX = '';\n\n    let w2 = inner.offsetWidth;\n    if (w1 === w2) w2 = el.clientWidth;\n\n    el.removeChild(inner);\n\n    return (w1 - w2);\n}\n\nexport function getScrollBarHeight(el) {\n    if (!el) return 0;\n    const inner = document.createElement('p');\n    inner.style.width = '100%';\n    inner.style.height = '100%';\n    inner.style.position = 'absolute';\n    inner.style.top = '0px';\n    inner.style.left = '0px';\n    inner.style.visibility = 'hidden';\n\n    el.style.overflowY = 'hidden';\n    el.style.overflowX = 'hidden';\n\n    el.appendChild(inner);\n    const w1 = inner.offsetHeight;\n    el.style.overflowY = '';\n    el.style.overflowX = '';\n\n    let w2 = inner.offsetHeight;\n    if (w1 === w2) w2 = el.clientHeight;\n\n    el.removeChild(inner);\n\n    return (w1 - w2);\n}\n\nexport function getScrollBarSize(el) {\n    if (!el) return 0;\n    const inner = document.createElement('p');\n    inner.style.width = '100%';\n    inner.style.height = '100%';\n    inner.style.position = 'absolute';\n    inner.style.top = '0px';\n    inner.style.left = '0px';\n    inner.style.visibility = 'hidden';\n\n    el.style.overflowY = 'hidden';\n    el.style.overflowX = 'hidden';\n\n    el.appendChild(inner);\n\n    const w1 = inner.offsetWidth;\n    const h1 = inner.offsetHeight;\n\n    el.style.overflowY = '';\n    el.style.overflowX = '';\n\n    let w2 = inner.offsetWidth;\n    let h2 = inner.offsetHeight;\n    if (w1 === w2) w2 = el.clientWidth;\n    if (h1 === h2) h2 = el.clientHeight;\n\n    el.removeChild(inner);\n\n    return [(w1 - w2), (h1 - h2)];\n}\n\nexport function formatSize(size) {\n    if (size >= 1073741824)\n        return Math.round(size / 1073741824).toLocaleString() + ' GB';\n    else if (size >= 1048576)\n        return Math.round(size / 1048576).toLocaleString() + ' MB';\n    else if (size >= 1024)\n        return Math.round(size / 1024).toLocaleString() + ' KB';\n    return size.toLocaleString() + ' B';\n}\n\nexport function capitalize(s, first?) {\n    if (!s) return '';\n    s = s.split(' ');\n    let c;\n    let i;\n    let p;\n    const il = first ? 1 : s.length;\n    for (i = 0; i < il; i++) {\n        const pl = s[i].length;\n        for (p = 0; p < pl; p++) {\n            c = s[i].charAt(p);\n            if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z')) {\n                s[i] = s[i].substr(0, p) + c.toUpperCase() + s[i].substr(p + 1).toLowerCase();\n                break;\n            }\n        }\n    }\n    return s.join(' ');\n}\n\nexport function capitalizePinkfish(s) {\n    const p = string_parts(s);\n    if (p.length !== 3)\n        return capitalize(s, true);\n    return p[0] + capitalize(p[1], true) + p[2];\n}\n\nfunction is_color(str) {\n    if (!_colorCodes)\n        loadColors();\n    if (!str)\n        return false;\n    if (_colorCodes[str])\n        return true;\n    switch (str) {\n        case 'ITALIC':\n        case 'UNDERLINE':\n        case 'STRIKEOUT':\n        case 'DBLUNDERLINE':\n        case 'OVERLINE':\n        case 'FLASH':\n        case 'REVERSE':\n        case 'RESET':\n        case 'DEFAULT':\n        case 'BOLD':\n            return true;\n    }\n    return false;\n}\n\nfunction string_parts(str) {\n    let tmp;\n    let t2;\n    let ss;\n    let se;\n    let sm;\n    let s;\n    let e;\n    let c;\n    //more accurate then a regex even if slower in some cases\n    if (!str.length) return ['', '', ''];\n    tmp = str.split('%^');\n    c = tmp.length;\n    if (c === 1)\n        return ['', str, ''];\n\n    if (tmp[0].length === 0) {\n        for (s = 0; s < c; s++) {\n            t2 = tmp[s];\n            if (!t2.length) continue;\n            if (!is_color(t2)) {\n                s--;\n                break;\n            }\n        }\n    }\n    else\n        s--;\n    if (tmp[c - 1].length === 0) {\n        for (e = c - 1; e > s; e--) {\n            t2 = tmp[e];\n            if (!t2.length) continue;\n            if (!is_color(t2)) {\n                e++;\n                break;\n            }\n        }\n    }\n    else\n        e = c;\n    sm = tmp.slice(s + 1, e).join('%^');\n    if (!sm.length)\n        return [str, '', ''];\n    ss = tmp.slice(0, s + 1).join('%^');\n    se = tmp.slice(e).join('%^');\n    if (sm.length) {\n        if (ss.length)\n            ss += '%^';\n        if (se.length)\n            se = '%^' + se;\n    }\n    return [ss, sm, se];\n}\n\nexport function inverse(s) {\n    if (!s) return '';\n    s = s.split(' ');\n    let c;\n    let i;\n    let p;\n    const il = s.length;\n    for (i = 0; i < il; i++) {\n        const pl = s[i].length;\n        for (p = 0; p < pl; p++) {\n            c = s[i].charAt(p);\n            if (c >= 'A' && c <= 'Z')\n                s[i] = s[i].substr(0, p) + c.toLowerCase() + s[i].substr(p + 1);\n            else if (c >= 'a' && c <= 'z')\n                s[i] = s[i].substr(0, p) + c.toUpperCase() + s[i].substr(p + 1);\n        }\n    }\n    return s.join(' ');\n}\n\nexport function invert(obj) {\n    const new_obj = {};\n    let prop;\n    for (prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n            new_obj[obj[prop]] = prop;\n        }\n    }\n    return new_obj;\n}\n\nexport function Cardinal(x) {\n    let str;\n    if (x === 0) return 'zero';\n    if (x < 0) {\n        str = 'negative ';\n        x = Math.abs(x);\n    }\n    else\n        str = '';\n    switch (x) {\n        case 1:\n            return str + 'one';\n        case 2:\n            return str + 'two';\n        case 3:\n            return str + 'three';\n        case 4:\n            return str + 'four';\n        case 5:\n            return str + 'five';\n        case 6:\n            return str + 'six';\n        case 7:\n            return str + 'seven';\n        case 8:\n            return str + 'eight';\n        case 9:\n            return str + 'nine';\n        case 10:\n            return str + 'ten';\n        case 11:\n            return str + 'eleven';\n        case 12:\n            return str + 'twelve';\n        case 13:\n            return str + 'thirteen';\n        case 14:\n            return str + 'fourteen';\n        case 15:\n            return str + 'fifteen';\n        case 16:\n            return str + 'sixteen';\n        case 17:\n            return str + 'seventeen';\n        case 18:\n            return str + 'eighteen';\n        case 19:\n            return str + 'nineteen';\n        case 20:\n            return str + 'twenty';\n        default:\n            if (x > 1000000000)\n                return 'over a billion';\n            else if (x / 1000000 > 0) {\n                if (x % 1000000 > 0)\n                    return +' million ' + Cardinal(x % 1000000);\n                return Cardinal((x / 1000000) >> 0) + ' million';\n            }\n            else if (x / 1000 > 0) {\n                if (x % 1000 > 0)\n                    return Cardinal((x / 1000) >> 0) + ' thousand ' + Cardinal(x % 1000);\n                return Cardinal((x / 1000) >> 0) + ' thousand';\n            }\n            else if (x / 100 > 0) {\n                if (x % 100 > 0)\n                    return Cardinal((x / 100) >> 0) + ' hundred' + Cardinal(x % 100);\n                return Cardinal((x / 100) >> 0) + ' hundred';\n            }\n            else {\n                if (x % 10 > 0)\n                    str = '-' + Cardinal(x % 10);\n                else\n                    str = '';\n                switch (x / 10) {\n                    case 2:\n                        return 'twenty' + str;\n                    case 3:\n                        return 'thirty' + str;\n                    case 4:\n                        return 'forty' + str;\n                    case 5:\n                        return 'fifty' + str;\n                    case 6:\n                        return 'sixty' + str;\n                    case 7:\n                        return 'seventy' + str;\n                    case 8:\n                        return 'eighty' + str;\n                    case 9:\n                        return 'ninety' + str;\n                    default:\n                        return 'error';\n                }\n            }\n    }\n}\n\nexport function wordwrap(str, maxWidth, newLineStr?) {\n    let done = false;\n    let res = '';\n    let found;\n    let i;\n    newLineStr = newLineStr || '\\n';\n    do {\n        found = false;\n        // Inserts new line at first whitespace of the line\n        for (i = maxWidth - 1; i >= 0; i--) {\n            if (testWhite(str.charAt(i))) {\n                res = res + [str.slice(0, i + 1), newLineStr].join('');\n                str = str.slice(i + 1);\n                found = true;\n                break;\n            }\n        }\n        // Inserts new line at maxWidth position, the word is too long to wrap\n        if (!found) {\n            res += [str.slice(0, maxWidth), newLineStr].join('');\n            str = str.slice(maxWidth);\n        }\n\n        if (str.length < maxWidth)\n            done = true;\n    } while (!done);\n    if (str.length > 0)\n        return res + str;\n    return res;\n}\n\nfunction testWhite(x) {\n    return /^\\s$/.test(x.charAt(0));\n}\n\nexport function splitQuoted(str, sep, t?, e?, ec?) {\n    if (typeof (t) === 'undefined') t = 1 | 2;\n    if (typeof (e) === 'undefined') e = 0;\n    if (typeof (ec) === 'undefined') ec = '\\\\';\n    if (!str || str.length === 0)\n        return [];\n    if (!sep || sep.length === 0)\n        return [str];\n    sep = sep.split('');\n    let q = false;\n    let sq = false;\n    const strings = [];\n    let ps = 0;\n    let s = 0;\n    const sl = str.length;\n    let c;\n    for (; s < sl; s++) {\n        c = str.charAt(s);\n        if (c === '\"' && (t & 2) === 2) {\n            if ((e & 2) === 2 && s > 0) {\n                if (s - 1 > 0 && str.charAt(s - 1) !== ec)\n                    q = !q;\n            }\n            else\n                q = !q;\n        }\n        else if (c === '\\'' && (t & 1) === 1) {\n            if ((e & 1) === 1 && s > 0) {\n                if (s - 1 > 0 && str.charAt(s - 1) !== ec)\n                    sq = !sq;\n            }\n            else\n                sq = !sq;\n        }\n        else if (!sq && !q) {\n            const spl = sep.length;\n            for (let sp = 0; sp < spl; sp++) {\n                if (c === sep[sp]) {\n                    if (s > ps || s === 0) {\n                        strings.push(str.substring(ps, s));\n                        ps = s + 1;\n                        break;\n                    }\n                    else if (s === ps) {\n                        strings.push('');\n                        ps = s + 1;\n                        break;\n                    }\n                    else if (s === (sl - 1))\n                        strings.push('');\n                }\n            }\n        }\n    }\n    if (s === sl && s === ps && sep.indexOf(str.charAt(s - 1)) > -1) {\n        strings.push('');\n        ps = s + 1;\n    }\n    if (s > ps)\n        strings.push(str.substring(ps, s));\n    return strings;\n}\n\nexport function leadingZeros(num, totalChars: number, padWith: string, trim?: boolean) {\n    num = num + '';\n    padWith = (padWith) ? padWith : '0';\n    if (num.length < totalChars) {\n        while (num.length < totalChars) {\n            num = padWith + num;\n        }\n    }\n    if (trim && num.length > totalChars) {\n        num = num.substring((num.length - totalChars), totalChars);\n    }\n    return num;\n}\n\nexport function resetCursor(txtElement) {\n    txtElement.scrollTop = 0;\n    txtElement.scrollLeft = 0;\n    if (typeof txtElement.selectionStart === 'number') {\n        txtElement.selectionStart = 0;\n        txtElement.selectionEnd = 0;\n    }\n    else if (txtElement.setSelectionRange) {\n        txtElement.focus();\n        txtElement.setSelectionRange(0, 0);\n        txtElement.focus();\n    } else if (txtElement.createTextRange) {\n        const range = txtElement.createTextRange();\n        range.moveStart('character', 0);\n        range.select();\n    }\n}\n\nexport function moveCursorToEnd(el) {\n    el.scrollTop = el.scrollHeight;\n    if (typeof el.selectionStart === 'number') {\n        el.selectionStart = el.selectionEnd = el.value.length;\n    } else if (typeof el.createTextRange !== 'undefined') {\n        el.focus();\n        const range = el.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n}\n\nexport function getCursor(el) {\n    if (!el) return 0;\n    if (typeof el.selectionStart === 'number') {\n        return el.selectionDirection == 'backward' ? el.selectionStart : el.selectionEnd;\n    } else if ((<any>document).selection) {\n        // Set focus on the element\n        el.focus();\n        // To get cursor position, get empty selection range\n        var oSel = (<any>document).selection.createRange();\n        // Move selection start to 0 position\n        oSel.moveStart('character', -el.value.length);\n        // The caret position is selection length\n        return oSel.text.length;\n    }\n    return 0;\n}\n\nexport function stringToEnum(str, en, ignoreCase?) {\n    if (!str || !en) return 0;\n    if (ignoreCase)\n        str = str.toUpperCase();\n    //split strip and trim spaces\n    str = str.split(',').map(v => v.trim());\n    //init value\n    let value = 0;\n    let sl = str.length;\n    //get the enum keys\n    const values = Object.keys(en).filter(key => !isNaN(Number(en[key])));\n    let test = values.slice(0);\n    //ignore case just make everything upper\n    if (ignoreCase)\n        test = test.map(v => v.toUpperCase());\n    //loop the strings\n    while (sl--) {\n        let vl = values.length;\n        //loop the enum to try and find the string value\n        while (vl--) {\n            //found value add it on\n            if (test[vl] === str[sl]) {\n                value |= en[values[vl].replace(/ /g, '_')];\n                break;\n            }\n        }\n    }\n    //return final value\n    return value;\n}\n\nexport function enumToString(value, en, exact?) {\n    let state;\n    const states = Object.keys(en).filter(key => !isNaN(Number(en[key])));\n    if (value === 0)\n        return en[0];\n    const f = [];\n    state = states.length;\n    while (state--) {\n        if (en[states[state]] === 0) continue;\n        if (exact) {\n            if (value === en[states[state]])\n                f.push(capitalize(states[state].replace(/_/g, ' ')));\n        }\n        else if ((value & en[states[state]]) === en[states[state]])\n            f.push(capitalize(states[state].replace(/_/g, ' ')));\n    }\n    return f.join(', ');\n}\n\n//https://j11y.io/snippets/wordwrap-for-javascript/\nexport function wordWrap(str, width, brk, cut) {\n    brk = brk || 'n';\n    width = width || 75;\n    cut = cut || false;\n    if (!str) return str;\n    const regex = '.{1,' + width + '}(\\s|$)' + (cut ? '|.{' + width + '}|.+$' : '|\\S+?(\\s|$)');\n    return str.match(RegExp(regex, 'g')).join(brk);\n}\n\nexport function wordBreak(str, start, length) {\n    if (length < 0) return 0;\n    let wBreak = length - 1;\n    if (start + wBreak >= str.length)\n        return str.length - start;\n    while (wBreak >= 0 && str.charAt(start + wBreak) !== ' ' && str.charAt(start + wBreak) !== '\\\\')\n        wBreak--;\n    if (wBreak <= 0)\n        return length;\n    wBreak++;\n    return wBreak;\n}\n\nexport function formatString(str, indent, width?, prefix?, postFix?, preIdent?) {\n    if (!str || str.length === 0) return '';\n    width = width || 66;\n    if (width < 40) width = 40;\n    if (typeof prefix !== 'string')\n        prefix = '\"';\n    if (typeof postFix !== 'string')\n        postFix = '\"';\n    preIdent = preIdent || '';\n    if (str.length <= width)\n        return prefix + str + postFix;\n    const list = [];\n    let wBreak = wordBreak(str, 0, width);\n    list.push(str.substr(0, wBreak));\n    let len = str.length - wBreak;\n    let tmp = wBreak; // set start of next line at window width\n    while (len / width > 0) { // while full lines loop\n        wBreak = wordBreak(str, tmp, width);\n        list.push(str.substr(tmp, wBreak));\n        tmp += wBreak; // move to next line\n        len -= wBreak; // remove line width\n    }\n    if (len > 0) // left over\n        list.push(str.substr(tmp, len));\n    return prefix + list.join(postFix + '\\n' + preIdent + ' '.repeat(indent) + prefix) + postFix;\n}\n\nexport function consolidate(amt, str) {\n    let y;\n    let l;\n    let e = '';\n    if (!amt || !str || amt < 2) return str;\n    if (str.endsWith(' ')) {\n        e = ' ';\n        str = str.trim();\n    }\n    str = str.split(' ');\n    if (str[0].toLowerCase() === 'a' || str[0].toLowerCase() === 'an' || str[0].toLowerCase() === 'the')\n        str.shift();\n    l = str.length;\n    y = str.indexOf('of');\n    if (y > 0)\n        str[y - 1] = pluralize(str[y - 1]);\n    else if (str[l - 1].endsWith(')')) {\n        y = l - 1;\n        while (y >= 0) {\n            if (str[y].startsWith('('))\n                break;\n            y--;\n        }\n        if (y - 1 >= 0)\n            str[y - 1] = pluralize(str[y - 1]);\n    }\n    else if (str[l - 1].match(/\\(.*\\)/)) {\n        if (l - 2 >= 0)\n            str[l - 2] = pluralize(str[l - 2]);\n    }\n    else\n        str[l - 1] = pluralize(str[l - 1]);\n    if (amt > 10)\n        return 'numerous ' + str.join(' ') + e;\n    return ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten'][amt] + ' ' + str.join(' ') + e;\n}\n\n//spell-checker:disable\nexport function pluralize(revert) {\n    const plural = {\n        '(quiz)$': '$1zes',\n        '^(ox)$': '$1en',\n        '([m|l])ouse$': '$1ice',\n        '(matr|vert|ind)ix|ex$': '$1ices',\n        '(x|ch|ss|sh)$': '$1es',\n        '([^aeiouy]|qu)y$': '$1ies',\n        '(hive)$': '$1s',\n        '(?:([^f])fe|([lr])f)$': '$1$2ves',\n        '(shea|lea|loa|thie)f$': '$1ves',\n        sis$: 'ses',\n        '([ti])um$': '$1a',\n        '(tomat|potat|ech|her|vet)o$': '$1oes',\n        '(bu)s$': '$1ses',\n        '(alias)$': '$1es',\n        '(octop)us$': '$1i',\n        '(ax|test)is$': '$1es',\n        '(us)$': '$1es',\n        '([^s]+)$': '$1s'\n    };\n\n    const singular = {\n        '(quiz)zes$': '$1',\n        '(matr)ices$': '$1ix',\n        '(vert|ind)ices$': '$1ex',\n        '^(ox)en$': '$1',\n        '(alias)es$': '$1',\n        '(octop|vir)i$': '$1us',\n        '(cris|ax|test)es$': '$1is',\n        '(shoe)s$': '$1',\n        '(o)es$': '$1',\n        '(bus)es$': '$1',\n        '([m|l])ice$': '$1ouse',\n        '(x|ch|ss|sh)es$': '$1',\n        '(m)ovies$': '$1ovie',\n        '(s)eries$': '$1eries',\n        '([^aeiouy]|qu)ies$': '$1y',\n        '([lr])ves$': '$1f',\n        '(tive)s$': '$1',\n        '(hive)s$': '$1',\n        '(li|wi|kni)ves$': '$1fe',\n        '(shea|loa|lea|thie)ves$': '$1f',\n        '(^analy)ses$': '$1sis',\n        '((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$': '$1$2sis',\n        '([ti])a$': '$1um',\n        '(n)ews$': '$1ews',\n        '(h|bl)ouses$': '$1ouse',\n        '(corpse)s$': '$1',\n        '(us)es$': '$1',\n        s$: ''\n    };\n\n    const irregular = {\n        move: 'moves',\n        foot: 'feet',\n        goose: 'geese',\n        sex: 'sexes',\n        child: 'children',\n        man: 'men',\n        tooth: 'teeth',\n        person: 'people'\n    };\n\n    const uncountable = [\n        'sheep',\n        'fish',\n        'deer',\n        'moose',\n        'series',\n        'species',\n        'money',\n        'rice',\n        'information',\n        'equipment'\n    ];\n\n    // save some time in the case that singular and plural are the same\n    if (uncountable.indexOf(revert.toLowerCase()) >= 0)\n        return revert;\n    let word;\n    // check for irregular forms\n    for (word in irregular) {\n        if (!irregular.hasOwnProperty(word)) continue;\n        let pattern;\n        let replace;\n        if (revert) {\n            pattern = new RegExp(irregular[word] + '$', 'i');\n            replace = word;\n        } else {\n            pattern = new RegExp(word + '$', 'i');\n            replace = irregular[word];\n        }\n        if (pattern.test(revert))\n            return revert.replace(pattern, replace);\n    }\n    let array;\n    if (revert) array = singular;\n    else array = plural;\n    let reg;\n\n    // check for matches using regular expressions\n    for (reg in array) {\n        if (!array.hasOwnProperty(reg)) continue;\n        const pattern = new RegExp(reg, 'i');\n\n        if (pattern.test(revert))\n            return revert.replace(pattern, array[reg]);\n    }\n\n    return revert;\n}\n//spell-checker:enable\n\nexport function stripPinkfish(text) {\n    text = text || '';\n    text = text.split('%^');\n    const stack = [];\n    let t = 0;\n    const tl = text.length;\n    for (; t < tl; t++) {\n        if (text[t].startsWith('B_') && is_color(text[t].substr(2)))\n            continue;\n        else if (is_color(text[t]))\n            continue;\n        stack.push(text[t]);\n    }\n    return stack.join('');\n}\n\nlet _colorCodes;\nexport function pinkfishToHTML(text) {\n    text = text || '';\n    text = text.split('%^');\n    if (!_colorCodes)\n        loadColors();\n    const stack = [];\n    let codes = [];\n    let t = 0;\n    let tl = text.length;\n    let bold = false;\n    let boldNest = false;\n    let classes = [];\n    for (; t < tl; t++) {\n        switch (text[t]) {\n            case 'ITALIC':\n                stack.push('<em>');\n                codes.push('</em>');\n                break;\n            case 'UNDERLINE':\n                classes.push('underline');\n                break;\n            case 'STRIKEOUT':\n                classes.push('strikeout');\n                break;\n            case 'DBLUNDERLINE':\n                classes.push('dblunderline');\n                break;\n            case 'OVERLINE':\n                classes.push('overline');\n                break;\n            case 'FLASH':\n                classes.push('noflash');\n                break;\n            case 'REVERSE':\n                classes.push('reverse');\n                break;\n            case 'RESET':\n            case 'DEFAULT':\n                const cl = codes.length;\n                for (let c = 0; c < cl; c++)\n                    stack.push(codes[c]);\n                codes = [];\n                classes = [];\n                break;\n            case 'BOLD':\n                bold = true;\n                break;\n            case '':\n                break;\n            default:\n                if (text[t].startsWith('B_')) {\n                    text[t] = text[t].substr(2);\n                    if (bold && !boldNest) {\n                        stack.push('<span style=\"border: inherit;text-decoration:inherit;color: #' + _colorCodes['BOLD%^%^WHITE'] + '\">');\n                        codes.push('</span>');\n                    }\n                    stack.push('<span style=\"border: inherit;text-decoration:inherit;background-color: #' + _colorCodes[text[t]] + '\">');\n                    codes.push('</span>');\n                    bold = false;\n                    continue;\n                }\n                else if (_colorCodes[text[t]]) {\n                    if (bold && !_colorCodes['BOLD%^%^' + text[t]]) {\n                        stack.push('<span style=\"border: inherit;text-decoration:inherit;color: #' + _colorCodes['BOLD%^%^WHITE'] + '\">');\n                        codes.push('</span>');\n                        boldNest = true;\n                    }\n                    else if (bold) {\n                        stack.push('<span style=\"border: inherit;text-decoration:inherit;color: #' + _colorCodes['BOLD%^%^' + text[t]] + '\">');\n                        codes.push('</span>');\n                        boldNest = true;\n                        continue;\n                    }\n                    stack.push('<span style=\"border: inherit;text-decoration:inherit;color: #' + _colorCodes[text[t]] + '\">');\n                    codes.push('</span>');\n                    continue;\n                }\n                else if (bold && !boldNest) {\n                    stack.push('<span style=\"border: inherit;text-decoration:inherit;color: #' + _colorCodes['BOLD%^%^WHITE'] + '\">');\n                    codes.push('</span>');\n                }\n                if (classes.length) {\n                    stack.push('<span class=\"' + classes.join(' ') + '\">');\n                    codes.push('</span>');\n                    classes = [];\n                }\n                stack.push(text[t]);\n                bold = false;\n                boldNest = false;\n                break;\n        }\n    }\n    if (classes.length) {\n        stack.push('<span class=\"' + classes.join(' ') + '\">');\n        codes.push('</span>');\n    }\n    for (t = 0, tl = codes.length; t < tl; t++)\n        stack.push(codes[t]);\n    return stack.join('');\n}\n\nfunction loadColors() {\n    let c;\n    let color;\n    let r;\n    let g;\n    let b;\n    let idx;\n    _colorCodes = {};\n\n    _colorCodes['BLACK'] = '000000';\n    _colorCodes['RED'] = '800000';\n    _colorCodes['GREEN'] = '008000';\n    _colorCodes['ORANGE'] = '808000';\n    _colorCodes['BLUE'] = '0000EE';\n    _colorCodes['MAGENTA'] = '800080';\n    _colorCodes['CYAN'] = '008080';\n    _colorCodes['WHITE'] = 'BBBBBB';\n    _colorCodes['mono11'] = '808080';\n    _colorCodes['BOLD%^%^RED'] = 'FF0000';\n    _colorCodes['BOLD%^%^GREEN'] = '00FF00';\n    _colorCodes['YELLOW'] = 'FFFF00';\n    _colorCodes['BOLD%^%^YELLOW'] = 'FFFF00';\n    _colorCodes['BOLD%^%^BLUE'] = '5C5CFF';\n    _colorCodes['BOLD%^%^MAGENTA'] = 'FF00FF';\n    _colorCodes['BOLD%^%^CYAN'] = '00FFFF';\n    _colorCodes['BOLD%^%^WHITE'] = 'FFFFFF';\n    _colorCodes['BOLD%^%^BLACK'] = '808080';\n\n    for (r = 0; r < 6; r++) {\n        for (g = 0; g < 6; g++) {\n            for (b = 0; b < 6; b++) {\n                idx = `RGB${r}${g}${b}`;\n                color = '';\n                c = 0;\n                c = r * 40 + 55;\n                if (c < 16)\n                    color += '0';\n                color += c.toString(16);\n                c = 0;\n                c = g * 40 + 55;\n                if (c < 16)\n                    color += '0';\n                color += c.toString(16);\n                c = 0;\n                c = b * 40 + 55;\n                if (c < 16)\n                    color += '0';\n                color += c.toString(16);\n                if (!_colorCodes[idx])\n                    _colorCodes[idx] = color.toUpperCase();\n            }\n        }\n    }\n\n    for (r = 232; r <= 255; r++) {\n        g = (r - 232) * 10 + 8;\n        if (g < 16)\n            g = '0' + g.toString(16).toUpperCase();\n        else\n            g = g.toString(16).toUpperCase();\n        g = g + g + g;\n        if (r < 242)\n            _colorCodes['mono0' + (r - 232)] = g;\n        else\n            _colorCodes['mono' + (r - 232)] = g;\n    }\n}\n\nexport function getColors() {\n    const _ColorTable = [];\n    let r;\n    let g;\n    let b;\n    let idx;\n    for (r = 0; r < 6; r++) {\n        for (g = 0; g < 6; g++) {\n            for (b = 0; b < 6; b++) {\n                idx = 16 + (r * 36) + (g * 6) + b;\n                _ColorTable[idx] = 'rgb(';\n                if (r > 0)\n                    _ColorTable[idx] += r * 40 + 55;\n                else\n                    _ColorTable[idx] += '0';\n                _ColorTable[idx] += ',';\n                if (g > 0)\n                    _ColorTable[idx] += g * 40 + 55;\n                else\n                    _ColorTable[idx] += '0';\n                _ColorTable[idx] += ',';\n                if (b > 0)\n                    _ColorTable[idx] += b * 40 + 55;\n                else\n                    _ColorTable[idx] += '0';\n                _ColorTable[idx] += ')';\n            }\n        }\n    }\n    for (r = 232; r <= 255; r++) {\n        g = (r - 232) * 10 + 8;\n        _ColorTable[r] = ['rgb(', g, ',', g, ',', g, ')'].join('');\n    }\n    _ColorTable[0] = 'rgb(0,0,0)'; //black fore\n    _ColorTable[1] = 'rgb(128, 0, 0)'; //red fore\n    _ColorTable[2] = 'rgb(0, 128, 0)'; //green fore\n    _ColorTable[3] = 'rgb(128, 128, 0)'; //yellow fore\n    _ColorTable[4] = 'rgb(0, 0, 238)'; //blue fore\n    _ColorTable[5] = 'rgb(128, 0, 128)'; //magenta fore\n    _ColorTable[6] = 'rgb(0, 128, 128)'; //cyan fore\n    _ColorTable[7] = 'rgb(187, 187, 187)'; //white fore\n    _ColorTable[8] = 'rgb(128, 128, 128)'; //black  bold\n    _ColorTable[9] = 'rgb(255, 0, 0)'; //Red bold\n    _ColorTable[10] = 'rgb(0, 255, 0)'; //green bold\n    _ColorTable[11] = 'rgb(255, 255, 0)'; //yellow bold\n    _ColorTable[12] = 'rgb(92, 92, 255)'; //blue bold\n    _ColorTable[13] = 'rgb(255, 0, 255)'; //magenta bold\n    _ColorTable[14] = 'rgb(0, 255, 255)'; //cyan bold\n    _ColorTable[15] = 'rgb(255, 255, 255)'; //white bold\n    _ColorTable[256] = 'rgb(0, 0, 0)'; //black faint\n    _ColorTable[257] = 'rgb(118, 0, 0)'; //red  faint\n    _ColorTable[258] = 'rgb(0, 108, 0)'; //green faint\n    _ColorTable[259] = 'rgb(145, 136, 0)'; //yellow faint\n    _ColorTable[260] = 'rgb(0, 0, 167)'; //blue faint\n    _ColorTable[261] = 'rgb(108, 0, 108)'; //magenta faint\n    _ColorTable[262] = 'rgb(0, 108, 108)'; //cyan faint\n    _ColorTable[263] = 'rgb(161, 161, 161)'; //white faint\n    _ColorTable[264] = 'rgb(0, 0, 0)'; //BackgroundBlack\n    _ColorTable[265] = 'rgb(128, 0, 0)'; //red back\n    _ColorTable[266] = 'rgb(0, 128, 0)'; //greenback\n    _ColorTable[267] = 'rgb(128, 128, 0)'; //yellow back\n    _ColorTable[268] = 'rgb(0, 0, 238)'; //blue back\n    _ColorTable[269] = 'rgb(128, 0, 128)'; //magenta back\n    _ColorTable[270] = 'rgb(0, 128, 128)'; //cyan back\n    _ColorTable[271] = 'rgb(187, 187, 187)'; //white back\n    _ColorTable[272] = 'rgb(0,0,0)'; //InfoBackground\n    _ColorTable[273] = 'rgb(0, 255, 255)'; //InfoText\n    _ColorTable[274] = 'rgb(0,0,0)'; //LocalEchoBackground\n    _ColorTable[275] = 'rgb(255, 255, 0)'; //LocalEchoText\n    _ColorTable[276] = 'rgb(0, 0, 0)'; //DefaultBack\n    _ColorTable[277] = 'rgb(229, 229, 229)'; //DefaultFore\n    _ColorTable[278] = 'rgb(205, 0, 0)'; //ErrorFore\n    _ColorTable[279] = 'rgb(229, 229, 229)'; //ErrorBack\n    _ColorTable[280] = 'rgb(255,255,255)'; //DefaultBrightFore\n    return _ColorTable;\n}\n\nexport function formatUnit(str, ch?) {\n    if (!str) return str;\n    if (/^\\d+c$/.test(str)) {\n        if (ch)\n            return (parseInt(str, 10) * ch) + 'px';\n        return str + 'h';\n    }\n    if (/^\\d+$/.test(str))\n        return parseInt(str, 10) + 'px';\n    return str;\n}\n\nexport function replaceHtml(el, html) {\n    const oldEl = typeof el === 'string' ? document.getElementById(el) : el;\n    /*@cc_on // Pure innerHTML is slightly faster in IE\n        oldEl.innerHTML = html;\n        return oldEl;\n    @*/\n    const newEl = oldEl.cloneNode(false);\n    newEl.innerHTML = html;\n    oldEl.parentNode.replaceChild(newEl, oldEl);\n    /* Since we just removed the old element from the DOM, return a reference\n    to the new element, which can be used to restore variable references. */\n    return newEl;\n}\n\nexport function isValidIdentifier(str: string): boolean {\n    if (!str || str.length === 0) return false;\n    //valid character check\n    if (!str.match(/^[a-zA-Z_$][a-zA-Z_$0-9]*$/g))\n        return false;\n    //not a keyword\n    return ['break', 'case', 'catch', 'continue', 'debugger', 'default', 'delete', 'do', 'else', 'finally', 'for', 'function', 'if', 'in', 'instanceof', 'new', 'return', 'switch', 'this', 'throw', 'try', 'typeof', 'var', 'void', 'while', 'with', 'class', 'const', 'enum', 'export', 'extends', 'import', 'super', 'implements', 'interface', 'let', 'package', 'private', 'protected', 'public', 'static', 'yield', 'null', 'true', 'false', 'NaN', 'Infinity', 'undefined', 'eval', 'arguments'].indexOf(str) === -1;\n}\n\nexport function escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nexport function insertValue(input, value) {\n    if (!input) return;\n    const active = <HTMLElement>document.activeElement;\n    if (!active || active != input)\n        input.focus();\n    document.execCommand(\"insertText\", false, value);\n    if (active && active != input)\n        active.focus();\n}\n\nif (!Array.isArray) {\n    (<any>Array.isArray) = function (arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\nlet txtDecoder;\nexport function ArrayBufferToString(buffer) {\n    if (window.TextDecoder !== undefined) {\n        return (txtDecoder || (txtDecoder = new TextDecoder())).decode(new Uint8Array(buffer));\n    }\n    return BinaryToString(String.fromCharCode.apply(null, Array.prototype.slice.apply(new Uint8Array(buffer))));\n}\n\nexport function Uint8ArrayToString(buffer) {\n    if (window.TextDecoder !== undefined)\n        return (txtDecoder || (txtDecoder = new TextDecoder())).decode(buffer);\n    return BinaryToString(String.fromCharCode.apply(null, Array.prototype.slice.apply(buffer)));\n}\n\nexport function StringToArrayBuffer(string) {\n    return StringToUint8Array(string).buffer;\n}\n\nexport function BinaryToString(binary) {\n    var error;\n\n    try {\n        return decodeURIComponent(escape(binary));\n    } catch (_error) {\n        error = _error;\n        if (error instanceof URIError) {\n            return binary;\n        } else {\n            throw error;\n        }\n    }\n}\n\nexport function StringToBinary(string) {\n    var chars, code, i, isUCS2, len, _i;\n\n    len = string.length;\n    chars = [];\n    isUCS2 = false;\n    for (i = _i = 0; 0 <= len ? _i < len : _i > len; i = 0 <= len ? ++_i : --_i) {\n        code = String.prototype.charCodeAt.call(string, i);\n        if (code > 255) {\n            isUCS2 = true;\n            chars = null;\n            break;\n        } else {\n            chars.push(code);\n        }\n    }\n    if (isUCS2 === true) {\n        return unescape(encodeURIComponent(string));\n    } else {\n        return String.fromCharCode.apply(null, Array.prototype.slice.apply(chars));\n    }\n}\n\nlet txtEncoder;\nexport function StringToUint8Array(string) {\n    var binary, binLen, buffer, chars, i, _i;\n    if (window.TextEncoder !== undefined)\n        return (txtEncoder || (txtEncoder = new TextEncoder())).encode(string);\n    binary = StringToBinary(string);\n    binLen = binary.length;\n    buffer = new ArrayBuffer(binLen);\n    chars = new Uint8Array(buffer);\n    for (i = _i = 0; 0 <= binLen ? _i < binLen : _i > binLen; i = 0 <= binLen ? ++_i : --_i) {\n        chars[i] = String.prototype.charCodeAt.call(binary, i);\n    }\n    return chars;\n}\n\n//attempt to copy text to clipboard, may or may not always work depending on permissions and browser\nexport function copyText(text: string) {\n    return new Promise(function (resolve, reject) {\n        try {\n            if (typeof navigator !== \"undefined\" && typeof navigator.clipboard !== \"undefined\" && typeof navigator.permissions !== \"undefined\") {\n                var blob = new Blob([text], { type: \"text/plain\" });\n                var data = [new ClipboardItem({ \"text/plain\": blob })];\n                navigator.permissions.query({ name: \"clipboardWrite\" as PermissionName }).then(function (permission) {\n                    if (permission.state === \"granted\" || permission.state === \"prompt\") {\n                        navigator.clipboard.write(data).then(resolve, reject).catch(reject);\n                    }\n                    else {\n                        reject(new Error(\"Permission not granted!\"));\n                    }\n                });\n            }\n            else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\n                var textarea = document.createElement(\"textarea\");\n                textarea.value = text;\n                textarea.textContent = text;\n                textarea.style.position = \"fixed\";\n                textarea.style.width = '2em';\n                textarea.style.height = '2em';\n                textarea.style.padding = '0';\n                textarea.style.border = 'none';\n                textarea.style.outline = 'none';\n                textarea.style.boxShadow = 'none';\n                textarea.style.background = 'transparent';\n                document.body.appendChild(textarea);\n                textarea.focus();\n                textarea.select();\n                try {\n                    document.execCommand(\"copy\");\n                    document.body.removeChild(textarea);\n                    resolve(null);\n                }\n                catch (e) {\n                    document.body.removeChild(textarea);\n                    reject(e);\n                }\n            }\n            else {\n                reject(new Error(\"None of copying methods are supported by this browser!\"));\n            }\n        } catch (err) {\n            reject(err);\n        }\n    });\n}\n\nexport function pasteText() {\n    return new Promise<string>(function (resolve, reject) {\n        try {\n            if (typeof navigator !== \"undefined\" && typeof navigator.clipboard !== \"undefined\" && typeof navigator.permissions !== \"undefined\") {\n                navigator.permissions.query({ name: \"clipboardRead\" as PermissionName }).then(function (permission) {\n                    if (permission.state === \"granted\" || permission.state === \"prompt\") {\n                        navigator.clipboard.readText().then(resolve, reject).catch(reject);\n                    }\n                    else {\n                        reject(new Error(\"Permission not granted!\"));\n                    }\n                });\n            }\n            else if (document.queryCommandSupported && document.queryCommandSupported(\"paste\")) {\n                var textarea = document.createElement(\"textarea\");\n                textarea.style.position = \"fixed\";\n                textarea.style.width = '2em';\n                textarea.style.height = '2em';\n                textarea.style.padding = '0';\n                textarea.style.border = 'none';\n                textarea.style.outline = 'none';\n                textarea.style.boxShadow = 'none';\n                textarea.style.background = 'transparent';\n                document.body.appendChild(textarea);\n                textarea.focus();\n                textarea.select();\n                try {\n                    document.execCommand(\"paste\", false, null);\n                    resolve(textarea.value);\n                    document.body.removeChild(textarea);\n                }\n                catch (e) {\n                    document.body.removeChild(textarea);\n                    reject(e);\n                }\n            }\n            else {\n                reject(new Error(\"None of pasting methods are supported by this browser!\"));\n            }\n        } catch (err) {\n            reject(err);\n        }\n    });\n}\n\nexport function pasteSync() {\n    let value = '';\n    if (document.queryCommandSupported && document.queryCommandSupported(\"paste\")) {\n        var textarea = document.createElement(\"textarea\");\n        textarea.style.position = \"fixed\";\n        textarea.style.width = '2em';\n        textarea.style.height = '2em';\n        textarea.style.padding = '0';\n        textarea.style.border = 'none';\n        textarea.style.outline = 'none';\n        textarea.style.boxShadow = 'none';\n        textarea.style.background = 'transparent';\n        document.body.appendChild(textarea);\n        textarea.focus();\n        textarea.select();\n        try {\n            document.execCommand(\"paste\", false, null);\n            value = textarea.value;\n        }\n        catch (e) {\n        }\n        finally {\n            document.body.removeChild(textarea);\n        }\n    }\n    return value;\n}\n\nexport function getParameterByName(name: string, url?: string): string {\n    if (!name) return null;\n    if (!url) url = window.location.href;\n    name = name.replace(/[[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nexport function fSaveAs() {\n    // Feature test: Does this browser support the download attribute on anchor tags? (currently only Chrome)\n    var DownloadAttributeSupport = 'download' in document.createElement('a');\n\n    // Use any available BlobBuilder/URL implementation:\n    var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    // IE 10 has a handy navigator.msSaveBlob method. Maybe other browsers will emulate that interface?\n    // See: http://msdn.microsoft.com/en-us/library/windows/apps/hh441122.aspx\n    navigator.saveBlob = navigator.saveBlob || navigator.msSaveBlob || navigator.mozSaveBlob || navigator.webkitSaveBlob;\n\n    // Anyway, HMTL5 defines a very similar but more powerful window.saveAs function:\n    // http://www.w3.org/TR/file-writer-api/#the-filesaver-interface\n    window.saveAs = window.saveAs || window.webkitSaveAs || window.mozSaveAs || window.msSaveAs;\n    // However, this is not supported by any browser yet. But there is a compatibility library that\n    // adds this function to browsers that support Blobs (except Internet Exlorer):\n    // http://eligrey.com/blog/post/saving-generated-files-on-the-client-side\n    // https://github.com/eligrey/FileSaver.js\n\n    // mime types that (potentially) don't trigger a download when opened in a browser:\n    var BrowserSupportedMimeTypes = {\n        'image/jpeg': true,\n        'image/png': true,\n        'image/gif': true,\n        'image/svg+xml': true,\n        'image/bmp': true,\n        'image/x-windows-bmp': true,\n        'image/webp': true,\n        'audio/wav': true,\n        'audio/mpeg': true,\n        'audio/webm': true,\n        'audio/ogg': true,\n        'video/mpeg': true,\n        'video/webm': true,\n        'video/ogg': true,\n        'text/plain': true,\n        'text/html': true,\n        'text/xml': true,\n        'application/xhtml+xml': true,\n        'application/json': true\n    };\n\n    // Blobs and saveAs (or saveBlob)\t:\n    if (BlobBuilder && (window.saveAs || navigator.saveBlob)) {\n        // Currently only IE 10 supports this, but I hope other browsers will also implement the saveAs/saveBlob method eventually.\n        this.show = function (data, name, mimetype) {\n            var builder = new BlobBuilder();\n            builder.append(data);\n            var blob = builder.getBlob(mimetype || 'application/octet-stream');\n            if (!name) name = 'Download.bin';\n            // I don't assign saveAs to navigator.saveBlob (or the other way around)\n            // because I cannot know at this point whether future implementations\n            // require these methods to be called with 'this' assigned to window (or\n            // naviagator) in order to work. E.g. console.log won't work when not called\n            // with this === console.\n            if (window.saveAs) {\n                window.saveAs(blob, name);\n            }\n            else {\n                navigator.saveBlob(blob, name);\n            }\n        };\n    }\n    // Blobs and object URLs:\n    else if (BlobBuilder && URL) {\n        // Currently WebKit and Gecko support BlobBuilder and object URLs.\n        this.show = function (data, name, mimetype) {\n            var blob, url, builder = new BlobBuilder();\n            builder.append(data);\n            if (!mimetype) mimetype = 'application/octet-stream';\n            if (DownloadAttributeSupport) {\n                blob = builder.getBlob(mimetype);\n                url = URL.createObjectURL(blob);\n                // Currently only Chrome (since 14-dot-something) supports the download attribute for anchor elements.\n                var link = document.createElement('a');\n                link.setAttribute('href', url);\n                link.setAttribute('download', name || 'Download.bin');\n                // Now I need to simulate a click on the link.\n                // IE 10 has the better msSaveBlob method and older IE versions do not support the BlobBuilder interface\n                // and object URLs, so we don't need the MS way to build an event object here.\n                var event = document.createEvent('MouseEvents');\n                event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n                link.dispatchEvent(event);\n            }\n            else {\n                // In other browsers I open a new window with the object URL.\n                // In order to trigger a download I have to use the generic binary data mime type\n                // \"application/octet-stream\" for mime types that browsers would display otherwise.\n                // Of course the browser won't show a nice file name here.\n                if (BrowserSupportedMimeTypes[mimetype.split(';')[0]] === true) {\n                    mimetype = 'application/octet-stream';\n                }\n\n                blob = builder.getBlob(mimetype);\n                url = URL.createObjectURL(blob);\n                window.open(url, '_blank', '');\n            }\n            // The timeout is probably not necessary, but just in case that some browser handle the click/window.open\n            // asynchronously I don't revoke the object URL immediately.\n            setTimeout(function () {\n                URL.revokeObjectURL(url);\n            }, 250);\n\n            // Using the filesystem API (http://www.w3.org/TR/file-system-api/) you could do something very similar.\n            // However, I think this is only supported by Chrome right now and it is much more complicated than this\n            // solution. And chrome supports the download attribute anyway.\n        };\n    }\n    else if (Blob && URL) {\n        this.show = function (data, name, mimetype) {\n            var blob, url;\n            if (!mimetype) mimetype = 'application/octet-stream';\n            blob = new Blob([data], { type: mimetype });\n            if (DownloadAttributeSupport) {\n                url = URL.createObjectURL(blob);\n                // Currently only Chrome (since 14-dot-something) supports the download attribute for anchor elements.\n                var link = document.createElement('a');\n                link.setAttribute('href', url);\n                link.setAttribute('download', name || 'Download.bin');\n                // Now I need to simulate a click on the link.\n                // IE 10 has the better msSaveBlob method and older IE versions do not support the BlobBuilder interface\n                // and object URLs, so we don't need the MS way to build an event object here.\n                var event = document.createEvent('MouseEvents');\n                event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n                link.dispatchEvent(event);\n            }\n            else {\n                // In other browsers I open a new window with the object URL.\n                // In order to trigger a download I have to use the generic binary data mime type\n                // \"application/octet-stream\" for mime types that browsers would display otherwise.\n                // Of course the browser won't show a nice file name here.\n                if (BrowserSupportedMimeTypes[mimetype.split(';')[0]] === true) {\n                    mimetype = 'application/octet-stream';\n                }\n                url = URL.createObjectURL(blob);\n                window.open(url, '_blank', '');\n            }\n            // The timeout is probably not necessary, but just in case that some browser handle the click/window.open\n            // asynchronously I don't revoke the object URL immediately.\n            setTimeout(function () {\n                URL.revokeObjectURL(url);\n            }, 250);\n\n            // Using the filesystem API (http://www.w3.org/TR/file-system-api/) you could do something very similar.\n            // However, I think this is only supported by Chrome right now and it is much more complicated than this\n            // solution. And chrome supports the download attribute anyway.\n        };\n    }\n    // data:-URLs:\n    else if (!/\\bMSIE\\b/.test(navigator.userAgent)) {\n        // IE does not support URLs longer than 2048 characters (actually bytes), so it is useless for data:-URLs.\n        // Also it seems not to support window.open in combination with data:-URLs at all.\n        this.show = function (data, name, mimetype) {\n            if (!mimetype) mimetype = 'application/octet-stream';\n            // Again I need to filter the mime type so a download is forced.\n            if (BrowserSupportedMimeTypes[mimetype.split(';')[0]] === true) {\n                mimetype = 'application/octet-stream';\n            }\n            // Note that encodeURIComponent produces UTF-8 encoded text. The mime type should contain\n            // the charset=UTF-8 parameter. In case you don't want the data to be encoded as UTF-8\n            // you could use escape(data) instead.\n            window.open('data:' + mimetype + ',' + encodeURIComponent(data), '_blank', '');\n        };\n    }\n    // Internet Explorer before version 10 does not support any of the methods above.\n    // If it is text data you could show it in an textarea and tell the user to copy it into a text file.\n}\n\nwindow.fileSaveAs = new fSaveAs();\n\n\nfunction utf8() {\n    var intc, i;\n\n    //http://siphon9.net/loune/2009/10/javascript-snippet-to-convert-raw-utf8-to-unicode/\n    function TryGetCharUTF8(b, count) {\n        var c = b.charCodeAt(i);\n        /*\n         * 10000000 80\n         * 11000000 C0\n         * 11100000 E0\n         * 11110000 F0\n         * 11111000 F8\n         * 11111100 FC\n         * \n         * FEFF = 65279 = BOM\n         * \n         * string musicalbassclef = \"\" + (char)0xD834 + (char)0xDD1E; 119070 0x1D11E\n         */\n        if ((c & 0x80) === 0)\n            intc = c;\n        else {\n            if ((c & 0xE0) == 0xC0) {\n                intc = ((c & 0x1F) << 6) | ((b.charCodeAt(i + 1) & 0x3F));\n                i += 1;\n            }\n            else if ((c & 0xF0) == 0xE0) {\n                // 3 bytes Covers the rest of the BMP\n                //if (i+2 >= count) return false;\n                intc = ((c & 0xF) << 12) | ((b.charCodeAt(i + 1) & 0x3F) << 6) | ((b.charCodeAt(i + 2) & 0x3F));\n                //alert(c + ' '+b.charCodeAt(i + 1) +' '+b.charCodeAt(i + 2));\n                i += 2;\n            }\n            else if ((c & 0xF8) == 0xF0) {\n                intc = ((c & 0x7) << 18) | ((b.charCodeAt(i + 1) & 0x3F) << 12) | ((b.charCodeAt(i + 2) & 0x3F) << 6) | ((b.charCodeAt(i + 3) & 0x3F));\n                i += 1;\n            }\n            else\n                return false;\n        }\n        return true;\n    }\n\n    this.decode = function (s) {\n        var ss = new StringBuffer();\n        var sl = s.length;\n        for (i = 0; i < sl; i++) {\n            if (TryGetCharUTF8(s, sl))\n                ss.appendCode(intc);\n        }\n        return ss.toString();\n    };\n\n    this.decode2 = function (s) {\n        var ss = new StringBuffer();\n        var sl = s.length;\n        var i, c;\n        for (i = 0; i < sl; i++) {\n            c = s.charCodeAt(i);\n            if ((c & 0x80) !== 0) {\n                if ((c & 0xE0) == 0xC0) {\n                    c = ((c & 0x1F) << 6) | ((s.charCodeAt(i + 1) & 0x3F));\n                    i += 1;\n                }\n                else if ((c & 0xF0) == 0xE0) {\n                    c = ((c & 0xF) << 12) | ((s.charCodeAt(i + 1) & 0x3F) << 6) | ((s.charCodeAt(i + 2) & 0x3F));\n                    i += 2;\n                }\n                else if ((c & 0xF8) == 0xF0) {\n                    c = ((c & 0x7) << 18) | ((s.charCodeAt(i + 1) & 0x3F) << 12) | ((s.charCodeAt(i + 2) & 0x3F) << 6) | ((s.charCodeAt(i + 3) & 0x3F));\n                    i += 1;\n                }\n                else\n                    continue;\n            }\n            ss.appendCode(c);\n        }\n        return ss.toString();\n    };\n\n}\n\nwindow.UTF8 = new utf8();\n\nexport function printArray(data) {\n    if (data === null || typeof data == 'undefined') return data;\n    var dl, ba;\n    var idx = 0;\n    dl = data.byteLength;\n    ba = new StringBuffer();\n    for (; idx < dl; idx++) {\n        if (data[idx] < 32 || data[idx] >= 127)\n            ba.append('<' + data[idx] + '>');\n        else\n            ba.append(String.fromCharCode(data[idx]));\n    }\n    //save newly escaped string\n    return ba.toString();\n}\n\nexport function getScrollbarWidth() {\n\n    // Creating invisible container\n    const outer = document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.overflow = 'scroll'; // forcing scrollbar to appear\n    (<any>outer.style).msOverflowStyle = 'scrollbar'; // needed for WinJS apps\n    document.body.appendChild(outer);\n\n    // Creating inner element and placing it in the container\n    const inner = document.createElement('div');\n    outer.appendChild(inner);\n\n    // Calculating difference between container's full width and the child width\n    const scrollbarWidth = (outer.offsetWidth - inner.offsetWidth);\n\n    // Removing temporary elements from the DOM\n    outer.parentNode.removeChild(outer);\n\n    return scrollbarWidth;\n\n}\n\nexport function openFileDialog(title?: string, multiple?: boolean, accept?: string) {\n    return new Promise<FileList>((resolve, reject) => {\n        let dialog = document.createElement('dialog');\n        if (typeof dialog.showModal !== \"function\") {\n            reject(\"Browser does not support dialogs.\");\n            return;\n        }\n        dialog.id = 'openFileDialog';\n        dialog.style.zIndex = '2000';\n        dialog.style.height = '158px';\n        dialog.style.width = '350px';\n        dialog.innerHTML = `<div class=\"dialog-header\" style=\"font-weight: bold\"><button type=\"button\" class=\"btn btn-close float-end btn-danger\" data-dismiss=\"modal\" onclick=\"document.getElementById('openFileDialog').close();\"></button><div>${title || 'Open file...'}</div></div><div class=\"dialog-body\"><div class=\"m-3\"><input class=\"form-control\" type=\"file\" id=\"openFileDialog-files\"${multiple ? ' multiple' : ''} required${accept && accept.length ? (' accept=\"' + accept + '\"') : ''}></div></div><div class=\"dialog-footer\"><button id=\"openFileDialog-cancel\" style=\"float: right\" type=\"button\" class=\"btn btn-default\" onclick=\"document.getElementById('openFileDialog').close();\">Cancel</button><button id=\"openFileDialog-ok\" style=\"float: right\" type=\"button\" class=\"btn btn-primary\">Ok</button></div>`;\n        document.body.appendChild(dialog);\n        //dialog.addEventListener('open', onOpen);\n        dialog.addEventListener('close', e => {\n            if (e.target !== dialog) return;\n            document.body.removeChild(dialog);\n            if (dialog.returnValue !== 'file-ok')\n                reject('closed');\n        });\n        dialog.addEventListener('cancel', e => {\n            if (e.target !== dialog) return;\n            document.body.removeChild(dialog);\n            if (dialog.returnValue !== 'file-ok')\n                reject('canceled');\n        });\n        document.getElementById('openFileDialog-ok').addEventListener('click', () => {\n            const input: HTMLInputElement = (<HTMLInputElement>document.getElementById('openFileDialog-files'));\n            if (!input.files || input.files.length === 0) {\n                input.classList.add('is-invalid')\n                return;\n            }\n            input.classList.remove('is-invalid');\n            dialog.close();\n            dialog.returnValue = 'files-ok';\n            resolve(input.files);\n        });\n        dialog.showModal();\n    });\n}\n\nexport function readFile(file) {\n    return new Promise((resolve, reject) => {\n        if (!file) reject(new Error('Invalid file'));\n        var reader = new FileReader();\n        reader.onerror = reject;\n        reader.onload = evt => {\n            resolve(evt.target.result);\n        };\n        reader.readAsText(file);\n    });\n}\n\nconst _timers = {};\nexport function debounce(mainFunction, delay, key?) {\n    key = key || 'default';\n    // Clear the previous timer to prevent the execution of 'mainFunction'\n    clearTimeout(_timers[key]);\n    // Set a new timer that will execute 'mainFunction' after the specified delay\n    _timers[key] = setTimeout(() => {\n        mainFunction();\n        delete _timers[key];\n    }, delay);\n}\n\nexport function markdownParser(text) {\n    const toHTML = text\n        .replace(/`(.*)`/gim, '<span class=\"markdown-code\" style=\"display: inline-block;background-color: #ececec\">$1</span>') // code block\n        .replace(/^---/gim, '<hr>')\n        .replace(/\\[(.*)\\]\\((.*)\\)/gim, '<a href=\"$2\">$1</a>')\n        .replace(/^##### (.*$)/gim, '<h5>$1</h5>') // h3 tag\n        .replace(/^##### (.*$)/gim, '<h5>$1</h5>') // h3 tag\n        .replace(/^#### (.*$)/gim, '<h4>$1</h4>') // h3 tag\n        .replace(/^### (.*$)/gim, '<h3>$1</h3>') // h3 tag\n        .replace(/^## (.*$)/gim, '<h2>$1</h2>') // h2 tag\n        .replace(/^# (.*$)/gim, '<h1>$1</h1>') // h1 tag\n        .replace(/\\*\\*(.*)\\*\\*/gim, '<b>$1</b>') // bold text\n        .replace(/\\*(.*)\\*/gim, '<i>$1</i>') // italic text\n        .replace(/_(.*)_/gim, '<i>$1</i>') // italic text\n        .replace(/\\\\$/gim, '$')\n        .replace(/\\\\{/gim, '\\\\');\n    return toHTML.trim(); // using trim method to remove whitespace\n}\n\nexport function scrollChildIntoView(parent, child) {\n    const childRect = child.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n\n    if (\n        childRect.top < parentRect.top ||\n        childRect.bottom > parentRect.bottom ||\n        childRect.left < parentRect.left ||\n        childRect.right > parentRect.right\n    ) {\n        child.scrollIntoView({\n            behavior: \"smooth\", // Optional for smooth scrolling\n            block: \"nearest\" // Scrolls to nearest edge of the parent\n        });\n    }\n}\n\nexport function getWordAtPosition(x, y) {\n    // Get the element at the specified coordinates\n    const element = document.elementFromPoint(x, y);\n\n    // Check if the element exists and contains text\n    if (element && element.textContent) {\n        // Get the text content of the element\n        const text = element.textContent;\n\n        // Find the word boundaries around the specified position\n        let start = text.lastIndexOf(' ', x) + 1;\n        let end = text.indexOf(' ', x);\n        if (end === -1) {\n            end = text.length;\n        }\n\n        // Extract the word\n        const word = text.substring(start, end);\n\n        return word;\n    }\n\n    return null;\n}", "import { EventEmitter } from \"../events\";\r\nimport { debounce } from \"../library\";\r\n\r\nexport interface DialogOptions {\r\n    title?: string;\r\n    width?: string | number;\r\n    height?: string | number;\r\n    minWidth?: string | number;\r\n    minHeight?: string | number;\r\n    x?: string | number;\r\n    y?: string | number;\r\n    id?: string;\r\n    buttons?: DialogButtons;\r\n    resizable?: boolean;\r\n    moveable?: boolean;\r\n    maximizable?: boolean;\r\n    noAdaptive?: boolean;\r\n    maximized?: boolean;\r\n    showModal?: boolean;\r\n    show?: boolean | number;\r\n    center?: boolean;\r\n    keepCentered?: boolean;\r\n    noFooter?: boolean;\r\n    position?: Position;\r\n}\r\n\r\nenum ResizeType {\r\n    None = 0,\r\n    Right = 1 << 0,\r\n    Bottom = 1 << 1,\r\n    Left = 1 << 2,\r\n    Top = 1 << 3,\r\n}\r\n\r\nenum Position {\r\n    Left = 1 << 0,\r\n    Right = 1 << 1,\r\n    Top = 1 << 2,\r\n    Bottom = 1 << 3,\r\n    CenterVertical = 1 << 4,\r\n    CenterHorizontal = 1 << 5,\r\n    Center = Position.CenterHorizontal | Position.CenterVertical\r\n}\r\n\r\nexport enum DialogButtons {\r\n    None = 0,\r\n    Ok = 1 << 0,\r\n    Cancel = 1 << 1,\r\n    Yes = 1 << 2,\r\n    No = 1 << 3,\r\n    YesNo = Yes | No,\r\n    Standard = Ok | Cancel\r\n}\r\n\r\nexport enum DialogIcon {\r\n    question = 1,\r\n    info = 2,\r\n    error = 3,\r\n    exclamation = 4\r\n}\r\n\r\nexport class Dialog extends EventEmitter {\r\n    private _dialog;\r\n    private _body;\r\n    private _footer;\r\n    private _header;\r\n    private _title;\r\n    private _id;\r\n    private _state = { x: 0, y: 0, height: 0, width: 0, zIndex: 100, maximized: false, show: 0 };\r\n    private _resize = { x: 0, y: 0, height: 0, width: 0, type: ResizeType.None, minHeight: 150, minWidth: 300, borderHeight: 1, borderWidth: 1 };\r\n    private _dragPosition = { x: 0, y: 0 };\r\n\r\n    private _resizeObserver;\r\n    private _resizeObserverCache;\r\n    private _observer: MutationObserver;\r\n\r\n    private _windowResize = () => {\r\n        //if window resized ensure top left corner is visible\r\n        debounce(() => {\r\n            if (this.keepCentered || (this._state.show === 2 && !this.moveable))\r\n                this.center();\r\n            else\r\n                this.makeVisible();\r\n            if (this._footer.style.display !== 'none')\r\n                this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n        }, 250, this._id + 'dialogResize');\r\n    };\r\n\r\n    private resizeDoDrag = e => {\r\n        let t;\r\n        if ((this._resize.type & ResizeType.Right) === ResizeType.Right) {\r\n            t = this._resize.width + e.clientX - this._resize.x;\r\n            if (t > window.innerWidth) t = window.innerWidth;\r\n            this._dialog.style.width = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Bottom) === ResizeType.Bottom) {\r\n            t = this._resize.height + e.clientY - this._resize.y;\r\n            if (t > window.innerWidth - 16) t = window.innerHeight - 16;\r\n            this._dialog.style.height = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Top) === ResizeType.Top) {\r\n            t = this._resize.height - e.clientY + this._resize.y - this._resize.borderHeight;\r\n            if (t + this._resize.borderHeight > window.innerHeight) t = window.innerHeight;\r\n            if (t + this._resize.borderHeight <= this._resize.minHeight) {\r\n                this._dialog.style.height = this._resize.minHeight + \"px\";\r\n                return;\r\n            }\r\n            this._dialog.style.height = t + \"px\";\r\n            t = e.clientY;\r\n            if (t > window.innerHeight) t = window.innerHeight;\r\n            this._dialog.style.top = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Left) === ResizeType.Left) {\r\n            t = this._resize.width - e.clientX + this._resize.x - this._resize.borderWidth;\r\n            if (t + this._resize.borderWidth > window.innerWidth) t = window.innerWidth;\r\n            if (t + this._resize.borderWidth <= this._resize.minWidth) {\r\n                this._dialog.style.width = this._resize.minWidth + \"px\";\r\n                return;\r\n            }\r\n            this._dialog.style.width = t + \"px\";\r\n            t = e.clientX;\r\n            if (t > window.innerWidth) t = window.innerWidth;\r\n            this._dialog.style.left = t + \"px\";\r\n        }\r\n        if (this._footer.style.display !== 'none')\r\n            this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n    };\r\n\r\n    private resizeTouchDrag = e => {\r\n        if (!e.touches.length) return;\r\n        let t;\r\n        if ((this._resize.type & ResizeType.Right) === ResizeType.Right) {\r\n            t = this._resize.width + e.touches[0].clientX - this._resize.x;\r\n            if (t > window.innerWidth) t = window.innerWidth;\r\n            this._dialog.style.width = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Bottom) === ResizeType.Bottom) {\r\n            t = this._resize.height + e.touches[0].clientY - this._resize.y;\r\n            if (t > window.innerWidth) t = window.innerHeight;\r\n            this._dialog.style.height = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Top) === ResizeType.Top) {\r\n            t = this._resize.height - e.touches[0].clientY + this._resize.y - this._resize.borderHeight;\r\n            if (t + this._resize.borderHeight > window.innerHeight) t = window.innerHeight;\r\n            if (t + this._resize.borderHeight <= this._resize.minHeight) {\r\n                this._dialog.style.height = this._resize.minHeight + \"px\";\r\n                return;\r\n            }\r\n            this._dialog.style.height = t + \"px\";\r\n            t = e.touches[0].clientY;\r\n            if (t > window.innerHeight) t = window.innerHeight;\r\n            this._dialog.style.top = t + \"px\";\r\n        }\r\n        if ((this._resize.type & ResizeType.Left) === ResizeType.Left) {\r\n            t = this._resize.width - e.touches[0].clientX + this._resize.x - this._resize.borderWidth;\r\n            if (t + this._resize.borderWidth > window.innerWidth) t = window.innerWidth;\r\n            if (t + this._resize.borderWidth <= this._resize.minWidth) {\r\n                this._dialog.style.width = this._resize.minWidth + \"px\";\r\n                return;\r\n            }\r\n            this._dialog.style.width = t + \"px\";\r\n            t = e.touches[0].clientX;\r\n            if (t > window.innerWidth) t = window.innerWidth;\r\n            this._dialog.style.left = t + \"px\";\r\n        }\r\n        if (this._footer.style.display !== 'none')\r\n            this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n    };\r\n\r\n    private resizeStopDrag = e => {\r\n        document.documentElement.removeEventListener(\"mousemove\", this.resizeDoDrag);\r\n        document.documentElement.removeEventListener(\"mouseup\", this.resizeStopDrag);\r\n        document.documentElement.removeEventListener(\"touchmove\", this.resizeTouchDrag);\r\n        document.documentElement.removeEventListener(\"touchend\", this.resizeStopDrag);\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._state.x = parseInt(styles.left, 10);;\r\n        this._state.width = parseInt(styles.width, 10);\r\n        this._state.y = parseInt(styles.top, 10);;\r\n        this._state.height = parseInt(styles.height, 10);\r\n        this._body.style.pointerEvents = '';\r\n        this.emit('resized', this._state);\r\n    }\r\n\r\n    private dragMouseDown = e => {\r\n        if (this.maximized) return;\r\n        this._dragPosition.x = e.clientX;\r\n        this._dragPosition.y = e.clientY;\r\n        document.documentElement.addEventListener('mouseup', this.dragMouseUp);\r\n        document.documentElement.addEventListener('mousemove', this.dragMouseMove);\r\n        this._header.style.cursor = 'move';\r\n    };\r\n\r\n    private dragTouchStart = e => {\r\n        if (this.maximized) return;\r\n        this._dragPosition.x = e.clientX;\r\n        this._dragPosition.y = e.clientY;\r\n        document.documentElement.addEventListener('touchend', this.dragMouseUp);\r\n        document.documentElement.addEventListener('touchmove', this.dragTouchMove);\r\n        this._header.style.cursor = 'move';\r\n    };\r\n\r\n    private dragMouseMove = e => {\r\n        let x = this._dragPosition.x - e.clientX;\r\n        let y = this._dragPosition.y - e.clientY;\r\n        this._dragPosition.x = e.clientX;\r\n        this._dragPosition.y = e.clientY;\r\n        this._state.x = this._dialog.offsetLeft - x;\r\n        this._state.y = this._dialog.offsetTop - y;\r\n        if (this._state.x > window.innerWidth - 16)\r\n            this._state.x = window.innerWidth - 16;\r\n        if (this._state.y > window.innerHeight - 16)\r\n            this._state.y = window.innerHeight - 16;\r\n        let size = this._size;\r\n        if (this._state.x < 16 - size.width)\r\n            this._state.x = 16 - size.width;\r\n        if (this._state.y < 16 - size.height)\r\n            this._state.y = 16 - size.height;\r\n        this._dialog.style.left = this._state.x + 'px'\r\n        this._dialog.style.top = this._state.y + 'px'\r\n    };\r\n\r\n    private dragTouchMove = e => {\r\n        if (!e.touches.length) return;\r\n        let x = this._dragPosition.x - e.touches[0].clientX;\r\n        let y = this._dragPosition.y - e.touches[0].clientY;\r\n        this._dragPosition.x = e.touches[0].clientX;\r\n        this._dragPosition.y = e.touches[0].clientY;\r\n        this._state.x = this._dialog.offsetLeft - x;\r\n        this._state.y = this._dialog.offsetTop - y;\r\n        if (this._state.x > window.innerWidth - 16)\r\n            this._state.x = window.innerWidth - 16;\r\n        if (this._state.y > window.innerHeight - 16)\r\n            this._state.y = window.innerHeight - 16;\r\n        let size = this._size;\r\n        if (this._state.x < 16 - size.width)\r\n            this._state.x = 16 - size.width;\r\n        if (this._state.y < 16 - size.height)\r\n            this._state.y = 16 - size.height;\r\n        this._dialog.style.left = this._state.x + 'px'\r\n        this._dialog.style.top = this._state.y + 'px'\r\n    };\r\n\r\n    private dragMouseUp = () => {\r\n        document.documentElement.removeEventListener('mouseup', this.dragMouseUp);\r\n        document.documentElement.removeEventListener('mousemove', this.dragMouseMove);\r\n        document.documentElement.removeEventListener('touchend', this.dragMouseUp);\r\n        document.documentElement.removeEventListener('touchmove', this.dragTouchMove);\r\n        this._header.style.cursor = '';\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._state.x = parseInt(styles.left, 10);;\r\n        this._state.width = parseInt(styles.width, 10);\r\n        this._state.y = parseInt(styles.top, 10);;\r\n        this._state.height = parseInt(styles.height, 10);\r\n        this.emit('moved', this._state);\r\n    };\r\n\r\n    public keepCentered: boolean = false;\r\n    public moveable: boolean = true;\r\n    public resizable: boolean = true;\r\n    private _maximizable: boolean = true;\r\n\r\n    public get maximizable() { return this._maximizable; }\r\n    public set maximizable(value) {\r\n        if (value === this._maximizable) return;\r\n        this._maximizable = value;\r\n        if (this.maximizable)\r\n            this._dialog.querySelector(`#${this._id}-max`).style.display = '';\r\n        else\r\n            this._dialog.querySelector(`#${this._id}-max`).style.display = 'none';\r\n    }\r\n\r\n    public set maximized(value: boolean) {\r\n        if (this._state.maximized === value) return;\r\n        this._state.maximized = value;\r\n    }\r\n    public get maximized(): boolean {\r\n        return this._state.maximized;\r\n    }\r\n\r\n    constructor(options?: DialogOptions) {\r\n        super();\r\n        if (options && 'type' in options && options.type == 1) {\r\n            this._dialog = document.createElement('div');\r\n            this._dialog.open = false;\r\n        }\r\n        else\r\n            this._dialog = document.createElement('dialog');\r\n\r\n        if (typeof this._dialog.showModal !== \"function\") {\r\n            this._dialog.showModal = () => {\r\n                if (this._dialog.open) return;\r\n                this._dialog.style.display = 'block';\r\n                this._dialog.style.visibility = 'visible';\r\n                this._dialog.open = true;\r\n                this._state.show = 2;\r\n                this._dialog.dataset.show = '' + this._state.show;\r\n                if (!this._dialog._keydown) {\r\n                    this._dialog._keydown = e => {\r\n                        if (e.key === 'Escape' && e.srcElement.tagName !== 'TEXTAREA' && e.srcElement.tagName !== 'INPUT' && e.srcElement.tagName !== 'SELECT')\r\n                            this.close();\r\n                    }\r\n                }\r\n                if (!this._dialog.backdrop_) {\r\n                    this._dialog.backdrop_ = document.createElement('div');\r\n                    this._dialog.backdrop_.className = 'backdrop';\r\n                    this._dialog.backdrop_MouseEvent = function (e) {\r\n                        if (!this.hasAttribute('tabindex')) {\r\n                            var fake = document.createElement('div');\r\n                            this.insertBefore(fake, this.firstChild);\r\n                            fake.tabIndex = -1;\r\n                            fake.focus();\r\n                            this.removeChild(fake);\r\n                        }\r\n                        else\r\n                            this.focus();\r\n                        var redirectedEvent = document.createEvent('MouseEvents');\r\n                        redirectedEvent.initMouseEvent(e.type, e.bubbles, e.cancelable, window,\r\n                            e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey,\r\n                            e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\r\n                        this.dispatchEvent(redirectedEvent);\r\n                        e.stopPropagation();\r\n                    }\r\n                    this._dialog.backdrop_.addEventListener('mouseup', this._dialog.backdrop_MouseEvent.bind(this._dialog));\r\n                    this._dialog.backdrop_.addEventListener('mousedown', this._dialog.backdrop_MouseEvent.bind(this._dialog));\r\n                    this._dialog.backdrop_.addEventListener('click', this._dialog.backdrop_MouseEvent.bind(this._dialog));\r\n                }\r\n                this._dialog.parentNode.insertBefore(this._dialog.backdrop_, this._dialog.nextSibling);\r\n                window.document.addEventListener('keydown', this._dialog._keydown);\r\n            };\r\n        }\r\n        //poly fill functions if not found to fake dialog\r\n        if (typeof this._dialog.show !== \"function\") {\r\n            this._dialog.show = () => {\r\n                if (this._dialog.open) return;\r\n                this._dialog.style.display = 'block';\r\n                this._dialog.style.visibility = 'visible';\r\n                this._dialog.open = true;\r\n                this._state.show = 1;\r\n                this._dialog.dataset.show = '' + this._state.show;\r\n            };\r\n        }\r\n        if (typeof this._dialog.close !== \"function\") {\r\n            this._dialog.close = () => {\r\n                this._dialog.style.display = '';\r\n                this._dialog.style.visibility = '';\r\n                this._dialog.open = false;\r\n                this._state.show = 0;\r\n                this._dialog.dataset.show = '' + this._state.show;\r\n                window.removeEventListener('resize', this._windowResize);\r\n                this.emit('closed');\r\n            };\r\n        }\r\n        this._dialog.dialog = this;\r\n        if (options && 'id' in options && options.id && options.id.length)\r\n            this._id = options.id;\r\n        else if (!this._id || !this._id.length)\r\n            this._id = 'dialog' + new Date().getTime();\r\n        this._dialog.id = this._id;\r\n        this._dialog.style.zIndex = '100';\r\n        this._dialog.style.margin = '0';\r\n        this._dialog.classList.add('dialog');\r\n        if (!options || !options.noAdaptive)\r\n            this._dialog.classList.add('adaptive');\r\n        if (options && 'moveable' in options)\r\n            this.moveable = options.moveable;\r\n        if (options && 'resizable' in options)\r\n            this.resizable = options.resizable;\r\n        if (options && 'maximizable' in options)\r\n            this._maximizable = options.maximizable;\r\n        if (typeof options?.height === 'number')\r\n            this._dialog.style.height = options.height + 'px';\r\n        else if (options?.height && options?.height.length > 0)\r\n            this._dialog.style.height = options.height;\r\n        else\r\n            this._dialog.style.height = '480px';\r\n\r\n        if (typeof options?.minHeight === 'number')\r\n            this._dialog.style.minHeight = options.minHeight + 'px';\r\n        else if (options?.minHeight && options?.minHeight.length > 0)\r\n            this._dialog.style.minHeight = options.minHeight;\r\n        else\r\n            this._dialog.style.minHeight = '150px';\r\n\r\n        if (typeof options?.minWidth === 'number')\r\n            this._dialog.style.minWidth = options.minWidth + 'px';\r\n        else if (options?.minWidth && options?.minWidth.length > 0)\r\n            this._dialog.style.minWidth = options.minWidth;\r\n        else\r\n            this._dialog.style.minWidth = '300px';\r\n\r\n        if (typeof options?.width === 'number')\r\n            this._dialog.style.width = options.width + 'px';\r\n        else if (options?.width && options?.width.length > 0)\r\n            this._dialog.style.width = options.width;\r\n        else\r\n            this._dialog.style.width = '640px';\r\n        if (typeof options?.y === 'number')\r\n            this._dialog.style.top = options.y + 'px';\r\n        else if (options?.y && options?.y.length > 0)\r\n            this._dialog.style.top = options.y;\r\n        else\r\n            this._dialog.style.top = '0';\r\n        if (typeof options?.x === 'number')\r\n            this._dialog.style.left = options.x + 'px';\r\n        else if (options?.x && options?.x.length > 0)\r\n            this._dialog.style.left = options.x;\r\n        else\r\n            this._dialog.style.left = '0';\r\n        let footer = '';\r\n        if (options && (options.buttons & DialogButtons.Cancel) === DialogButtons.Cancel)\r\n            footer += `<button id=\"${this._id}-cancel\" type=\"button\" class=\"btn-sm float-end btn btn-light\" title=\"Cancel dialog\">Cancel</button>`\r\n        if (options && (options.buttons & DialogButtons.Ok) === DialogButtons.Ok)\r\n            footer += `<button id=\"${this._id}-ok\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Confirm dialog\">Ok</button>`;\r\n        if (options && (options.buttons & DialogButtons.No) === DialogButtons.No)\r\n            footer += `<button id=\"${this._id}-no\" type=\"button\" class=\"btn-sm float-end btn btn-light\" title=\"No\">No</button>`\r\n        if (options && (options.buttons & DialogButtons.Yes) === DialogButtons.Yes)\r\n            footer += `<button id=\"${this._id}-yes\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Yes\">Yes</button>`;\r\n        this._dialog.innerHTML = `<div class=\"dialog-header\">\r\n        <button id=\"${this._id}-header-close\" style=\"padding: 4px;\" type=\"button\" class=\"btn btn-close float-end btn-danger\" data-dismiss=\"modal\" title=\"Close window\"></button>\r\n        <button type=\"button\" class=\"btn btn-light float-end maximize\" id=\"${this._id}-max\" title=\"Maximize window\" style=\"padding: 0 4px;margin-top: -1px;\"><i class=\"bi-arrows-fullscreen\"></i></button>\r\n        <div>${options?.title || ''}</div>\r\n    </div>\r\n    <div class=\"dialog-body\"></div>\r\n    <div class=\"dialog-footer\">${footer}</div>`;\r\n        this._dialog.querySelector(`#${this._id}-header-close`).addEventListener('click', () => {\r\n            this.close();\r\n        });\r\n        this._dialog.querySelector(`#${this._id}-max`).addEventListener('click', () => {\r\n            if (!this.maximized)\r\n                this.maximize();\r\n            else\r\n                this.restore();\r\n        });\r\n        this._dialog.addEventListener('close', e => {\r\n            if (e.target !== this._dialog) return;\r\n            const ec = { preventDefault: false };\r\n            this.emit('closing', ec);\r\n            if (ec.preventDefault) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            document.body.removeChild(this._dialog);\r\n            this._state.show = 0;\r\n            this._dialog.dataset.show = '' + this._state.show;\r\n            if (this._dialog.backdrop_)\r\n                this._dialog.parentNode.removeChild(this._dialog.backdrop_);\r\n            if (this._dialog._keydown)\r\n                window.document.removeEventListener('keydown', this._dialog._keydown);\r\n            window.removeEventListener('resize', this._windowResize);\r\n            this.emit('closed', this._dialog.returnValue);\r\n        });\r\n        this._dialog.addEventListener('cancel', e => {\r\n            if (e.target !== this._dialog) return;\r\n            const ec = { preventDefault: false };\r\n            this.emit('canceling', ec);\r\n            if (ec.preventDefault) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            //prevent closing ig in edit field, note this does not stop chrome from closing dialog if esc is pressed multiple times\r\n            if (document.activeElement && (document.activeElement.tagName === 'TEXTAREA' ||\r\n                document.activeElement.tagName === 'iNPUT' ||\r\n                document.activeElement.tagName === 'SELECT')\r\n            ) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            //left true sometimes so lets just always make it false to ensure modal dialogs open right\r\n            this._dialog.open = false;\r\n            document.body.removeChild(this._dialog);\r\n            this._state.show = 0;\r\n            this._dialog.dataset.show = '' + this._state.show;\r\n            if (this._dialog.backdrop_)\r\n                this._dialog.parentNode.removeChild(this._dialog.backdrop_);\r\n            if (this._dialog._keydown)\r\n                window.document.removeEventListener('keydown', this._dialog._keydown);\r\n            window.removeEventListener('resize', this._windowResize);\r\n            if (this._dialog.returnValue !== 'ok')\r\n                this.emit('canceled');\r\n        });\r\n        document.body.appendChild(this._dialog);\r\n\r\n        if (this._maximizable)\r\n            this._dialog.querySelector(`#${this._id}-max`).style.display = '';\r\n        else\r\n            this._dialog.querySelector(`#${this._id}-max`).style.display = 'none';\r\n        if (options && (options.buttons & DialogButtons.Cancel) === DialogButtons.Cancel)\r\n            this._dialog.querySelector(`#${this._id}-cancel`).addEventListener('click', () => {\r\n                const e = { preventDefault: false, button: DialogButtons.Cancel };\r\n                this.emit('button-click', e);\r\n                if (e.preventDefault) return;\r\n                this._dialog.returnValue = 'cancel';\r\n                this.close();\r\n            });\r\n        if (options && (options.buttons & DialogButtons.No) === DialogButtons.No)\r\n            this._dialog.querySelector(`#${this._id}-no`).addEventListener('click', () => {\r\n                const e = { preventDefault: false, button: DialogButtons.No };\r\n                this.emit('button-click', e);\r\n                if (e.preventDefault) return;\r\n                this._dialog.returnValue = 'no';\r\n                this.close();\r\n            });\r\n        if (options && (options.buttons & DialogButtons.Ok) === DialogButtons.Ok)\r\n            this._dialog.querySelector(`#${this._id}-ok`).addEventListener('click', () => {\r\n                const e = { preventDefault: false, button: DialogButtons.Ok };\r\n                this.emit('button-click', e);\r\n                if (e.preventDefault) return;\r\n                this._dialog.returnValue = 'ok';\r\n                this._dialog.close();\r\n            });\r\n        if (options && (options.buttons & DialogButtons.Yes) === DialogButtons.Yes)\r\n            this._dialog.querySelector(`#${this._id}-yes`).addEventListener('click', () => {\r\n                const e = { preventDefault: false, button: DialogButtons.Yes };\r\n                this.emit('button-click', e);\r\n                if (e.preventDefault) return;\r\n                this._dialog.returnValue = 'yes';\r\n                this._dialog.close();\r\n            });\r\n        this._body = this._dialog.querySelector('[class=\"dialog-body\"]');\r\n        this._title = this._dialog.querySelector('[class=\"dialog-header\"] div');\r\n        this._footer = this._dialog.querySelector('[class=\"dialog-footer\"]');\r\n        this._header = this._dialog.querySelector('[class=\"dialog-header\"]');\r\n\r\n        if (this.resizable) {\r\n            this._dialog.classList.add('resizable');\r\n            var right = document.createElement(\"div\");\r\n            right.className = \"resizer-right\";\r\n            this._dialog.appendChild(right);\r\n            right.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Right) }, false);\r\n            right.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Right) }, { passive: true });\r\n\r\n            var bottom = document.createElement(\"div\");\r\n            bottom.className = \"resizer-bottom\";\r\n            this._dialog.appendChild(bottom);\r\n            bottom.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Bottom) }, false);\r\n            bottom.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Bottom) }, { passive: true });\r\n\r\n            var corner = document.createElement(\"div\");\r\n            corner.className = \"resizer-se\";\r\n            this._dialog.appendChild(corner);\r\n            corner.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Right | ResizeType.Bottom) }, false);\r\n            corner.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Right | ResizeType.Bottom) }, { passive: true });\r\n\r\n            corner = document.createElement(\"div\");\r\n            corner.className = \"resizer-ne\";\r\n            this._dialog.appendChild(corner);\r\n            corner.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Right | ResizeType.Top) }, false);\r\n            corner.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Right | ResizeType.Top) }, { passive: true });\r\n\r\n            corner = document.createElement(\"div\");\r\n            corner.className = \"resizer-nw\";\r\n            this._dialog.appendChild(corner);\r\n            corner.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Left | ResizeType.Top) }, false);\r\n            corner.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Left | ResizeType.Top) }, { passive: true });\r\n\r\n            corner = document.createElement(\"div\");\r\n            corner.className = \"resizer-sw\";\r\n            this._dialog.appendChild(corner);\r\n            corner.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Left | ResizeType.Bottom) }, false);\r\n            corner.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Left | ResizeType.Bottom) }, { passive: true });\r\n\r\n            var left = document.createElement(\"div\");\r\n            left.className = \"resizer-left\";\r\n            this._dialog.appendChild(left);\r\n            left.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Left) }, false);\r\n            left.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Left) }, { passive: true });\r\n\r\n            var top = document.createElement(\"div\");\r\n            top.className = \"resizer-top\";\r\n            this._dialog.appendChild(top);\r\n            top.addEventListener(\"mousedown\", e => { this.initResize(e, ResizeType.Top) }, false);\r\n            top.addEventListener(\"touchstart\", e => { this.initResizeTouch(e, ResizeType.Top) }, { passive: true });\r\n        }\r\n\r\n        if (this.moveable) {\r\n            this._dialog.addEventListener('mousedown', () => {\r\n                this.focus();\r\n            })\r\n            this._header.addEventListener('mousedown', this.dragMouseDown);\r\n            this._header.addEventListener('touchstart', this.dragTouchStart, { passive: true });\r\n        }\r\n\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._state.x = this._resize.x = parseInt(styles.left, 10);;\r\n        this._state.width = this._resize.width = parseInt(styles.width, 10);\r\n        this._state.y = this._resize.y = parseInt(styles.top, 10);;\r\n        this._state.height = this._resize.height = parseInt(styles.height, 10);\r\n        if (options && 'noFooter' in options && options.noFooter)\r\n            this.hideFooter();\r\n        if (options && 'maximized' in options && options.maximized)\r\n            this.maximize();\r\n        if (options && 'showModal' in options && options.showModal)\r\n            this.showModal();\r\n        else if (options && 'show' in options && options.show) {\r\n            if (options.show === 2)\r\n                this.showModal();\r\n            else\r\n                this.show();\r\n        }\r\n        if ((options && 'keepCentered' in options && options.keepCentered))\r\n            this.keepCentered = options.keepCentered;\r\n        if (this.keepCentered || (options && 'center' in options && options.center))\r\n            this.center();\r\n        if (options && 'position' in options && options.position > 0)\r\n            this.position(options.position);\r\n        this._windowResize();\r\n        this._resizeObserver = new ResizeObserver((entries, observer) => {\r\n            if (entries.length === 0) return;\r\n            if (!entries[0].contentRect || entries[0].contentRect.width === 0 || entries[0].contentRect.height === 0)\r\n                return;\r\n            //debounce(() => {\r\n            if (!this._resizeObserverCache || this._resizeObserverCache.height !== entries[0].contentRect.height) {\r\n                this._resizeObserverCache = { width: entries[0].contentRect.width, height: entries[0].contentRect.height };\r\n                if (this._footer.style.display !== 'none')\r\n                    this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n            }\r\n            //}, 50, 'resize');\r\n        });\r\n        this._resizeObserver.observe(this._footer);\r\n        this._observer = new MutationObserver((mutationsList) => {\r\n            let mutation;\r\n            for (mutation of mutationsList) {\r\n                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\r\n                    if (this._footer.style.display !== 'none')\r\n                        this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n                }\r\n            }\r\n        });\r\n        this._observer.observe(this._footer, { attributes: true, attributeOldValue: true, attributeFilter: ['style'] });\r\n    }\r\n\r\n    private initResize(e, type) {\r\n        if (this.maximized) return;\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._resize.x = e.clientX;\r\n        this._resize.width = parseInt(styles.width, 10);\r\n        this._resize.y = e.clientY;\r\n        this._resize.height = parseInt(styles.height, 10);\r\n        this._resize.type = type;\r\n        this._resize.minHeight = parseInt(styles.minHeight, 10);\r\n        this._resize.minWidth = parseInt(styles.minWidth, 10);\r\n        this._resize.borderHeight = e.offsetY + parseInt(styles.borderTopWidth);\r\n        this._resize.borderWidth = e.offsetX + parseInt(styles.borderLeftWidth);\r\n        this._body.style.pointerEvents = 'none';\r\n        document.documentElement.addEventListener(\"mousemove\", this.resizeDoDrag, false);\r\n        document.documentElement.addEventListener(\"mouseup\", this.resizeStopDrag, false);\r\n    }\r\n\r\n    private initResizeTouch(e, type) {\r\n        if (!e.touches.length || this.maximized) return;\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._resize.x = e.touches[0].clientX;\r\n        this._resize.width = parseInt(styles.width, 10);\r\n        this._resize.y = e.touches[0].clientY;\r\n        this._resize.height = parseInt(styles.height, 10);\r\n        this._resize.type = type;\r\n        this._resize.minHeight = parseInt(styles.minHeight, 10);\r\n        this._resize.minWidth = parseInt(styles.minWidth, 10);\r\n        var rect = e.target.getBoundingClientRect();\r\n        var x = e.targetTouches[0].clientX - rect.x;\r\n        var y = e.targetTouches[0].clientY - rect.y;\r\n        this._resize.borderHeight = y + parseInt(styles.borderTopWidth);\r\n        this._resize.borderWidth = x + parseInt(styles.borderLeftWidth);\r\n        this._body.style.pointerEvents = 'none';\r\n        document.documentElement.addEventListener(\"touchmove\", this.resizeTouchDrag, false);\r\n        document.documentElement.addEventListener(\"touchend\", this.resizeStopDrag, false);\r\n    }\r\n\r\n    public get id() {\r\n        return this._id;\r\n    }\r\n\r\n    public set id(value) {\r\n        if (this._id === value) return;\r\n        this._id = value;\r\n        if (this._dialog) {\r\n            const old = this._dialog.id;\r\n            this._dialog.id = this._id;\r\n            let el = this._dialog.querySelector(`#${this._id}-cancel`);\r\n            if (el) el.id = this._id + '-cancel';\r\n            el = this._dialog.querySelector(`#${this._id}-ok`);\r\n            if (el) el.id = this._id + '-ok';\r\n            el = this._dialog.querySelector(`#${this._id}-max`);\r\n            if (el) el.id = this._id + '-max';\r\n            el = this._dialog.querySelector(`#${this._id}-header-close`);\r\n            if (el) el.id = this._id + '-header-close';\r\n        }\r\n    }\r\n\r\n    public get title() {\r\n        return this._title.innerHTML;\r\n    }\r\n    public set title(value) {\r\n        this._title.innerHTML = value;\r\n    }\r\n\r\n    public showModal() {\r\n        if (!this._dialog.parentElement)\r\n            document.body.appendChild(this._dialog);\r\n        this.makeVisible(true);\r\n        if (this._dialog.open) {\r\n            this.focus();\r\n            return;\r\n        }\r\n        this._dialog.showModal();\r\n        this._state.show = 2;\r\n        this._dialog.dataset.show = '' + this._state.show;\r\n        window.addEventListener('resize', this._windowResize);\r\n        this.emit('shown', true);\r\n        this.focus();\r\n    }\r\n\r\n    public show() {\r\n        if (!this._dialog.parentElement)\r\n            document.body.appendChild(this._dialog);\r\n        this.makeVisible(true);\r\n        if (this._dialog.open) {\r\n            this.focus();\r\n            return;\r\n        }\r\n        this._dialog.show();\r\n        this._state.show = 1;\r\n        this._dialog.dataset.show = '' + this._state.show;\r\n        window.addEventListener('resize', this._windowResize);\r\n        this.emit('shown', false);\r\n        this.focus();\r\n    }\r\n\r\n    public get opened() {\r\n        return this._dialog.open;\r\n    }\r\n\r\n    public close() {\r\n        if (!this._dialog.open) return;\r\n        if (this._dialog.backdrop_)\r\n            this._dialog.parentNode.removeChild(this._dialog.backdrop_);\r\n        if (this._dialog._keydown)\r\n            window.document.removeEventListener('keydown', this._dialog._keydown);\r\n        this._dialog.close();\r\n    }\r\n\r\n    public get header() {\r\n        return this._header;\r\n    }\r\n    public get body() {\r\n        return this._body;\r\n    }\r\n    public get footer() {\r\n        return this._footer;\r\n    }\r\n    public get dialog() {\r\n        return this._dialog;\r\n    }\r\n\r\n    public get left() {\r\n        return this._dialog.style.left;\r\n    }\r\n    public set left(value) {\r\n        this._dialog.style.left = value;\r\n    }\r\n\r\n    public get top() {\r\n        return this._dialog.style.top;\r\n    }\r\n    public set top(value) {\r\n        this._dialog.style.top = value;\r\n    }\r\n\r\n    public get width() {\r\n        return this._dialog.style.width;\r\n    }\r\n    public set width(value) {\r\n        this._dialog.style.width = value;\r\n    }\r\n\r\n    public get height() {\r\n        return this._dialog.style.height;\r\n    }\r\n    public set height(value) {\r\n        this._dialog.style.top = value;\r\n    }\r\n\r\n    public get windowState() {\r\n        return this._state;\r\n    }\r\n\r\n    private _width() {\r\n        let w = this.dialog.offsetWidth || this._dialog.clientWidth;\r\n        if (!w) {\r\n            const styles = document.defaultView.getComputedStyle(this._dialog);\r\n            w = w || parseInt(styles.width, 10);\r\n        }\r\n        return w;\r\n    }\r\n\r\n    private _height() {\r\n        let h = this.dialog.offsetHeight || this._dialog.clientHeight;\r\n        if (!h) {\r\n            const styles = document.defaultView.getComputedStyle(this._dialog);\r\n            h = h || parseInt(styles.height, 10);\r\n        }\r\n        return h;\r\n    }\r\n\r\n    private get _size() {\r\n        let w = this.dialog.offsetWidth || this._dialog.clientWidth;\r\n        let h = this.dialog.offsetHeight || this._dialog.clientHeight;\r\n        if (!w || !h) {\r\n            const styles = document.defaultView.getComputedStyle(this._dialog);\r\n            w = w || parseInt(styles.width, 10);\r\n            h = h || parseInt(styles.height, 10);\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    public center() {\r\n        this.position(Position.Center);\r\n    }\r\n\r\n    public position(position: Position) {\r\n        if (position < 1) return;\r\n        //styles2.width\r\n        let size = this._size;\r\n        if ((position & Position.Top) === Position.Top)\r\n            this._state.y = 0;\r\n        else if ((position & Position.Bottom) === Position.Bottom)\r\n            this._state.y = window.innerHeight - size.height;\r\n        else if ((position & Position.CenterVertical) === Position.CenterVertical)\r\n            this._state.y = (window.innerHeight / 2 - size.height / 2);\r\n\r\n        if ((position & Position.Left) === Position.Left)\r\n            this._state.x = 0;\r\n        else if ((position & Position.Right) === Position.Right)\r\n            this._state.x = window.innerWidth - size.width;\r\n        else if ((position & Position.CenterHorizontal) === Position.CenterHorizontal)\r\n            this._state.x = (window.innerWidth / 2 - size.width / 2);\r\n\r\n        this._dialog.style.left = this._state.x + 'px';\r\n        this._dialog.style.top = this._state.y + 'px';\r\n        this._state.width = size.width;\r\n        this._state.height = size.height;\r\n        this.emit('moved', this._state);\r\n    }\r\n\r\n    public maximize() {\r\n        if (this.maximized) return;\r\n        this.maximized = true;\r\n        this._dialog.classList.add('maximized');\r\n        this._dialog.querySelector(`#${this._id}-max`).firstElementChild.classList.remove('bi-arrows-fullscreen');\r\n        this._dialog.querySelector(`#${this._id}-max`).firstElementChild.classList.add('bi-arrows-angle-contract');\r\n        this.emit('maximized');\r\n    }\r\n\r\n    public restore() {\r\n        if (!this.maximized) return;\r\n        this.maximized = false;\r\n        this._dialog.classList.remove('maximized');\r\n        this._dialog.querySelector(`#${this._id}-max`).firstElementChild.classList.add('bi-arrows-fullscreen');\r\n        this._dialog.querySelector(`#${this._id}-max`).firstElementChild.classList.remove('bi-arrows-angle-contract');\r\n        this.emit('restored');\r\n    }\r\n\r\n    private getMaxZIndex(forceReset?: boolean) {\r\n        const dialogs = document.getElementsByTagName('dialog');\r\n        let d = 0;\r\n        const dl = dialogs.length;\r\n        let i = parseInt(this._dialog.style.zIndex, 10);;\r\n        const order = [];\r\n        for (; d < dl; d++) {\r\n            if (!dialogs[d].style.zIndex || !dialogs[d].style.zIndex.length) continue;\r\n            let z = parseInt(dialogs[d].style.zIndex, 10);\r\n            if (z > i)\r\n                i = z;\r\n            order.push({ z: z, idx: d, show: parseInt(dialogs[d].dataset.show || '', 10) || 0 });\r\n        }\r\n        this._state.zIndex = i;\r\n        if (forceReset || this._state.zIndex > 1000) {\r\n            this._state.zIndex = 100;\r\n            d = 0;\r\n            //show by show type then old z-index, we do this to ensure modal style dialogs are on top\r\n            order.sort((a, b) => ((a.show > b.show) ? 1 : (a.z < b.z) ? -1 : (a.z > b.z ? 1 : 0)))\r\n            for (; d < dl; d++) {\r\n                if ((<any>dialogs[order[d]]).backdrop_)\r\n                    (<any>dialogs[order[d]]).backdrop_.style.zIndex = '' + (this._state.zIndex++);\r\n                dialogs[order[d].idx].style.zIndex = '' + (this._state.zIndex++);\r\n            }\r\n        }\r\n    }\r\n\r\n    public showFooter() {\r\n        this._footer.style.display = '';\r\n        this._body.style.bottom = (this._footer.clientHeight + 1) + 'px';\r\n    }\r\n\r\n    public hideFooter() {\r\n        this._footer.style.display = 'none';\r\n        this._body.style.bottom = '0';\r\n    }\r\n\r\n    public focus() {\r\n        this._dialog.focus();\r\n        this.getMaxZIndex();\r\n        this._dialog.style.zIndex = '' + ++this._state.zIndex;\r\n        this.emit('focus');\r\n    }\r\n\r\n    public makeVisible(full?, silent?) {\r\n        var rect = this._dialog.getBoundingClientRect();\r\n        if (full) {\r\n            if (rect.right > window.innerWidth) {\r\n                this._state.x = window.innerWidth - this._state.width - 16;\r\n                if (rect.left < 0) this._state.x = 0;\r\n                this._dialog.style.left = this._state.x + \"px\";\r\n            }\r\n            if (rect.bottom > window.innerHeight) {\r\n                this._state.y = window.innerHeight - this._state.height - 16;\r\n                if (rect.top < 0) this._state.y = 0;\r\n                this._dialog.style.top = this._state.y + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            if (rect.left > window.innerWidth - 16) {\r\n                this._state.x = (window.innerWidth - 16);\r\n                this._dialog.style.left = this._state.x + \"px\";\r\n            }\r\n            if (rect.top > window.innerHeight - 16) {\r\n                this._state.y = (window.innerHeight - 16);\r\n                this._dialog.style.top = this._state.y + \"px\";\r\n            }\r\n        }\r\n        if (!silent)\r\n            this.emit('moved', this._state);\r\n    }\r\n\r\n    public resetState(options: DialogOptions) {\r\n        if (typeof options?.height === 'number')\r\n            this._dialog.style.height = options.height + 'px';\r\n        else if (options?.height && options?.height.length > 0)\r\n            this._dialog.style.height = options.height;\r\n        else\r\n            this._dialog.style.height = '480px';\r\n\r\n        if (typeof options?.minHeight === 'number')\r\n            this._dialog.style.minHeight = options.minHeight + 'px';\r\n        else if (options?.minHeight && options?.minHeight.length > 0)\r\n            this._dialog.style.minHeight = options.minHeight;\r\n        else\r\n            this._dialog.style.minHeight = '150px';\r\n\r\n        if (typeof options?.minWidth === 'number')\r\n            this._dialog.style.minWidth = options.minWidth + 'px';\r\n        else if (options?.minWidth && options?.minWidth.length > 0)\r\n            this._dialog.style.minWidth = options.minWidth;\r\n        else\r\n            this._dialog.style.minWidth = '300px';\r\n\r\n        if (typeof options?.width === 'number')\r\n            this._dialog.style.width = options.width + 'px';\r\n        else if (options?.width && options?.width.length > 0)\r\n            this._dialog.style.width = options.width;\r\n        else\r\n            this._dialog.style.width = '640px';\r\n        if (typeof options?.y === 'number')\r\n            this._dialog.style.top = options.y + 'px';\r\n        else if (options?.y && options?.y.length > 0)\r\n            this._dialog.style.top = options.y;\r\n        else\r\n            this._dialog.style.top = '0';\r\n        if (typeof options?.x === 'number')\r\n            this._dialog.style.left = options.x + 'px';\r\n        else if (options?.x && options?.x.length > 0)\r\n            this._dialog.style.left = options.x;\r\n        else\r\n            this._dialog.style.left = '0';\r\n\r\n        const styles = document.defaultView.getComputedStyle(this._dialog);\r\n        this._state.x = this._resize.x = parseInt(styles.left, 10);;\r\n        this._state.width = this._resize.width = parseInt(styles.width, 10);\r\n        this._state.y = this._resize.y = parseInt(styles.top, 10);;\r\n        this._state.height = this._resize.height = parseInt(styles.height, 10);\r\n        if (options && 'maximized' in options && options.maximized)\r\n            this.maximize();\r\n        else\r\n            this.restore();\r\n        if (this.keepCentered || (options && 'center' in options && options.center))\r\n            this.center();\r\n        if (options && 'position' in options && options.position > 0)\r\n            this.position(options.position);\r\n        this._windowResize();\r\n    }\r\n\r\n    public setBody(contents: string, args?: any) {\r\n        this._body.innerHTML = contents;\r\n        args = args || {};\r\n        const scripts: HTMLScriptElement[] = this._body.querySelectorAll('script');\r\n        for (let s = 0, sl = scripts.length; s < sl; s++) {\r\n            /*jslint evil: true */\r\n            let script = new Function('body', 'dialog', ...Object.keys(args), scripts[s].textContent);\r\n            script.apply(client, [this._body, this, ...Object.values(args), this]);\r\n        }\r\n    }\r\n}\r\n\r\nexport class AlertDialog extends Dialog {\r\n    constructor(title: string | DialogOptions, message?, icon?: string | DialogIcon) {\r\n        super(typeof title === 'string' ? { title: getIcon(icon || DialogIcon.exclamation) + title, width: 300, height: 150, keepCentered: true, center: true, resizable: false, moveable: false, maximizable: false, buttons: DialogButtons.Ok } : title);\r\n        this.body.classList.add('d-flex', 'justify-content-center', 'talign-content-center', 'align-items-center');\r\n        if (message)\r\n            this.body.innerHTML = `<div class=\"text-center\" style=\"width: 64px;height:64px;font-size: 40px;\">${getIcon(icon || DialogIcon.exclamation)}</div><div class=\"ms-3 align-self-center flex-fill\">${message}</div></div>`;\r\n    }\r\n}\r\n\r\n\r\nexport class ConfirmDialog extends Dialog {\r\n    constructor(title: string | DialogOptions, message?, icon?: string | DialogIcon, buttons?: DialogButtons) {\r\n        super(typeof title === 'string' ? { title: getIcon(icon || DialogIcon.question) + title, width: 300, height: 150, keepCentered: true, center: true, resizable: false, moveable: false, maximizable: false, buttons: buttons === undefined ? DialogButtons.YesNo : buttons } : title);\r\n        this.body.classList.add('d-flex', 'justify-content-center', 'align-content-center', 'align-items-center');\r\n        if (message)\r\n            this.body.innerHTML = `<div class=\"text-center\" style=\"width: 64px;height:64px;font-size: 40px;\">${getIcon(icon || DialogIcon.question)}</div><div class=\"ms-3 align-self-center flex-fill\">${message}</div></div>`;\r\n    }\r\n}\r\n\r\nfunction getIcon(icon: string | DialogIcon) {\r\n    if (typeof icon === 'string')\r\n        return icon + ' ';\r\n    switch (icon) {\r\n        case DialogIcon.error:\r\n            return '<i class=\"fa-regular fa-circle-xmark\"></i> ';\r\n        case DialogIcon.exclamation:\r\n            return '<i class=\"fa-solid fa-circle-exclamation\"></i> ';\r\n        case DialogIcon.question:\r\n            return '<i class=\"fa-regular fa-circle-question\"></i> '\r\n    }\r\n    return '<i class=\"fa-solid fa-circle-info\"></i> ';\r\n}\r\n\r\nwindow.confirm_box = (title, message?, icon?, buttons?) => {\r\n    return new Promise((resolve, reject) => {\r\n        const confirm = new ConfirmDialog(title, message, icon, buttons);\r\n        confirm.showModal();\r\n        confirm.on('button-click', e => resolve(e));\r\n        confirm.on('canceled', () => reject(null));\r\n        confirm.on('closed', reason => reason === 'Yes' ? 0 : reject(null));\r\n    });\r\n\r\n}\r\nwindow.alert_box = (title, message?, icon?) => {\r\n    new AlertDialog(title, message, icon).showModal();\r\n}\r\n\r\nwindow.Dialog = Dialog;", "/**\r\n * A class to parse color values\r\n * @author Stoyan Stefanov <sstoo@gmail.com>\r\n * @link   http://www.phpied.com/rgb-color-parser-in-javascript/\r\n * @license Use it if you like it\r\n */\r\nexport function RGBColor(color_string)\r\n{\r\n    this.ok = false;\r\n\r\n    // strip any leading #\r\n    if (color_string.charAt(0) == '#') { // remove # if any\r\n        color_string = color_string.substr(1,6);\r\n    }\r\n\r\n    color_string = color_string.replace(/ /g,'');\r\n    color_string = color_string.toLowerCase();\r\n\r\n    // before getting into regexps, try simple matches\r\n    // and overwrite the input\r\n    var simple_colors = {\r\n        aliceblue: 'f0f8ff',\r\n        antiquewhite: 'faebd7',\r\n        aqua: '00ffff',\r\n        aquamarine: '7fffd4',\r\n        azure: 'f0ffff',\r\n        beige: 'f5f5dc',\r\n        bisque: 'ffe4c4',\r\n        black: '000000',\r\n        blanchedalmond: 'ffebcd',\r\n        blue: '0000ff',\r\n        blueviolet: '8a2be2',\r\n        brown: 'a52a2a',\r\n        burlywood: 'deb887',\r\n        cadetblue: '5f9ea0',\r\n        chartreuse: '7fff00',\r\n        chocolate: 'd2691e',\r\n        coral: 'ff7f50',\r\n        cornflowerblue: '6495ed',\r\n        cornsilk: 'fff8dc',\r\n        crimson: 'dc143c',\r\n        cyan: '00ffff',\r\n        darkblue: '00008b',\r\n        darkcyan: '008b8b',\r\n        darkgoldenrod: 'b8860b',\r\n        darkgray: 'a9a9a9',\r\n        darkgreen: '006400',\r\n        darkkhaki: 'bdb76b',\r\n        darkmagenta: '8b008b',\r\n        darkolivegreen: '556b2f',\r\n        darkorange: 'ff8c00',\r\n        darkorchid: '9932cc',\r\n        darkred: '8b0000',\r\n        darksalmon: 'e9967a',\r\n        darkseagreen: '8fbc8f',\r\n        darkslateblue: '483d8b',\r\n        darkslategray: '2f4f4f',\r\n        darkturquoise: '00ced1',\r\n        darkviolet: '9400d3',\r\n        deeppink: 'ff1493',\r\n        deepskyblue: '00bfff',\r\n        dimgray: '696969',\r\n        dodgerblue: '1e90ff',\r\n        feldspar: 'd19275',\r\n        firebrick: 'b22222',\r\n        floralwhite: 'fffaf0',\r\n        forestgreen: '228b22',\r\n        fuchsia: 'ff00ff',\r\n        gainsboro: 'dcdcdc',\r\n        ghostwhite: 'f8f8ff',\r\n        gold: 'ffd700',\r\n        goldenrod: 'daa520',\r\n        gray: '808080',\r\n        green: '008000',\r\n        greenyellow: 'adff2f',\r\n        honeydew: 'f0fff0',\r\n        hotpink: 'ff69b4',\r\n        indianred : 'cd5c5c',\r\n        indigo : '4b0082',\r\n        ivory: 'fffff0',\r\n        khaki: 'f0e68c',\r\n        lavender: 'e6e6fa',\r\n        lavenderblush: 'fff0f5',\r\n        lawngreen: '7cfc00',\r\n        lemonchiffon: 'fffacd',\r\n        lightblue: 'add8e6',\r\n        lightcoral: 'f08080',\r\n        lightcyan: 'e0ffff',\r\n        lightgoldenrodyellow: 'fafad2',\r\n        lightgrey: 'd3d3d3',\r\n        lightgreen: '90ee90',\r\n        lightpink: 'ffb6c1',\r\n        lightsalmon: 'ffa07a',\r\n        lightseagreen: '20b2aa',\r\n        lightskyblue: '87cefa',\r\n        lightslateblue: '8470ff',\r\n        lightslategray: '778899',\r\n        lightsteelblue: 'b0c4de',\r\n        lightyellow: 'ffffe0',\r\n        lime: '00ff00',\r\n        limegreen: '32cd32',\r\n        linen: 'faf0e6',\r\n        magenta: 'ff00ff',\r\n        maroon: '800000',\r\n        mediumaquamarine: '66cdaa',\r\n        mediumblue: '0000cd',\r\n        mediumorchid: 'ba55d3',\r\n        mediumpurple: '9370d8',\r\n        mediumseagreen: '3cb371',\r\n        mediumslateblue: '7b68ee',\r\n        mediumspringgreen: '00fa9a',\r\n        mediumturquoise: '48d1cc',\r\n        mediumvioletred: 'c71585',\r\n        midnightblue: '191970',\r\n        mintcream: 'f5fffa',\r\n        mistyrose: 'ffe4e1',\r\n        moccasin: 'ffe4b5',\r\n        navajowhite: 'ffdead',\r\n        navy: '000080',\r\n        oldlace: 'fdf5e6',\r\n        olive: '808000',\r\n        olivedrab: '6b8e23',\r\n        orange: 'ffa500',\r\n        orangered: 'ff4500',\r\n        orchid: 'da70d6',\r\n        palegoldenrod: 'eee8aa',\r\n        palegreen: '98fb98',\r\n        paleturquoise: 'afeeee',\r\n        palevioletred: 'd87093',\r\n        papayawhip: 'ffefd5',\r\n        peachpuff: 'ffdab9',\r\n        peru: 'cd853f',\r\n        pink: 'ffc0cb',\r\n        plum: 'dda0dd',\r\n        powderblue: 'b0e0e6',\r\n        purple: '800080',\r\n        red: 'ff0000',\r\n        rosybrown: 'bc8f8f',\r\n        royalblue: '4169e1',\r\n        saddlebrown: '8b4513',\r\n        salmon: 'fa8072',\r\n        sandybrown: 'f4a460',\r\n        seagreen: '2e8b57',\r\n        seashell: 'fff5ee',\r\n        sienna: 'a0522d',\r\n        silver: 'c0c0c0',\r\n        skyblue: '87ceeb',\r\n        slateblue: '6a5acd',\r\n        slategray: '708090',\r\n        snow: 'fffafa',\r\n        springgreen: '00ff7f',\r\n        steelblue: '4682b4',\r\n        tan: 'd2b48c',\r\n        teal: '008080',\r\n        thistle: 'd8bfd8',\r\n        tomato: 'ff6347',\r\n        turquoise: '40e0d0',\r\n        violet: 'ee82ee',\r\n        violetred: 'd02090',\r\n        wheat: 'f5deb3',\r\n        white: 'ffffff',\r\n        whitesmoke: 'f5f5f5',\r\n        yellow: 'ffff00',\r\n        yellowgreen: '9acd32'\r\n    };\r\n    for (var key in simple_colors) {\r\n        if (color_string == key) {\r\n            color_string = simple_colors[key];\r\n        }\r\n    }\r\n    // end of simple type-in colors\r\n\r\n    // array of color definition objects\r\n    var color_defs = [\r\n        {\r\n            re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\r\n            example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\r\n            process: function (bits){\r\n                return [\r\n                    parseInt(bits[1], 10),\r\n                    parseInt(bits[2], 10),\r\n                    parseInt(bits[3], 10)\r\n                ];\r\n            }\r\n        },\r\n        {\r\n            re: /^(\\w{2})(\\w{2})(\\w{2})$/,\r\n            example: ['#00ff00', '336699'],\r\n            process: function (bits){\r\n                return [\r\n                    parseInt(bits[1], 16),\r\n                    parseInt(bits[2], 16),\r\n                    parseInt(bits[3], 16)\r\n                ];\r\n            }\r\n        },\r\n        {\r\n            re: /^(\\w{1})(\\w{1})(\\w{1})$/,\r\n            example: ['#fb0', 'f0f'],\r\n            process: function (bits){\r\n                return [\r\n                    parseInt(bits[1] + bits[1], 16),\r\n                    parseInt(bits[2] + bits[2], 16),\r\n                    parseInt(bits[3] + bits[3], 16)\r\n                ];\r\n            }\r\n        }\r\n    ];\r\n\r\n    // search through the definitions to find a match\r\n    for (var i = 0, cl = color_defs.length; i < cl; i++) {\r\n        var re = color_defs[i].re;\r\n        var processor = color_defs[i].process;\r\n        var bits = re.exec(color_string);\r\n        if (bits) {\r\n            var channels = processor(bits);\r\n            this.r = channels[0];\r\n            this.g = channels[1];\r\n            this.b = channels[2];\r\n            this.ok = true;\r\n        }\r\n\r\n    }\r\n\r\n    // validate/cleanup values\r\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\r\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\r\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\r\n\r\n    // some getters\r\n    this.toRGB = function () {\r\n        return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\r\n    };\r\n    this.toHex = function () {\r\n        var r = this.r.toString(16);\r\n        var g = this.g.toString(16);\r\n        var b = this.b.toString(16);\r\n        if (r.length == 1) r = '0' + r;\r\n        if (g.length == 1) g = '0' + g;\r\n        if (b.length == 1) b = '0' + b;\r\n        return '#' + r + g + b;\r\n    };\r\n\r\n    // help\r\n    /*\r\n    this.getHelpXML = function () {\r\n\r\n        var examples = [], i, l;\r\n        // add regexps\r\n        for (i = 0, l = color_defs.length; i < l; i++) {\r\n            var example = color_defs[i].example;\r\n            for (var j = 0, el = example.length; j < el; j++) {\r\n                examples[examples.length] = example[j];\r\n            }\r\n        }\r\n        // add type-in colors\r\n        for (var sc in simple_colors) {\r\n            examples[examples.length] = sc;\r\n        }\r\n\r\n        var xml = document.createElement('ul');\r\n        xml.setAttribute('id', 'rgbcolor-examples');\r\n        for (i = 0, el = examples.length; i < el; i++) {\r\n            try {\r\n                var list_item = document.createElement('li');\r\n                var list_color = new RGBColor(examples[i]);\r\n                var example_div = document.createElement('div');\r\n                example_div.style.cssText = 'margin: 3px;border: 1px solid black;background:' + list_color.toHex() + ';color:' + list_color.toHex();\r\n                example_div.appendChild(document.createTextNode('test'));\r\n                var list_item_value = document.createTextNode(' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex());\r\n                list_item.appendChild(example_div);\r\n                list_item.appendChild(list_item_value);\r\n                xml.appendChild(list_item);\r\n\r\n            } catch(e){}\r\n        }\r\n        return xml;\r\n\r\n    };\r\n    */\r\n\r\n}\r\n\r\n", "import \"../css/tinymce.css\";\r\nimport { EventEmitter } from \"../events\";\r\nimport { RGBColor } from '../lib/rgbcolor';\r\nimport { insertValue, stripHTML, htmlEncode, invert, getColors, copyText, openFileDialog, readFile, pasteText, pinkfishToHTML } from '../library'\r\nimport { Dialog } from \"./dialog\";\r\n\r\nexport class AdvEditor extends EventEmitter {\r\n    private _element;\r\n    private _simple = true;\r\n    private _colors;\r\n    private _ColorTable;\r\n    private _init = false;\r\n    //private _colorCodes;\r\n    private colorNames = {\r\n        'No color': 'Default',\r\n        'BLACK': 'Black',\r\n        'RED': 'Maroon',\r\n        'GREEN': 'Green',\r\n        'ORANGE': 'Olive',\r\n        'BLUE': 'Navy',\r\n        'MAGENTA': 'Purple',\r\n        'WHITE': 'Silver',\r\n        'CYAN': 'Teal',\r\n        'BOLD BLACK': 'Grey',\r\n        'BOLD RED': 'Red',\r\n        'BOLD GREEN': 'Lime',\r\n        'YELLOW': 'Yellow',\r\n        'BOLD YELLOW': 'Yellow',\r\n        'BOLD BLUE': 'Blue',\r\n        'BOLD MAGENTA': 'Fuchsia',\r\n        'BOLD CYAN': 'Aqua',\r\n        'BOLD': 'White',\r\n        'BOLD WHITE': 'White',\r\n        'RGB000': 'Black',\r\n        'RGB001': 'Navy Blue',\r\n        'RGB002': 'Dark Blue',\r\n        'RGB003': 'Blue',\r\n        'RGB004': 'Blue',\r\n        'RGB005': 'Blue',\r\n        'RGB010': 'Dark Green',\r\n        'RGB011': 'Deep Sky Blue',\r\n        'RGB012': 'Deep Sky Blue',\r\n        'RGB013': 'Deep Sky Blue',\r\n        'RGB014': 'Cobalt/Dodger Blue',\r\n        'RGB015': 'Dodger Blue',\r\n        'RGB020': 'Green',\r\n        'RGB021': 'Spring Green',\r\n        'RGB022': 'Turquoise',\r\n        'RGB023': 'Deep Sky Blue',\r\n        'RGB024': 'Deep Sky Blue',\r\n        'RGB025': 'Dodger Blue',\r\n        'RGB030': 'Green',\r\n        'RGB031': 'Spring Green',\r\n        'RGB032': 'Dark Cyan',\r\n        'RGB033': 'Light Sea Green',\r\n        'RGB034': 'Deep Sky Blue',\r\n        'RGB035': 'Deep Sky Blue',\r\n        'RGB040': 'Green',\r\n        'RGB041': 'Spring Green',\r\n        'RGB042': 'Spring Green',\r\n        'RGB043': 'Cyan',\r\n        'RGB044': 'Dark Turquoise',\r\n        'RGB045': 'Turquoise',\r\n        'RGB050': 'Green',\r\n        'RGB051': 'Spring Green',\r\n        'RGB052': 'Spring Green',\r\n        'RGB053': 'Medium Spring Green',\r\n        'RGB054': 'Cyan',\r\n        'RGB055': 'Cyan',\r\n        'RGB100': 'Dark Red',\r\n        'RGB101': 'Deep Pink',\r\n        'RGB102': 'Purple',\r\n        'RGB103': 'Purple',\r\n        'RGB104': 'Purple',\r\n        'RGB105': 'Blue Violet',\r\n        'RGB110': 'Orange',\r\n        'RGB111': 'Dark Grey',\r\n        'RGB112': 'Medium Purple',\r\n        'RGB113': 'Slate Blue',\r\n        'RGB114': 'Slate Blue',\r\n        'RGB115': 'Royal Blue',\r\n        'RGB120': 'Chartreuse',\r\n        'RGB121': 'Dark Sea Green',\r\n        'RGB122': 'Pale Turquoise',\r\n        'RGB123': 'Steel Blue',\r\n        'RGB124': 'Steel Blue',\r\n        'RGB125': 'Cornflower Blue',\r\n        'RGB130': 'Chartreuse',\r\n        'RGB131': 'Dark Sea Green',\r\n        'RGB132': 'Cadet Blue',\r\n        'RGB133': 'Cadet Blue',\r\n        'RGB134': 'Sky Blue',\r\n        'RGB135': 'Steel Blue',\r\n        'RGB140': 'Chartreuse',\r\n        'RGB141': 'Pale Green',\r\n        'RGB142': 'Sea Green',\r\n        'RGB143': 'Aquamarine',\r\n        'RGB144': 'Medium Turquoise',\r\n        'RGB145': 'Steel Blue',\r\n        'RGB150': 'Chartreuse',\r\n        'RGB151': 'Sea Green',\r\n        'RGB152': 'Sea Green',\r\n        'RGB153': 'Sea Green',\r\n        'RGB154': 'Aquamarine',\r\n        'RGB155': 'Dark Slate Gray',\r\n        'RGB200': 'Dark Red',\r\n        'RGB201': 'Deep Pink',\r\n        'RGB202': 'Dark Magenta',\r\n        'RGB203': 'Dark Magenta',\r\n        'RGB204': 'Dark Violet',\r\n        'RGB205': 'Purple',\r\n        'RGB210': 'Orange',\r\n        'RGB211': 'Light Pink',\r\n        'RGB212': 'Plum',\r\n        'RGB213': 'Medium Purple',\r\n        'RGB214': 'Medium Purple',\r\n        'RGB215': 'Slate Blue',\r\n        'RGB220': 'Yellow',\r\n        'RGB221': 'Wheat',\r\n        'RGB222': 'Grey',\r\n        'RGB223': 'Light Slate Grey',\r\n        'RGB224': 'Medium Purple',\r\n        'RGB225': 'Light Slate Blue',\r\n        'RGB230': 'Yellow',\r\n        'RGB231': 'Dark Olive Green',\r\n        'RGB232': 'Dark Sea Green',\r\n        'RGB233': 'Light Sky Blue',\r\n        'RGB234': 'Light Sky Blue',\r\n        'RGB235': 'Sky Blue',\r\n        'RGB240': 'Chartreuse',\r\n        'RGB241': 'Dark Olive Green',\r\n        'RGB242': 'Pale Green',\r\n        'RGB243': 'Dark Sea Green',\r\n        'RGB244': 'Dark Slate Gray',\r\n        'RGB245': 'Sky Blue',\r\n        'RGB250': 'Chartreuse',\r\n        'RGB251': 'Light Green',\r\n        'RGB252': 'Light Green',\r\n        'RGB253': 'Pale Green',\r\n        'RGB254': 'Aquamarine',\r\n        'RGB255': 'Dark Slate Gray',\r\n        'RGB300': 'Red',\r\n        'RGB301': 'Deep Pink',\r\n        'RGB302': 'Medium Violet Red',\r\n        'RGB303': 'Magenta',\r\n        'RGB304': 'Dark Violet',\r\n        'RGB305': 'Purple',\r\n        'RGB310': 'Dark Orange',\r\n        'RGB311': 'Indian Red',\r\n        'RGB312': 'Hot Pink',\r\n        'RGB313': 'Medium Orchid',\r\n        'RGB314': 'Medium Orchid',\r\n        'RGB315': 'Medium Purple',\r\n        'RGB320': 'Dark Goldenrod',\r\n        'RGB321': 'Light Salmon',\r\n        'RGB322': 'Rosy Brown',\r\n        'RGB323': 'Grey',\r\n        'RGB324': 'Medium Purple',\r\n        'RGB325': 'Medium Purple',\r\n        'RGB330': 'Gold',\r\n        'RGB331': 'Dark Khaki',\r\n        'RGB332': 'Navajo White',\r\n        'RGB333': 'Grey',\r\n        'RGB334': 'Light Steel Blue',\r\n        'RGB335': 'Light Steel Blue',\r\n        'RGB340': 'Yellow',\r\n        'RGB341': 'Dark Olive Green',\r\n        'RGB342': 'Dark Sea Green',\r\n        'RGB343': 'Dark Sea Green',\r\n        'RGB344': 'Light Cyan',\r\n        'RGB345': 'Light Sky Blue',\r\n        'RGB350': 'Green Yellow',\r\n        'RGB351': 'Dark Olive Green',\r\n        'RGB352': 'Pale Green',\r\n        'RGB353': 'Dark Sea Green',\r\n        'RGB354': 'Dark Sea Green',\r\n        'RGB355': 'Pale Turquoise',\r\n        'RGB400': 'Crimson/Red',\r\n        'RGB401': 'Deep Pink',\r\n        'RGB402': 'Deep Pink',\r\n        'RGB403': 'Magenta',\r\n        'RGB404': 'Magenta',\r\n        'RGB405': 'Magenta',\r\n        'RGB410': 'Dark Orange',\r\n        'RGB411': 'Indian Red',\r\n        'RGB412': 'Hot Pink',\r\n        'RGB413': 'Hot Pink',\r\n        'RGB414': 'Orchid',\r\n        'RGB415': 'Medium Orchid',\r\n        'RGB420': 'Orange',\r\n        'RGB421': 'Light Salmon/Bronze',\r\n        'RGB422': 'Light Pink',\r\n        'RGB423': 'Pink',\r\n        'RGB424': 'Plum',\r\n        'RGB425': 'Violet',\r\n        'RGB430': 'Gold',\r\n        'RGB431': 'Light Goldenrod',\r\n        'RGB432': 'Tan',\r\n        'RGB433': 'Misty Rose',\r\n        'RGB434': 'Thistle',\r\n        'RGB435': 'Plum',\r\n        'RGB440': 'Yellow',\r\n        'RGB441': 'Khaki',\r\n        'RGB442': 'Light Goldenrod',\r\n        'RGB443': 'Light Yellow',\r\n        'RGB444': 'Grey',\r\n        'RGB445': 'Light Steel Blue',\r\n        'RGB450': 'Yellow',\r\n        'RGB451': 'Dark Olive Green',\r\n        'RGB452': 'Dark Olive Green',\r\n        'RGB453': 'Dark Sea Green',\r\n        'RGB454': 'Honeydew',\r\n        'RGB455': 'Light Cyan',\r\n        'RGB500': 'Red',\r\n        'RGB501': 'Deep Pink',\r\n        'RGB502': 'Deep Pink',\r\n        'RGB503': 'Deep Pink',\r\n        'RGB504': 'Magenta',\r\n        'RGB505': 'Magenta',\r\n        'RGB510': 'Orangered',\r\n        'RGB511': 'Indian Red',\r\n        'RGB512': 'Indian Red',\r\n        'RGB513': 'Hot Pink',\r\n        'RGB514': 'Hot Pink',\r\n        'RGB515': 'Medium Orchid',\r\n        'RGB520': 'Dark Orange',\r\n        'RGB521': 'Salmon',\r\n        'RGB522': 'Light Coral',\r\n        'RGB523': 'Pale Violet Red',\r\n        'RGB524': 'Orchid',\r\n        'RGB525': 'Orchid',\r\n        'RGB530': 'Orange',\r\n        'RGB531': 'Sandy Brown',\r\n        'RGB532': 'Light Salmon',\r\n        'RGB533': 'Light Pink',\r\n        'RGB534': 'Pink',\r\n        'RGB535': 'Plum',\r\n        'RGB540': 'Gold',\r\n        'RGB541': 'Light Goldenrod',\r\n        'RGB542': 'Light Goldenrod',\r\n        'RGB543': 'Navajo White',\r\n        'RGB544': 'Misty Rose',\r\n        'RGB545': 'Thistle',\r\n        'RGB550': 'Yellow',\r\n        'RGB551': 'Light Goldenrod',\r\n        'RGB552': 'Khaki',\r\n        'RGB553': 'Wheat',\r\n        'RGB554': 'Corn Silk',\r\n        'RGB555': 'White',\r\n        'mono00': 'Grey 3',\r\n        'mono01': 'Grey 7',\r\n        'mono02': 'Grey 11',\r\n        'mono03': 'Grey 15',\r\n        'mono04': 'Grey 19',\r\n        'mono05': 'Grey 23',\r\n        'mono06': 'Grey 27',\r\n        'mono07': 'Grey 30',\r\n        'mono08': 'Grey 35',\r\n        'mono09': 'Grey 39',\r\n        'mono10': 'Grey 32',\r\n        'mono11': 'Grey 46',\r\n        'mono12': 'Grey 50',\r\n        'mono13': 'Grey 54',\r\n        'mono14': 'Grey 58',\r\n        'mono15': 'Grey 62',\r\n        'mono16': 'Grey 66',\r\n        'mono17': 'Grey 70',\r\n        'mono18': 'Grey 74',\r\n        'mono19': 'Grey 78',\r\n        'mono20': 'Grey 82',\r\n        'mono21': 'Grey 85',\r\n        'mono22': 'Grey 89',\r\n        'mono23': 'Grey 93'\r\n    };\r\n\r\n    private _colorDialog: Dialog;\r\n\r\n    constructor(element: string | JQuery | HTMLElement, enabledAdvanced?: boolean) {\r\n        super();\r\n        if (!element)\r\n            throw new Error('AdvEditor must be a selector, element or jquery object');\r\n        if (typeof element === 'string') {\r\n            this._element = document.querySelector(element);\r\n            if (!this._element)\r\n                throw new Error('Invalid selector for AdvEditor.');\r\n        }\r\n        else if (element instanceof $)\r\n            this._element = element[0];\r\n        else if (element instanceof HTMLElement)\r\n            this._element = element;\r\n        else\r\n            throw new Error('AdvEditor must be a selector, element or jquery object');\r\n        this.simple = !enabledAdvanced;\r\n    }\r\n\r\n    get id() {\r\n        if (this._element) return this._element.id;\r\n        return '';\r\n    }\r\n\r\n    get element(): HTMLElement {\r\n        return this._element;\r\n    }\r\n\r\n    get simple() { return this._simple; }\r\n    set simple(value) {\r\n        if (value === this._simple) return;\r\n        this._simple = value;\r\n        if (TINYMCE && !this.tinymceExist) return;\r\n        //was disabled\r\n        if (value)\r\n            this.remove();\r\n        else\r\n            this.initialize();\r\n    }\r\n    public clear() {\r\n        if (TINYMCE && !this.isSimple)\r\n            tinymce.activeEditor.setContent('');\r\n        else\r\n            this._element.value = '';\r\n    }\r\n    public get value() {\r\n        if (!this.isSimple)\r\n            return this.getFormattedText().replace(/(?:\\r)/g, '')\r\n        return this._element.value;\r\n    }\r\n    public set value(value) {\r\n        if (this.isSimple)\r\n            this._element.value = value;\r\n        else\r\n            tinymce.activeEditor.setContent(value);\r\n    }\r\n\r\n    public insert(value) {\r\n        if (!this.isSimple) {\r\n            value = htmlEncode(value);\r\n            value = value.replace(/ /g, '&nbsp;');\r\n            value = value.replace(/\\t/g, '&nbsp;&nbsp;&nbsp;');\r\n            value = value.replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\r\n            var content = this.getText();\r\n            if (content === '\\n') {\r\n                tinymce.activeEditor.undoManager.transact(() => {\r\n                    tinymce.activeEditor.setContent(value);\r\n                });\r\n            }\r\n            else {\r\n                if (!content.endsWith('\\n'))\r\n                    value = '<br>' + value;\r\n                tinymce.activeEditor.undoManager.transact(() => {\r\n                    tinymce.activeEditor.dom.add(tinymce.activeEditor.getBody(), 'span', {}, value);\r\n                });\r\n            }\r\n\r\n        }\r\n        else\r\n            insertValue(this._element, value); {\r\n        }\r\n\r\n    }\r\n\r\n    get tinymceExist() {\r\n        return TINYMCE && typeof (tinymce) !== 'undefined';\r\n    }\r\n\r\n    get isSimple(): boolean {\r\n        return this._simple || !this.tinymceExist;\r\n    }\r\n\r\n    private loadColors() {\r\n        var _dColors = getColors();\r\n        var c, color, r, g, b, idx, _bold = [], bl;\r\n        this._ColorTable = [];\r\n        this._colors = {};\r\n        var clientColors = client.getOption('colors') || [];\r\n        color = new RGBColor(clientColors[0] || _dColors[0]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BLACK';\r\n        this._ColorTable.push(color, 'BLACK');\r\n\r\n        color = new RGBColor(clientColors[1] || _dColors[1]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'RED';\r\n        this._ColorTable.push(color, 'RED');\r\n\r\n        color = new RGBColor(clientColors[2] || _dColors[2]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'GREEN';\r\n        this._ColorTable.push(color, 'GREEN');\r\n\r\n        color = new RGBColor(clientColors[3] || _dColors[3]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'ORANGE';\r\n        this._ColorTable.push(color, 'ORANGE');\r\n\r\n        color = new RGBColor(clientColors[4] || _dColors[4]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BLUE';\r\n        this._ColorTable.push(color, 'BLUE');\r\n        color = new RGBColor(clientColors[5] || _dColors[5]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'MAGENTA';\r\n        this._ColorTable.push(color, 'MAGENTA');\r\n        color = new RGBColor(clientColors[6] || _dColors[6]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'CYAN';\r\n        this._ColorTable.push(color, 'CYAN');\r\n        color = new RGBColor(clientColors[7] || _dColors[7]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'WHITE';\r\n        this._ColorTable.push(color, 'WHITE');\r\n\r\n        color = new RGBColor(clientColors[8] || _dColors[8]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'mono11';\r\n        this._ColorTable.push(color, 'BOLD BLACK');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[9] || _dColors[9]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^RED';\r\n        this._ColorTable.push(color, 'BOLD RED');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[10] || _dColors[10]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^GREEN';\r\n        this._ColorTable.push(color, 'BOLD GREEN');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[11] || _dColors[11]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^YELLOW';\r\n        this._ColorTable.push(color, 'BOLD YELLOW');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[11] || _dColors[11]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'YELLOW';\r\n        this._ColorTable.push(color, 'YELLOW');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[12] || _dColors[12]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^BLUE';\r\n        this._ColorTable.push(color, 'BOLD BLUE');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[13] || _dColors[13]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^MAGENTA';\r\n        this._ColorTable.push(color, 'BOLD MAGENTA');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[14] || _dColors[14]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^CYAN';\r\n        this._ColorTable.push(color, 'BOLD CYAN');\r\n        _bold.push(color);\r\n        color = new RGBColor(clientColors[15] || _dColors[15]).toHex().substr(1).toUpperCase();\r\n        this._colors[color] = 'BOLD%^%^WHITE';\r\n        this._ColorTable.push(color, 'BOLD WHITE');\r\n        //_bold.push(color);\r\n\r\n        for (r = 0; r < 6; r++) {\r\n            for (g = 0; g < 6; g++) {\r\n                for (b = 0; b < 6; b++) {\r\n                    idx = `RGB${r}${g}${b}`;\r\n                    color = '';\r\n                    c = 0;\r\n                    c = r * 40 + 55;\r\n                    if (c < 16)\r\n                        color += '0';\r\n                    color += c.toString(16);\r\n                    c = 0;\r\n                    c = g * 40 + 55;\r\n                    if (c < 16)\r\n                        color += '0';\r\n                    color += c.toString(16);\r\n                    c = 0;\r\n                    c = b * 40 + 55;\r\n                    if (c < 16)\r\n                        color += '0';\r\n                    color += c.toString(16);\r\n                    color = color.toUpperCase();\r\n                    //_ColorTable.push(color);\r\n                    //_ColorTable.push(idx);\r\n                    if (!this._colors[color])\r\n                        this._colors[color] = idx;\r\n                    this.colorList.push({ color: idx, hex: '#' + color, rgb: { r: r * 40 + 55, g: g * 40 + 55, b: b * 40 + 55 } });\r\n                }\r\n            }\r\n        }\r\n\r\n        for (r = 232; r <= 255; r++) {\r\n            g = (r - 232) * 10 + 8;\r\n            if (g < 16)\r\n                g = '0' + g.toString(16).toUpperCase();\r\n            else\r\n                g = g.toString(16).toUpperCase();\r\n            g = g + g + g;\r\n            //_ColorTable.push(g);\r\n            if (r < 242) {\r\n                //_ColorTable.push(\"mono0\" + (r - 232));\r\n                if (!this._colors[g])\r\n                    this._colors[g] = 'mono0' + (r - 232);\r\n            }\r\n            else {\r\n                //_ColorTable.push(\"mono\" + (r - 232));\r\n                if (!this._colors[g])\r\n                    this._colors[g] = 'mono' + (r - 232);\r\n            }\r\n        }\r\n        //this._colorCodes = invert(this._colors);\r\n        for (b = 0, bl = _bold.length; b < bl; b++) {\r\n            this._colors['B' + _bold[b]] = this._colors[this.nearestHex('#' + _bold[b]).substr(1)].toUpperCase();\r\n        }\r\n        this._colors['BFFFFFF'] = 'RGB555';\r\n        tinymce.activeEditor.options.set('color_map', this._ColorTable);\r\n    }\r\n\r\n    private initPlugins() {\r\n        if (!TINYMCE) return\r\n        const _editor = this;\r\n        tinymce.PluginManager.add('pinkfishtextcolor', function (editor, url) {\r\n            type ColorFormat = 'forecolor' | 'hilitecolor';\r\n\r\n            const fallbackColor = '#000000';\r\n            const _colors = ['000000', 'BLACK', '800000', 'RED', '008000', 'GREEN', '808000', 'ORANGE', '0000EE', 'BLUE', '800080', 'MAGENTA', '008080', 'CYAN', 'BBBBBB', 'WHITE', '808080', 'BOLD BLACK', 'FF0000', 'BOLD RED', '00FF00', 'BOLD GREEN', 'FFFF00', 'YELLOW', '5C5CFF', 'BOLD BLUE', 'FF00FF', 'BOLD MAGENTA', '00FFFF', 'BOLD CYAN', 'FFFFFF', 'BOLD WHITE'];\r\n\r\n            let _lastButton;\r\n\r\n            interface Cell<T> {\r\n                get: () => T;\r\n                set: (value: T) => void;\r\n            }\r\n\r\n            const Cell = <T>(initial: T): Cell<T> => {\r\n                let value = initial;\r\n\r\n                const get = () => {\r\n                    return value;\r\n                };\r\n\r\n                const set = (v: T) => {\r\n                    value = v;\r\n                };\r\n\r\n                return {\r\n                    get,\r\n                    set\r\n                };\r\n            };\r\n\r\n            let _forecolor = Cell(fallbackColor);\r\n            let _backcolor = Cell(fallbackColor);\r\n\r\n            const getCurrentColor = (editor, format: ColorFormat) => {\r\n                let color: string | undefined;\r\n\r\n                editor.dom.getParents(editor.selection.getStart(), (elm) => {\r\n                    let value;\r\n\r\n                    if ((value = elm.style[format === 'forecolor' ? 'color' : 'background-color'])) {\r\n                        color = color ? color : value;\r\n                    }\r\n                });\r\n\r\n                return color;\r\n            };\r\n\r\n            const applyFormat = (editor, format, value) => {\r\n                editor.undoManager.transact(() => {\r\n                    editor.focus();\r\n                    editor.formatter.apply(format, { value });\r\n                    editor.nodeChanged();\r\n                });\r\n            };\r\n\r\n            const removeFormat = (editor, format) => {\r\n                editor.undoManager.transact(() => {\r\n                    editor.focus();\r\n                    editor.formatter.remove(format, { value: null }, null, true);\r\n                    editor.nodeChanged();\r\n                });\r\n            };\r\n\r\n            const registerCommands = (editor) => {\r\n                editor.addCommand('mceApplyPinkfishcolor', (format, value) => {\r\n                    applyFormat(editor, format, value);\r\n                });\r\n\r\n                editor.addCommand('mceRemovePinkfishcolor', (format) => {\r\n                    removeFormat(editor, format);\r\n                });\r\n\r\n                editor.addCommand('mceSetPinkfishcolor', (name, color) => {\r\n                    if (_lastButton) {\r\n                        setIconColor(_lastButton, name === 'forecolor' ? 'pinkfishforecolor' : name, color);\r\n                        (name === 'forecolor' ? _forecolor : _backcolor).set(color);\r\n                    }\r\n                });\r\n            };\r\n\r\n            const getAdditionalColors = (hasCustom: boolean) => {\r\n                const type: 'choiceitem' = 'choiceitem';\r\n                const remove = {\r\n                    type,\r\n                    text: 'Remove color',\r\n                    icon: 'color-swatch-remove-color',\r\n                    value: 'remove'\r\n                };\r\n                const custom = {\r\n                    type,\r\n                    text: 'Custom color',\r\n                    icon: 'color-picker',\r\n                    value: 'custom'\r\n                };\r\n                return hasCustom ? [\r\n                    remove,\r\n                    custom\r\n                ] : [remove];\r\n            };\r\n\r\n            const applyColor = (editor, format, value, onChoice: (v: string) => void) => {\r\n                if (value === 'custom') {\r\n                    _editor.openColorDialog(format, '');\r\n                } else if (value === 'remove') {\r\n                    onChoice('');\r\n                    editor.execCommand('mceRemovePinkfishcolor', format);\r\n                } else {\r\n                    onChoice(value);\r\n                    editor.execCommand('mceApplyPinkfishcolor', format, value);\r\n                }\r\n            };\r\n\r\n            const mapColors = (colorMap: string[]) => {\r\n                const colors = [];\r\n\r\n                for (let i = 0; i < colorMap.length; i += 2) {\r\n                    colors.push({\r\n                        text: colorMap[i + 1],\r\n                        value: '#' + colorMap[i],\r\n                        type: 'choiceitem'\r\n                    });\r\n                }\r\n\r\n                return colors;\r\n            }\r\n\r\n            const getColors = (colors, hasCustom: boolean) => mapColors(_colors).concat(getAdditionalColors(hasCustom));\r\n\r\n            const getFetch = (colors, hasCustom: boolean) => (callback) => {\r\n                callback(getColors(colors, hasCustom));\r\n            };\r\n\r\n            const setIconColor = (splitButtonApi, name: string, newColor: string) => {\r\n                const id = name === 'pinkfishforecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\r\n                splitButtonApi.setIconFill(id, newColor);\r\n            };\r\n\r\n            const registerTextColorButton = (editor, name: string, format: ColorFormat, tooltip: string, lastColor) => {\r\n                editor.ui.registry.addSplitButton(name, {\r\n                    tooltip,\r\n                    presets: 'color',\r\n                    icon: name === 'pinkfishforecolor' ? 'text-color' : 'highlight-bg-color',\r\n                    select: (value) => {\r\n                        const optCurrentRgb = new RGBColor(getCurrentColor(editor, format) || '').toHex();\r\n                        return optCurrentRgb.toLowerCase() === value.toLowerCase();\r\n                    },\r\n                    columns: 5,\r\n                    fetch: getFetch(_colors, true),\r\n                    onAction: (_splitButtonApi) => {\r\n                        _lastButton = _splitButtonApi;\r\n                        applyColor(editor, format, lastColor.get(), () => { });\r\n                    },\r\n                    onItemAction: (_splitButtonApi, value) => {\r\n                        _lastButton = _splitButtonApi;\r\n                        applyColor(editor, format, value, (newColor) => {\r\n                            lastColor.set(newColor);\r\n                            editor.fire('TextColorChange', {\r\n                                name,\r\n                                color: newColor\r\n                            });\r\n                        });\r\n                    },\r\n                    onSetup: (splitButtonApi) => {\r\n                        setIconColor(splitButtonApi, name, lastColor.get());\r\n\r\n                        const handler = (e) => {\r\n                            if (e.name === name) {\r\n                                setIconColor(splitButtonApi, e.name, e.color);\r\n                            }\r\n                        };\r\n\r\n                        editor.on('TextColorChange', handler);\r\n\r\n                        return () => {\r\n                            editor.off('TextColorChange', handler);\r\n                        };\r\n                    }\r\n                });\r\n            };\r\n\r\n            const registerTextColorMenuItem = (editor, name: string, format: ColorFormat, text: string) => {\r\n                editor.ui.registry.addNestedMenuItem(name, {\r\n                    text,\r\n                    icon: name === 'pinkfishforecolor' ? 'text-color' : 'highlight-bg-color',\r\n                    getSubmenuItems: () => [\r\n                        {\r\n                            type: 'fancymenuitem',\r\n                            fancytype: 'colorswatch',\r\n                            onAction: (data) => {\r\n                                applyColor(editor, format, data.value, () => { });\r\n                            }\r\n                        }\r\n                    ]\r\n                });\r\n            };\r\n\r\n            registerCommands(editor);\r\n            registerTextColorButton(editor, 'pinkfishforecolor', 'forecolor', 'Text color', _forecolor);\r\n            registerTextColorButton(editor, 'pinkfishbackcolor', 'hilitecolor', 'Background color', _backcolor);\r\n\r\n            registerTextColorMenuItem(editor, 'pinkfishforecolor', 'forecolor', 'Text color');\r\n            registerTextColorMenuItem(editor, 'pinkfishbackcolor', 'hilitecolor', 'Background color');\r\n        });\r\n        tinymce.PluginManager.add('pinkfish', function (editor) {\r\n\r\n            editor.addCommand('mceApplyFormat', (format, value) => {\r\n                editor.undoManager.transact(() => {\r\n                    editor.focus();\r\n                    _editor.clearReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    if (value)\r\n                        editor.formatter.apply(format, { value: value });\r\n                    else\r\n                        editor.formatter.apply(format);\r\n                    _editor.addReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    editor.nodeChanged();\r\n                });\r\n            });\r\n\r\n            editor.addCommand('mceRemoveFormat', (format) => {\r\n                editor.undoManager.transact(() => {\r\n                    editor.focus();\r\n                    _editor.clearReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    editor.formatter.remove(format, { value: null }, null, true);\r\n                    _editor.addReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    editor.nodeChanged();\r\n                });\r\n            });\r\n\r\n            function buttonPostRender(buttonApi, format) {\r\n                editor.on('init', () => {\r\n                    editor.formatter.formatChanged(format, function (state) {\r\n                        buttonApi.setActive(state);\r\n                    });\r\n                });\r\n            }\r\n\r\n            function toggleFormat(format) {\r\n                if (!format || typeof format !== 'string') format = this.settings.format;\r\n                tinymce.activeEditor.undoManager.transact(() => {\r\n                    $('#tinymce', tinymce.activeEditor.getDoc()).removeClass('animate');\r\n                    this.clearReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    editor.execCommand('mceToggleFormat', false, format);\r\n                    this.addReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    $('#tinymce', tinymce.activeEditor.getDoc()).addClass('animate');\r\n                });\r\n            }\r\n\r\n\r\n            editor.ui.registry.addIcon('overline', '<i class=\"mce-i-overline\"></i>');\r\n            editor.ui.registry.addIcon('dblunderline', '<i class=\"mce-i-dblunderline\"></i>');\r\n            editor.ui.registry.addIcon('flash', '<i class=\"mce-i-flash\"></i>');\r\n            editor.ui.registry.addIcon('reverse', '<i class=\"mce-i-reverse\"></i>');\r\n            editor.ui.registry.addIcon('pasteformatted', '<i class=\"mce-i-pasteformatted\"></i>');\r\n            editor.ui.registry.addIcon('copyformatted', '<i class=\"mce-i-copyformatted\"></i>');\r\n\r\n            editor.ui.registry.addSplitButton('send', {\r\n                icon: 'send',\r\n                tooltip: 'Send to mud',\r\n                onAction: () => {\r\n                    client.sendCommand(_editor.getFormattedText().replace(/(?:\\r)/g, ''));\r\n                    if (client.getOption('editorClearOnSend'))\r\n                        tinymce.activeEditor.setContent('');\r\n                    if (client.getOption('editorCloseOnSend'))\r\n                        _editor.emit('close');\r\n                },\r\n                onItemAction: (api, value) => {\r\n                    switch (value) {\r\n                        case 'formatted':\r\n                            client.sendCommand(_editor.getFormattedText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'text':\r\n                            client.sendCommand(_editor.getText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'formattednoecho':\r\n                            client.sendBackground(_editor.getFormattedText().replace(/(?:\\r)/g, ''), true);\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'textnoecho':\r\n                            client.sendBackground(_editor.getText().replace(/(?:\\r)/g, ''), true);\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'formattedverbatim':\r\n                            client.send(_editor.getFormattedText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'textverbatim':\r\n                            client.send(_editor.getText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'rawformatted':\r\n                            client.sendRaw(_editor.getFormattedText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                        case 'rawtext':\r\n                            client.sendRaw(_editor.getText().replace(/(?:\\r)/g, ''));\r\n                            if (client.getOption('editorClearOnSend'))\r\n                                tinymce.activeEditor.setContent('');\r\n                            if (client.getOption('editorCloseOnSend'))\r\n                                _editor.emit('close');\r\n                            break;\r\n                    }\r\n                },\r\n                fetch: callback => {\r\n                    callback([\r\n                        {\r\n                            text: 'Formatted as commands',\r\n                            value: 'formatted',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Text as commands',\r\n                            value: 'text',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Formatted as commands (No echo)',\r\n                            value: 'formattednoecho',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Text as commands (No echo)',\r\n                            value: 'textnoecho',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Formatted verbatim (No echo)',\r\n                            value: 'formattedverbatim',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Text verbatim (No echo)',\r\n                            value: 'textverbatim',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Raw formatted (No echo)',\r\n                            value: 'rawformatted',\r\n                            type: 'choiceitem'\r\n                        },\r\n                        {\r\n                            text: 'Raw text (No echo)',\r\n                            value: 'rawtext',\r\n                            type: 'choiceitem'\r\n                        }\r\n                    ]);\r\n                }\r\n            });\r\n            editor.ui.registry.addButton('append', {\r\n                icon: 'browse',\r\n                tooltip: 'Append file...',\r\n                onAction: () => _editor.appendFile()\r\n            });\r\n            editor.ui.registry.addButton('clear', {\r\n                icon: 'remove',\r\n                tooltip: 'Clear',\r\n                onAction: () => _editor.clear()\r\n            });\r\n            editor.ui.registry.addButton('pasteformatted', {\r\n                icon: 'pasteformatted',\r\n                tooltip: 'Paste formatted',\r\n                onAction: buttonApi => {\r\n                    pasteText().then(text => {\r\n                        _editor.insertFormatted(text || '');\r\n                    }).catch(err => {\r\n                        if (client.enableDebug)\r\n                            client.debug(err);\r\n                        if (err.message && err.message === 'Permission not granted!')\r\n                            alert('Paste permission not granted.');\r\n                        else\r\n                            alert('Paste not supported.');\r\n                    });\r\n                }\r\n            });\r\n            editor.ui.registry.addButton('pasteastext', {\r\n                icon: 'paste-text',\r\n                tooltip: 'Paste as text',\r\n                onAction: buttonApi => {\r\n                    pasteText().then(text => {\r\n                        tinymce.activeEditor.execCommand('mceInsertContent', false, (text || '').replace(/(\\r\\n|\\r|\\n)/g, '<br/>').replaceAll('  ', '&nbsp;&nbsp;'));\r\n                    }).catch(err => {\r\n                        if (client.enableDebug)\r\n                            client.debug(err);\r\n                        if (err.message && err.message === 'Permission not granted!')\r\n                            alert('Paste permission not granted.');\r\n                        else\r\n                            alert('Paste not supported.');\r\n                    });\r\n                }\r\n            });\r\n\r\n            editor.ui.registry.addButton('copyformatted', {\r\n                icon: 'copyformatted',\r\n                tooltip: 'Copy formatted',\r\n                onAction: buttonApi => copyText(_editor.getFormattedSelection().replace(/(?:\\r)/g, ''))\r\n            });\r\n\r\n            editor.ui.registry.addToggleButton('overline', {\r\n                icon: 'overline',\r\n                tooltip: 'Overline',\r\n                format: 'overline',\r\n                onAction: buttonApi => toggleFormat('overline'),\r\n                onSetup: buttonApi => buttonPostRender(buttonApi, 'overline')\r\n            });\r\n            editor.ui.registry.addToggleButton('dblunderline', {\r\n                icon: 'dblunderline',\r\n                tooltip: 'Double Underline',\r\n                format: 'dblunderline',\r\n                onAction: buttonApi => toggleFormat('dblunderline'),\r\n                onSetup: buttonApi => buttonPostRender(buttonApi, 'dblunderline')\r\n            });\r\n            editor.ui.registry.addToggleButton('flash', {\r\n                tooltip: 'Flash',\r\n                format: 'flash',\r\n                icon: 'flash',\r\n                onAction: buttonApi => toggleFormat('flash'),\r\n                onSetup: buttonApi => buttonPostRender(buttonApi, 'flash')\r\n            });\r\n            editor.ui.registry.addToggleButton('reverse', {\r\n                icon: 'reverse',\r\n                tooltip: 'Reverse',\r\n                format: 'reverse',\r\n                onAction: buttonApi => toggleFormat('reverse'),\r\n                onSetup: buttonApi => buttonPostRender(buttonApi, 'reverse')\r\n            });\r\n\r\n            editor.ui.registry.addMenuItem('style', {\r\n                text: 'Style',\r\n                menu: [\r\n                    {\r\n                        image: 'overline',\r\n                        text: 'Overline',\r\n                        format: 'overline',\r\n                        onclick: toggleFormat,\r\n                        onpostrender: buttonPostRender\r\n                    }, {\r\n                        image: 'dblunderline',\r\n                        text: 'Double Underline',\r\n                        format: 'dblunderline',\r\n                        onclick: toggleFormat,\r\n                        onpostrender: buttonPostRender\r\n                    },\r\n                    {\r\n                        text: 'Flash',\r\n                        format: 'flash',\r\n                        image: 'flash',\r\n                        onclick: toggleFormat,\r\n                        onpostrender: buttonPostRender\r\n                    },\r\n                    {\r\n                        image: 'reverse',\r\n                        text: 'Reverse',\r\n                        format: 'reverse',\r\n                        onclick: toggleFormat,\r\n                        onpostrender: buttonPostRender\r\n                    }\r\n                ]\r\n            });\r\n\r\n            editor.ui.registry.addMenuItem('overline', {\r\n                image: 'overline',\r\n                text: 'Overline',\r\n                format: 'overline',\r\n                onclick: toggleFormat,\r\n                onpostrender: buttonPostRender\r\n            });\r\n\r\n            editor.ui.registry.addMenuItem('dblunderline', {\r\n                image: 'dblunderline',\r\n                text: 'Double Underline',\r\n                format: 'dblunderline',\r\n                onclick: toggleFormat,\r\n                onpostrender: buttonPostRender\r\n            });\r\n\r\n            editor.ui.registry.addMenuItem('flash', {\r\n                text: 'Flash',\r\n                format: 'flash',\r\n                image: 'flash',\r\n                onclick: toggleFormat,\r\n                onpostrender: buttonPostRender\r\n            });\r\n            editor.ui.registry.addMenuItem('reverse', {\r\n                image: 'reverse',\r\n                text: 'Reverse',\r\n                format: 'reverse',\r\n                onclick: toggleFormat,\r\n                onpostrender: buttonPostRender\r\n            });\r\n\r\n            editor.on('Change', () => {\r\n                _editor.addReverse($('.reverse', $(editor.getDoc()).contents()));\r\n            });\r\n            editor.addShortcut('ctrl+s', 'Strikethrough', () => {\r\n                toggleFormat('strikethrough');\r\n            });\r\n            editor.addShortcut('ctrl+o', 'Overline', () => {\r\n                toggleFormat('overline');\r\n            });\r\n            editor.addShortcut('ctrl+d', 'Double Underline', () => {\r\n                toggleFormat('dblunderline');\r\n            });\r\n            editor.addShortcut('ctrl+f', 'Flash', () => {\r\n                toggleFormat('flash');\r\n            });\r\n            editor.addShortcut('ctrl+r', 'Reverse', () => {\r\n                toggleFormat('reverse');\r\n            });\r\n        });\r\n    }\r\n\r\n    private clearReverse(els, c?) {\r\n        els.each(\r\n            function () {\r\n                if (!$(this).data('reverse'))\r\n                    return;\r\n                if (c && $(this).hasClass('reverse'))\r\n                    return;\r\n                var back, fore;\r\n                if (c) {\r\n                    back = $(this).css('color');\r\n                    fore = $(this).css('background-color');\r\n                }\r\n                else {\r\n                    fore = $(this).parent().css('color');\r\n                    back = $(this).parent().css('background-color');\r\n                }\r\n                if (back === 'black')\r\n                    back = '';\r\n                if (fore === 'rgba(0, 0, 0, 0)')\r\n                    fore = 'black';\r\n                $(this).css('color', fore);\r\n                $(this).css('background-color', back);\r\n                if ($(this).children().length)\r\n                    this.clearReverse($(this).children(), true);\r\n            }\r\n        );\r\n    }\r\n\r\n    private addReverse(els, c?) {\r\n        els.each(\r\n            function () {\r\n                if (c && $(this).hasClass('reverse'))\r\n                    return;\r\n                var back, fore;\r\n                if (c) {\r\n                    back = $(this).css('color');\r\n                    fore = $(this).css('background-color');\r\n                }\r\n                else {\r\n                    back = $(this).parent().css('color');\r\n                    fore = $(this).parent().css('background-color');\r\n                }\r\n                if (back === 'rgba(0, 0, 0, 0)')\r\n                    back = 'black';\r\n                if (fore === 'rgba(0, 0, 0, 0)')\r\n                    fore = 'black';\r\n                if ($(this).children().length) {\r\n                    this.clearReverse($(this).children(), true);\r\n                    this.addReverse($(this).children(), true);\r\n                }\r\n                $(this).css('color', fore);\r\n                $(this).css('background-color', back);\r\n                $(this).data('reverse', true);\r\n\r\n            }\r\n        );\r\n    }\r\n\r\n    private colorCell(color, idx) {\r\n        var cell = '<td class=\"mce-grid-cell' + (color === 'transparent' ? ' mce-colorbtn-trans' : '') + '\">';\r\n        cell += '<div id=\"' + idx + '\"';\r\n        cell += ' data-mce-color=\"' + color + '\"';\r\n        cell += ' role=\"option\"';\r\n        cell += ' tabIndex=\"-1\"';\r\n        cell += ' style=\"background-color: ' + (color === 'transparent' ? color : '#' + color) + '\"';\r\n        if (this.colorNames[idx])\r\n            cell += ' title=\"' + idx + ', ' + this.colorNames[idx] + '\">';\r\n        else\r\n            cell += ' title=\"' + idx + '\">';\r\n        if (color === 'transparent') cell += '&#215;';\r\n        cell += '</div>';\r\n        cell += '</td>';\r\n        return cell;\r\n    }\r\n\r\n    private openColorDialog(type, color) {\r\n        if (!this._colorDialog) {\r\n            this._colorDialog = new Dialog({ noFooter: true, title: '<i class=\"fas fa-palette\"></i> Pick color', center: true, resizable: false, moveable: false, maximizable: false, width: 380, height: 340 });\r\n            this._colorDialog.body.style.alignItems = 'center';\r\n            this._colorDialog.body.style.display = 'flex';\r\n            let c;\r\n            let cl;\r\n            let r;\r\n            let g;\r\n            let b;\r\n            let idx;\r\n            var html = '<table style=\"margin : auto !important;\" class=\"mce-grid mce-grid-border mce-colorbutton-grid\" role=\"list\" cellspacing=\"0\"><tbody><tr>';\r\n            for (c = 0, cl = this._ColorTable.length; c < cl; c += 2) {\r\n                html += this.colorCell(this._ColorTable[c], this._ColorTable[c + 1]);\r\n                if (c / 2 % 6 === 5)\r\n                    html += '<td class=\"mce-grid-cell\"></td>';\r\n            }\r\n            html += '<td class=\"mce-grid-cell\"></td>';\r\n            html += this.colorCell('transparent', 'No color');\r\n            html += '</tr><tr><td></td></tr>';\r\n            var html2 = '';\r\n            for (r = 0; r < 6; r++) {\r\n                if (g < 3)\r\n                    html += '<tr>';\r\n                else\r\n                    html2 += '<tr>';\r\n                for (g = 0; g < 6; g++) {\r\n                    for (b = 0; b < 6; b++) {\r\n                        idx = `RGB${r}${g}${b}`;\r\n                        color = '';\r\n                        c = 0;\r\n                        c = r * 40 + 55;\r\n                        if (c < 16)\r\n                            color += '0';\r\n                        color += c.toString(16);\r\n                        c = 0;\r\n                        c = g * 40 + 55;\r\n                        if (c < 16)\r\n                            color += '0';\r\n                        color += c.toString(16);\r\n                        c = 0;\r\n                        c = b * 40 + 55;\r\n                        if (c < 16)\r\n                            color += '0';\r\n                        color += c.toString(16);\r\n                        color = color.toUpperCase();\r\n                        if (g < 3)\r\n                            html += this.colorCell(color, idx);\r\n                        else\r\n                            html2 += this.colorCell(color, idx);\r\n                    }\r\n                    if (g === 2)\r\n                        html += '</tr>';\r\n                    else if (g < 3)\r\n                        html += '<td class=\"mce-grid-cell\"></td>';\r\n                    else if (g < 5)\r\n                        html2 += '<td class=\"mce-grid-cell\"></td>';\r\n                }\r\n                if (g < 3)\r\n                    html += '</tr>';\r\n                else\r\n                    html2 += '</tr>';\r\n            }\r\n            html += html2;\r\n            html += '<tr><td></td></tr><tr>';\r\n            for (r = 232; r <= 255; r++) {\r\n                g = (r - 232) * 10 + 8;\r\n                if (g < 16)\r\n                    g = '0' + g.toString(16).toUpperCase();\r\n                else\r\n                    g = g.toString(16).toUpperCase();\r\n                g = g + g + g;\r\n                html += this.colorCell(g, color);\r\n                if (r === 237 || r === 249)\r\n                    html += '<td class=\"mce-grid-cell\"></td>';\r\n                if (r === 243)\r\n                    html += '</tr><tr>';\r\n            }\r\n            html += '</tr></tbody></table>';\r\n            html += `<style>\r\n.mce-colorbtn-trans div {line-height: 14px;overflow: hidden;}\r\n.mce-grid td.mce-grid-cell div{border:1px solid #c5c5c5;width:15px;height:15px;margin:0;cursor:pointer}.mce-grid td.mce-grid-cell div:focus{border-color:#91bbe9}.mce-grid td.mce-grid-cell div[disabled]{cursor:not-allowed}            \r\n.mce-grid{border-spacing:2px;border-collapse:separate}.mce-grid a{display:block;border:1px solid transparent}.mce-grid a:hover,.mce-grid a:focus{border-color:#91bbe9}.mce-grid-border{margin:0 4px 0 4px}.mce-grid-border a{border-color:#c5c5c5;width:13px;height:13px}.mce-grid-border a:hover,.mce-grid-border a.mce-active{border-color:#91bbe9;background:#bdd6f2}            \r\n            </style>`;\r\n            this._colorDialog.body.innerHTML = html;\r\n            let cells = this._colorDialog.body.querySelectorAll('div');\r\n            for (c = 0, cl = cells.length; c < cl; c++)\r\n                cells[c].addEventListener('click', e => {\r\n                    color = (e.currentTarget as HTMLElement).dataset.mceColor;\r\n                    if (color === 'transparent')\r\n                        tinymce.activeEditor.execCommand('mceRemoveFormat', this._colorDialog.dialog.dataset.type);\r\n                    else\r\n                        tinymce.activeEditor.execCommand('mceApplyFormat', this._colorDialog.dialog.dataset.type, '#' + color);\r\n                    tinymce.activeEditor.execCommand('mceSetTextcolor', this._colorDialog.dialog.dataset.type, '#' + color);\r\n                    this._colorDialog.close();\r\n                });\r\n        }\r\n        this._colorDialog.dialog.dataset.type = type;\r\n        this._colorDialog.showModal();\r\n    }\r\n\r\n    private appendFile() {\r\n        openFileDialog('Append file(s)', true).then(files => {\r\n            for (var f = 0, fl = files.length; f < fl; f++)\r\n                readFile(files[f]).then((contents: any) => {\r\n                    this.insert(contents);\r\n                }).catch(client.error);\r\n        }).catch(() => { });\r\n    }\r\n\r\n    private insertFormatted(text) {\r\n        if (this.isSimple)\r\n            insertValue(this._element, text);\r\n        else\r\n            tinymce.activeEditor.execCommand('insertHTML', false, pinkfishToHTML(text).replace(/(\\r\\n|\\r|\\n)/g, '<br/>'));\r\n    }\r\n\r\n    public setFormatted(text) {\r\n        if (this.isSimple)\r\n            this._element.value = text;\r\n        else {\r\n            tinymce.activeEditor.getBody().innerHTML = pinkfishToHTML(text).replace(/(\\r\\n|\\r|\\n)/g, '<br/>');\r\n            //tinymce.activeEditor.setContent(pinkfishToHTML(text).replace(/(\\r\\n|\\r|\\n)/g, '<br/>'), { format: 'html' });\r\n        }\r\n    }\r\n\r\n    private buildHTMLStack(els) {\r\n        var tag, $el, t, tl;\r\n        var stack = [];\r\n        var tags;\r\n        for (var e = 0, el = els.length; e < el; e++) {\r\n            $el = $(els[e]);\r\n            tag = $el.prop('tagName');\r\n            if (tag === 'EM' || tag === 'I')\r\n                tag = 'ITALIC';\r\n            else if (tag === 'STRONG' || tag === 'B')\r\n                tag = 'BOLD';\r\n            if (!tag)\r\n                stack.push('\"' + $el.text() + '\"');\r\n            else if (tag === 'SPAN') {\r\n                tags = [];\r\n                if (els[e].className != '') {\r\n                    tag = els[e].className.toUpperCase().split(/\\s+/g);\r\n                    tl = tag.length;\r\n                    for (t = 0; t < tl; t++) {\r\n                        if (tag[t] === 'NOFLASH')\r\n                            tags.push('FLASH');\r\n                        else if (tag[t].length > 0)\r\n                            tags.push(tag[t]);\r\n                    }\r\n                }\r\n                if ($el.css('text-decoration') === 'line-through')\r\n                    tags.push('STRIKEOUT');\r\n                if ($el.css('text-decoration') === 'underline')\r\n                    tags.push('UNDERLINE');\r\n                if ($el.data('mce-style')) {\r\n                    tag = $el.data('mce-style').toUpperCase().split(';');\r\n                    tl = tag.length;\r\n                    for (t = 0; t < tl; t++) {\r\n                        if (tag[t].endsWith('INHERIT') || tag[t].endsWith('BLACK'))\r\n                            continue;\r\n                        tag[t] = tag[t].trim();\r\n                        tag[t] = tag[t].replace('BACKGROUND:', 'BACKGROUND-COLOR:');\r\n                        if (tag[t].length > 0)\r\n                            tags.push(tag[t]);\r\n                    }\r\n                }\r\n                else if ($el.css('color') || $el.css('background-color') || $el.css('background')) {\r\n                    tag = [];\r\n                    if ($el.css('color'))\r\n                        tag.push('COLOR: ' + new RGBColor($el.css('color')).toHex().toUpperCase());\r\n                    if ($el.css('background-color'))\r\n                        tag.push('BACKGROUND-COLOR: ' + new RGBColor($el.css('background-color')).toHex().toUpperCase());\r\n                    if ($el.css('background'))\r\n                        tag.push('BACKGROUND-COLOR: ' + new RGBColor($el.css('background')).toHex().toUpperCase());\r\n                    tl = tag.length;\r\n                    for (t = 0; t < tl; t++) {\r\n                        if (tag[t].length > 0)\r\n                            tags.push(tag[t].trim());\r\n                    }\r\n                }\r\n                tl = tags.length;\r\n                for (t = 0; t < tl; t++) {\r\n                    if (!tags[t].length) continue;\r\n                    stack.push(tags[t].trim());\r\n                }\r\n                stack = stack.concat(this.buildHTMLStack($el.contents()));\r\n                for (t = tl - 1; t >= 0; t--) {\r\n                    if (!tags[t].length) continue;\r\n                    stack.push('/' + tags[t].trim());\r\n                }\r\n            }\r\n            else if (tag == 'BR' && $el.data('mce-bogus'))\r\n                stack.push('RESET');\r\n            else {\r\n                stack.push(tag);\r\n                stack = stack.concat(this.buildHTMLStack($el.contents()));\r\n                stack.push('/' + tag);\r\n            }\r\n        }\r\n        return stack;\r\n    }\r\n\r\n    public getFormattedSelection() {\r\n        //build all previous nodes to ensure all formatting is captures\r\n        var nodes = tinymce.activeEditor.dom.getParents(tinymce.activeEditor.selection.getNode());\r\n        var n = 0, nl = nodes.length;\r\n        var start = '<html>';\r\n        var end = '</html>';\r\n        for (; n < nl; n++) {\r\n            var tag = nodes[n].tagName;\r\n            if (tag === 'EM' || tag === 'I' || tag === 'STRONG' || tag === 'B') {\r\n                start += '<' + tag + '>';\r\n                end = '</' + tag + '>' + end;\r\n            }\r\n            else if (tag === 'SPAN') {\r\n                start += '<' + tag;\r\n                if (nodes[n].className != '')\r\n                    start += ' class=\"' + nodes[n].className + '\"';\r\n                var style = '';\r\n                if (nodes[n].style.textDecoration != '')\r\n                    style += 'text-decoration:' + nodes[n].style.textDecoration + ';';\r\n                if (nodes[n].style.color != '')\r\n                    style += 'color:' + nodes[n].style.color + ';';\r\n                if (nodes[n].style.background != '')\r\n                    style += 'background:' + nodes[n].style.background + ';';\r\n                if (nodes[n].style.backgroundColor != '')\r\n                    style += 'background-color:' + nodes[n].style.backgroundColor + ';';\r\n                if (style.length > 0)\r\n                    start += ' style=\"' + style + '\"';\r\n                if (nodes[n].dataset && nodes[n].dataset.mceStyle)\r\n                    start += ' data-mce-style=\"' + nodes[n].dataset.mceStyle + '\"';\r\n                start += ' >';\r\n                end = '</' + tag + '>' + end;\r\n            }\r\n            else if (tag === 'BODY') {\r\n                start += '<' + tag + '>';\r\n                end = '</' + tag + '>' + end;\r\n                break;\r\n            }\r\n        }\r\n        return this.formatHtml($(start + tinymce.activeEditor.selection.getContent({ format: 'raw' }).replace(/<\\/div><div>/g, '<br>') + end));\r\n    }\r\n\r\n    public getFormattedText() {\r\n        if (this.isSimple)\r\n            return this._element.value;\r\n        return this.formatHtml($('<html>' + this.getRaw() + '</html>'));\r\n        //return this.formatHtml($('<html>' + this.getRaw().replace(/<\\/div><div>/g, '<br>') + '</html>'));\r\n    }\r\n\r\n    public getText() {\r\n        if (this.isSimple)\r\n            return this._element.value;\r\n        return tinymce.activeEditor.getContent({ format: 'text' });\r\n    }\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    public getHTML() {\r\n        if (this.isSimple)\r\n            return this._element.value;\r\n        return tinymce.activeEditor.getContent({ format: 'html' });\r\n    }\r\n\r\n    public getRaw() {\r\n        if (this.isSimple)\r\n            return this._element.value;\r\n        return tinymce.activeEditor.getContent({ format: 'raw' });\r\n    }\r\n\r\n    private formatHtml(text) {\r\n        var data = this.buildHTMLStack(text);\r\n        var buffer = [];\r\n        var codes = [];\r\n        var color, d, dl, rgb;\r\n        if (DEBUG && client.getOption('enableDebug'))\r\n            client.debug('Advanced Editor Get Raw HTML: ' + this.getRaw());\r\n        for (d = data.length - 1; d >= 0; d--) {\r\n            if (!data[d].startsWith('\"') && data[d] != 'BR' && data[d] != 'RESET')\r\n                data.pop();\r\n            else\r\n                break;\r\n        }\r\n        if (data[0] === 'DIV')\r\n            data.shift();\r\n\r\n        for (d = 0, dl = data.length; d < dl; d++) {\r\n            switch (data[d]) {\r\n                case 'BOLD':\r\n                case 'ITALIC':\r\n                case 'UNDERLINE':\r\n                case 'STRIKEOUT':\r\n                case 'DBLUNDERLINE':\r\n                case 'OVERLINE':\r\n                case 'FLASH':\r\n                case 'REVERSE':\r\n                    codes.push('%^' + data[d] + '%^');\r\n                    buffer.push('%^' + data[d] + '%^');\r\n                    break;\r\n                case '/DBLUNDERLINE':\r\n                case '/OVERLINE':\r\n                case '/FLASH':\r\n                case '/REVERSE':\r\n                case '/UNDERLINE':\r\n                case '/BOLD':\r\n                case '/ITALIC':\r\n                case '/STRIKEOUT':\r\n                    codes.pop();\r\n                    this.cleanReset(buffer);\r\n                    buffer.push('%^RESET%^');\r\n                    if (codes.length > 0)\r\n                        buffer.push(codes.join(''));\r\n                    break;\r\n                case 'SPAN':\r\n                case '/SPAN':\r\n                case '/BR':\r\n                case '/DIV':\r\n                    break;\r\n                case 'DIV':\r\n                case 'BR':\r\n                    if (codes.length > 0 && buffer.length > 0 && !buffer[buffer.length - 1].endsWith('%^RESET%^')) {\r\n                        this.cleanReset(buffer);\r\n                        buffer.push('%^RESET%^');\r\n                    }\r\n                    buffer.push('\\n');\r\n                    if (codes.length > 0)\r\n                        buffer.push(codes.join(''));\r\n                    break;\r\n                case 'RESET':\r\n                    if (codes.length > 0 && buffer.length > 0 && !buffer[buffer.length - 1].endsWith('%^RESET%^')) {\r\n                        this.cleanReset(buffer);\r\n                        buffer.push('%^RESET%^');\r\n                    }\r\n                    if (codes.length > 0)\r\n                        buffer.push(codes.join(''));\r\n                    break;\r\n                default:\r\n                    if (data[d].startsWith('COLOR: #')) {\r\n                        color = data[d].substr(8);\r\n                        if (!this._colors[color]) {\r\n                            rgb = new RGBColor(color);\r\n                            color = this.nearestHex(rgb.toHex()).substr(1);\r\n                        }\r\n                        color = this._colors[color];\r\n                        if (color === 'BOLD BLACK' || color === 'BOLD%^%^BLACK')\r\n                            color = 'mono11';\r\n                        codes.push('%^' + color + '%^');\r\n                        buffer.push('%^' + color + '%^');\r\n                    }\r\n                    else if (data[d].startsWith('COLOR: ')) {\r\n                        color = new RGBColor(data[d].substr(7)).toHex().substr(1);\r\n                        if (!this._colors[color])\r\n                            color = this.nearestHex('#' + color).substr(1);\r\n                        color = this._colors[color];\r\n                        if (color === 'BOLD BLACK' || color === 'BOLD%^%^BLACK')\r\n                            color = 'mono11';\r\n                        codes.push('%^' + color + '%^');\r\n                        buffer.push('%^' + color + '%^');\r\n\r\n                    }\r\n                    else if (data[d].startsWith('/COLOR: ')) {\r\n                        codes.pop();\r\n                        this.cleanReset(buffer);\r\n                        buffer.push('%^RESET%^');\r\n                        if (codes.length > 0)\r\n                            buffer.push(codes.join(''));\r\n                    }\r\n                    else if (data[d].startsWith('BACKGROUND-COLOR: #')) {\r\n                        color = data[d].substr(19);\r\n                        if (!this._colors[color]) {\r\n                            rgb = new RGBColor(color);\r\n                            color = this.nearestHex(rgb.toHex()).substr(1);\r\n                        }\r\n                        if (this._colors['B' + color])\r\n                            color = this._colors['B' + color];\r\n                        else\r\n                            color = this._colors[color];\r\n                        color = '%^B_' + color + '%^';\r\n                        codes.push(color);\r\n                        buffer.push(color);\r\n                    }\r\n                    else if (data[d].startsWith('BACKGROUND-COLOR: ')) {\r\n                        color = new RGBColor(data[d].substr(18)).toHex().substr(1);\r\n                        if (!this._colors[color])\r\n                            color = this.nearestHex('#' + color).substr(1);\r\n                        if (this._colors['B' + color])\r\n                            color = this._colors['B' + color];\r\n                        else\r\n                            color = this._colors[color];\r\n                        color = '%^B_' + color + '%^';\r\n                        codes.push(color);\r\n                        buffer.push(color);\r\n                    }\r\n                    else if (data[d].startsWith('/BACKGROUND-COLOR: ')) {\r\n                        codes.pop();\r\n                        this.cleanReset(buffer);\r\n                        buffer.push('%^RESET%^');\r\n                        if (codes.length > 0)\r\n                            buffer.push(codes.join(''));\r\n                    }\r\n                    else if (data[d].startsWith('\"'))\r\n                        buffer.push(data[d].substring(1, data[d].length - 1));\r\n                    break;\r\n            }\r\n        }\r\n        return buffer.join('');\r\n    }\r\n\r\n    private cleanReset(buffer) {\r\n        let b = buffer.length - 1;\r\n        for (; b >= 0; b--) {\r\n            if (buffer[b].startsWith('%^'))\r\n                buffer.pop();\r\n            else\r\n                return buffer;\r\n        }\r\n        return buffer;\r\n    }\r\n\r\n    //{ color: 'red', hex: '#EA4235', rgb: { r: 234, g: 66, b: 53 } },\r\n    private colorList = [];\r\n\r\n    private nearestHex(hex) {\r\n        var _editor = this;\r\n        //https://codereview.stackexchange.com/questions/132225/given-hexadecimal-rgb-color-find-the-closest-predefined-color\r\n        var hexToRgb = function (hex) {\r\n            var shortRegEx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n            //hex = hex.replace(shortRegEx, \"$1$1$2$2$3$3\");\r\n            hex = hex.replace(shortRegEx, function (full, r, g, b) {\r\n                return [r, r, g, g, b, b].join();\r\n            });\r\n            var longRegEx = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?/i;\r\n            var rgbArray = longRegEx.exec(hex);\r\n            var rgbObj = rgbArray ? {\r\n                r: parseInt(rgbArray[1], 16),\r\n                g: parseInt(rgbArray[2], 16),\r\n                b: parseInt(rgbArray[3], 16)\r\n            } : null;\r\n            return rgbObj;\r\n        };\r\n\r\n        var closestHexFromRgb = function (rgbObj) {\r\n            if (!rgbObj) {\r\n                throw new Error('The hex you provided is not formatted correctly. Please try in a format such as \\'#FFF\\' or \\'#DDFFDD\\'.');\r\n            }\r\n\r\n            var minDistance = Number.MAX_SAFE_INTEGER;\r\n            var nearestHex = null;\r\n\r\n            for (var i = 0; i < _editor.colorList.length; i++) {\r\n                var currentColor = _editor.colorList[i];\r\n                var distance = Math.sqrt(\r\n                    Math.pow((rgbObj.r - currentColor.rgb.r), 2) +\r\n                    Math.pow((rgbObj.g - currentColor.rgb.g), 2) +\r\n                    Math.pow((rgbObj.b - currentColor.rgb.b), 2)\r\n                );\r\n                if (distance < minDistance) {\r\n                    minDistance = distance;\r\n                    nearestHex = currentColor.hex;\r\n                }\r\n            }\r\n            return nearestHex;\r\n        };\r\n\r\n        return closestHexFromRgb(hexToRgb(hex));\r\n\r\n    }\r\n\r\n    public remove() {\r\n        tinymce.remove(`#${this._element.id}`);\r\n    }\r\n\r\n    public initialize() {\r\n        if (this.isSimple) return;\r\n        this.initPlugins();\r\n        tinymce.init({\r\n            license_key: 'gpl',\r\n            custom_colors: false,\r\n            selector: `textarea#${this._element.id}`,\r\n            height: 500,\r\n            menubar: false,\r\n            browser_spellcheck: true,\r\n            //contextmenu: false,\r\n            resize: true,\r\n            statusbar: false,\r\n            nowrap: true,\r\n            force_br_newlines: true,\r\n            forced_root_block: 'div',\r\n            plugins: 'pinkfish insertdatetime pinkfishtextcolor nonbreaking',\r\n            color_picker_callback: (editor, color, format) => { this.openColorDialog(format, color || ''); },\r\n            color_picker_caption: 'More&hellip;',\r\n            textcolor_rows: '3',\r\n            textcolor_cols: '8',\r\n            toolbar: 'send | append | undo redo | pinkfishforecolor pinkfishbackcolor | italic underline strikethrough overline dblunderline flash reverse | clear | copy copyformatted | insertdatetime',\r\n            toolbar_mode: 'sliding',\r\n            content_css: 'css/tinymce.content.min.css',\r\n            formats: {\r\n                bold: { inline: 'strong', exact: true, links: true, remove_similar: true },\r\n                italic: { inline: 'em', exact: true, links: true, remove_similar: true },\r\n                overline: { inline: 'span', 'classes': 'overline', links: true, remove_similar: true },\r\n                dblunderline: { inline: 'span', 'classes': 'dblunderline', links: true, remove_similar: true },\r\n                flash: { inline: 'span', 'classes': 'flash', links: true, remove_similar: true },\r\n                reverse: { inline: 'span', 'classes': 'reverse', links: true, remove_similar: true },\r\n                underline: { inline: 'span', 'classes': 'underline', links: true, remove_similar: true },\r\n                strikethrough: { inline: 'span', 'classes': 'strikeout', links: true, remove_similar: true },\r\n                //forecolor: { inline: 'span', styles: { textDecoration: 'inherit', border: 'inherit', color: '%value' }, exact: true, links: true, remove_similar: true },\r\n                //hilitecolor: { inline: 'span', styles: { textDecoration: 'inherit', border: 'inherit', backgroundColor: '%value' }, exact: true, links: true, remove_similar: true }\r\n                //forecolor: { block: 'span', attributes: { 'data-color': '%value' }, styles: { textDecoration: 'inherit', border: 'inherit', color: '%value' }, exact: true, links: true, remove_similar: true },\r\n                //hilitecolor: { block: 'span', attributes: { 'data-backcolor': '%value' }, styles: { textDecoration: 'inherit', border: 'inherit', backgroundColor: '%value' }, exact: true, links: true, remove_similar: true }\r\n            },\r\n            init_instance_callback: (editor) => {\r\n                editor.shortcuts.add('ctrl+shift+c', 'Copy formatted', () => copyText(this.getFormattedSelection().replace(/(?:\\r)/g, '')));\r\n                /*\r\n                editor.shortcuts.add('ctrl+shift+p', 'Paste formatted', () => {\r\n                    //insertFormatted(clipboard.readText('selection') || '');\r\n                });\r\n                editor.shortcuts.add('ctrl+alt+p', 'Paste as text', () => {\r\n                    //tinymce.activeEditor.execCommand('mceInsertContent', false, (clipboard.readText('selection') || '').replace(/(\\r\\n|\\r|\\n)/g, '<br/>').replaceAll('  ', '&nbsp;&nbsp;'));\r\n                });\r\n                */\r\n                editor.on('PastePreProcess', e => {\r\n                    if (client.getOption('enableDebug'))\r\n                        client.debug('Advanced Before Editor PastePreProcess: ' + e.content);\r\n                    this.clearReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                    e.content = e.content.replace(/<\\/p>/g, '<br>');\r\n                    e.content = e.content.replace(/<\\/h[1-6]>/g, '<br>');\r\n                    e.content = e.content.replace(/<\\/li>/g, '<br>');\r\n                    e.content = e.content.replace(/ background: #000000;/g, '');\r\n                    e.content = e.content.replace(/background: #000000;/g, '');\r\n                    e.content = e.content.replace(/ background-color: #000000;/g, '');\r\n                    e.content = e.content.replace(/background-color: #000000;/g, '');\r\n                    e.content = e.content.replace(/ color: #BBBBBB;/g, '');\r\n                    e.content = e.content.replace(/color: #BBBBBB;/g, '');\r\n                    var regex = /<pre(.*?)>((.|\\s)*)<\\/pre>/mgi;\r\n                    var m;\r\n                    while ((m = regex.exec(e.content)) !== null) {\r\n                        if (m.index === regex.lastIndex) {\r\n                            regex.lastIndex++;\r\n                        }\r\n                        e.content = e.content.substring(0, m.index) + e.content.substring(m.index, regex.lastIndex).replace(/(\\r\\n|\\r|\\n)/g, '<br/>').replaceAll('  ', '&nbsp;&nbsp;') + e.content.substring(regex.lastIndex);\r\n                    }\r\n                    if (client.getOption('enableDebug'))\r\n                        client.debug('Advanced After Editor PastePreProcess: ' + e.content);\r\n                });\r\n                editor.on('PastePreProcess', () => {\r\n                    this.addReverse($('.reverse', $(editor.getDoc()).contents()));\r\n                });\r\n                $('.mce-content-body', tinymce.activeEditor.getDoc()).css('font-size', client.getOption('cmdfontSize'));\r\n                $('.mce-content-body', tinymce.activeEditor.getDoc()).css('font-family', client.getOption('cmdfont') + ', monospace');\r\n                if (tinymce.activeEditor.formatter)\r\n                    tinymce.activeEditor.formatter.register('flash', { inline: 'span', 'classes': client.getOption('flashing') ? 'flash' : 'noflash', links: true, remove_similar: true });\r\n                else\r\n                    tinymce.activeEditor.settings.formats['flash'] = { inline: 'span', 'classes': client.getOption('flashing') ? 'flash' : 'noflash', links: true, remove_similar: true };\r\n                this.loadColors();\r\n                this.setFormatted(this._element.value);\r\n                editor.on('click', e => {\r\n                    this.emit('click', e);\r\n                })\r\n                this.emit('editor-init');\r\n                this._init = true;\r\n            },\r\n            paste_data_images: false,\r\n            paste_webkit_styles: 'color background background-color text-decoration',\r\n            valid_elements: 'strong/b,em/i,u,span[style|class],strike/s,br',\r\n            valid_styles: {\r\n                '*': 'color,background,background-color,text-decoration,font-weight'\r\n            },\r\n            color_map: this._ColorTable,\r\n        });\r\n    }\r\n\r\n    public focus() {\r\n        if (this.isSimple)\r\n            this._element.focus();\r\n        else if (this._init && TINYMCE && tinymce.activeEditor && tinymce.activeEditor.initialized)\r\n            tinymce.activeEditor.focus();\r\n    }\r\n}", "//spell-checker:words vscroll, hscroll, askoncancel, askonclose,commandon, cmdfont\n//spell-checker:ignore emoteto, emotetos askonchildren YYYYMMDD Hmmss\nimport { NewLineType, Log, BackupSelection, OnDisconnect, ProfileSortOrder, OnProfileChange, OnProfileDeleted, ScriptEngineType, SettingType, Echo, TabCompletion } from './types';\n\n/**\n * Array that contains details about setting values\n * [settingKey, object property, setting data type, default value, max length\n *\n * settingKey - unique key value, object property value if object property undefined, 0 or null\n * object property - the value used to access setting if settingKey is not property, can use . to denote nested properties\n * setting data type - the data type of setting\n *      0 string\n *      1 boolean\n *      2 number\n *      3 raw setting\n *      4 custom\n *      5 combo-box\n * default value - the default value of setting\n * max length - optional max length\n */\nexport let SettingList: any[] = [\n    ['bufferSize', 0, 2, 500],\n    ['commandDelay', 0, 2, 500],\n    ['commandDelayCount', 0, 2, 5],\n    ['commandHistorySize', 0, 2, 20],\n    ['fontSize', 0, 0, '1em', 0],\n    ['cmdfontSize', 0, 0, '1em', 0],\n    ['commandEcho', 0, 1, true],\n    ['flashing', 0, 1, false],\n    ['autoConnect', 0, 1, true],\n    ['enableAliases', -1, 1, true],\n    ['enableTriggers', -1, 1, true],\n    ['enableMacros', -1, 1, true],\n    ['showScriptErrors', 0, 1, false],\n    ['commandStacking', 0, 1, true],\n    ['commandStackingChar', 0, 0, ';', 1],\n    ['htmlLog', 0, 1, true],\n    ['keepLastCommand', 0, 1, true],\n    ['enableMCCP', 0, 1, true],\n    ['enableUTF8', 0, 1, true],\n    ['font', 0, 5, '\\'Courier New\\', Courier, monospace', 0],\n    ['cmdfont', 0, 5, '\\'Courier New\\', Courier, monospace', 0],\n    ['aliases', -1, 4],\n    ['macros', -1, 4],\n    ['triggers', -1, 4],\n    ['mapFollow', 'mapper.follow', 1, true],\n    ['mapEnabled', 'mapper.enabled', 1, true],\n    ['MapperSplitArea', 'mapper.split', 1, false],\n    ['MapperFillWalls', 'mapper.fill', 1, false],\n    ['MapperOpen', 'showMapper', 1, false],\n    ['fullScreen', -1, 3, false],\n    ['enableMXP', 0, 1, true],\n    ['enableMSP', 0, 1, true],\n    ['parseCommands', 0, 3, true],\n    ['lagMeter', 0, 1, false],\n    ['enablePing', 0, 1, false],\n    ['enableEcho', 0, 1, true],\n    ['enableSpeedpaths', 0, 1, true],\n    ['speedpathsChar', 0, 0, '!', 1],\n    ['parseSpeedpaths', 0, 1, true],\n    ['profile', -1, 0, 'Default', 1],\n    ['parseSingleQuotes', 0, 1, false],\n    ['parseDoubleQuotes', 0, 1, true],\n    ['logEnabled', 0, 1, false],\n    ['logPrepend', 0, 1, false],\n    ['logOffline', 0, 1, false],\n    ['logUniqueOnConnect', 0, 1, true],\n    ['enableURLDetection', 0, 1, true],\n    ['colors', 0, 4],\n    ['notifyMSPPlay', 0, 1, false],\n    ['CommandonClick', 0, 1, true],\n    ['allowEval', 0, 1, true],\n    ['allowEscape', 0, 1, true],\n    ['AutoCopySelectedToClipboard', 0, 1, false],\n    ['enableDebug', 0, 1, false],\n    ['editorPersistent', 0, 1, false],\n    ['askonclose', 0, 1, true],\n    ['dev', 0, 1, false],\n    //New settings\n    ['chat.captureLines', 0, 1, false],\n    ['chat.captureAllLines', 0, 1, false],\n    ['chat.captureReviews', 0, 1, false],\n    ['chat.captureTells', 0, 1, false],\n    ['chat.captureTalk', 0, 1, false],\n    ['chat.gag', 0, 1, false],\n    ['chat.CaptureOnlyOpen', 0, 1, false],\n    ['checkForUpdates', 0, 1, false],\n    ['autoCreateCharacter', 0, 1, false],\n    ['askonchildren', 0, 1, true],\n    ['mapper.legend', 0, 1, false],\n    ['mapper.room', 0, 1, false],\n    ['mapper.importType', 0, 2, 1],\n    ['mapper.vscroll', 0, 2, 0],\n    ['mapper.hscroll', 0, 2, 0],\n    ['mapper.scale', 0, 2, 1.0],\n    ['mapper.alwaysOnTop', 0, 1, false],\n    ['mapper.alwaysOnTopClient', 0, 1, true],\n    ['mapper.memory', 0, 1, false],\n    ['mapper.memorySavePeriod', 0, 2, 900000],\n    ['mapper.active.ID', 0, 0, null],\n    ['mapper.active.x', 0, 2, 0],\n    ['mapper.active.y', 0, 2, 0],\n    ['mapper.active.z', 0, 2, 0],\n    ['mapper.active.area', 0, 0, null],\n    ['mapper.active.zone', 0, 2, 0],\n    ['mapper.persistent', 0, 1, true],\n    ['profiles.split', 0, 2, 200],\n    ['profiles.askoncancel', 0, 1, true],\n    ['profiles.triggersAdvanced', 0, 1, false],\n    ['profiles.aliasesAdvanced', 0, 1, false],\n    ['profiles.buttonsAdvanced', 0, 1, false],\n    ['profiles.macrosAdvanced', 0, 1, false],\n    ['profiles.contextsAdvanced', 0, 1, false],\n    ['profiles.codeEditor', 0, 1, true],\n    ['profiles.watchFiles', 0, 1, true],\n    ['chat.alwaysOnTop', 0, 1, false],\n    ['chat.alwaysOnTopClient', 0, 1, true],\n    ['chat.log', 0, 1, false],\n    ['chat.persistent', 0, 1, false],\n    ['chat.zoom', 0, 2, 1],\n    ['chat.font', 0, 5, '\\'Courier New\\', Courier, monospace'],\n    ['chat.fontSize', 0, 0, '1em'],\n    ['title', 0, 0, '$t'],\n    ['logGagged', 0, 1, false],\n    ['logTimeFormat', 0, 0, 'YYYYMMDD-HHmmss'],\n    ['autoConnectDelay', 0, 2, 600],\n    ['autoLogin', 0, 1, true],\n    ['onDisconnect', 0, 2, OnDisconnect.ReconnectDialog],\n    ['enableKeepAlive', 0, 1, false],\n    ['keepAliveDelay', 0, 2, 0],\n    ['newlineShortcut', 0, 2, NewLineType.Ctrl],\n    ['logWhat', 0, 2, Log.Html],\n    ['logErrors', 0, 1, true],\n    ['showErrorsExtended', 0, 1, false],\n    ['reportCrashes', 0, 1, false],\n    ['enableCommands', 0, 1, true],\n    ['commandChar', 0, 0, '#', 1],\n    ['escapeChar', 0, 0, '\\\\', 1],\n    ['enableVerbatim', 0, 1, true],\n    ['verbatimChar', 0, 0, '`'],\n    ['soundPath', 0, 0, ''],\n    ['logPath', 0, 0, ''],\n    ['theme', 0, 0, ''],\n    ['gamepads', 0, 1, false],\n    ['buttons.connect', 0, 1, true],\n    ['buttons.characters', 0, 1, true],\n    ['buttons.preferences', 0, 1, true],\n    ['buttons.log', 0, 1, true],\n    ['buttons.clear', 0, 1, true],\n    ['buttons.lock', 0, 1, true],\n    ['buttons.map', 0, 1, true],\n    ['buttons.user', 0, 1, true],\n    ['buttons.mail', 0, 1, false],\n    ['buttons.compose', 0, 1, false],\n    ['buttons.immortal', 0, 1, true],\n    ['buttons.codeEditor', 0, 1, false],\n    ['find.case', 0, 1, false],\n    ['find.word', 0, 1, false],\n    ['find.reverse', 0, 1, false],\n    ['find.regex', 0, 1, false],\n    ['find.selection', 0, 1, false],\n    ['find.show', 0, 1, false],\n    ['display.split', 0, 1, false],\n    ['display.splitHeight', 0, 2, -1],\n    ['display.splitLive', 0, 1, true],\n    ['display.roundedOverlays', 0, 1, true],\n    ['backupLoad', 0, 2, BackupSelection.All],\n    ['backupSave', 0, 2, BackupSelection.All],\n    ['backupAllProfiles', 0, 1, true],\n    ['scrollLocked', 0, 1, false],\n    ['showStatus', 0, 1, true],\n    ['showCharacterManager', 0, 1, false],\n    ['showChat', 0, 1, false],\n    ['showEditor', 0, 1, false],\n    ['showArmor', 0, 1, false],\n    ['showStatusWeather', 0, 1, true],\n    ['showStatusLimbs', 0, 1, true],\n    ['showStatusHealth', 0, 1, true],\n    ['showStatusExperience', 0, 1, true],\n    ['showStatusPartyHealth', 0, 1, true],\n    ['showStatusCombatHealth', 0, 1, true],\n    ['showButtonBar', 0, 1, true],\n    ['allowNegativeNumberNeeded', 0, 1, false],\n    ['spellchecking', 0, 1, true],\n    ['hideOnMinimize', 0, 1, false],\n    ['showTrayIcon', 0, 1, false],\n    ['statusExperienceNeededProgressbar', 0, 1, false],\n    ['trayClick', 0, 2, 0],\n    ['trayDblClick', 0, 2, 0],\n    ['pasteSpecialPrefix', 0, 0, ''],\n    ['pasteSpecialPostfix', 0, 0, ''],\n    ['pasteSpecialReplace', 0, 0, ''],\n    ['pasteSpecialPrefixEnabled', 0, 1, true],\n    ['pasteSpecialPostfixEnabled', 0, 1, true],\n    ['pasteSpecialReplaceEnabled', 0, 1, true],\n    ['display.showSplitButton', 0, 1, true],\n    ['chat.split', 0, 1, false],\n    ['chat.splitHeight', 0, 2, -1],\n    ['chat.splitLive', 0, 1, true],\n    ['chat.roundedOverlays', 0, 1, true],\n    ['chat.showSplitButton', 0, 1, true],\n    ['chat.bufferSize', 0, 2, 500],\n    ['chat.flashing', 0, 1, false],\n    ['display.hideTrailingEmptyLine', 0, 1, true],\n    ['display.enableColors', 0, 1, true],\n    ['display.enableBackgroundColors', 0, 1, true],\n    ['enableSound', 0, 1, true],\n    ['allowHalfOpen', 0, 1, true],\n    ['editorClearOnSend', 0, 1, true],\n    ['editorCloseOnSend', 0, 1, true],\n    ['askOnCloseAll', 0, 1, true],\n    ['askonloadCharacter', 0, 1, true],\n    ['mapper.roomWidth', 0, 2, 200],\n    ['mapper.roomGroups', 0, 2, 1 | 2 | 4],\n    ['mapper.showInTaskBar', 0, 1, false],\n    ['profiles.enabled', 0, 4, []],\n    ['profiles.sortOrder', 0, 2, ProfileSortOrder.Priority | ProfileSortOrder.Index],\n    ['profiles.sortDirection', 0, 2, 1],\n    ['profiles.showInTaskBar', 0, 1, false],\n    ['profiles.profileSelected', 0, 0, 'default'],\n    ['profiles.profileExpandSelected', 0, 1, true],\n    ['chat.lines', 0, 4, []],\n    ['chat.showInTaskBar', 0, 1, false],\n    ['chat.showTimestamp', 0, 1, false],\n    ['chat.timestampFormat', 0, 0, '[[]MM-DD HH:mm:ss.SSS[]] '],\n    ['chat.tabWidth', 0, 2, 8],\n    ['chat.displayControlCodes', 0, 1, false],\n    ['chat.emulateTerminal', 0, 1, false],\n    ['chat.emulateControlCodes', 0, 1, true],\n    ['chat.wordWrap', 0, 1, false],\n    ['chat.wrapAt', 0, 2, 0],\n    ['chat.indent', 0, 2, 4],\n    ['chat.scrollLocked', 0, 1, false],\n    ['chat.find.case', 0, 1, false],\n    ['chat.find.word', 0, 1, false],\n    ['chat.find.reverse', 0, 1, false],\n    ['chat.find.regex', 0, 1, false],\n    ['chat.find.selection', 0, 1, false],\n    ['chat.find.show', 0, 1, false],\n    ['chat.find.highlight', 0, 1, false],\n    ['chat.find.location', 0, 4, [5, 20]],\n    ['codeEditor.showInTaskBar', 0, 1, false],\n    ['codeEditor.persistent', 0, 1, false],\n    ['codeEditor.alwaysOnTop', 0, 1, false],\n    ['codeEditor.alwaysOnTopClient', 0, 1, true],\n    ['autoTakeoverLogin', 0, 1, false],\n    ['fixHiddenWindows', 0, 1, true],\n    ['maxReconnectDelay', 0, 2, 3600],\n    ['enableBackgroundThrottling', 0, 1, true],\n    ['enableBackgroundThrottlingClients', 0, 1, false],\n    ['showInTaskBar', 0, 1, true],\n    ['showLagInTitle', 0, 1, false],\n    ['mspMaxRetriesOnError', 0, 2, 0],\n    ['logTimestamp', 0, 1, false],\n    ['logTimestampFormat', 0, 0, '[[]MM-DD HH:mm:ss.SSS[]] '],\n    ['disableTriggerOnError', 0, 1, true],\n    ['prependTriggeredLine', 0, 1, true],\n    ['enableParameters', 0, 1, true],\n    ['parametersChar', 0, 0, '%', 1],\n    ['enableNParameters', 0, 1, true],\n    ['nParametersChar', 0, 0, '$', 1],\n    ['enableParsing', 0, 1, true],\n    ['externalWho', 0, 1, true],\n    ['externalHelp', 0, 1, true],\n    ['watchForProfilesChanges', 0, 1, false],\n    ['onProfileChange', 0, 2, OnProfileChange.Nothing],\n    ['onProfileDeleted', 0, 2, OnProfileDeleted.Nothing],\n    ['enableDoubleParameterEscaping', 0, 1, false],\n    ['ignoreEvalUndefined', 0, 1, true],\n    ['enableInlineComments', 0, 1, true],\n    ['enableBlockComments', 0, 1, true],\n    ['inlineCommentString', 0, 0, '//'],\n    ['blockCommentString', 0, 0, '/*'],\n    ['allowCommentsFromCommand', 0, 1, false],\n    ['saveTriggerStateChanges', 0, 1, true],\n    ['groupProfileSaves', 0, 1, false],\n    ['groupProfileSaveDelay', 0, 2, 20000],\n    ['returnNewlineOnEmptyValue', 0, 1, false],\n    ['pathDelay', 0, 2, 0],\n    ['pathDelayCount', 0, 2, 1],\n    ['echoSpeedpaths', 0, 1, false],\n    ['alwaysShowTabs', 0, 1, false],\n    ['scriptEngineType', 0, SettingType.Number, ScriptEngineType.Simple],\n    ['initializeScriptEngineOnLoad', 0, SettingType.Boolean, false],\n    ['find.highlight', 0, SettingType.Boolean, false],\n    ['find.location', 0, SettingType.Custom, [5, 20]],\n    ['display.showInvalidMXPTags', 0, SettingType.Boolean, false],\n    ['display.showTimestamp', 0, SettingType.Boolean, false],\n    ['display.timestampFormat', 0, SettingType.String, '[[]MM-DD HH:mm:ss.SSS[]] '],\n    ['display.displayControlCodes', 0, SettingType.Boolean, false],\n    ['display.emulateTerminal', 0, SettingType.Boolean, false],\n    ['display.emulateControlCodes', 0, SettingType.Boolean, true],\n    ['display.wordWrap', 0, SettingType.Boolean, false],\n    ['display.tabWidth', 0, SettingType.Number, 8],\n    ['display.wrapAt', 0, SettingType.Number, 0],\n    ['display.indent', 0, SettingType.Number, 4],\n    ['statusWidth', 0, SettingType.Number, -1],\n    ['showEditorInTaskBar', 0, SettingType.Boolean, true],\n    ['trayMenu', 0, SettingType.Number, 0],\n    ['lockLayout', 0, SettingType.Boolean, false],\n    ['loadLayout', 0, SettingType.String, ''],\n    ['useSingleInstance', 0, SettingType.Boolean, true],\n    ['onSecondInstance', 0, SettingType.Number, 0],\n    ['characterManagerDblClick', 0, SettingType.Number, 0],\n    ['enableTabCompletion', SettingType.Boolean, true],\n    ['ignoreCaseTabCompletion', 0, SettingType.Boolean, false],\n    ['tabCompletionBufferLimit', 0, SettingType.Number, 100],\n    ['enableNotifications', 0, SettingType.Boolean, true],\n    ['echo', 0, SettingType.Number, Echo.None],\n    ['commandAutoSize', 0, SettingType.Boolean, false],\n    ['commandWordWrap', 0, SettingType.Boolean, false],\n    ['commandScrollbars', 0, SettingType.Boolean, false],\n    ['tabCompletionList', 0, SettingType.String, ''],\n    ['tabCompletionLookupType', 0, SettingType.Number, TabCompletion.PrependBuffer],\n    ['tabCompletionReplaceCasing', 0, SettingType.Number, 0],\n    ['characterManagerAddButtonAction', 0, SettingType.Number, 0],\n    ['enableCrashReporting', 0, SettingType.Boolean, false],\n    ['characterManagerPanelWidth', 0, SettingType.Number, 0],\n    ['ignoreInputLeadingWhitespace', 0, SettingType.Boolean, false],\n    ['profiles.find.case', 0, 1, false],\n    ['profiles.find.word', 0, 1, false],\n    ['profiles.find.reverse', 0, 1, false],\n    ['profiles.find.regex', 0, 1, false],\n    ['profiles.find.selection', 0, 1, false],\n    ['profiles.find.show', 0, 1, false],\n    ['profiles.find.value', 0, 1, false],\n    ['skipMore', 0, 1, false],\n    ['skipMoreDelay', 0, SettingType.Number, 5000],\n    ['commandMinLines', 0, SettingType.Number, 1],\n    ['backupReplaceCharacters', 0, SettingType.Boolean, true],\n    ['simpleAlarms', 0, SettingType.Boolean, false],\n    ['simpleEditor', 0, SettingType.Boolean, false],\n    ['selectLastCommand', 0, SettingType.Boolean, true]\n];\n\nexport const SettingProperties = ['bufferSize', 'commandDelay', 'commandDelayCount', 'commandHistorySize', 'fontSize', 'cmdfontSize', 'commandEcho', 'flashing', 'autoConnect', 'enableAliases', 'enableTriggers', 'enableMacros', 'showScriptErrors', 'commandStacking', 'commandStackingChar', 'htmlLog', 'keepLastCommand', 'enableMCCP', 'enableUTF8', 'font', 'cmdfont', 'mapper.follow', 'mapper.enabled', 'mapper.split', 'mapper.fill', 'showMapper', 'fullScreen', 'enableMXP', 'enableMSP', 'parseCommands', 'lagMeter', 'enablePing', 'enableEcho', 'enableSpeedpaths', 'speedpathsChar', 'parseSpeedpaths', 'profile', 'parseSingleQuotes', 'parseDoubleQuotes', 'logEnabled', 'logPrepend', 'logOffline', 'logUniqueOnConnect', 'enableURLDetection', 'notifyMSPPlay', 'CommandonClick', 'allowEval', 'allowEscape', 'AutoCopySelectedToClipboard', 'enableDebug', 'editorPersistent', 'askonclose', 'dev', 'chat.captureLines', 'chat.captureAllLines', 'chat.captureReviews', 'chat.captureTells', 'chat.captureTalk', 'chat.gag', 'chat.CaptureOnlyOpen', 'checkForUpdates', 'autoCreateCharacter', 'askonchildren', 'mapper.legend', 'mapper.room', 'mapper.importType', 'mapper.vscroll', 'mapper.hscroll', 'mapper.scale', 'mapper.alwaysOnTop', 'mapper.alwaysOnTopClient', 'mapper.memory', 'mapper.memorySavePeriod', 'mapper.active.ID', 'mapper.active.x', 'mapper.active.y', 'mapper.active.z', 'mapper.active.area', 'mapper.active.zone', 'mapper.persistent', 'profiles.split', 'profiles.askoncancel', 'profiles.triggersAdvanced', 'profiles.aliasesAdvanced', 'profiles.buttonsAdvanced', 'profiles.macrosAdvanced', 'profiles.contextsAdvanced', 'profiles.codeEditor', 'profiles.watchFiles', 'chat.alwaysOnTop', 'chat.alwaysOnTopClient', 'chat.log', 'chat.persistent', 'chat.zoom', 'chat.font', 'chat.fontSize', 'title', 'logGagged', 'logTimeFormat', 'autoConnectDelay', 'autoLogin', 'onDisconnect', 'enableKeepAlive', 'keepAliveDelay', 'newlineShortcut', 'logWhat', 'logErrors', 'showErrorsExtended', 'reportCrashes', 'enableCommands', 'commandChar', 'escapeChar', 'enableVerbatim', 'verbatimChar', 'soundPath', 'logPath', 'theme', 'gamepads', 'buttons.connect', 'buttons.characters', 'buttons.preferences', 'buttons.log', 'buttons.clear', 'buttons.lock', 'buttons.map', 'buttons.user', 'buttons.mail', 'buttons.compose', 'buttons.immortal', 'buttons.codeEditor', 'find.case', 'find.word', 'find.reverse', 'find.regex', 'find.selection', 'find.show', 'display.split', 'display.splitHeight', 'display.splitLive', 'display.roundedOverlays', 'backupLoad', 'backupSave', 'backupAllProfiles', 'backupReplaceCharacters', 'scrollLocked', 'showStatus', 'showCharacterManager', 'showChat', 'showEditor', 'showArmor', 'showStatusWeather', 'showStatusLimbs', 'showStatusHealth', 'showStatusExperience', 'showStatusPartyHealth', 'showStatusCombatHealth', 'showButtonBar', 'allowNegativeNumberNeeded', 'spellchecking', 'hideOnMinimize', 'showTrayIcon', 'statusExperienceNeededProgressbar', 'trayClick', 'trayDblClick', 'pasteSpecialPrefix', 'pasteSpecialPostfix', 'pasteSpecialReplace', 'pasteSpecialPrefixEnabled', 'pasteSpecialPostfixEnabled', 'pasteSpecialReplaceEnabled', 'display.showSplitButton', 'chat.split', 'chat.splitHeight', 'chat.splitLive', 'chat.roundedOverlays', 'chat.showSplitButton', 'chat.bufferSize', 'chat.flashing', 'display.hideTrailingEmptyLine', 'display.enableColors', 'display.enableBackgroundColors', 'enableSound', 'allowHalfOpen', 'editorClearOnSend', 'editorCloseOnSend', 'askOnCloseAll', 'askonloadCharacter', 'mapper.roomWidth', 'mapper.roomGroups', 'mapper.showInTaskBar', 'profiles.enabled', 'profiles.sortOrder', 'profiles.sortDirection', 'profiles.showInTaskBar', 'profiles.profileSelected', 'profiles.profileExpandSelected', 'chat.lines', 'chat.showInTaskBar', 'chat.showTimestamp', 'chat.timestampFormat', 'chat.tabWidth', 'chat.displayControlCodes', 'chat.emulateTerminal', 'chat.emulateControlCodes', 'chat.wordWrap', 'chat.wrapAt', 'chat.indent', 'chat.scrollLocked', 'chat.find.case', 'chat.find.word', 'chat.find.reverse', 'chat.find.regex', 'chat.find.selection', 'chat.find.show', 'chat.find.highlight', 'chat.find.location', 'codeEditor.showInTaskBar', 'codeEditor.persistent', 'codeEditor.alwaysOnTop', 'codeEditor.alwaysOnTopClient', 'autoTakeoverLogin', 'fixHiddenWindows', 'maxReconnectDelay', 'enableBackgroundThrottling', 'enableBackgroundThrottlingClients', 'showInTaskBar', 'showLagInTitle', 'mspMaxRetriesOnError', 'logTimestamp', 'logTimestampFormat', 'disableTriggerOnError', 'prependTriggeredLine', 'enableParameters', 'parametersChar', 'enableNParameters', 'nParametersChar', 'enableParsing', 'externalWho', 'externalHelp', 'watchForProfilesChanges', 'onProfileChange', 'onProfileDeleted', 'enableDoubleParameterEscaping', 'ignoreEvalUndefined', 'enableInlineComments', 'enableBlockComments', 'inlineCommentString', 'blockCommentString', 'allowCommentsFromCommand', 'saveTriggerStateChanges', 'groupProfileSaves', 'groupProfileSaveDelay', 'returnNewlineOnEmptyValue', 'pathDelay', 'pathDelayCount', 'echoSpeedpaths', 'alwaysShowTabs', 'scriptEngineType', 'initializeScriptEngineOnLoad', 'find.highlight', 'find.location', 'display.showInvalidMXPTags', 'display.showTimestamp', 'display.timestampFormat', 'display.displayControlCodes', 'display.emulateTerminal', 'display.emulateControlCodes', 'display.wordWrap', 'display.tabWidth', 'display.wrapAt', 'display.indent', 'statusWidth', 'showEditorInTaskBar', 'trayMenu', 'lockLayout', 'loadLayout', 'useSingleInstance', 'statusWidth', 'characterManagerDblClick', 'warnAdvancedSettings', 'showAdvancedSettings', 'enableTabCompletion', 'tabCompletionBufferLimit', 'ignoreCaseTabCompletion', 'enableNotifications', 'commandAutoSize', 'commandWordWrap', 'commandScrollbars', 'tabCompletionList', 'tabCompletionLookupType', 'tabCompletionReplaceCasing', 'characterManagerAddButtonAction', 'enableCrashReporting', 'characterManagerPanelWidth', 'ignoreInputLeadingWhitespace', 'profiles.find.case', 'profiles.find.word', 'profiles.find.reverse', 'profiles.find.regex', 'profiles.find.selection', 'profiles.find.show', 'profiles.find.value', 'skipMore', 'skipMoreDelay', 'commandMinLines', 'simpleAlarms', 'simpleEditor', 'selectLastCommand'];\n\n/**\n * Class that contains all options, sets default values and allows loading and saving to json files\n *\n * @export\n * @class Settings\n */\nexport class Settings {\n    public colors: string[];\n    public enableTriggers: boolean;\n    public showErrorsExtended: boolean;\n    public logErrors: boolean;\n    public commandEcho: boolean;\n    public autoConnect: boolean;\n    public keepLastCommand: boolean;\n\n    constructor() {\n        /*\n        let subs;\n        let obj;\n        let k;\n        let kl;\n        */\n        for (var s = 0, sl = SettingList.length; s < sl; s++) {\n            if (SettingList[s][2] === SettingType.Custom) continue;\n            this[SettingList[s][0]] = Settings.getValue(SettingList[s][0]);\n            /*\n            subs = SettingList[s][0].split('.');\n            if ((kl = subs.length) > 1) {\n                obj = this[subs[0]] = {};\n                for (k = 1; k < kl - 1; k++) {\n                    obj[subs[k]] = {};\n                }\n                obj[subs[subs.length-1]] = Settings.getValue(SettingList[s][0]);\n            }\n            */\n        }\n        this.colors = Settings.getValue('colors');\n    }\n\n    public static settingError = false;\n\n    public static getValue(setting: string, defaultValue?: any) {\n        var tmp;\n        if (Settings.settingError) {\n            if (defaultValue === null || typeof defaultValue == 'undefined')\n                return Settings.defaultValue(setting);\n            return defaultValue;\n        }\n        try {\n            tmp = $.jStorage.get(setting);\n            if (typeof tmp == 'undefined' || tmp === null) {\n                if (defaultValue === null || typeof defaultValue == 'undefined')\n                    return Settings.defaultValue(setting);\n                return defaultValue;\n            }\n            switch (setting) {\n                case 'showChat':\n                case 'showStatus':\n                case 'showButtons':\n                case 'enableCommands':\n                case 'enableVerbatim':\n                case 'allowEscape':\n                case 'autoConnect':\n                case 'mapFollow':\n                case 'mapEnabled':\n                case 'flashing':\n                case 'commandEcho':\n                case 'enableAliases':\n                case 'enableTriggers':\n                case 'enableButtons':\n                case 'enableMacros':\n                case 'commandStacking':\n                case 'htmlLog':\n                case 'keepLastCommand':\n                case 'fullScreen':\n                case 'enableMXP':\n                case 'enableURLDetection':\n                case 'enableMCCP':\n                case 'enableUTF8':\n                case 'parseCommands':\n                case 'lagMeter':\n                case 'showScriptErrors':\n                case 'enablePing':\n                case 'enableEcho':\n                case 'enableSpeedpaths':\n                case 'parseSpeedpaths':\n                case 'MapperSplitArea':\n                case 'parseSingleQuotes':\n                case 'parseDoubleQuotes':\n                case 'logEnabled':\n                case 'logOffline':\n                case 'logPrepend':\n                case 'logUniqueOnConnect':\n                case 'toolsPinned':\n                case 'notifyMSPPlay':\n                case 'CommandonClick':\n                case 'allowEval':\n                case 'disableTriggerOnError':\n                case 'prependTriggeredLine':\n                case 'chat.captureLines':\n                case 'chat.captureAllLines':\n                case 'chat.captureReviews':\n                case 'chat.captureTells':\n                case 'chat.captureTalk':\n                case 'chat.gag':\n                case 'chat.CaptureOnlyOpen':\n                case 'simpleAlarms':\n                case 'simpleEditor':\n                case 'selectLastCommand':\n                    if (tmp == 1)\n                        return true;\n                    return false;\n                case 'colors':\n                case 'chat.lines':\n                    if (tmp === null || typeof tmp == 'undefined' || tmp.length === 0)\n                        return [];\n                    return JSON.parse(tmp);\n            }\n            return tmp;\n        }\n        catch (err) {\n            if (!Settings.settingError) {\n                alert('Unable to save to localStorage so reverting to default,\\n\\nError description: ' + err.message);\n                Settings.settingError = true;\n            }\n            if (defaultValue === null || typeof defaultValue == 'undefined')\n                return Settings.defaultValue(defaultValue);\n            return defaultValue;\n        }\n    }\n\n    public static setValue(setting: string, value) {\n        switch (setting) {\n            case 'colors':\n            case 'chat.lines':\n                if (value === null || typeof value == 'undefined' || value.length === 0)\n                    $.jStorage.deleteKey(setting);\n                else\n                    $.jStorage.set(setting, JSON.stringify(value));\n                break;\n            default:\n                if (typeof value == 'boolean') {\n                    if (value)\n                        $.jStorage.set(setting, 1);\n                    else\n                        $.jStorage.set(setting, 0);\n                }\n                else\n                    $.jStorage.set(setting, value);\n                break;\n        }\n    }\n\n    public static clearValue(setting: string) {\n        $.jStorage.deleteKey(setting);\n    }\n\n    public static defaultValue(setting) {\n        switch (setting) {\n            case 'bufferSize': return 500;\n            case 'commandDelay': return 500;\n            case 'commandDelayCount': return 5;\n            case 'commandHistorySize': return 20;\n            case 'fontSize': return '1em';\n            case 'cmdfontSize': return '1em';\n            case 'commandEcho': return true;\n            case 'flashing': return false;\n            case 'autoConnect': return true;\n            case 'enableAliases': return true;\n            case 'enableTriggers': return true;\n            case 'enableMacros': return true;\n            case 'showScriptErrors': return false;\n            case 'commandStacking': return true;\n            case 'commandStackingChar': return ';';\n            case 'htmlLog': return true;\n            case 'keepLastCommand': return true;\n            case 'enableMCCP': return true;\n            case 'enableUTF8': return true;\n            case 'font': return '\\'Courier New\\', Courier, monospace';\n            case 'cmdfont': return '\\'Courier New\\', Courier, monospace';\n            case 'mapFollow':\n            case 'mapper.follow': return true;\n            case 'mapEnabled':\n            case 'mapper.enabled': return true;\n            case 'MapperSplitArea':\n            case 'mapper.split': return false;\n            case 'MapperFillWalls':\n            case 'mapper.fill': return false;\n            case 'MapperOpen':\n            case 'showMapper': return false;\n            case 'fullScreen': return false;\n            case 'enableMXP': return true;\n            case 'enableMSP': return true;\n            case 'parseCommands': return true;\n            case 'lagMeter': return false;\n            case 'enablePing': return false;\n            case 'enableEcho': return true;\n            case 'enableSpeedpaths': return true;\n            case 'speedpathsChar': return '!';\n            case 'parseSpeedpaths': return true;\n            case 'profile': return 'Default';\n            case 'parseSingleQuotes': return false;\n            case 'parseDoubleQuotes': return true;\n            case 'logEnabled': return false;\n            case 'logPrepend': return false;\n            case 'logOffline': return false;\n            case 'logUniqueOnConnect': return true;\n            case 'enableURLDetection': return true;\n            case 'notifyMSPPlay': return false;\n            case 'CommandonClick': return true;\n            case 'allowEval': return true;\n            case 'allowEscape': return true;\n            case 'AutoCopySelectedToClipboard': return false;\n            case 'enableDebug': return false;\n            case 'editorPersistent': return false;\n            case 'askonclose': return true;\n            case 'dev': return false;\n            //New settings\n            case 'chat.captureLines': return false;\n            case 'chat.captureAllLines': return false;\n            case 'chat.captureReviews': return false;\n            case 'chat.captureTells': return false;\n            case 'chat.captureTalk': return false;\n            case 'chat.gag': return false;\n            case 'chat.CaptureOnlyOpen': return false;\n            case 'checkForUpdates': return false;\n            case 'autoCreateCharacter': return false;\n            case 'askonchildren': return true;\n            case 'mapper.legend': return false;\n            case 'mapper.room': return false;\n            case 'mapper.importType': return 1;\n            case 'mapper.vscroll': return 0;\n            case 'mapper.hscroll': return 0;\n            case 'mapper.scale': return 1.0;\n            case 'mapper.active': return {\n                ID: null,\n                x: 0,\n                y: 0,\n                z: 0,\n                area: null,\n                zone: 0\n            };\n            case 'mapper.active.ID': return null;\n            case 'mapper.active.x': return 0;\n            case 'mapper.active.y': return 0;\n            case 'mapper.active.z': return 0;\n            case 'mapper.active.area': return null;\n            case 'mapper.active.zone': return 0;\n            case 'profiles.split': return 200;\n            case 'profiles.askoncancel': return true;\n            case 'profiles.triggersAdvanced': return false;\n            case 'profiles.aliasesAdvanced': return false;\n            case 'profiles.buttonsAdvanced': return false;\n            case 'profiles.macrosAdvanced': return false;\n            case 'profiles.contextsAdvanced': return false;\n            case 'profiles.codeEditor': return true;\n            case 'chat.log': return false;\n            case 'chat.zoom': return 1;\n            case 'chat.font': return '\\'Courier New\\', Courier, monospace';\n            case 'chat.fontSize': return '1em';\n            case 'title': return '$t';\n            case 'logGagged': return false;\n            case 'logTimeFormat': return 'YYYYMMDD-HHmmss';\n            case 'autoConnectDelay': return 600;\n            case 'autoLogin': return true;\n            case 'onDisconnect': return OnDisconnect.ReconnectDialog;\n            case 'enableKeepAlive': return false;\n            case 'keepAliveDelay': return 0;\n            case 'newlineShortcut': return NewLineType.Ctrl;\n            case 'logWhat': return Log.Html;\n            case 'logErrors': return true;\n            case 'showErrorsExtended': return false;\n            case 'reportCrashes': return false;\n            case 'enableCommands': return true;\n            case 'commandChar': return '#';\n            case 'escapeChar': return '\\\\';\n            case 'enableVerbatim': return true;\n            case 'verbatimChar': return '`';\n            case 'soundPath': return '';\n            case 'logPath': return '';\n            case 'theme': return '';\n            case 'gamepads': return false;\n            case 'backupLoad': return BackupSelection.All;\n            case 'backupSave': return BackupSelection.All;\n            case 'backupAllProfiles': return true;\n            case 'backupReplaceCharacters': return true;\n            case 'scrollLocked': return false;\n            case 'showStatus': return true;\n            case 'showChat': return false;\n            case 'showEditor': return false;\n            case 'showArmor': return false;\n            case 'showStatusWeather': return true;\n            case 'showStatusLimbs': return true;\n            case 'showStatusHealth': return true;\n            case 'showStatusExperience': return true;\n            case 'showStatusPartyHealth': return true;\n            case 'showStatusCombatHealth': return true;\n            case 'allowNegativeNumberNeeded': return false;\n            case 'spellchecking': return true;\n            case 'statusExperienceNeededProgressbar': return false;\n            case 'pasteSpecialPrefix': return '';\n            case 'pasteSpecialPostfix': return '';\n            case 'pasteSpecialReplace': return '';\n            case 'pasteSpecialPrefixEnabled': return true;\n            case 'pasteSpecialPostfixEnabled': return true;\n            case 'pasteSpecialReplaceEnabled': return true;\n            case 'display.showSplitButton': return true;\n            case 'chat.bufferSize': return 500;\n            case 'chat.flashing': return false;\n            case 'display.hideTrailingEmptyLine': return true;\n            case 'display.enableColors': return true;\n            case 'display.enableBackgroundColors': return true;\n            case 'enableSound': return true;\n            case 'editorClearOnSend': return true;\n            case 'editorCloseOnSend': return true;\n            case 'askOnCloseAll': return true;\n            case 'askonloadCharacter': return true;\n            case 'mapper.roomWidth': return 200;\n            case 'mapper.roomGroups': return 1 | 2 | 4;\n            case 'mapper.showInTaskBar': return false;\n            case 'profiles.enabled': return [];\n            case 'profiles.sortOrder': return ProfileSortOrder.Priority | ProfileSortOrder.Index;\n            case 'profiles.sortDirection': return 1;\n            case 'profiles.profileSelected': return 'default';\n            case 'profiles.profileExpandSelected': return true;\n            case 'chat.lines': return [];\n            case 'chat.showTimestamp': return false;\n            case 'chat.timestampFormat': return '[[]MM-DD HH:mm:ss.SSS[]] ';\n            case 'chat.tabWidth': return 8;\n            case 'chat.displayControlCodes': return false;\n            case 'chat.emulateTerminal': return false;\n            case 'chat.emulateControlCodes': return true;\n            case 'chat.wordWrap': return false;\n            case 'chat.wrapAt': return 0;\n            case 'chat.indent': return 4;\n            case 'autoTakeoverLogin': return false;\n            case 'maxReconnectDelay': return 3600;\n            case 'showLagInTitle': return false;\n            case 'mspMaxRetriesOnError': return 0;\n            case 'logTimestamp': return false;\n            case 'logTimestampFormat': return '[[]MM-DD HH:mm:ss.SSS[]] ';\n            case 'disableTriggerOnError': return true;\n            case 'prependTriggeredLine': return true;\n            case 'enableParameters': return true;\n            case 'parametersChar': return '%';\n            case 'enableNParameters': return true;\n            case 'nParametersChar': return '$';\n            case 'enableParsing': return true;\n            case 'onProfileChange': return OnProfileChange.Nothing;\n            case 'onProfileDeleted': return OnProfileDeleted.Nothing;\n            case 'enableDoubleParameterEscaping': return false;\n            case 'ignoreEvalUndefined': return true;\n            case 'enableInlineComments': return true;\n            case 'enableBlockComments': return true;\n            case 'inlineCommentString': return '//';\n            case 'blockCommentString': return '/*';\n            case 'allowCommentsFromCommand': return false;\n            case 'saveTriggerStateChanges': return true;\n            case 'groupProfileSaves': return false;\n            case 'groupProfileSaveDelay': return 20000;\n            case 'returnNewlineOnEmptyValue': return false;\n            case 'pathDelay': return 0;\n            case 'pathDelayCount': return 1;\n            case 'echoSpeedpaths': return false;\n            case 'scriptEngineType': return ScriptEngineType.Simple;\n            case 'initializeScriptEngineOnLoad': return false;\n            case 'display.showInvalidMXPTags': return false;\n            case 'display.showTimestamp': return false;\n            case 'display.timestampFormat': return '[[]MM-DD HH:mm:ss.SSS[]] ';\n            case 'display.displayControlCodes': return false;\n            case 'display.emulateTerminal': return false;\n            case 'display.emulateControlCodes': return true;\n            case 'display.wordWrap': return false;\n            case 'display.tabWidth': return 8;\n            case 'display.wrapAt': return 0;\n            case 'display.indent': return 4;\n            case 'statusWidth': return -1;\n            case 'extensions': return {};\n            case 'warnAdvancedSettings': return true;\n            case 'showAdvancedSettings': return false;\n            case 'enableTabCompletion': return true;\n            case 'ignoreCaseTabCompletion': return false;\n            case 'tabCompletionBufferLimit': return 100;\n            case 'enableNotifications': return true;\n            case 'echo': return Echo.None;\n            case 'commandAutoSize': return false;\n            case 'commandWordWrap': return false;\n            case 'commandMinLines': return 1;\n            case 'tabCompletionLookupType': return TabCompletion.PrependBuffer;\n            case 'tabCompletionList': return '';\n            case 'tabCompletionReplaceCasing': return 0;\n            case 'ignoreInputLeadingWhitespace': return false;\n            case 'skipMore': return false;\n            case 'skipMoreDelay': return 5000;\n            case 'simpleAlarms': return false;\n            case 'simpleEditor': return false;\n            case 'selectLastCommand': return true;\n        }\n        return null;\n    }\n\n    public save() {\n        for (var prop in this) {\n            if (!this.hasOwnProperty(prop)) continue;\n            Settings.setValue(prop, this[prop]);\n        }\n    }\n\n    public reset() {\n        for (var s = 0, sl = SettingList.length; s < sl; s++) {\n            if (SettingList[s][2] === SettingType.Custom) continue;\n            this[SettingList[s][0]] = Settings.defaultValue(SettingList[s][0]);\n        }\n        this.colors = [];\n    }\n}", "import { Dialog, DialogButtons, AlertDialog, ConfirmDialog, DialogIcon } from \"./dialog\";\r\nimport { capitalize, clone, openFileDialog, readFile } from '../library';\r\nimport { Settings, SettingList } from \"../settings\";\r\nimport { RGBColor } from '../lib/rgbcolor';\r\nimport { removeHash } from \"./interface\";\r\n\r\ndeclare let fileSaveAs;\r\n\r\nexport class SettingsDialog extends Dialog {\r\n    private _menu;\r\n    private _page;\r\n    public settings: Settings;\r\n    constructor() {\r\n        super(({ title: '<i class=\"fas fa-cogs\"></i> Settings', keepCentered: true, resizable: false, moveable: false, center: true, maximizable: false }));\r\n        this.body.style.padding = '10px';\r\n        this.buildMenu();\r\n        let footer = '';\r\n        footer += `<button id=\"${this.id}-cancel\" type=\"button\" class=\"btn-sm float-end btn btn-light\" title=\"Cancel dialog\"><i class=\"bi bi-x-lg\"></i><span class=\"icon-only\"> Cancel</span></button>`;\r\n        footer += `<button id=\"${this.id}-save\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Confirm dialog\"><i class=\"bi bi-save\"></i><span class=\"icon-only\"> Save</span></button>`;\r\n        footer += `<button id=\"${this.id}-reset\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Reset settings\"><i class=\"bi bi-arrow-clockwise\"></i><span class=\"icon-only\"> Reset</span></button>`\r\n        footer += `<button id=\"${this.id}-reset-all\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Reset All settings\"><i class=\"bi bi-arrow-repeat\"></i><span class=\"icon-only\"> Reset All</span></button>`\r\n        footer += '<div class=\"vr float-start\" style=\"margin-right: 4px;height: 29px;\"></div>';\r\n        footer += `<button id=\"${this.id}-export\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Export settings\"><i class=\"bi bi-box-arrow-up\"></i><span class=\"icon-only\"> Export</span></button>`;\r\n        footer += `<button id=\"${this.id}-import\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Import settings\"><i class=\"bi bi-box-arrow-in-down\"></i><span class=\"icon-only\"> Import</span></button>`;\r\n        this.footer.innerHTML = footer;\r\n        this.footer.querySelector(`#${this.id}-cancel`).addEventListener('click', () => {\r\n            removeHash(this._page);\r\n            this.close();\r\n        });\r\n        this.footer.querySelector(`#${this.id}-export`).addEventListener('click', () => {\r\n            var data = clone(this.settings);\r\n            data.version = 2;\r\n            fileSaveAs.show(JSON.stringify(data), 'oiMUD.settings.txt', 'text/plain');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-import`).addEventListener('click', () => {\r\n            openFileDialog('Import settings').then(files => {\r\n                readFile(files[0]).then((contents: any) => {\r\n                    try {\r\n                        var data = JSON.parse(contents);\r\n                        var s, sl;\r\n                        if (data.version === 1) {\r\n                            for (s = 0, sl = SettingList.length; s < sl; s++) {\r\n                                this.settings[SettingList[s][0]] = data[SettingList[s][0]];\r\n                            }\r\n                            //TODO not supported, should be sent to mapper to import\r\n                            this.emit('import-rooms', data.rooms);\r\n                        }\r\n                        else if (data.version === 2 && !data.profiles) {\r\n                            for (s = 0, sl = SettingList.length; s < sl; s++) {\r\n                                this.settings[SettingList[s][0]] = data[SettingList[s][0]];\r\n                            }\r\n                        }\r\n                        else\r\n                            setTimeout(function () {\r\n                                new AlertDialog('Invalid file', 'Unable to import file, not a valid settings file', DialogIcon.exclamation).showModal();\r\n                            }, 50);\r\n                        this.loadPageSettings();\r\n                    }\r\n                    catch (err) {\r\n                        setTimeout(function () {\r\n                            new AlertDialog('Error importing', 'Error importing file.', DialogIcon.error).showModal();\r\n                        }, 50);\r\n                        client.error(err);\r\n                    }\r\n                }).catch(client.error);\r\n            }).catch(() => { });\r\n        });\r\n\r\n        this.footer.querySelector(`#${this.id}-reset`).addEventListener('click', () => {\r\n            if (this._page === 'settings-colors') {\r\n                const confirm = new ConfirmDialog('Reset colors', 'Reset colors?');\r\n                confirm.on('button-click', e => {\r\n                    if (e.button === DialogButtons.Yes) {\r\n                        var c;\r\n                        var colors = this.settings.colors = [];\r\n                        for (c = 0; c < 16; c++)\r\n                            this.setColor('color' + c, colors[c] || this.getDefaultColor(c));\r\n                        for (c = 256; c < 280; c++)\r\n                            this.setColor('color' + c, colors[c] || this.getDefaultColor(c));\r\n                        this.body.querySelector(`#colorScheme`).value = 0;\r\n                    }\r\n                })\r\n                confirm.showModal();\r\n            }\r\n            else if (this._page && this._page !== 'settings' && this._page.length) {\r\n                const pages = this._page.split('-');\r\n                let title = capitalize(pages[pages.length - 1].match(/([A-Z]|^[a-z])[a-z]+/g).join(' '));\r\n                const confirm = new ConfirmDialog(`Reset ${title} settings`, `Reset ${title} settings?`);\r\n                confirm.on('button-click', e => {\r\n                    if (e.button === DialogButtons.Yes) {\r\n                        const forms: HTMLInputElement[] = this.body.querySelectorAll('input,select,textarea');\r\n                        for (let f = 0, fl = forms.length; f < fl; f++) {\r\n                            this.settings[forms[f].id] = Settings.defaultValue(forms[f].id);\r\n                            if (forms[f].type === 'checkbox')\r\n                                forms[f].checked = this.settings[forms[f].id];\r\n                            else\r\n                                forms[f].value = this.settings[forms[f].id];\r\n                        }\r\n                    }\r\n                })\r\n                confirm.showModal();\r\n            }\r\n            else {\r\n                const confirm = new ConfirmDialog('Reset all settings', 'Reset all settings?');\r\n                confirm.on('button-click', e => {\r\n                    if (e.button === DialogButtons.Yes)\r\n                        this.settings.reset();\r\n                })\r\n                confirm.showModal();\r\n            }\r\n        })\r\n\r\n        this.footer.querySelector(`#${this.id}-reset-all`).addEventListener('click', () => {\r\n            const confirm = new ConfirmDialog('Reset all settings', 'Reset all settings?');\r\n            confirm.on('button-click', e => {\r\n                if (e.button === DialogButtons.Yes)\r\n                    this.settings.reset();\r\n            })\r\n            confirm.showModal();\r\n        })\r\n        this.footer.querySelector(`#${this.id}-save`).addEventListener('click', () => {\r\n            removeHash(this._page);\r\n            for (var s in this.settings) {\r\n                if (!this.settings.hasOwnProperty(s)) continue\r\n                Settings.setValue(s, this.settings[s]);\r\n            }\r\n            client.clearCache();\r\n            client.loadOptions();\r\n            this.close();\r\n        })\r\n        this.settings = new Settings();\r\n        this.on('closed', () => {\r\n            removeHash(this._page);\r\n        });\r\n        this.on('canceled', () => {\r\n            removeHash(this._page);\r\n        });\r\n    }\r\n\r\n    public setBody(contents: string, args?: any) {\r\n        super.setBody(this.dialog.dataset.path === 'settings' ? SettingsDialog.menuTemplate : contents, args);\r\n        this._page = this.dialog.dataset.path;\r\n        const pages = this._page.split('-');\r\n        let breadcrumb = '';\r\n        let last = pages.length - 1;\r\n        if (pages.length === 1)\r\n            breadcrumb += '<li><i class=\"float-start fas fa-cogs\" style=\"padding: 2px;margin-right: 2px;\"></i></li>';\r\n        else\r\n            breadcrumb += '<li><a href=\"#' + pages.slice(0, 1).join('-') + '\"><i class=\"float-start fas fa-cogs\" style=\"padding: 2px;margin-right: 2px;\"></i></a></li>';\r\n        for (let p = 0, pl = pages.length; p < pl; p++) {\r\n            let title = capitalize(pages[p].match(/([A-Z]|^[a-z])[a-z]+/g).join(' '));\r\n            if (p === last)\r\n                breadcrumb += '<li class=\"breadcrumb-item active\">' + title + '</li>';\r\n            else\r\n                breadcrumb += '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"#' + pages.slice(0, p + 1).join('-') + '\">' + title + '</a></li>';\r\n        }\r\n        this.title = '<ol class=\"float-start breadcrumb\">' + breadcrumb + '</ol>';\r\n        if (this._page === 'settings') {\r\n            if (this._menu)\r\n                this._menu.style.display = 'none';\r\n            this.body.style.left = '';\r\n            if (this.footer.querySelector(`#${this.id}-reset`))\r\n                this.footer.querySelector(`#${this.id}-reset`).style.display = 'none';\r\n            SettingsDialog.addPlugins(this.body.querySelector('div.contents'));\r\n        }\r\n        else {\r\n            if (this._menu)\r\n                this._menu.style.display = '';\r\n            if (this.footer.querySelector(`#${this.id}-reset`))\r\n                this.footer.querySelector(`#${this.id}-reset`).style.display = '';\r\n            this.body.style.left = '200px';\r\n        }\r\n        this.body.scrollTop = 0;\r\n        this.loadPageSettings();\r\n    }\r\n\r\n    private buildMenu() {\r\n        this.dialog.insertAdjacentHTML(\"beforeend\", SettingsDialog.menuTemplate.replace(' style=\"top:0;position: absolute;left:0;bottom:49px;right:0;\"', ''));\r\n        this._menu = this.dialog.querySelector('.contents');\r\n        this._menu.classList.add('settings-menu');\r\n        SettingsDialog.addPlugins(this._menu);\r\n        if (this._page === 'settings')\r\n            this._menu.style.display = 'none';\r\n        this.body.style.left = '200px';\r\n    }\r\n\r\n    private loadPageSettings() {\r\n        const forms: HTMLInputElement[] = this.body.querySelectorAll('input,select,textarea');\r\n        if (this._page === 'settings-colors') {\r\n            var c;\r\n            var colors = this.settings.colors || [];\r\n            for (c = 0; c < 16; c++)\r\n                this.setColor('color' + c, colors[c] || this.getDefaultColor(c));\r\n            for (c = 256; c < 280; c++)\r\n                this.setColor('color' + c, colors[c] || this.getDefaultColor(c));\r\n            for (let f = 0, fl = forms.length; f < fl; f++) {\r\n                forms[f].addEventListener('change', e => {\r\n                    const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                    let value = target.value;\r\n                    let id = parseInt(target.id.substring(5), 10);\r\n                    var colors = this.settings.colors || [];\r\n                    if (!colors[id] || colors[id].length === 0) {\r\n                        if (this.getDefaultColor(id) !== value)\r\n                            colors[id] = value;\r\n                    }\r\n                    else if (this.getDefaultColor(id) !== value)\r\n                        delete colors[id];\r\n                    else\r\n                        colors[id] = value;\r\n                    this.settings.colors = colors;\r\n                });\r\n                forms[f].addEventListener('input', e => {\r\n                    const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                    let value = target.value;\r\n                    let id = parseInt(target.id.substring(5), 10);\r\n                    if (!this.settings.colors[id] || this.settings.colors[id].length === 0) {\r\n                        if (this.getDefaultColor(id) !== value)\r\n                            this.settings.colors[id] = value;\r\n                    }\r\n                    else if (this.getDefaultColor(id) !== value)\r\n                        delete this.settings.colors[id];\r\n                    else\r\n                        this.settings.colors[id] = value;\r\n\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            for (let f = 0, fl = forms.length; f < fl; f++) {\r\n                if (forms[f].type === 'radio') {\r\n                    forms[f].checked = '' + this.settings[forms[f].name] === forms[f].value;\r\n                    forms[f].addEventListener('change', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        if (target.checked)\r\n                            this.settings[target.name] = this.convertType(target.value, typeof this.settings[target.name]);\r\n                    });\r\n                }\r\n                else if (forms[f].type === 'checkbox') {\r\n                    if (forms[f].dataset.enum === 'true') {\r\n                        const name = forms[f].name || forms[f].id.substring(0, forms[f].id.lastIndexOf('-'));\r\n                        const value = +forms[f].id.substring(forms[f].id.lastIndexOf('-') + 1);\r\n                        forms[f].checked = (this.settings[name] & value) === value;\r\n                    }\r\n                    else\r\n                        forms[f].checked = this.settings[forms[f].id];\r\n                    forms[f].addEventListener('change', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        if (target.dataset.enum === 'true') {\r\n                            const name = target.name || target.id.substring(0, target.id.lastIndexOf('-'));\r\n                            const enums = this.body.querySelectorAll(`[name=${name}]`);\r\n                            let value = 0;\r\n                            for (let e = 0, el = enums.length; e < el; e++) {\r\n                                if (enums[e].checked)\r\n                                    value |= +enums[e].value;\r\n                            }\r\n                            this.settings[name] = value;\r\n                        }\r\n                        else\r\n                            this.settings[target.id] = target.checked || false;\r\n                    });\r\n                }\r\n                else {\r\n                    forms[f].value = this.settings[forms[f].id];\r\n                    forms[f].addEventListener('change', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        this.setValue(target.id, target.value);\r\n                    });\r\n                    forms[f].addEventListener('input', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        this.setValue(target.id, target.value);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public setColor(id, color?) {\r\n        if (!color || typeof color === 'undefined' || color.length === 0)\r\n            this.body.querySelector('#' + id).value = '';\r\n        else\r\n            this.body.querySelector('#' + id).value = this.colorHex(color);\r\n    }\r\n\r\n    public colorHex(color) {\r\n        if (!color) return false;\r\n        color = new RGBColor(color);\r\n        if (!color.ok)\r\n            return '';\r\n        return color.toHex();\r\n    };\r\n\r\n    public getDefaultColor(code) {\r\n        if (code === 0) return 'rgb(0,0,0)'; //black fore\r\n        if (code === 1) return 'rgb(128, 0, 0)';//red fore\r\n        if (code === 2) return 'rgb(0, 128, 0)';//green fore\r\n        if (code === 3) return 'rgb(128, 128, 0)';//yellow fore\r\n        if (code === 4) return 'rgb(0, 0, 128)';//blue fore\r\n        if (code === 5) return 'rgb(128, 0, 128)';//magenta fore\r\n        if (code === 6) return 'rgb(0, 128, 128)';//cyan fore\r\n        if (code === 7) return 'rgb(192, 192, 192)';//white fore\r\n        if (code === 8) return 'rgb(128, 128, 128)';//black  bold\r\n        if (code === 9) return 'rgb(255, 0, 0)'; //Red bold\r\n        if (code === 10) return 'rgb(0, 255, 0)'; //green bold\r\n        if (code === 11) return 'rgb(255, 255, 0)';//yellow bold\r\n        if (code === 12) return 'rgb(0, 0, 255)';//blue bold\r\n        if (code === 13) return 'rgb(255, 0, 255)';//magenta bold\r\n        if (code === 14) return 'rgb(0, 255, 255)';//cyan bold\r\n        if (code === 15) return 'rgb(255, 255, 255)';//white bold\r\n        if (code === 256) return 'rgb(0, 0, 0)';//black faint\r\n        if (code === 257) return 'rgb(118, 0, 0)';//red  faint\r\n        if (code === 258) return 'rgb(0, 108, 0)';//green faint\r\n        if (code === 259) return 'rgb(145, 136, 0)';//\"rgb(108, 108, 0)\";//yellow faint\r\n        if (code === 260) return 'rgb(0, 0, 108)';//blue faint\r\n        if (code === 261) return 'rgb(108, 0, 108)';//magenta faint\r\n        if (code === 262) return 'rgb(0, 108, 108)';//cyan faint\r\n        if (code === 263) return 'rgb(160, 160, 160)';//white faint\r\n        if (code === 264) return 'rgb(0, 0, 0)'; //BackgroundBlack\r\n        if (code === 265) return 'rgb(128, 0, 0)';//red back\r\n        if (code === 266) return 'rgb(0, 128, 0)';//greenback\r\n        if (code === 267) return 'rgb(128, 128, 0)';//yellow back\r\n        if (code === 268) return 'rgb(0, 0, 128)';//blue back\r\n        if (code === 269) return 'rgb(128, 0, 128)';//magenta back\r\n        if (code === 270) return 'rgb(0, 128, 128)';//cyan back\r\n        if (code === 271) return 'rgb(192, 192, 192)';//white back\r\n        if (code === 272) return 'rgb(0,0,0)'; //iceMudInfoBackground\r\n        if (code === 273) return 'rgb(0, 255, 255)';//iceMudInfoText\r\n        if (code === 274) return 'rgb(0,0,0)'; //LocalEchoBackground\r\n        if (code === 275) return 'rgb(255, 255, 0)';//LocalEchoText\r\n        if (code === 276) return 'rgb(0, 0, 0)';//DefaultBack\r\n        if (code === 277) return 'rgb(192, 192, 192)';//DefaultFore\r\n        if (code === 278) return 'rgb(128, 0, 0)';//ErrorFore\r\n        if (code === 279) return 'rgb(192, 192, 192)';//ErrorBack\r\n        if (code === 280) return 'rgb(255,255,255)';//DefaultBrightFore\t\r\n        return '';\r\n    }\r\n\r\n    public setValue(option, value) {\r\n        if (value == 'false') value = false;\r\n        if (value == 'true') value = true;\r\n        if (value == 'null') value = null;\r\n        if (value == 'undefined') value = undefined;\r\n        if (typeof value == 'string' && parseFloat(value).toString() == value)\r\n            value = parseFloat(value);\r\n        this.settings[option] = this.convertType(value, typeof this.settings[option]);\r\n    }\r\n\r\n    public convertType(value, type) {\r\n        if (typeof value === type)\r\n            return value;\r\n        switch (type) {\r\n            case 'number':\r\n                if (typeof value == 'string' && parseFloat(value).toString() == value)\r\n                    return parseFloat(value);\r\n                return Number(value);\r\n            case 'boolean':\r\n                return Boolean(value);\r\n            case 'string':\r\n                return '' + value;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    static addPlugins(menu) {\r\n        let pl = client.plugins.length;\r\n        let s;\r\n        let sl;\r\n        for (let p = 0; p < pl; p++) {\r\n            if (!client.plugins[p].settings) continue;\r\n            if (client.plugins[p].settings.length) {\r\n                sl = client.plugins[p].settings.length;\r\n                for (s = 0; s < sl; s++) {\r\n                    let item = client.plugins[p].settings[s];\r\n                    if (typeof item.action !== 'string') continue;\r\n                    let code = `<a href=\"#${item.action}\" class=\"list-group-item list-group-item-action\">${item.icon || ''}${item.name || ''}</a>`;\r\n                    if ('position' in item) {\r\n                        if (typeof item.position === 'string') {\r\n                            if (menu.querySelector(item.position)) {\r\n                                menu.querySelector(item.position).insertAdjacentHTML('afterend', code);\r\n                                continue;\r\n                            }\r\n                        }\r\n                        else if (item.position >= 0 && item.position < menu.children.length) {\r\n                            menu.children[item.position].insertAdjacentHTML('afterend', code);\r\n                            continue;\r\n                        }\r\n                    }\r\n                    menu.insertAdjacentHTML('beforeend', code);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static get menuTemplate() {\r\n        return `<div class=\"contents list-group list-group-flush\" style=\"top:0;position: absolute;left:0;bottom:49px;right:0;\">` +\r\n            `<a href=\"#settings-general\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-cogs\"></i> General</a>` +\r\n            `<a href=\"#settings-display\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-display\"></i> Display</a>` +\r\n            `<a href=\"#settings-colors\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-palette\"></i> Colors</a>` +\r\n            `<a href=\"#settings-commandLine\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-terminal\"></i> Command line</a>` +\r\n            `<a href=\"#settings-tabCompletion\" class=\"list-group-item list-group-item-action\"><i class=\"fa-solid fa-arrow-right-to-bracket\"></i> Tab completion</a>` +\r\n            `<a href=\"#settings-telnet\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-network-wired\"></i> Telnet</a>` +\r\n            `<a href=\"#settings-scripting\" class=\"list-group-item list-group-item-action\"><i class=\"fas fa-code\"></i> Scripting</a>` +\r\n            `<a href=\"#settings-specialCharacters\" class=\"list-group-item list-group-item-action\"><i class=\"fa-regular fa-file-code\"></i> Special characters</a>` +\r\n            `<a href=\"#settings-advanced\" class=\"list-group-item list-group-item-action\"><i class=\"fa-solid fa-sliders\"></i> Advanced</a>` +\r\n            `</div>`;\r\n    }\r\n}", "//spellchecker:ignore\nimport \"../css/splitter.css\";\nimport { EventEmitter } from '../events';\n\nexport interface SplitterOptions {\n    container?: any;\n    orientation?: Orientation;\n    parent?: any;\n    id?: string;\n    panel1?: HTMLElement;\n    panel2?: HTMLElement;\n    anchor?: PanelAnchor;\n}\n\nexport enum Orientation {\n    horizontal, vertical\n}\n\nexport enum PanelAnchor {\n    panel1 = 1, panel2 = 2\n}\n\n/**\n * Splitter display control\n *\n * @export\n * @class Splitter\n * @extends {EventEmitter}\n */\nexport class Splitter extends EventEmitter {\n    private $el: HTMLElement;\n    private $parent: HTMLElement;\n    private $panel1: HTMLElement;\n    private $panel2: HTMLElement;\n    private $orientation: Orientation;\n    private $panel1MinSize = 200;\n    private $panel2MinSize = 200;\n    private $splitterWidth = 4;\n    private $dragBar: HTMLElement;\n    private $ghostBar: HTMLElement;\n    private $splitterDistance = 200;\n    private $dragging = false;\n    private $id;\n    private $collapsed = 0;\n    private $resizeObserver;\n    private $resizeObserverCache;\n    private $observer: MutationObserver;\n    private $anchor: PanelAnchor;\n\n    public live = true;\n\n    private $elBounds;\n\n    public hide() {\n        this.$el.style.display = 'none';\n    }\n\n    public show() {\n        this.$el.style.display = '';\n    }\n\n    constructor(options?: SplitterOptions) {\n        super();\n        if (options && options.id)\n            this.$id = options.id;\n        if (options) {\n            this.$panel1 = options.panel1;\n            this.$panel2 = options.panel2;\n        }\n        if (options && options.container)\n            this.parent = options.container.container ? options.container.container : options.container;\n        else if (options && options.parent)\n            this.parent = options.parent;\n        else\n            this.parent = document.body;\n        if (options) {\n            if ('anchor' in options)\n                this.$anchor = options.anchor;\n            else\n                this.$anchor = PanelAnchor.panel2;\n            this.orientation = options.orientation || Orientation.horizontal;\n        }\n        else {\n            this.$anchor = PanelAnchor.panel2;\n            this.orientation = Orientation.horizontal;\n        }\n    }\n\n    get id() { return this.$id || this.parent.id; }\n    set id(value) {\n        if (value === this.$id) return;\n        this.$id = value;\n        this.$el.id = this.id + '-splitter';\n        this.$panel1.id = this.id + '-splitter-panel1';\n        this.$panel2.id = this.id + '-splitter-panel2';\n        this.$dragBar.id = this.id + '-splitter-drag-bar';\n        if (this.$ghostBar)\n            this.$ghostBar.id = this.id + '-ghost-bar';\n    }\n\n    set parent(parent) {\n        if (typeof parent === 'string') {\n            if ((<string>parent).startsWith('#'))\n                this.$parent = document.getElementById((<string>parent).substr(1));\n            else\n                this.$parent = document.getElementById(parent);\n        }\n        else if (parent instanceof $)\n            this.$parent = parent[0];\n        else if (parent instanceof HTMLElement)\n            this.$parent = parent;\n        if (!this.$parent)\n            this.$parent = document.body;\n        this.createControl();\n    }\n\n    get parent(): HTMLElement { return this.$parent; }\n\n    get panel1(): HTMLElement { return this.$panel1; }\n\n    get panel2(): HTMLElement { return this.$panel2; }\n\n    get anchor(): PanelAnchor { return this.$anchor; }\n    set anchor(value: PanelAnchor) {\n        if (this.$anchor === value) return;\n        this.$anchor = 2;\n        this.updatePanels();\n    }\n\n    set SplitterDistance(value) {\n        if (this.$splitterDistance === value)\n            return;\n        this.$splitterDistance = value;\n        this.updatePanels();\n        this.emit('splitter-moved', value);\n    }\n    get SplitterDistance() { return this.$splitterDistance; }\n\n    set Panel1MinSize(value) {\n        if (this.$panel1MinSize === value)\n            return;\n        this.$panel1MinSize = value;\n        if (this.$orientation === Orientation.horizontal) {\n            if (this.$panel1.clientWidth < value)\n                this.$splitterDistance = this.parent.clientWidth - this.$panel1MinSize;\n        }\n        else if (this.$panel1.clientHeight < value)\n            this.$splitterDistance = this.parent.clientHeight - this.$panel1MinSize;\n        this.updatePanels();\n    }\n    get Panel1MinSize() { return this.$panel1MinSize; }\n\n    set Panel2MinSize(value) {\n        if (this.$panel2MinSize === value)\n            return;\n        this.$panel2MinSize = value;\n        if (this.$orientation === Orientation.horizontal) {\n            if (this.$panel2.clientWidth < value)\n                this.$splitterDistance = value;\n        }\n        else if (this.$panel2.clientHeight < value)\n            this.$splitterDistance = value;\n        this.updatePanels();\n    }\n    get Panel2MinSize() { return this.$panel2MinSize; }\n\n    get orientation(): Orientation { return this.$orientation; }\n    set orientation(value: Orientation) {\n        if (value === this.$orientation) return;\n        this.$orientation = value;\n        this.updatePanels();\n    }\n\n    get panel1Collapsed() { return this.$collapsed === 1; }\n    set panel1Collapsed(value) {\n        if (value) {\n            if (this.$collapsed === 1) return;\n            this.$collapsed = 1;\n            this.panel1.dataset.collapsed = 'true';\n            this.panel2.dataset.collapsed = 'false';\n            this.emit('collapsed', 1);\n            this.updatePanels();\n        }\n        else if (this.$collapsed === 1) {\n            this.$collapsed = 0;\n            delete this.panel1.dataset.collapsed;\n            delete this.panel2.dataset.collapsed;\n            this.emit('collapsed', 0);\n            this.updatePanels();\n        }\n    }\n\n    get panel2Collapsed() { return this.$collapsed === 2; }\n    set panel2Collapsed(value) {\n        if (value) {\n            if (this.$collapsed === 2) return;\n            this.$collapsed = 2;\n            this.panel1.dataset.collapsed = 'false';\n            this.panel2.dataset.collapsed = 'true';\n            this.emit('collapsed', 2);\n            this.updatePanels();\n        }\n        else if (this.$collapsed === 2) {\n            this.$collapsed = 0;\n            delete this.panel1.dataset.collapsed;\n            delete this.panel2.dataset.collapsed;\n            this.emit('collapsed', 0);\n            this.updatePanels();\n        }\n    }\n\n    private updatePanels() {\n        if (this.$orientation === Orientation.horizontal) {\n            this.$panel1.style.left = '0';\n            this.$panel1.style.top = '0';\n            this.$panel1.style.right = '0';\n\n            this.$panel2.style.left = '0';\n            this.$panel2.style.top = '';\n            this.$panel2.style.right = '0';\n            this.$panel2.style.bottom = '0';\n\n            this.$dragBar.style.left = '0';\n            this.$dragBar.style.right = '0';\n            if (this.$anchor === PanelAnchor.panel1) {\n                this.$dragBar.style.bottom = '';\n                this.$dragBar.style.top = (this.$splitterDistance) + 'px';\n            }\n            else {\n                this.$dragBar.style.top = '';\n                this.$dragBar.style.bottom = (this.$splitterDistance - this.$splitterWidth) + 'px';\n            }\n            this.$dragBar.style.height = this.$splitterWidth + 'px';\n            this.$dragBar.style.cursor = 'ns-resize';\n\n            if (this.$collapsed === 1) {\n                this.$panel1.style.display = 'none';\n                this.$panel2.style.display = '';\n                this.$panel2.style.top = '0';\n                this.$panel2.style.height = '';\n                this.$dragBar.style.display = 'none';\n            }\n            else if (this.$collapsed === 2) {\n                this.$panel1.style.display = '';\n                this.$panel1.style.bottom = '0';\n                this.$panel1.style.height = '';\n                this.$panel2.style.display = 'none';\n                this.$dragBar.style.display = 'none';\n            }\n            else if (this.$anchor === PanelAnchor.panel1) {\n                this.$panel1.style.display = '';\n                this.$panel1.style.height = (this.$splitterDistance - this.$splitterWidth) + 'px';\n                this.$panel2.style.display = '';\n                this.$panel2.style.top = (this.$splitterDistance - this.$splitterWidth) + 'px';\n                this.$panel2.style.height = '';\n                this.$dragBar.style.display = '';\n            }\n            else {\n                this.$panel1.style.display = '';\n                this.$panel1.style.bottom = this.$splitterDistance + 'px';\n                this.$panel2.style.display = '';\n                this.$panel2.style.height = (this.$splitterDistance - this.$splitterWidth) + 'px';\n                this.$dragBar.style.display = '';\n            }\n\n            this.$el.classList.remove('vertical');\n            this.$el.classList.add('horizontal');\n        }\n        else {\n            this.$panel1.style.left = '0';\n            this.$panel1.style.top = '0';\n            this.$panel1.style.bottom = '0';\n            this.$panel1.classList.remove('horizontal');\n            this.$panel1.classList.add('vertical');\n\n            this.$panel2.style.left = '';\n            this.$panel2.style.top = '0';\n            this.$panel2.style.right = '0';\n            this.$panel2.style.bottom = '0';\n            if (this.$anchor === PanelAnchor.panel1) {\n                this.$dragBar.style.right = '';\n                this.$dragBar.style.left = (this.$splitterDistance - this.$splitterWidth) + 'px';\n            }\n            else {\n                this.$dragBar.style.left = '';\n                this.$dragBar.style.right = (this.$splitterDistance - this.$splitterWidth) + 'px';\n            }\n            this.$dragBar.style.top = '0';\n            this.$dragBar.style.bottom = '0';\n            this.$dragBar.style.width = this.$splitterWidth + 'px';\n            this.$dragBar.style.cursor = 'ew-resize';\n\n            if (this.$collapsed === 1) {\n                this.$panel1.style.display = 'none';\n                this.$panel2.style.display = '';\n                this.$panel2.style.left = '0';\n                this.$panel2.style.width = '';\n                this.$dragBar.style.display = 'none';\n            }\n            else if (this.$collapsed === 2) {\n                this.$panel1.style.display = '';\n                this.$panel1.style.right = '0';\n                this.$panel1.style.width = '';\n                this.$panel2.style.display = 'none';\n                this.$dragBar.style.display = 'none';\n            }\n            else if (this.$anchor === PanelAnchor.panel1) {\n                this.$panel1.style.display = '';\n                this.$panel1.style.width = (this.$splitterDistance - this.$splitterWidth) + 'px';\n                this.$panel2.style.display = '';\n                this.$panel2.style.left = this.$splitterDistance - this.$splitterWidth + 'px';\n                this.$panel2.style.width = '';\n                this.$dragBar.style.display = '';\n            }\n            else {\n                this.$panel1.style.display = '';\n                this.$panel1.style.right = this.$splitterDistance + 'px';\n                this.$panel2.style.display = '';\n                this.$panel2.style.width = this.$splitterDistance - this.$splitterWidth + 'px';\n                this.$dragBar.style.display = '';\n            }\n            this.$el.classList.remove('horizontal');\n            this.$el.classList.add('vertical');\n\n        }\n    }\n\n    private createControl() {\n        this.$el = document.createElement('div');\n        this.$el.id = this.id + '-splitter';\n        this.$el.classList.add('splitter');\n        if (!this.$panel1) {\n            this.$panel1 = document.createElement('div');\n            this.$panel1.id = this.id + '-splitter-panel1';\n        }\n        this.$panel1.classList.add('splitter-panel', 'splitter-panel-1');\n        this.$el.appendChild(this.$panel1);\n        if (!this.$panel2) {\n            this.$panel2 = document.createElement('div');\n            this.$panel2.id = this.id + '-splitter-panel2';\n        }\n        this.$panel2.classList.add('splitter-panel', 'splitter-panel-2');\n        this.$el.appendChild(this.$panel2);\n        this.$dragBar = document.createElement('div');\n        this.$dragBar.id = this.id + '-splitter-drag-bar';\n        this.$dragBar.classList.add('spitter-drag-bar');\n        this.$el.appendChild(this.$dragBar);\n        this.$dragBar.tabIndex = 1;\n        this.$dragBar.addEventListener('mousedown', (e) => {\n            this.$dragBar.focus();\n            e.preventDefault();\n            this.$dragging = true;\n            this.$ghostBar = document.createElement('div');\n            this.$ghostBar.id = this.id + '-ghost-bar';\n            this.$ghostBar.classList.add('splitter-ghost-bar');\n            let bnd = this.$panel2.getBoundingClientRect();\n            if (this.$anchor === PanelAnchor.panel1)\n                bnd = this.$panel1.getBoundingClientRect();\n            if (this.$orientation === Orientation.horizontal) {\n                this.$ghostBar.style.left = '0';\n                if (this.$anchor === PanelAnchor.panel1)\n                    this.$ghostBar.style.top = (bnd.bottom - this.$elBounds.top) + 'px';\n                else\n                    this.$ghostBar.style.top = (bnd.top - this.$elBounds.top - this.$splitterWidth) + 'px';\n                this.$ghostBar.style.right = '0';\n                this.$ghostBar.style.bottom = '';\n                this.$ghostBar.style.width = '';\n                this.$ghostBar.style.height = this.$splitterWidth + 'px';\n                this.$ghostBar.style.cursor = 'ns-resize';\n            }\n            else {\n                if (this.$anchor === PanelAnchor.panel1)\n                    this.$ghostBar.style.left = (bnd.right - this.$elBounds.left) + 'px';\n                else\n                    this.$ghostBar.style.left = (bnd.left - this.$elBounds.left - this.$splitterWidth) + 'px';\n                this.$ghostBar.style.top = '0';\n                this.$ghostBar.style.bottom = '0';\n                this.$ghostBar.style.right = '';\n                this.$ghostBar.style.height = '';\n                this.$ghostBar.style.width = this.$splitterWidth + 'px';\n                this.$ghostBar.style.cursor = 'ew-resize';\n            }\n            (<any>this.$ghostBar).move = (ge) => {\n                let l;\n                if (this.$orientation === Orientation.horizontal && this.$anchor === PanelAnchor.panel1) {\n                    l = ge.pageY - this.$elBounds.top;\n                    if (l < this.$panel1MinSize + this.$splitterWidth)\n                        this.$ghostBar.style.top = this.$panel1MinSize + 'px';\n                    else if (l > this.parent.clientHeight - this.$panel2MinSize - this.$splitterWidth)\n                        this.$ghostBar.style.top = (this.parent.clientHeight - this.$panel2MinSize - this.$splitterWidth) + 'px';\n                    else\n                        this.$ghostBar.style.top = (l - 2) + 'px';\n                    if (this.live) {\n                        if (l < this.$panel1MinSize + this.$splitterWidth)\n                            this.SplitterDistance = this.$panel1MinSize + this.$splitterWidth;\n                        else if (l > this.parent.clientHeight - this.$panel2MinSize - this.$splitterWidth)\n                            this.SplitterDistance = this.parent.clientHeight - this.$panel2MinSize;\n                        else\n                            this.SplitterDistance = l - 2 + this.$splitterWidth;\n                    }\n                }\n                else if (this.$orientation === Orientation.horizontal) {\n                    l = ge.pageY - this.$elBounds.top;\n                    if (l < this.$panel1MinSize)\n                        this.$ghostBar.style.top = this.$panel1MinSize + 'px';\n                    else if (l > this.parent.clientHeight - this.$panel2MinSize)\n                        this.$ghostBar.style.top = (this.parent.clientHeight - this.$panel2MinSize) + 'px';\n                    else\n                        this.$ghostBar.style.top = (l - 2) + 'px';\n                    if (this.live) {\n                        if (l < this.$panel1MinSize)\n                            this.SplitterDistance = this.parent.clientHeight - this.$panel1MinSize;\n                        else if (l > this.parent.clientHeight - this.$panel2MinSize)\n                            this.SplitterDistance = this.$panel2MinSize;\n                        else\n                            this.SplitterDistance = this.parent.clientHeight - l + 2;\n                    }\n                }\n                else if (this.$orientation === Orientation.vertical && this.$anchor === PanelAnchor.panel1) {\n                    l = ge.pageX - this.$elBounds.left;\n                    if (l < this.$panel1MinSize + this.$splitterWidth)\n                        this.$ghostBar.style.left = this.$panel1MinSize + 'px';\n                    else if (l >= this.parent.clientWidth - this.$panel2MinSize - this.$splitterWidth)\n                        this.$ghostBar.style.left = (this.parent.clientWidth - this.$panel2MinSize - this.$splitterWidth) + 'px';\n                    else\n                        this.$ghostBar.style.left = (l - 2) + 'px';\n                    if (this.live) {\n                        if (l < this.$panel1MinSize + this.$splitterWidth)\n                            this.SplitterDistance = this.$panel1MinSize + this.$splitterWidth;\n                        else if (l >= this.parent.clientWidth - this.$panel2MinSize - this.$splitterWidth)\n                            this.SplitterDistance = this.parent.clientWidth - this.$panel2MinSize;\n                        else\n                            this.SplitterDistance = l - 2 + this.$splitterWidth;\n                    }\n                }\n                else {\n                    l = ge.pageX - this.$elBounds.left;\n                    if (l < this.$panel1MinSize)\n                        this.$ghostBar.style.left = this.$panel1MinSize + 'px';\n                    else if (l > this.parent.clientWidth - this.$panel2MinSize)\n                        this.$ghostBar.style.left = (this.parent.clientWidth - this.$panel2MinSize) + 'px';\n                    else\n                        this.$ghostBar.style.left = (l - 2) + 'px';\n                    if (this.live) {\n                        if (l < this.$panel1MinSize)\n                            this.SplitterDistance = this.parent.clientWidth - this.$panel1MinSize;\n                        else if (l > this.parent.clientWidth - this.$panel2MinSize)\n                            this.SplitterDistance = this.$panel2MinSize;\n                        else\n                            this.SplitterDistance = this.parent.clientWidth - l + 2;\n                    }\n                }\n                this.emit('splitter-moving', l);\n            };\n            this.parent.appendChild(this.$ghostBar);\n            document.addEventListener('mousemove', (<any>this.$ghostBar).move);\n        });\n        this.$dragBar.addEventListener('dblclick', (e) => {\n            this.emit('dblclick', e);\n        });\n        window.addEventListener('resize', () => {\n            this.resize();\n        });\n        document.addEventListener('mouseup', (e) => {\n            if (!this.$dragging) return;\n            e.preventDefault();\n            e.stopPropagation();\n            e.cancelBubble = true;\n            let l;\n            if (this.$orientation === Orientation.horizontal) {\n                l = e.pageY - this.$elBounds.top;\n                if (this.$anchor === PanelAnchor.panel1) {\n                    if (l < this.$panel1MinSize + this.$splitterWidth)\n                        this.SplitterDistance = this.$panel1MinSize + this.$splitterWidth;\n                    else if (l > this.parent.clientHeight - this.$panel2MinSize - this.$splitterWidth)\n                        this.SplitterDistance = this.parent.clientHeight - this.$panel2MinSize;\n                    else\n                        this.SplitterDistance = l - 2 + this.$splitterWidth;\n                }\n                else if (l < this.$panel1MinSize)\n                    this.SplitterDistance = this.parent.clientHeight - this.$panel1MinSize - 2;\n                else if (l > this.parent.clientHeight - this.$panel2MinSize)\n                    this.SplitterDistance = this.$panel2MinSize;\n                else\n                    this.SplitterDistance = this.parent.clientHeight - l + 2;\n            }\n            else {\n                l = e.pageX - this.$elBounds.left;\n                if (this.$anchor === PanelAnchor.panel1) {\n                    if (l < this.$panel1MinSize + this.$splitterWidth)\n                        this.SplitterDistance = this.$panel1MinSize + this.$splitterWidth;\n                    else if (l > this.parent.clientWidth - this.$panel2MinSize - this.$splitterWidth)\n                        this.SplitterDistance = this.parent.clientWidth - this.$panel2MinSize;\n                    else\n                        this.SplitterDistance = l - 2 + this.$splitterWidth;\n                }\n                else if (l < this.$panel1MinSize)\n                    this.SplitterDistance = this.parent.clientWidth - this.$panel1MinSize - 2;\n                else if (l > this.parent.clientWidth - this.$panel2MinSize)\n                    this.SplitterDistance = this.$panel2MinSize;\n                else\n                    this.SplitterDistance = this.parent.clientWidth - l + 2;\n            }\n            this.parent.removeChild(this.$ghostBar);\n            document.removeEventListener('mousemove', (<any>this.$ghostBar).move);\n            this.$ghostBar = null;\n            this.$dragging = false;\n        });\n        this.parent.appendChild(this.$el);\n        setTimeout(() => {\n            this.$elBounds = this.$el.getBoundingClientRect();\n        }, 10);\n\n        this.$resizeObserver = new ResizeObserver((entries, observer) => {\n            if (entries.length === 0) return;\n            if (!entries[0].contentRect || entries[0].contentRect.width === 0 || entries[0].contentRect.height === 0)\n                return;\n            if (!this.$resizeObserverCache || this.$resizeObserverCache.width !== entries[0].contentRect.width || this.$resizeObserverCache.height !== entries[0].contentRect.height) {\n                this.$resizeObserverCache = { width: entries[0].contentRect.width, height: entries[0].contentRect.height };\n                this.resize();\n            }\n        });\n        this.$resizeObserver.observe(this.$el);\n        this.$observer = new MutationObserver((mutationsList) => {\n            let mutation;\n            for (mutation of mutationsList) {\n                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n                    if (mutation.oldValue === 'display: none;')\n                        this.resize();\n                }\n            }\n        });\n        this.$observer.observe(this.$el, { attributes: true, attributeOldValue: true, attributeFilter: ['style'] });\n    }\n\n    public resize() {\n        if (this.$orientation === Orientation.horizontal && this.$anchor === PanelAnchor.panel1) {\n            if (this.$panel2.clientHeight && this.$panel2.clientHeight < this.$panel2MinSize && this.$panel1.clientHeight > this.$panel1MinSize)\n                this.SplitterDistance = this.parent.clientHeight - this.$panel2MinSize;\n        }\n        else if (this.$orientation === Orientation.horizontal) {\n            if (this.$panel1.clientHeight && this.$panel1.clientHeight < this.$panel1MinSize && this.$panel2.clientHeight > this.$panel2MinSize)\n                this.SplitterDistance = this.$panel1MinSize;\n        }\n        else if (this.$orientation === Orientation.vertical && this.$anchor === PanelAnchor.panel1) {\n            if (this.$panel2.clientWidth && this.$panel2.clientWidth < this.$panel2MinSize && this.$panel1.clientWidth > this.$panel1MinSize)\n                this.SplitterDistance = this.parent.clientWidth - this.$panel2MinSize;\n        }\n        else if (this.$panel1.clientWidth < this.$panel1MinSize && this.$panel2.clientWidth > this.$panel2MinSize)\n            this.SplitterDistance = this.$panel1MinSize;\n        this.$elBounds = this.$el.getBoundingClientRect();\n    }\n}\n", "//spell-checker:ignore displaytype, submenu, triggernewline, triggerprompt\nimport { clone, keyCodeToChar, SortItemArrayByPriority, splitQuoted, isValidIdentifier } from './library';\ndeclare let localforage;\n\nexport enum MacroModifiers {\n    None = 0,\n    Alt = 2,\n    Ctrl = 4,\n    Shift = 8,\n    Meta = 16,\n    All = Alt | Ctrl | Shift | Meta\n}\n\nexport enum ItemDisplayType {\n    Text = 0,\n    Function = 1\n}\n\nexport enum ItemStyle {\n    Text = 0,\n    Parse = 1,\n    Script = 2\n}\n\nexport enum TriggerType {\n    Regular = 0,\n    CommandInputRegular = 1,\n    Event = 2,\n    Alarm = 3,\n    Pattern = 8,\n    CommandInputPattern = 16,\n    Expression = 1 << 6,\n    LoopExpression = 1 << 7\n}\n\nexport enum TriggerTypes {\n    None = 0,\n    CommandInputRegular = 1,\n    Event = 2,\n    Regular = 4,\n    Pattern = 8,\n    CommandInputPattern = 16,\n    Alarm = 32,\n    Expression = 1 << 6,\n    LoopExpression = 1 << 7\n}\n\nexport enum SubTriggerTypes {\n    Skip = 1 << 9,\n    Wait = 1 << 10,\n    LoopPattern = 1 << 12,\n    LoopLines = 1 << 13,\n    Duration = 1 << 14,\n    WithinLines = 1 << 15,\n    Manual = 1 << 16,\n    ReParse = 1 << 17,\n    ReParsePattern = 1 << 18\n}\n\nexport enum VariableType {\n    Auto = 1,\n    Integer = 2,\n    StringExpanded = 3,\n    StringLiteral = 4,\n    StringList = 5,\n    Record = 6,\n    Float = 7,\n    Array = 8\n}\n\nexport function MacroDisplay(item: Macro) {\n    const d = [];\n    if (item.gamepad > 0) {\n        d.push('Gamepad ' + item.gamepad);\n        if (item.key > 0)\n            d.push('Button ' + item.key);\n        else if (item.gamepadAxes < 0)\n            d.push('Axis ' + -item.gamepadAxes);\n        else if (item.gamepadAxes > 0)\n            d.push('Axis ' + item.gamepadAxes);\n        if (d.length === 1)\n            return 'None';\n        return d.join('+');\n    }\n    if (item.key === 0) {\n        if (item.name && item.name.length > 0)\n            return 'None - ' + item.name;\n        return 'None';\n    }\n    if ((item.modifiers & MacroModifiers.Ctrl) === MacroModifiers.Ctrl)\n        d.push('Ctrl');\n    if ((item.modifiers & MacroModifiers.Alt) === MacroModifiers.Alt)\n        d.push('Alt');\n    if ((item.modifiers & MacroModifiers.Shift) === MacroModifiers.Shift)\n        d.push('Shift');\n    if ((item.modifiers & MacroModifiers.Meta) === MacroModifiers.Meta)\n        d.push('Meta');\n    if (keyCodeToChar[item.key])\n        d.push(keyCodeToChar[item.key]);\n    else if (item.name && item.name.length > 0)\n        return 'None - ' + item.name;\n    else\n        return 'None';\n    if (item.name && item.name.length > 0)\n        return d.join('+') + ' - ' + item.name;\n    return d.join('+');\n}\n\nexport class Alarm {\n    public parent: Trigger;\n    public pattern: string;\n    public temp: boolean = false;\n    public start: boolean = false;\n    public seconds: number = -1;\n    public secondsWildcard: boolean = true;\n    public hours: number = -1;\n    public hoursWildcard: boolean = true;\n    public minutes: number = -1;\n    public minutesWildcard: boolean = true;\n    public startTime: number;\n    public suspended: number = 0;\n    public restart: number = 0;\n    public tempTime: number;\n    public prevTime: number;\n\n    constructor(data?, pattern?) {\n        if (typeof data === 'string') {\n            pattern = data;\n            data = 0;\n        }\n        this.parent = data;\n        this.pattern = pattern;\n        this.startTime = Date.now();\n        this.prevTime = this.startTime;\n    }\n\n    public static parse(parent, pattern?: string, readOnly?: boolean): Alarm {\n        if (typeof parent === 'string') {\n            pattern = parent;\n            parent = 0;\n        }\n        if (!pattern || pattern.length === 0) {\n            if (typeof parent === 'object')\n                pattern = parent.pattern;\n            else\n                throw new Error('Blank pattern');\n        }\n        const t = new Alarm(parent, pattern);\n        while (pattern[0] === '-' || pattern[0] === '+') {\n            if (pattern[0] === '-')\n                t.start = true;\n            else if (pattern[0] === '+')\n                t.temp = true;\n            pattern = pattern.substr(1);\n        }\n        if (pattern !== '*') {\n            const parts = pattern.split(':');\n            let tmp;\n            if (parts.length === 0)\n                throw new Error('Invalid format: ' + pattern);\n            if (parts.length === 1) {\n                if (parts[0] === '*') {\n                    t.secondsWildcard = true;\n                    t.seconds = -1;\n                }\n                else {\n                    if (parts[0][0] === '*') {\n                        t.secondsWildcard = true;\n                        parts[0] = parts[0].substr(1);\n                    }\n                    else\n                        t.secondsWildcard = false;\n                    tmp = parseInt(parts[0], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[0]);\n                    if (tmp < 0)\n                        throw new Error('Seconds must be greater than or equal to 0.');\n                    else if (tmp > 59)\n                        t.secondsWildcard = true;\n                    t.seconds = tmp;\n                }\n            }\n            else if (parts.length === 2) {\n                if (parts[0] === '*') {\n                    t.minutesWildcard = true;\n                    t.minutes = -1;\n                }\n                else {\n                    if (parts[0][0] === '*') {\n                        t.minutesWildcard = true;\n                        parts[0] = parts[0].substr(1);\n                    }\n                    else\n                        t.minutesWildcard = false;\n                    tmp = parseInt(parts[0], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[0]);\n                    if (tmp < 0 || tmp > 59)\n                        throw new Error('Minutes can only be 0 to 59');\n                    t.minutes = tmp;\n                }\n                if (parts[1] === '*') {\n                    t.secondsWildcard = true;\n                    t.seconds = -1;\n                }\n                else {\n                    if (parts[1][0] === '*') {\n                        t.secondsWildcard = true;\n                        parts[1] = parts[1].substr(1);\n                    }\n                    else\n                        t.secondsWildcard = false;\n                    tmp = parseInt(parts[1], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[1]);\n                    if (tmp < 0 || tmp > 59)\n                        throw new Error('Seconds can only be 0 to 59');\n                    t.seconds = tmp;\n                }\n            }\n            else {\n                if (parts[0] === '*') {\n                    t.hoursWildcard = true;\n                    t.hours = -1;\n                }\n                else {\n                    if (parts[0][0] === '*') {\n                        t.hoursWildcard = true;\n                        parts[0] = parts[0].substr(1);\n                    }\n                    else\n                        t.hoursWildcard = false;\n                    tmp = parseInt(parts[0], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[0]);\n                    if (tmp < 0 || tmp > 23)\n                        throw new Error('Hours can only be 0 to 23');\n                    t.hours = tmp;\n                }\n                if (parts[1] === '*') {\n                    t.minutesWildcard = true;\n                    t.seconds = -1;\n                }\n                else {\n                    if (parts[1][0] === '*') {\n                        t.minutesWildcard = true;\n                        parts[1] = parts[1].substr(1);\n                    }\n                    else\n                        t.minutesWildcard = false;\n                    tmp = parseInt(parts[1], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[1]);\n                    if (tmp < 0 || tmp > 59)\n                        throw new Error('Minutes can only be 0 to 59');\n                    t.minutes = tmp;\n                }\n                if (parts[2] === '*') {\n                    t.secondsWildcard = true;\n                    t.seconds = -1;\n                }\n                else {\n                    if (parts[2][0] === '*') {\n                        t.secondsWildcard = true;\n                        parts[2] = parts[2].substr(2);\n                    }\n                    else\n                        t.secondsWildcard = false;\n                    tmp = parseInt(parts[2], 10);\n                    if (isNaN(tmp))\n                        throw new Error('Invalid Format: ' + parts[2]);\n                    if (tmp < 0 || tmp > 59)\n                        throw new Error('Seconds can only be 0 to 59');\n                    t.seconds = tmp;\n                }\n            }\n        }\n        if (readOnly)\n            t.temp = false;\n        return t;\n    }\n\n    public setTempTime(value: number) {\n        if (!value)\n            this.tempTime = 0;\n        else\n            this.tempTime = Date.now() + value;\n    }\n}\n\nexport class Item {\n    public name: string = '';\n    public priority: number = 0;\n    public display: string = 'name';\n    public displaytype: ItemDisplayType = ItemDisplayType.Text;\n    public value: string = '';\n    public style: ItemStyle = ItemStyle.Parse;\n    public group: string = '';\n    public enabled: boolean = true;\n    public notes: string = '';\n    public profile: Profile;\n\n    constructor(data?, profile?) {\n        if (typeof data === 'object') {\n            let prop;\n            for (prop in data) {\n                if (!data.hasOwnProperty(prop)) {\n                    continue;\n                }\n                this[prop] = data[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Item(this);\n    }\n}\n\nexport class Button extends Item {\n    public caption: string = '';\n    public icon: string = '';\n    public append: boolean = false;\n    public send: boolean = true;\n    public chain: boolean = false;\n    public stretch: boolean = false;\n    public parse: boolean = false;\n    public top: number = -1;\n    public left: number = -1;\n    public right: number = -1;\n    public bottom: number = -1;\n    public width: number = 64;\n    public height: number = 64;\n    public iconOnly: boolean = false;\n\n    constructor(data?, profile?) {\n        super(data);\n        this.caption = 'NewButton';\n        this.display = 'caption';\n        if (typeof data === 'object') {\n            let prop;\n            for (prop in data) {\n                if (!data.hasOwnProperty(prop)) {\n                    continue;\n                }\n                this[prop] = data[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Button(this);\n    }\n}\n\nexport class Macro extends Item {\n    public key: number = 0;\n    public append: boolean = false;\n    public send: boolean = true;\n    public modifiers: MacroModifiers = MacroModifiers.None;\n    public chain: boolean = false;\n    public gamepad: number = 0;\n    public gamepadAxes: number = 0;\n\n    constructor(data?, profile?) {\n        super();\n        this.display = 'return MacroDisplay(item)';\n        this.displaytype = ItemDisplayType.Function;\n        if (typeof data === 'object') {\n            let prop;\n            for (prop in data) {\n                if (!data.hasOwnProperty(prop)) {\n                    continue;\n                }\n                this[prop] = data[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Macro(this);\n    }\n}\n\nexport class Alias extends Item {\n    public pattern: string = 'NewAlias';\n    public regexp: boolean = false;\n    public multi: boolean = false;\n    public append: boolean = true;\n    public params: string = '';\n\n    constructor(pattern?: any, value?: string, profile?) {\n        super();\n        if (typeof pattern === 'string')\n            this.pattern = pattern;\n        if (value != null)\n            this.value = value;\n        this.display = 'pattern';\n        if (typeof pattern === 'object') {\n            let prop;\n            for (prop in pattern) {\n                if (!pattern.hasOwnProperty(prop)) {\n                    continue;\n                }\n                this[prop] = pattern[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Alias(this);\n    }\n}\n\nexport class Trigger extends Item {\n    public pattern: string = 'NewTrigger';\n    public verbatim: boolean = false;\n    public triggerNewline: boolean = true;\n    public triggerPrompt: boolean = false;\n    public type: TriggerType | SubTriggerTypes = TriggerType.Regular;\n    public temp: boolean = false;\n    public caseSensitive: boolean = false;\n    public raw: boolean = false;\n    public state: number = 0;\n    public params: string = '';\n    public triggers: Trigger[] = [];\n    public fired: boolean = false;\n\n    constructor(data?, profile?) {\n        super(data);\n        this.display = 'pattern';\n        if (typeof data === 'object') {\n            let prop;\n            for (prop in data) {\n                if (!data.hasOwnProperty(prop)) {\n                    continue;\n                }\n                if (prop === 'triggers') {\n                    this.triggers = [];\n                    const il = data.triggers.length;\n                    for (let i = 0; i < il; i++) {\n                        this.triggers.push(new Trigger(data.triggers[i]));\n                    }\n                }\n                else\n                    this[prop] = data[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Trigger(this);\n    }\n\n    public getState(state) {\n        if (state === 0)\n            return this;\n        state--;\n        if (state >= this.triggers.length || state < 0) return null;\n        return this.triggers[state];\n    }\n}\n\nexport class Context extends Item {\n    public caption: string = '';\n    public icon: string = '';\n    public append: boolean = false;\n    public send: boolean = true;\n    public chain: boolean = false;\n    public parent: string = '';\n    public items: Context[] = [];\n    public parse: boolean = false;\n    constructor(data?, profile?) {\n        super(data);\n        this.caption = 'NewContext';\n        this.display = 'caption';\n        if (typeof data === 'object') {\n            let prop;\n            for (prop in data) {\n                if (!data.hasOwnProperty(prop)) {\n                    continue;\n                }\n                if (prop === 'items') {\n                    let i = 0;\n                    const il = data[prop].length;\n                    for (; i < il; i++)\n                        this.items.push(new Context(data[prop][i]));\n                }\n                else\n                    this[prop] = data[prop];\n            }\n        }\n        this.profile = profile;\n    }\n\n    public clone() {\n        return new Context(this);\n    }\n}\n\nexport class Variable extends Item {\n    private _type: string = 'string';\n\n    public type: VariableType = VariableType.Auto;\n    public defaultValue: string = '';\n    public useDefault: boolean = false;\n    public params: string = '';\n\n    public set setValue(value: any) {\n        switch (this.type) {\n            case VariableType.Integer:\n                if (typeof value === 'string') {\n                    value = parseInt(value, 10);\n                    if (isNaN(value))\n                        value = 0;\n                }\n                else if (typeof value === 'boolean')\n                    value = value ? 1 : 0;\n                break;\n            case VariableType.Float:\n                if (typeof value === 'string') {\n                    value = parseFloat(value);\n                    if (isNaN(value))\n                        value = 0.0;\n                }\n                else if (typeof value === 'boolean')\n                    value = value ? 1.0 : 0.0;\n                break;\n        }\n        this.value = value;\n        this._type = typeof value;\n    }\n    public get getValue(): any {\n        switch (this.type) {\n            case VariableType.Auto:\n                if (typeof this.value !== this._type) {\n                    switch (this._type) {\n                        case 'number':\n                            return Number(this.value);\n                        case 'string':\n                            return this.value.toString();\n                        case 'boolean':\n                            return Boolean(this.value);\n                    }\n                }\n                return this.value;\n            case VariableType.Float:\n                return parseFloat(this.value);\n            case VariableType.Integer:\n                return parseInt(this.value, 10);\n            case VariableType.Record:\n                if (typeof this.value === 'string')\n                    try {\n                        return JSON.parse(this.value);\n                    }\n                    catch {\n                        return this.value;\n                    }\n                return this.value;\n            case VariableType.StringList:\n                if (typeof this.value === 'string')\n                    return splitQuoted(this.value, '|');\n                return this.value;\n        }\n        return this.value;\n    }\n\n    constructor(data?, profile?) {\n        super(data);\n        this.profile = profile;\n        if (this.useDefault)\n            this.setValue(this.defaultValue);\n    }\n\n    public clone() {\n        return new Variable(this);\n    }\n\n    public toString() {\n        switch (this.type) {\n            case VariableType.Record:\n                if (typeof this.value === 'string')\n                    return this.value;\n                return JSON.stringify(this.value);\n            case VariableType.StringList:\n                if (typeof this.value === 'string')\n                    return this.value;\n                return '\"' + (<any[]>this.value).join('\"|\"') + '\"';\n        }\n        return this.value?.toString();\n    }\n}\n\nexport class Profile {\n    public name: string = '';\n    public file: string = '';\n    public priority: number = 0;\n    public enabled: boolean = true;\n    public aliases: Alias[] = [];\n    public triggers: Trigger[] = [];\n    public macros: Macro[] = [];\n    public buttons: Button[] = [];\n    public contexts: Context[] = [];\n    public enableMacros: boolean = true;\n    public enableTriggers: boolean = true;\n    public enableAliases: boolean = true;\n    public enableButtons: boolean = true;\n    public enableContexts: boolean = true;\n    public enableDefaultContext: boolean = true;\n\n    constructor(name?: (string | boolean), defaults?: boolean) {\n        if (typeof name === 'string') {\n            this.name = name;\n            this.file = name.toLowerCase();\n            if (defaults == null || defaults)\n                this.macros = Profile.DefaultMacros;\n        }\n        else if (typeof name === 'boolean') {\n            if (name)\n                this.macros = Profile.DefaultMacros;\n        }\n        else if (defaults == null || defaults)\n            this.macros = Profile.DefaultMacros;\n    }\n\n    static get Default(): Profile {\n        return new Profile('Default');\n    }\n\n    static get DefaultMacros(): Macro[] {\n        const data = [\n            {\n                key: 97,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'sw',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'SouthWest',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 98,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 's',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'South',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 99,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'se',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'SouthEast',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 100,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'w',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'West',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 101,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'l',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'Look',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 102,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'e',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'East',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 103,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'nw',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'NorthWest',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 104,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'n',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'North',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            },\n            {\n                key: 105,\n                display: 'return MacroDisplay(item)',\n                displaytype: ItemDisplayType.Function,\n                value: 'ne',\n                style: ItemStyle.Parse,\n                append: false,\n                send: true,\n                name: 'NorthEast',\n                group: '',\n                enabled: true,\n                modifiers: MacroModifiers.None,\n                chain: true,\n                priority: 0,\n                notes: ''\n            }\n        ];\n        const m: Macro[] = [];\n        const dl = data.length;\n        for (let d = 0; d < dl; d++)\n            m.push(new Macro(data[d]));\n        return m;\n    }\n\n    static get DefaultButtons(): Button[] {\n        const buttons: Button[] = [];\n        let b;\n        b = new Button();\n        b.right = 176;\n        b.top = 14;\n        b.caption = 'fa-solid fa-angle-double-up';\n        b.value = 'up';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 124;\n        b.top = 14;\n        b.caption = 'fa-solid fa-caret-up,rotate--45';\n        b.value = 'northwest';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 72;\n        b.top = 14;\n        b.caption = 'fa-solid fa-caret-up';\n        b.value = 'north';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 20;\n        b.top = 14;\n        b.caption = 'fa-solid fa-caret-up,rotate-45';\n        b.value = 'northeast';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 176;\n        b.top = 66;\n        b.caption = 'fa-solid fa-crosshairs';\n        b.value = 'kill ${selected}';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 124;\n        b.top = 66;\n        b.caption = 'fa-solid fa-caret-left';\n        b.value = 'west';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 72;\n        b.top = 66;\n        b.caption = 'fa-solid fa-magnifying-glass';\n        b.value = 'look ${selected}';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 20;\n        b.top = 66;\n        b.caption = 'fa-solid fa-caret-right';\n        b.value = 'east';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 176;\n        b.top = 118;\n        b.caption = 'fa-solid fa-angle-double-down';\n        b.value = 'down';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 124;\n        b.top = 118;\n        b.caption = 'fa-solid fa-caret-down,rotate-45';\n        b.value = 'southwest';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 72;\n        b.top = 118;\n        b.caption = 'fa-solid fa-caret-down';\n        b.value = 'south';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        b = new Button();\n        b.right = 20;\n        b.top = 118;\n        b.caption = 'fa-solid fa-caret-down,rotate--45';\n        b.value = 'southeast';\n        b.width = 48;\n        b.height = 48;\n        buttons.push(b);\n        return buttons;\n    }\n\n    public static load(file) {\n        let profile;\n        let data;\n        if (typeof file === 'object')\n            data = file;\n        else\n            return new Profile();\n        profile = new Profile(false);\n        let prop;\n        for (prop in data) {\n            if (!data.hasOwnProperty(prop)) {\n                continue;\n            }\n            if (prop === 'aliases' || prop === 'triggers' || prop === 'macros' || prop === 'buttons' || prop === 'contexts' || prop === 'variables')\n                continue;\n            profile[prop] = data[prop];\n        }\n\n        let i;\n        let il;\n        if (data.aliases && data.aliases.length > 0) {\n            il = data.aliases.length;\n            for (i = 0; i < il; i++) {\n                profile.aliases.push(new Alias(data.aliases[i], null, profile));\n            }\n        }\n        if (data.triggers && data.triggers.length > 0) {\n            il = data.triggers.length;\n            for (i = 0; i < il; i++) {\n                profile.triggers.push(new Trigger(data.triggers[i], profile));\n            }\n        }\n        if (data.macros && data.macros.length > 0) {\n            il = data.macros.length;\n            profile.macros = [];\n            for (i = 0; i < il; i++) {\n                profile.macros.push(new Macro(data.macros[i], profile));\n            }\n        }\n        if (data.buttons && data.buttons.length > 0) {\n            il = data.buttons.length;\n            for (i = 0; i < il; i++) {\n                profile.buttons.push(new Button(data.buttons[i], profile));\n            }\n        }\n        if (data.contexts && data.contexts.length > 0) {\n            il = data.contexts.length;\n            for (i = 0; i < il; i++) {\n                profile.contexts.push(new Context(data.contexts[i], profile));\n            }\n        }\n        profile.file = profile.name;\n        return profile;\n    }\n\n    public clone(version?: number) {\n        let data;\n        let i;\n        let il;\n        if (version === 2) {\n            data = {\n                name: this.name,\n                priority: this.priority,\n                enabled: this.enabled,\n                aliases: [],\n                triggers: [],\n                macros: [],\n                buttons: [],\n                contexts: [],\n                enableMacros: this.enableMacros,\n                enableTriggers: this.enableTriggers,\n                enableAliases: this.enableAliases,\n                enableButtons: this.enableButtons,\n                enableContexts: this.enableContexts,\n                enableDefaultContext: this.enableDefaultContext\n            };\n\n            if (this.aliases.length > 0) {\n                il = this.aliases.length;\n                for (i = 0; i < il; i++) {\n                    data.aliases.push({\n                        pattern: this.aliases[i].pattern,\n                        value: this.aliases[i].value,\n                        priority: this.aliases[i].priority,\n                        regexp: this.aliases[i].regexp,\n                        style: this.aliases[i].style,\n                        multi: this.aliases[i].multi,\n                        append: this.aliases[i].append,\n                        name: this.aliases[i].name,\n                        group: this.aliases[i].group,\n                        enabled: this.aliases[i].enabled,\n                        params: this.aliases[i].params,\n                        display: this.aliases[i].display,\n                        notes: this.aliases[i].notes || ''\n                    });\n                }\n            }\n            if (this.triggers.length > 0) {\n                il = this.triggers.length;\n                for (i = 0; i < il; i++) {\n                    const t = {\n                        pattern: this.triggers[i].pattern,\n                        value: this.triggers[i].value,\n                        priority: this.triggers[i].priority,\n                        verbatim: this.triggers[i].verbatim,\n                        style: this.triggers[i].style,\n                        name: this.triggers[i].name,\n                        group: this.triggers[i].group,\n                        enabled: this.triggers[i].enabled,\n                        display: this.triggers[i].display,\n                        triggernewline: this.triggers[i].triggerNewline,\n                        caseSensitive: this.triggers[i].caseSensitive,\n                        triggerprompt: this.triggers[i].triggerPrompt,\n                        raw: this.triggers[i].raw,\n                        type: this.triggers[i].type,\n                        notes: this.triggers[i].notes || '',\n                        state: this.triggers[i].state || 0,\n                        params: this.triggers[i].params || '',\n                        triggers: []\n                    }\n                    if (this.triggers[i].triggers && this.triggers[i].triggers.length) {\n                        const sl = this.triggers[i].triggers.length;\n                        for (let s = 0; s < sl; s++) {\n                            t.triggers.push({\n                                pattern: this.triggers[i].triggers[s].pattern,\n                                value: this.triggers[i].triggers[s].value,\n                                priority: this.triggers[i].triggers[s].priority,\n                                verbatim: this.triggers[i].triggers[s].verbatim,\n                                style: this.triggers[i].triggers[s].style,\n                                name: this.triggers[i].triggers[s].name,\n                                group: this.triggers[i].triggers[s].group,\n                                enabled: this.triggers[i].triggers[s].enabled,\n                                display: this.triggers[i].triggers[s].display,\n                                triggernewline: this.triggers[i].triggers[s].triggerNewline,\n                                caseSensitive: this.triggers[i].triggers[s].caseSensitive,\n                                triggerprompt: this.triggers[i].triggers[s].triggerPrompt,\n                                raw: this.triggers[i].triggers[s].raw,\n                                type: this.triggers[i].triggers[s].type,\n                                notes: this.triggers[i].triggers[s].notes || '',\n                                state: this.triggers[i].triggers[s].state || 0,\n                                params: this.triggers[i].triggers[s].params || '',\n                                triggers: []\n                            });\n                        }\n                    }\n                    data.triggers.push(t);\n                }\n            }\n            if (this.macros.length > 0) {\n                il = this.macros.length;\n                for (i = 0; i < il; i++) {\n                    data.macros.push({\n                        key: this.macros[i].key,\n                        value: this.macros[i].value,\n                        style: this.macros[i].style,\n                        append: this.macros[i].append,\n                        send: this.macros[i].send,\n                        name: this.macros[i].name,\n                        group: this.macros[i].group,\n                        enabled: this.macros[i].enabled,\n                        display: 'if(item.key === 0) return \"None\"; return keyCodeToChar[item.key]',\n                        displaytype: 1,\n                        modifiers: this.macros[i].modifiers,\n                        chain: this.macros[i].chain,\n                        notes: this.macros[i].notes || ''\n                    });\n                }\n            }\n            if (this.buttons.length > 0) {\n                il = this.buttons.length;\n                for (i = 0; i < il; i++) {\n                    data.buttons.push(clone(this.buttons[i], (key, value) => {\n                        if (key === 'profile') return undefined;\n                        return value;\n                    }));\n                }\n            }\n            if (this.contexts.length > 0) {\n                il = this.contexts.length;\n                for (i = 0; i < il; i++) {\n                    data.contexts.push(clone(this.contexts[i], (key, value) => {\n                        if (key === 'profile') return undefined;\n                        return value;\n                    }));\n                }\n            }\n            return data;\n        }\n        data = clone(this, (key, value) => {\n            if (key === 'profile') return undefined;\n            return value;\n        });\n        const profile = new Profile(false);\n        let prop;\n        for (prop in data) {\n            if (!data.hasOwnProperty(prop)) {\n                continue;\n            }\n            if (prop === 'aliases' || prop === 'triggers' || prop === 'macros' || prop === 'buttons' || prop === 'contexts' || prop === 'variables')\n                continue;\n            profile[prop] = data[prop];\n        }\n\n        if (data.aliases && data.aliases.length > 0) {\n            il = data.aliases.length;\n            for (i = 0; i < il; i++) {\n                profile.aliases.push(new Alias(data.aliases[i], null, profile));\n            }\n        }\n        if (data.triggers && data.triggers.length > 0) {\n            il = data.triggers.length;\n            for (i = 0; i < il; i++) {\n                profile.triggers.push(new Trigger(data.triggers[i], profile));\n            }\n        }\n        if (data.macros && data.macros.length > 0) {\n            il = data.macros.length;\n            profile.macros = [];\n            for (i = 0; i < il; i++) {\n                profile.macros.push(new Macro(data.macros[i], profile));\n            }\n        }\n        if (data.buttons && data.buttons.length > 0) {\n            il = data.buttons.length;\n            for (i = 0; i < il; i++) {\n                profile.buttons.push(new Button(data.buttons[i], profile));\n            }\n        }\n        if (data.contexts && data.contexts.length > 0) {\n            il = data.contexts.length;\n            for (i = 0; i < il; i++) {\n                profile.contexts.push(new Context(data.contexts[i], profile));\n            }\n        }\n        return profile;\n    }\n\n    public find(type, field, value) {\n        let tmp;\n        if (!type || type.length === 0 || !this[type] || this[type].length === 0)\n            return null;\n        tmp = SortItemArrayByPriority(this[type]);\n        const l = tmp.length;\n        for (let t = 0; t < l; t++) {\n            if (tmp[t][field] === value)\n                return tmp[t];\n        }\n        return null;\n    }\n\n    public findAny(type, field, value?) {\n        let tmp;\n        if (!type || type.length === 0 || !this[type] || this[type].length === 0)\n            return null;\n        tmp = SortItemArrayByPriority(this[type]);\n        const l = tmp.length;\n        if (typeof field === 'object') {\n            for (let t = 0; t < l; t++) {\n                for (const v in field) {\n                    if (!field.hasOwnProperty(v)) continue;\n                    if (tmp[t][v] === field[v])\n                        return tmp[t];\n                }\n            }\n            return -1;\n        }\n        for (let t = 0; t < l; t++) {\n            if (tmp[t][field] === value)\n                return tmp[t];\n        }\n        return null;\n    }\n\n    public indexOfAny(type, field, value) {\n        let tmp;\n        if (!type || type.length === 0 || !this[type] || this[type].length === 0)\n            return null;\n        tmp = SortItemArrayByPriority(this[type]);\n        const l = tmp.length;\n        if (typeof field === 'object') {\n            for (let t = 0; t < l; t++) {\n                for (const v in field) {\n                    if (!field.hasOwnProperty(v)) continue;\n                    if (tmp[t][v] === field[v])\n                        return this[type].indexOf(tmp[t]);\n                }\n            }\n            return -1;\n        }\n        for (let t = 0; t < l; t++) {\n            if (tmp[t][field] === value)\n                return this[type].indexOf(tmp[t]);\n        }\n        return -1;\n    }\n\n    public indexOf(type, field, value) {\n        let tmp;\n        if (!type || type.length === 0 || !this[type] || this[type].length === 0)\n            return null;\n        tmp = SortItemArrayByPriority(this[type]);\n        const l = tmp.length;\n        if (typeof field === 'object') {\n            for (let t = 0; t < l; t++) {\n                for (const v in field) {\n                    if (!field.hasOwnProperty(v)) continue;\n                    if (tmp[t][v] !== field[v]) continue;\n                }\n                return this[type].indexOf(tmp[t]);\n            }\n            return -1;\n        }\n        for (let t = 0; t < l; t++) {\n            if (tmp[t][field] === value)\n                return this[type].indexOf(tmp[t]);\n        }\n        return -1;\n    }\n}\n\nexport class ProfileCollection {\n    public items = {};\n    public keys = [];\n\n    constructor(defaultProfile?: Profile) {\n        this.add(defaultProfile == null ? Profile.Default : defaultProfile);\n    }\n\n    public SortByPriority() {\n        this.keys.sort((a, b) => {\n            let ap = this.items[a].priority;\n            let bp = this.items[b].priority;\n            if (ap > bp)\n                return -1;\n            if (ap < bp)\n                return 1;\n            if (a === 'default')\n                return -1;\n            if (b === 'default')\n                return 1;\n            ap = this.items[a].name;\n            bp = this.items[b].name;\n            if (ap > bp)\n                return 1;\n            if (ap < bp)\n                return -1;\n            return 0;\n        });\n    }\n\n    public enabled(profile: (string | Profile)): boolean {\n        if (!profile || this.keys.length === 0) return false;\n        if (typeof profile === 'string') {\n            if (!this.items[profile.toLowerCase()])\n                return false;\n            return this.items[profile.toLowerCase()].enabled;\n        }\n        return this.items[profile.name.toLowerCase()] ? this.items[profile.name.toLowerCase()].enabled : false;\n    }\n\n    public contains(profile: (string | Profile)): boolean {\n        if (!profile || this.keys.length === 0) return false;\n        if (typeof profile === 'string')\n            return this.items[profile.toLowerCase()] ? true : false;\n        return this.items[profile.name.toLowerCase()] ? true : false;\n    }\n\n    public canDisable(profile: any) {\n        if (!profile || this.keys.length === 0) return false;\n        let idx: any;\n        if (typeof profile === 'number') {\n            if (profile < 0)\n                return false;\n            if (profile >= this.keys.length)\n                return false;\n            idx = this.keys[profile];\n        }\n        else if (typeof profile === 'object')\n            idx = profile.name.toLowerCase();\n        else if (typeof profile === 'string')\n            idx = profile.toLowerCase();\n        else\n            return false;\n\n        if (!this.items[idx]) return false;\n        const e = !this.items[idx].enabled;\n        if (!e) {\n            let c = false;\n            for (const key in this.items) {\n                if (key === idx) continue;\n                if (this.items[key].enabled) c = true;\n                break;\n            }\n            if (!c)\n                return false;\n        }\n        return true;\n    }\n\n    public toggle(profile: any) {\n        if (!profile || this.keys.length === 0) return false;\n        let idx: any;\n        if (typeof profile === 'number') {\n            if (profile < 0)\n                return false;\n            if (profile >= this.keys.length)\n                return false;\n            idx = this.keys[profile];\n        }\n        else if (typeof profile === 'object')\n            idx = profile.name.toLowerCase();\n        else if (typeof profile === 'string')\n            idx = profile.toLowerCase();\n        else\n            return false;\n\n        if (!this.items[idx]) return false;\n        const e = !this.items[idx].enabled;\n        if (!e) {\n            let c = false;\n            for (const key in this.items) {\n                if (key === idx) continue;\n                if (this.items[key].enabled) c = true;\n                break;\n            }\n            if (!c)\n                return false;\n        }\n        this.items[idx].enabled = e;\n        return true;\n    }\n\n    public update() {\n        this.keys = Object.keys(this.items);\n        this.SortByPriority();\n    }\n\n    public add(profile: Profile) {\n        if (!profile)\n            return;\n        this.items[profile.name.toLowerCase()] = profile;\n        this.update();\n    }\n\n    public remove(profile: (string | Profile | number)) {\n        if (!profile || this.keys.length === 0) return;\n        if (typeof profile === 'string')\n            delete this.items[profile.toLowerCase()];\n        else if (typeof profile === 'number') {\n            if (profile < 0 || profile >= this.keys.length) return;\n            delete this.items[this.keys[profile]];\n        }\n        else\n            delete this.items[profile.name.toLowerCase()];\n        this.update();\n    }\n\n    public copy(profile: (string | Profile | number)): (Profile | Profile[]) {\n        if (!profile) return clone(this.items);\n        if (this.keys.length === 0)\n            return null;\n        if (typeof profile === 'string') {\n            if (!this.items[profile.toLowerCase()])\n                return null;\n            return this.items[profile.toLowerCase()].clone();\n        }\n        if (typeof profile === 'number') {\n            if (profile < 0 || profile >= this.keys.length) return null;\n            return this.items[this.keys[profile]].clone();\n        }\n        return profile.clone();\n    }\n\n    public clone(version?: number): ProfileCollection | any {\n        if (version === 2) {\n            const profiles = {};\n            for (const p in this.items)\n                profiles[this.items[p].name.toLowerCase()] = this.items[p].clone(2);\n            return profiles;\n        }\n        const pc = new ProfileCollection();\n        for (const p in this.items)\n            pc.items[this.items[p].name.toLowerCase()] = this.items[p].clone();\n        pc.update();\n        return pc;\n    }\n\n    static load(key?) {\n        return new Promise((resolve, reject) => {\n            let collection = new ProfileCollection();\n            localforage.getItem(key || 'OoMUDProfiles').then(value => {\n                if (typeof value === 'string')\n                    value = JSON.parse(value);\n                if (!value)\n                    collection.add(Profile.Default);\n                else {\n                    const keys = Object.keys(value);\n                    let k = 0;\n                    let kl = keys.length;\n                    for (; k < kl; k++) {\n                        collection.add(Profile.load(value[keys[k]]));\n                    }\n                }\n                resolve(collection);\n            }).catch(reject);\n        })\n    }\n\n    public save(key?) {\n        return localforage.setItem(key || 'OoMUDProfiles', JSON.stringify(this.items, (key, value) => {\n            if (key === 'profile') return undefined;\n            return value;\n        }));\n    }\n\n    get length(): number {\n        return this.keys.length;\n    }\n\n    public count(): number { return this.keys.length; }\n\n    get active(): Profile {\n        const keys = this.keys;\n        //no profiles, add default and return\n        if (keys.length === 0) {\n            this.add(Profile.Default);\n            return this.items['default'];\n        }\n        //one profile\n        if (keys.length === 1) {\n            //profile is enabled\n            if (this.items[keys[0]].enabled)\n                return this.items[keys[0]];\n            //profile is default enable and return\n            if (this.items[keys[0]].name === 'Default') {\n                this.items[keys[0]].enable = true;\n                return this.items['default'];\n            }\n            //no default add one and return\n            this.add(Profile.Default);\n            return this.items['default'];\n        }\n        //search for first enabled profile\n        for (const key in keys) {\n            if (this.items[key].enabled)\n                return this.items[key];\n        }\n        //none found, see if default exist, if so enable and return\n        if (this.items['default']) {\n            this.items['default'].enabled = true;\n            return this.items['default'];\n        }\n        //no enabled or default, create and return\n        this.add(Profile.Default);\n        return this.items['default'];\n    }\n\n    get aliases(): Alias[] {\n        const keys = this.keys;\n        let tmp = [];\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return [];\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled || !this.items[keys[0]].enableAliases)\n                return [];\n            return this.items[keys[0]].aliases;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled || !this.items[keys[k]].enableAliases || this.items[keys[k]].aliases.length === 0)\n                continue;\n            tmp = tmp.concat(this.items[keys[k]].aliases);\n        }\n        return tmp;\n    }\n\n    get triggers(): Trigger[] {\n        const keys = this.keys;\n        let tmp = [];\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return [];\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled || !this.items[keys[0]].enableTriggers)\n                return [];\n            return this.items[keys[0]].triggers;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled || !this.items[keys[k]].enableTriggers || this.items[keys[k]].triggers.length === 0)\n                continue;\n            tmp = tmp.concat(this.items[keys[k]].triggers);\n        }\n        return tmp;\n    }\n\n    get macros(): Macro[] {\n        const keys = this.keys;\n        let tmp = [];\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return [];\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled || !this.items[keys[0]].enableMacros)\n                return [];\n            return this.items[keys[0]].macros;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled || !this.items[keys[k]].enableMacros || this.items[keys[k]].macros.length === 0)\n                continue;\n            tmp = tmp.concat(this.items[keys[k]].macros);\n        }\n        return tmp;\n    }\n\n    get buttons(): Button[] {\n        const keys = this.keys;\n        let tmp = [];\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return [];\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled || !this.items[keys[0]].enableButtons)\n                return [];\n            return this.items[keys[0]].buttons;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled || !this.items[keys[k]].enableButtons || this.items[keys[k]].buttons.length === 0)\n                continue;\n            tmp = tmp.concat(this.items[keys[k]].buttons);\n        }\n        return tmp;\n    }\n\n    get contexts(): Context[] {\n        const keys = this.keys;\n        let tmp = [];\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return [];\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled || !this.items[keys[0]].enableContexts)\n                return [];\n            return this.items[keys[0]].contexts;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled || !this.items[keys[k]].enableContexts || this.items[keys[k]].contexts.length === 0)\n                continue;\n            tmp = tmp.concat(this.items[keys[k]].contexts);\n        }\n        return tmp;\n    }\n\n    get defaultContext(): boolean {\n        const keys = this.keys;\n        let k = 0;\n        const kl = keys.length;\n        if (kl === 0) return true;\n        if (kl === 1) {\n            if (!this.items[keys[0]].enabled)\n                return true;\n            return this.items[keys[0]].enableDefaultContext;\n        }\n        for (; k < kl; k++) {\n            if (!this.items[keys[k]].enabled)\n                continue;\n            if (!this.items[keys[k]].enableDefaultContext)\n                return false;\n        }\n        return true;\n    }\n}\n\n/*\n*            match any number (even none) of characters or white space\n   .*\n?            match a single character\n   .\n%d            match any number of digits (0-9)\n   \\d*\n%n            match a number that starts with a + or - sign\n   [+|-]?\\d*\n%w            match any number of alpha characters (a-z) (a word)\n   \\w\n%a            match any number of alphanumeric characters (a-z,0-9)\n   [a-zA-Z0-9]*\n%s            match any amount of white space (spaces, tabs)\n   \\s*\n%x            match any amount of non-white space\n   \\S*\n%y            match any amount of non-white space (same as %x but matches start and end of line)\n   \\S*\n%p            match any punctuation\n   \\p{P}\n%q            match any punctuation (same as %p but matches start and end of line)\n   \\p{P}\n%t            match a direction command\n   ignore for now as i dont know what it does             \n%e            match ESC character for ansi patterns\n   \\e\n[range]      match any amount of characters listed in range\n   as is in .net\n^            force pattern to match starting at the beginning of the line\n   as is in .net\n$            force pattern to match ending at the end of the line\n   as is in .net\n(pattern)      save the matched pattern in a parameter %1 though %99\n   as is in .net\n~            quote the next character to prevent it to be interpreted as a wild card, required to match special characters\n   replace with \\                 \n~~            match a quote character verbatim\n   replace with \\\\ (not needed as ~ by itself is replaced with a \\\n{val1|val2|val3|...} match any of the specified strings can not use other wildcard inside this\n   remove {}\n@variable match any of the specified strings or keys\n    parsed and replaced with the variable value\n{^string}      do not match the specified string\n   [^string] replace {} with []\n&nn      matches exactly nn characters (fixed width pattern)\n   {nn} remove & and wrap in {}\n&VarName      assigns the matched string to the given variable (see below for more info)\n   (?<VarName>pattern ) research more, prob is varname can contain patterns so have to parse out name and patterns\n   probably best to pre-parse and get name / pattern then parse pattern separately in a recursive call\n%/regex/% matches the given Regular Expression\n%%function() runs any function\nhttp://forums.zuggsoft.com/modules/mx_kb/kb.php?mode=doc&page=3&refpage=3&a=cmud_Pattern_Match\n           */\nexport function convertPattern(pattern: string, client?) {\n    if (!pattern || !pattern.length) return '';\n    enum convertPatternState {\n        None = 0,\n        Ampersand = 1,\n        Percent = 2,\n        StringMatch = 3,\n        SubPattern = 4,\n        AmpersandPercent = 5,\n        AmpersandPattern = 6,\n        AmpersandRange = 7,\n        PercentRegex = 8,\n        Escape = 9,\n        Variable = 10\n    }\n    let state: convertPatternState = convertPatternState.None;\n    let stringBuilder = [];\n    let idx = 0;\n    let tl = pattern.length;\n    let c;\n    let i;\n    let arg;\n    let pat;\n    let nest = 0;\n    for (idx = 0; idx < tl; idx++) {\n        c = pattern.charAt(idx);\n        i = pattern.charCodeAt(idx);\n        switch (state) {\n            case convertPatternState.Ampersand:\n                if (arg.length === 0 && (c === '*' || c === '?' || c === '^' || c === '$'))\n                    pat = c;\n                else if (arg.length === 0 && c === '%')\n                    state = convertPatternState.AmpersandPercent;\n                else if (pat.length === 0 && c === '(') {\n                    pat = c;\n                    state = convertPatternState.AmpersandPattern;\n                }\n                else if (pat.length === 0 && c === '[') {\n                    pat = c;\n                    state = convertPatternState.AmpersandRange;\n                }\n                else if (c === '{')\n                    continue;\n                //end block or no longer valid varname character\n                else if (c === '}' || !((i >= 48 && i <= 57) || (i >= 65 && i <= 90) || (i >= 97 && i <= 122) || i === 95 || i === 36)) {\n                    if (!isValidIdentifier(arg))\n                        throw new Error('Invalid variable name');\n                    if (!pat.length && /^\\d+$/.exec(arg))\n                        stringBuilder.push('{', arg, '}');\n                    else if (!pat.length)\n                        stringBuilder.push('(?<', arg, '>.*)');\n                    else\n                        stringBuilder.push('(?<', arg, '>', convertPattern(pat), ')');\n                    if (c !== '}')\n                        idx--;\n                    state = convertPatternState.None;\n                }\n                else\n                    arg += c;\n                break;\n            case convertPatternState.AmpersandPercent:\n                pat += '%' + c;\n                state = convertPatternState.Ampersand;\n                break;\n            case convertPatternState.AmpersandPattern:\n                pat += c;\n                if (c === ')')\n                    state = convertPatternState.Ampersand;\n                break;\n            case convertPatternState.AmpersandRange:\n                pat += c;\n                if (c === ']')\n                    state = convertPatternState.Ampersand;\n                break;\n            case convertPatternState.Percent:\n                switch (c) {\n                    case 'd':\n                        stringBuilder.push(\"\\\\d+\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'n':\n                        stringBuilder.push(\"[+-]?\\\\d+\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'w':\n                        stringBuilder.push(\"\\\\w\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'a':\n                        stringBuilder.push(\"[a-zA-Z0-9]*\");\n                        state = convertPatternState.None;\n                        break;\n                    case 's':\n                        stringBuilder.push(\"\\\\s*\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'x':\n                        stringBuilder.push(\"\\\\S*\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'y':\n                        stringBuilder.push(\"\\\\S*\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'p':\n                        stringBuilder.push(\"[\\\\.\\\\?\\\\!\\\\:\\\\;\\\\-\\\\\u2014\\\\(\\\\)\\\\[\\\\]\\\\'\\\\\\\"\\\\\\\\/\\\\,]{1}\");\n                        state = convertPatternState.None;\n                        break;\n                    case 'q':\n                        stringBuilder.push(\"[\\\\.\\\\?\\\\!\\\\:\\\\;\\\\-\\\\\u2014\\\\(\\\\)\\\\[\\\\]\\\\'\\\\\\\"\\\\\\\\/\\\\,]{1}\");\n                        state = convertPatternState.None;\n                        break;\n                    case 't': //jiMUD does not support direction commands\n                        state = convertPatternState.None;\n                        break;\n                    case 'e':\n                        stringBuilder.push(\"\\x1b\");\n                        state = convertPatternState.None;\n                        break;\n                    case '/': // %/pattern/%\n                        state = convertPatternState.PercentRegex;\n                        arg = '';\n                        break;\n                }\n                break;\n            case convertPatternState.PercentRegex:\n                if (c === '%') {\n                    if (!arg.endsWith('/'))\n                        throw new Error('Invalid %/regex/% pattern');\n                    stringBuilder.push(arg.substr(0, arg.length - 1));\n                }\n                else\n                    arg += c;\n                break;\n            case convertPatternState.StringMatch:\n                if (c === '^' && arg.length === 0)\n                    pat = true;\n                else if (c === '}') {\n                    if (pat)\n                        stringBuilder.push('[^', arg, ']');\n                    else\n                        stringBuilder.push(arg);\n                    state = convertPatternState.None;\n                }\n                else\n                    arg += c;\n                break;\n            case convertPatternState.SubPattern:\n                if (c === ':') {\n                    stringBuilder.push('(?<', arg, '>');\n                    state = convertPatternState.None;\n                }\n                else if (c === ')') {\n                    stringBuilder.push('(', convertPattern(arg), ')');\n                    state = convertPatternState.None;\n                    nest--;\n                }\n                else\n                    arg += c;\n                break;\n            case convertPatternState.Escape:\n                stringBuilder.push('\\\\', c);\n                state = convertPatternState.None;\n                break;\n            case convertPatternState.Variable:\n                if (c === '{' && arg.length === 0)\n                    continue;\n                else if (c === '}' || !((i >= 48 && i <= 57) || (i >= 65 && i <= 90) || (i >= 97 && i <= 122) || i === 95 || i === 36)) {\n                    if (!isValidIdentifier(arg))\n                        throw new Error('Invalid variable name')\n                    if (client) {\n                        if (client.variables[arg] instanceof Variable)\n                            stringBuilder.push(client.variables[arg].value || '');\n                        else\n                            stringBuilder.push(client.variables[arg] || '');\n                    }\n                    if (c !== '}')\n                        idx--;\n                    state = convertPatternState.None;\n                }\n                else\n                    arg += c;\n                break;\n            default:\n                if (c === '*')\n                    stringBuilder.push('.*');\n                else if (c === '?')\n                    stringBuilder.push('.');\n                else if (c === '~')\n                    state = convertPatternState.Escape;\n                else if (c === '@') {\n                    state = convertPatternState.Variable;\n                    arg = '';\n                }\n                else if (c === '&') {\n                    arg = '';\n                    pat = '';\n                    state = convertPatternState.Ampersand;\n                }\n                else if (c === '%')\n                    state = convertPatternState.Percent;\n                else if (c === '{') {\n                    state = convertPatternState.StringMatch;\n                    arg = '';\n                }\n                else if (c === '(') {\n                    state = convertPatternState.SubPattern;\n                    arg = '';\n                    nest++;\n                }\n                else {\n                    if (c === ')')\n                        nest--;\n                    stringBuilder.push(c);\n                }\n                break;\n        }\n    }\n    switch (state) {\n        case convertPatternState.Ampersand:\n            if (!isValidIdentifier(arg))\n                throw new Error('Invalid variable name');\n            if (!pat.length && /^\\d+$/.exec(arg))\n                stringBuilder.push('{', arg, '}');\n            else if (!pat.length)\n                stringBuilder.push('(?<', arg, '>.*)');\n            else\n                stringBuilder.push('(?<', arg, '>', convertPattern(pat), ')');\n            break;\n        case convertPatternState.AmpersandPercent:\n        case convertPatternState.AmpersandPattern:\n        case convertPatternState.AmpersandRange:\n            throw new Error('Invalid &VarName pattern');\n        case convertPatternState.Percent:\n            throw new Error('Invalid % pattern');\n        case convertPatternState.PercentRegex:\n            throw new Error('Invalid %/regex/% pattern');\n        case convertPatternState.StringMatch:\n            throw new Error('Invalid string match pattern');\n        case convertPatternState.SubPattern:\n            throw new Error('Invalid (sub:pattern) pattern');\n        case convertPatternState.Escape:\n            throw new Error('Invalid escape pattern');\n        case convertPatternState.Variable:\n            if (!isValidIdentifier(arg))\n                throw new Error('Invalid variable name');\n            if (client) {\n                if (client.variables[arg] instanceof Variable)\n                    stringBuilder.push(client.variables[arg].getValue() || '');\n                else\n                    stringBuilder.push(client.variables[arg] || '');\n            }\n            break;\n    }\n    if (nest)\n        throw new Error('Invalid save matched pattern');\n    return stringBuilder.join('');\n}", "import \"../css/nav.css\";\r\nimport \"../css/profiles.css\";\r\nimport { Dialog, DialogButtons, DialogIcon } from \"./dialog\";\r\nimport { Splitter, Orientation, PanelAnchor } from \"./splitter\";\r\nimport { capitalize, openFileDialog, readFile, keyCodeToChar, keyCharToCode, scrollChildIntoView, debounce, FilterArrayByKeyValue, htmlEncode } from '../library';\r\nimport { removeHash, updateHash } from \"./interface\";\r\nimport { ProfileCollection, MacroDisplay, Profile, Alias, Trigger, Button, Macro, Context } from \"../profile\";\r\n\r\ndeclare let confirm_box;\r\ndeclare let fileSaveAs;\r\ndeclare let alert_box;\r\n\r\nexport class ProfilesDialog extends Dialog {\r\n    private _menu;\r\n    private _contents;\r\n    private _splitter;\r\n    private _page;\r\n    private _contentPage;\r\n    public profiles: ProfileCollection;\r\n    private _profilesChanged = false;\r\n    private _errorField;\r\n    private _current = {\r\n        profile: null,\r\n        profileName: '',\r\n        item: null,\r\n        parent: null,\r\n        itemIdx: -1,\r\n        collection: '',\r\n        itemSubIdx: -1\r\n    }\r\n    private _canClose: boolean = false;\r\n    private _small: boolean = false;\r\n\r\n    public set errorField(value) {\r\n        this._errorField = value;\r\n    }\r\n    public get errorField() { return this._errorField; }\r\n\r\n    public get current() { return this._current; }\r\n\r\n    public set changed(value) {\r\n        if (value === this._profilesChanged) return;\r\n        this._profilesChanged = value;\r\n        this.footer.querySelector(`#${this.id}-save`).disabled = !value;\r\n        this.footer.querySelector(`#${this.id}-apply`).disabled = !value;\r\n\r\n    }\r\n    public get changed() { return this._profilesChanged }\r\n\r\n    public get contents() { return this._contents; }\r\n\r\n    constructor() {\r\n        super(Object.assign({}, client.getOption('windows.profiles') || { center: true }, { title: 'i class=\"fas fa-users\"></i> Profiles', minWidth: 410 }));\r\n        this.on('resized', e => {\r\n            if (e.width < 430) {\r\n                if (this._small) return;\r\n                const item = this.header.querySelector('.breadcrumb');\r\n                item.classList.add('breadcrumb-sm');\r\n                this._small = true;\r\n            }\r\n            else if (this._small) {\r\n                const item = this.header.querySelector('.breadcrumb');\r\n                item.classList.remove('breadcrumb-sm');\r\n                this._small = false;\r\n            }\r\n            client.setOption('windows.profiles', e);\r\n        })\r\n        client.on('profiles-loaded', () => {\r\n            if (!this.profiles) {\r\n                this.profiles = client.profiles.clone();\r\n                this.profiles.SortByPriority();\r\n                this._buildMenu();\r\n            }\r\n        });\r\n        client.on('profiles-updated', () => {\r\n\r\n        });\r\n        client.on('initialized', () => {\r\n            if (!this.profiles) {\r\n                this.profiles = client.profiles.clone();\r\n                this.profiles.SortByPriority();\r\n                this._buildMenu();\r\n            }\r\n        });\r\n        this.body.style.padding = '10px';\r\n        this._splitter = new Splitter({ id: 'profile', parent: this.body, orientation: Orientation.vertical, anchor: PanelAnchor.panel1 });\r\n        if(client.getOption('profiles.split') >= 200)\r\n            this._splitter.SplitterDistance = client.getOption('profiles.split');\r\n        this._splitter.on('splitter-moved', distance => {\r\n            client.setOption('profiles.split', distance);\r\n        })\r\n        this._menu = this._splitter.panel1;\r\n        this._menu.style.overflow = 'hidden';\r\n        this._menu.style.overflowY = 'auto';\r\n        this._contents = this._splitter.panel2;\r\n        this._contents.style.overflow = 'auto';\r\n        this._contents.style.padding = '10px';\r\n        this._contents.style.paddingLeft = '14px';\r\n        if (client.profiles) {\r\n            this.profiles = client.profiles.clone();\r\n            this.profiles.SortByPriority();\r\n            this._buildMenu();\r\n        }\r\n        let footer = '';\r\n        footer += `<button id=\"${this.id}-back\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Go back\"><i class=\"bi bi-arrow-left\"></i><span class=\"icon-only\"> Back</span></button>`;\r\n        footer += `<button id=\"btn-profile-menu\" class=\"btn-sm float-start btn btn-outline-secondary\" type=\"button\" aria-controls=\"profile-menu\" title=\"Show menu\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" style=\"margin-right: 4px;\"><i class=\"fa-solid fa-bars\"></i></button>`;\r\n        footer += `<ul id=\"${this.id}-dropdown-menu\" class=\"dropdown-menu\" style=\"overflow: auto;\">`;\r\n        footer += `<li id=\"${this.id}-add-profile\"><a class=\"dropdown-item\">Add profile</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-empty-profile\"><a class=\"dropdown-item\">Add empty profile</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-sep\"><hr class=\"dropdown-divider\"></li>`;\r\n        footer += `<li id=\"${this.id}-add-alias\"><a class=\"dropdown-item\">Add alias</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-macro\"><a class=\"dropdown-item\">Add macro</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-trigger\"><a class=\"dropdown-item\">Add trigger</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-button\"><a class=\"dropdown-item\">Add button</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-sep2\"><hr class=\"dropdown-divider\"></li>`;\r\n        footer += `<li id=\"${this.id}-add-default-buttons\"><a class=\"dropdown-item\">Add default buttons</a></li>`;\r\n        footer += `<li id=\"${this.id}-add-default-macros\"><a class=\"dropdown-item\">Add default macros</a></li>`;\r\n        footer += '<li><hr class=\"dropdown-divider\"></li>';\r\n        footer += `<li id=\"${this.id}-export-current\"><a class=\"dropdown-item\">Export current profile</a></li>`;\r\n        footer += `<li id=\"${this.id}-export\"><a class=\"dropdown-item\">Export profiles</a></li>`;\r\n        footer += `<li id=\"${this.id}-import\"><a class=\"dropdown-item\">Import profiles</a></li>`;\r\n        footer += '<li><hr class=\"dropdown-divider\"></li>';\r\n        footer += `<li id=\"${this.id}-refresh\"><a class=\"dropdown-item\">Refresh</a></li>`;\r\n        footer += '</ul>';\r\n        footer += '<span id=\"profile-page-buttons\"></span>';\r\n        footer += `<button id=\"${this.id}-cancel\" type=\"button\" class=\"btn-sm float-end btn btn-light\" title=\"Close dialog\"><i class=\"bi bi-x-lg\"></i><span class=\"icon-only\"> Cancel</span></button>`;\r\n        footer += `<button id=\"${this.id}-save\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Save changes\" disabled><i class=\"bi bi-save\"></i><span class=\"icon-only\"> Save</span></button>`;\r\n        footer += `<button id=\"${this.id}-apply\" type=\"button\" class=\"btn-sm float-end btn btn-secondary\" title=\"Apply changes\" disabled><i class=\"bi bi-check-lg\"></i><span class=\"icon-only\"> Apply</span></button>`;\r\n        this.footer.innerHTML = footer;\r\n        this.footer.classList.add('dropup');\r\n        $('#btn-profile-menu').on('shown.bs.dropdown', () => {\r\n            setTimeout(() => {\r\n                let el = this.footer.querySelector('#' + this.id + '-dropdown-menu');\r\n                let rect = el.getBoundingClientRect();\r\n                if (rect.y < 10)\r\n                    el.style.height = (rect.height + rect.y - 10) + 'px';\r\n                if (rect.bottom > document.body.clientHeight - 10)\r\n                    el.style.height = (document.body.clientHeight - rect.y - 10) + 'px';\r\n            }, 0);\r\n        })\r\n        $('#btn-profile-menu').on('hidden.bs.dropdown', () => {\r\n            let el = this.footer.querySelector('#' + this.id + '-dropdown-menu');\r\n            el.style.height = '';\r\n        });\r\n        this.footer.querySelector(`#${this.id}-cancel`).addEventListener('click', () => {\r\n            removeHash(this._page);\r\n            this.close();\r\n        });\r\n        this.footer.querySelector(`#${this.id}-back`).addEventListener('click', () => {\r\n            this._goBack();\r\n        });\r\n        this.on('closed', () => {\r\n            client.setOption('windows.profiles', this.windowState);\r\n            removeHash(this._page);\r\n        });\r\n        this.on('canceled', () => {\r\n            client.setOption('windows.profiles', this.windowState);\r\n            removeHash(this._page);\r\n        });\r\n        this.on('moved', e => {\r\n            client.setOption('windows.profiles', e);\r\n        })\r\n        this.on('maximized', () => {\r\n            client.setOption('windows.profiles', this.windowState);\r\n        });\r\n        this.on('restored', () => {\r\n            client.setOption('windows.profiles', this.windowState);\r\n        });\r\n        this.on('shown', () => {\r\n            client.setOption('windows.profiles', this.windowState);\r\n        });        \r\n        this.footer.querySelector(`#${this.id}-add-profile a`).addEventListener('click', () => {\r\n            this._createProfile(true);\r\n        });\r\n\r\n        this.footer.querySelector(`#${this.id}-add-empty-profile a`).addEventListener('click', () => {\r\n            this._createProfile(false);\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-alias a`).addEventListener('click', () => {\r\n            this._addItem('aliases');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-macro a`).addEventListener('click', () => {\r\n            this._addItem('macros');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-trigger a`).addEventListener('click', () => {\r\n            this._addItem('triggers');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-button a`).addEventListener('click', () => {\r\n            this._addItem('buttons');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-default-buttons a`).addEventListener('click', () => {\r\n            const items = Profile.DefaultButtons;\r\n            let il = items.length;\r\n            for (let i = 0; i < il; i++)\r\n                this._addItem('buttons', items[i]);\r\n\r\n        });\r\n        this.footer.querySelector(`#${this.id}-add-default-macros a`).addEventListener('click', () => {\r\n            const items = Profile.DefaultMacros;\r\n            let il = items.length;\r\n            for (let i = 0; i < il; i++)\r\n                this._addItem('macros', items[i]);\r\n        });\r\n        this.footer.querySelector(`#${this.id}-export-current a`).addEventListener('click', () => {\r\n            const data = {\r\n                version: 2, profiles: {}\r\n            };\r\n            data.profiles[this._current.profileName] = this._current.profile.clone(2);\r\n            fileSaveAs.show(JSON.stringify(data), `oiMUD.${this._current.profileName}.txt`, 'text/plain');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-export a`).addEventListener('click', () => {\r\n            const data = {\r\n                version: 2, profiles: this.profiles.clone(2)\r\n            };\r\n            fileSaveAs.show(JSON.stringify(data), 'oiMUD.profiles.txt', 'text/plain');\r\n        });\r\n        this.footer.querySelector(`#${this.id}-import a`).addEventListener('click', () => {\r\n            openFileDialog('Import profile(s)').then(files => {\r\n                readFile(files[0]).then((contents: any) => {\r\n                    try {\r\n                        var data = JSON.parse(contents);\r\n                        if (data.version == 2) {\r\n                            if (data.profiles) {\r\n                                var keys = Object.keys(data.profiles);\r\n                                var n, i, k = 0, kl = keys.length;\r\n                                for (; k < kl; k++) {\r\n                                    n = keys[k];\r\n                                    i = 0;\r\n                                    while (this.profiles.contains(n)) {\r\n                                        if (i === 0)\r\n                                            n = keys[k] + ' Copy';\r\n                                        else\r\n                                            n = keys[k] + ' Copy (' + i + ')';\r\n                                        i++;\r\n                                    }\r\n                                    //set the new name\r\n                                    data.profiles[keys[k]].name = n;\r\n                                    //load the profile\r\n                                    const p = Profile.load(data.profiles[keys[k]]);\r\n                                    //add to collection\r\n                                    this.profiles.add(p);\r\n                                }\r\n                                //no profiles so just bail\r\n                                if (kl === 0) return;\r\n                                this.changed = true;\r\n                                //rebuild the menu as could have added multiple profiles or not and this ensures ordered correctly by priority\r\n                                this._buildMenu();\r\n                                //reselect current item\r\n                                this._expandPath(this._page);\r\n                            }\r\n                        }\r\n                        else\r\n                            setTimeout(function () {\r\n                                alert_box('Invalid file', 'Unable to import file, not a valid profile file', DialogIcon.exclamation)\r\n                            }, 50);\r\n                    }\r\n                    catch (err) {\r\n                        setTimeout(function () {\r\n                            alert_box('Error importing', 'Error importing file.', DialogIcon.error);\r\n                        }, 50);\r\n                        client.error(err);\r\n                    }\r\n                }).catch(client.error);\r\n            }).catch(() => { });\r\n        });\r\n        this.footer.querySelector(`#${this.id}-refresh a`).addEventListener('click', () => {\r\n            this._buildMenu();\r\n            this.setBody(this._page);\r\n        });\r\n\r\n        this.footer.querySelector(`#${this.id}-save`).addEventListener('click', () => {\r\n            if (this._errorField) {\r\n                this._errorField.focus();\r\n                return;\r\n            }\r\n            this._save();\r\n            this.close();\r\n        });\r\n        this.footer.querySelector(`#${this.id}-apply`).addEventListener('click', () => {\r\n            if (this._errorField) {\r\n                this._errorField.focus();\r\n                return;\r\n            }\r\n            this._save();\r\n        });\r\n    }\r\n\r\n    private _getItem(collection, index, idPrefix, hrefPrefix, indent?) {\r\n        if (!collection || collection.length === 0) return '';\r\n        let menu = '';\r\n        indent = indent || 0;\r\n        let padding = indent * 20 + 16;\r\n        menu += `<li class=\"nav-item\" title=\"${htmlEncode(GetDisplay(collection[index]))}\" id=\"${idPrefix + '-' + (collection[index].useName ? this.sanitizeID(collection[index].name.toLowerCase()) : index)}\">`;\r\n        if (collection[index].items && collection[index].items.length) {\r\n            menu += `<a style=\"padding-left: ${padding}px\" class=\"nav-link text-dark\" href=\"#${hrefPrefix}/${encodeURIComponent(collection[index].name.toLowerCase())}\"><i class=\"align-middle float-start bi bi-chevron-right\"></i> <input data-page=\"${hrefPrefix}/${encodeURIComponent(collection[index].name.toLowerCase())}\" type=\"checkbox\" class=\"form-check-input\" id=\"enabled-${idPrefix}-${this.sanitizeID(collection[index].name.toLowerCase())}\"${collection[index].enabled ? ' checked' : ''}> ${htmlEncode(GetDisplay(collection[index]))}</a>`;\r\n            menu += this._getItems(collection[index].items, idPrefix + '-' + this.sanitizeID(collection[index].name.toLowerCase()), hrefPrefix + '/' + encodeURIComponent(collection[index].name.toLowerCase()), indent + 1);\r\n        }\r\n        else if (collection[index].useName)\r\n            menu += `<a style=\"padding-left: ${padding}px\" class=\"nav-link text-dark \" href=\"#${hrefPrefix}/${encodeURIComponent(collection[index].name.toLowerCase())}\"><i class=\"align-middle float-start no-icon\"></i> <input data-page=\"${hrefPrefix}/${encodeURIComponent(collection[index].name.toLowerCase())}\" type=\"checkbox\" class=\"form-check-input\" id=\"enabled-${idPrefix}-${this.sanitizeID(collection[index].name.toLowerCase())}\"${collection[index].enabled ? ' checked' : ''}> ${htmlEncode(GetDisplay(collection[index]))}</a>`;\r\n        else\r\n            menu += `<a style=\"padding-left: ${padding}px\" class=\"nav-link text-dark\" href=\"#${hrefPrefix}/${index}\"><i class=\"align-middle float-start no-icon\"></i><input type=\"checkbox\" class=\"form-check-input\" data-page=\"${hrefPrefix}/${index}\" id=\"enabled-${idPrefix}-${index}\"${collection[index].enabled ? ' checked' : ''}> ${htmlEncode(GetDisplay(collection[index]))}</a>`;\r\n        menu += '</li>';\r\n        return menu;\r\n    }\r\n\r\n    private _getItems(collection, idPrefix, hrefPrefix, indent?) {\r\n        if (!collection || collection.length === 0) return '';\r\n        let menu = '';\r\n        for (let c = 0, cl = collection.length; c < cl; c++) {\r\n            menu += this._getItem(collection, c, idPrefix, hrefPrefix, indent);\r\n        }\r\n        return '<ul class=\"dropdown-menu dropdown-inline\">' + menu + '</ul>';\r\n    }\r\n\r\n    private _buildMenu() {\r\n        let nav = '';\r\n        for (let k = 0, kl = this.profiles.keys.length; k < kl; k++) {\r\n            nav += this._profile(this.profiles.keys[k]);\r\n        }\r\n        this._menu.innerHTML = '<ul class=\"nav\" id=\"profile-menu\">' + nav + '</ul>'\r\n        let items = this._menu.querySelectorAll('a');\r\n        for (let i = 0, il = items.length; i < il; i++) {\r\n            this._profileEvents(items[i]);\r\n        }\r\n    }\r\n\r\n    private _profileEvents(item) {\r\n        let items = item.querySelectorAll('.bi-chevron-right');\r\n        let i, il;\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].addEventListener('click', e => {\r\n                e.target.closest('li').querySelector('.dropdown-menu').classList.toggle('show');\r\n                e.target.classList.toggle('bi-chevron-right');\r\n                e.target.classList.toggle('bi-chevron-down');\r\n                //e.stopPropagation();\r\n                //e.cancelBubble = true;\r\n                e.preventDefault();\r\n            });\r\n        items = item.querySelectorAll('input');\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].addEventListener('change', e => {\r\n                const data = e.target.dataset.page.split('/');\r\n                const value = e.target.checked;\r\n                switch (data.length) {\r\n                    case 2:\r\n                        if (!value && this.profiles.keys.filter(k => this.profiles.enabled(k)).length === 1) {\r\n                            alert_box('Cannot disable', 'One profile must always be enabled.');\r\n                            e.target.checked = true;\r\n                            return;\r\n                        }\r\n                        this._menu.querySelector(`#enabled-${this.sanitizeID(data[1])}`).checked = value;\r\n                        this._menu.querySelector(`#enabled-${this.sanitizeID(data[1])}-switch`).checked = value;\r\n                        if (this._page === e.target.dataset.page)\r\n                            this._contents.querySelector('#enabled').checked = value;\r\n                        this.profiles.items[data[1]].enabled = value;\r\n                        this.changed = true;\r\n                        break;\r\n                    case 3:\r\n                        this._menu.querySelector(`#enabled-${this.sanitizeID(data[1])}-${data[2]}`).checked = value;\r\n                        if (this._page === `profiles/${data[1]}`)\r\n                            this._contents.querySelector('#enable' + capitalize(data[2])).checked = value;\r\n                        this.profiles.items[data[1]]['enable' + capitalize(data[2])] = value;\r\n                        this.changed = true;\r\n                        break;\r\n                    case 4:\r\n                        this._menu.querySelector(`#enabled-${this.sanitizeID(data[1])}-${data[2]}-${data[3]}`).checked = value;\r\n                        if (this._page === e.target.dataset.page)\r\n                            this._contents.querySelector('#enabled').checked = value;\r\n                        else if (this._page === `profiles/${data[1]}/${data[2]}`)\r\n                            this._contents.querySelector('#check-' + data[3]).checked = value;\r\n                        this.profiles.items[data[1]][data[2]][+data[3]].enabled = value;\r\n                        this.changed = true;\r\n                        break;\r\n                }\r\n                e.stopPropagation();\r\n                e.cancelBubble = true;\r\n            });\r\n        items = item.querySelectorAll('.list-badge-button');\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].addEventListener('click', (e: MouseEvent) => {\r\n                this._deleteProfile((e.target as HTMLElement).parentElement.dataset.profile);\r\n                e.preventDefault();\r\n            });\r\n    }\r\n\r\n    public _profile(profile) {\r\n        let nav = `<li class=\"nav-item\" data-profile=\"${profile}\" title=\"${capitalize(profile)}\" id=\"${this.sanitizeID(profile)}\">`;\r\n        nav += `<a class=\"nav-link text-dark\" href=\"#profiles/${encodeURIComponent(profile)}\">`;\r\n        if (profile !== 'default')\r\n            nav += `<span class=\"list-badge-button badge text-bg-danger\" data-profile=\"${profile}\"><i class=\"bi bi-trash\"></i></span>`;\r\n        nav += `<i class=\"align-middle float-start bi bi-chevron-right\"></i> `;\r\n        nav += this._item(capitalize(profile), 'enabled-' + profile, this.profiles.items[profile].enabled);\r\n        nav += `</a>`;\r\n        nav += this._getItems([{\r\n            name: 'Aliases',\r\n            items: this.profiles.items[profile].aliases,\r\n            useName: true,\r\n            enabled: this.profiles.items[profile].enableAliases,\r\n        },\r\n        {\r\n            name: 'Macros',\r\n            items: this.profiles.items[profile].macros,\r\n            useName: true,\r\n            enabled: this.profiles.items[profile].enableMacros\r\n        },\r\n        {\r\n            name: 'Triggers',\r\n            items: this.profiles.items[profile].triggers,\r\n            useName: true,\r\n            enabled: this.profiles.items[profile].enableTriggers\r\n        },\r\n        {\r\n            name: 'Buttons',\r\n            items: this.profiles.items[profile].buttons,\r\n            useName: true,\r\n            enabled: this.profiles.items[profile].enableButtons\r\n        }], this.sanitizeID(profile), 'profiles/' + encodeURIComponent(profile), 1);\r\n        nav += '</li>';\r\n        return nav;\r\n    }\r\n\r\n    public _item(title, id, enabled) {\r\n        return `<span><input type=\"checkbox\" data-page=\"profiles/${title.toLowerCase()}\" class=\"form-check-input\" id=\"${this.sanitizeID(id)}\"${enabled ? ' checked' : ''}> ${title}</span><div class=\"form-check form-switch\"><input type=\"checkbox\" class=\"form-check-input\" id=\"${id}-switch\"${enabled ? ' checked' : ''}> ${title}</div>`;\r\n    }\r\n\r\n    public setBody(contents: string, args?: any) {\r\n        if (!this.profiles) {\r\n            setTimeout(() => {\r\n                this.setBody(contents, args);\r\n            }, 100);\r\n            return;\r\n        }\r\n        if (this._errorField) {\r\n            setTimeout(() => this._errorField.focus(), 100);\r\n            window.location.hash = this._page;\r\n            return;\r\n        }\r\n        /*\r\n        args = args || {};\r\n        const scripts: HTMLScriptElement[] = this._contents.querySelectorAll('script');\r\n        for (let s = 0, sl = scripts.length; s < sl; s++) {\r\n            let script = new Function('body', 'dialog', ...Object.keys(args), scripts[s].textContent);\r\n            script.apply(client, [this._contents, this, ...Object.values(args), this]);\r\n        }\r\n        */\r\n        this._page = this.dialog.dataset.path;\r\n        if (this._page === 'profiles')\r\n            this.dialog.dataset.panel = 'left';\r\n        else\r\n            this.dialog.dataset.panel = 'right';\r\n        const pages = this._page.split('/');\r\n        let breadcrumb = '';\r\n        let last = pages.length - 1;\r\n        if (pages.length === 1)\r\n            breadcrumb += '<li><i class=\"float-start fas fa-users\" style=\"padding: 2px;margin-right: 2px;\"></i></li>';\r\n        else\r\n            breadcrumb += '<li><a href=\"#' + pages.slice(0, 1).join('-') + '\"><i class=\"float-start fas fa-users\" style=\"padding: 2px;margin-right: 2px;\"></i></a></li>';\r\n        if (pages.length < 4)\r\n            for (let p = 0, pl = pages.length; p < pl; p++) {\r\n                let title = capitalize(pages[p]);\r\n                if (p === last)\r\n                    breadcrumb += '<li class=\"breadcrumb-item active\">' + title + '</li>';\r\n                else\r\n                    breadcrumb += '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"#' + pages.slice(0, p + 1).join('/') + '\">' + title + '</a></li>';\r\n            }\r\n\r\n        let k, kl, p;\r\n        this._expandPath(pages);\r\n        this.footer.querySelector('#profile-page-buttons').innerHTML = '';\r\n        this.footer.querySelector(`#${this.id}-export-current`).style.display = '';\r\n        this.title = `<ol class=\"breadcrumb${this._small ? ' breadcrumb-sm' : ''}\" style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;flex-wrap: nowrap;\">${breadcrumb}</ol>`;\r\n        this._contents.scrollTop = 0;\r\n        if (!this._setCurrent(pages))\r\n            return;\r\n        if (pages.length < 2) {\r\n            this.footer.querySelector(`#${this.id}-export-current`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-sep`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-alias`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-macro`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-trigger`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-button`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-sep2`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-default-buttons`).style.display = 'none';\r\n            this.footer.querySelector(`#${this.id}-add-default-macros`).style.display = 'none';\r\n            this._splitter.panel2Collapsed = true;\r\n            this.footer.querySelector(`#${this.id}-back`).style.display = 'none';\r\n        }\r\n        else {\r\n            this.footer.querySelector(`#${this.id}-add-sep`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-alias`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-macro`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-trigger`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-button`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-back`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-sep2`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-default-buttons`).style.display = '';\r\n            this.footer.querySelector(`#${this.id}-add-default-macros`).style.display = '';\r\n            this._splitter.panel2Collapsed = false;\r\n        }\r\n        if (pages.length === 2) {\r\n            if (this._contentPage !== 'properties') {\r\n                this._loadPage('properties').then(contents => {\r\n                    this._contentPage = 'properties';\r\n                    this._setContents(contents);\r\n                    const forms = this._contents.querySelectorAll('input');\r\n                    this._contents.querySelector('#name').disabled = this._current.profileName === 'default';\r\n                    for (let f = 0, fl = forms.length; f < fl; f++)\r\n                        if (forms[f].type === 'checkbox') {\r\n                            forms[f].checked = this._current.profile[forms[f].id];\r\n                            forms[f].addEventListener('change', e => {\r\n                                const value = e.target.checked;\r\n                                if (e.target.id === 'enabled') {\r\n\r\n                                    if (!value && this.profiles.keys.filter(k => this.profiles.enabled(k)).length === 1) {\r\n                                        alert_box('Cannot disable', 'One profile must always be enabled.');\r\n                                        e.target.checked = true;\r\n                                        return;\r\n                                    }\r\n                                    this._menu.querySelector(`#enabled-${this.sanitizeID(this._current.profileName)}`).checked = value;\r\n                                    this._menu.querySelector(`#enabled-${this.sanitizeID(this._current.profileName)}-switch`).checked = value;\r\n                                    if (this._page === e.target.dataset.page)\r\n                                        this._contents.querySelector('#enabled').checked = value;\r\n                                    this.profiles.items[this._current.profileName].enabled = value;\r\n                                }\r\n                                else {\r\n                                    this._current.profile[e.target.id] = value;\r\n                                    this._menu.querySelector(`#enabled-${this.sanitizeID(this._current.profileName)}-${e.target.id.substring(6).toLowerCase()}`).checked = value;\r\n                                    this.changed = true;\r\n                                }\r\n                                this.changed = true;\r\n                            });\r\n                        }\r\n                        else {\r\n                            forms[f].value = this._current.profile[forms[f].id];\r\n                            forms[f].addEventListener('change', e => {\r\n                                const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                                if (target.id === 'name') {\r\n                                    debounce(() => {\r\n                                        let err = this._renameProfile(target.value);\r\n                                        if (err === true) {\r\n                                            forms[f].classList.remove('is-invalid');\r\n                                            this._errorField = null;\r\n                                        }\r\n                                        else {\r\n                                            forms[f].classList.add('is-invalid');\r\n                                            this._errorField = forms[f];\r\n                                            this._contents.querySelector('#name-feedback').textContent = err;\r\n                                        }\r\n                                        this._sortProfiles();\r\n                                    }, 200, 'renameProfile');\r\n                                }\r\n                                else {\r\n                                    this._current.profile[target.id] = target.value;\r\n                                    debounce(() => this._sortProfiles(), 200, 'sortProfiles');\r\n                                }\r\n                                this.changed = true;\r\n                            });\r\n                            forms[f].addEventListener('input', e => {\r\n                                const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                                if (target.id === 'name') {\r\n                                    debounce(() => {\r\n                                        let err = this._renameProfile(target.value);\r\n                                        if (err === true) {\r\n                                            forms[f].classList.remove('is-invalid');\r\n                                            this._errorField = null;\r\n                                        }\r\n                                        else {\r\n                                            forms[f].classList.add('is-invalid');\r\n                                            this._errorField = forms[f];\r\n                                            this._contents.querySelector('#name-feedback').textContent = err;\r\n                                        }\r\n                                        this._sortProfiles();\r\n                                    }, 200, 'renameProfile');\r\n                                }\r\n                                else {\r\n                                    this._current.profile[target.id] = target.value;\r\n                                    debounce(() => this._sortProfiles(), 200, 'sortProfiles');\r\n                                }\r\n                                this.changed = true;\r\n                            });\r\n                        }\r\n                }\r\n                ).catch(() => {\r\n                });\r\n            }\r\n            else {\r\n                this._contents.querySelector('#name').disabled = this._current.profileName === 'default';\r\n                const forms = this._contents.querySelectorAll('input');\r\n                for (let f = 0, fl = forms.length; f < fl; f++) {\r\n                    if (forms[f].type === 'checkbox')\r\n                        forms[f].checked = this._current.profile[forms[f].id];\r\n                    else\r\n                        forms[f].value = this._current.profile[forms[f].id];\r\n                }\r\n            }\r\n            if (this._current.profileName !== 'default') {\r\n                let b = `<button id=\"${this.id}-remove\" type=\"button\" class=\"btn-sm btn btn-danger\" title=\"Remove profile\"><i class=\"bi bi-trash\"></i></button>`;\r\n                this.footer.querySelector('#profile-page-buttons').innerHTML = b;\r\n                this.footer.querySelector(`#${this.id}-remove`).addEventListener('click', (e: MouseEvent) => {\r\n                    if (this._errorField)\r\n                        this._errorField = null;\r\n                    this._deleteProfile(this._current.profileName);\r\n                });\r\n            }\r\n        }\r\n        else if (pages.length === 3) {\r\n            let pp = '';\r\n            if (this._current.item.length === 0) {\r\n                p = '<h1 id=\"empty\" style=\"width: 100%;text-align:center\">No ' + this._current.collection + '.</h1>';\r\n                p += `<button id=\"${this.id}-add-contents\" type=\"button\" class=\"btn-sm float-start btn btn-outline-secondary\" title=\"Add ${this._getItemType()}\"><i class=\"bi bi-plus-lg\"></i> Add ${this._getItemType()}</button>`\r\n            }\r\n            else {\r\n                p = '';\r\n                for (k = 0, kl = this._current.item.length; k < kl; k++) {\r\n                    p += `<a data-profile =\"${this._current.profileName}\" id=\"item-${k}\" data-index=\"${k}\" href=\"#profiles/${encodeURIComponent(this._current.profileName)}/${this._current.collection}/${k}\" class=\"list-group-item list-group-item-action\">`\r\n                    p += `<span data-index=\"${k}\" class=\"list-badge-button badge text-bg-danger\"><i class=\"bi bi-trash\"></i></span>`;\r\n                    p += `<div class=\"form-check-inline form-switch\" style=\"margin: 0;\">`;\r\n                    p += `<input type=\"checkbox\" class=\"form-check-input\" id=\"check-${k}\" data-profile=\"${this._current.profileName}\" data-index=\"${k}\" data-field=\"enabled\" data-items=\"${this._current.collection}\"${this._current.item[k].enabled ? ' checked=\"checked\"' : ''}>`\r\n                    p += `</div>${htmlEncode(GetDisplay(this._current.item[k]))}</a>`;\r\n                }\r\n                pp = `<button id=\"${this.id}-add-contents\" type=\"button\" class=\"btn-sm btn btn-outline-secondary\" title=\"Add ${this._getItemType()}\" style=\"margin-bottom: 5px;width:100%;\"><i class=\"bi bi-plus-lg\"></i> Add ${this._getItemType()}</button>`;\r\n            }\r\n            let b = `<button id=\"${this.id}-add\" type=\"button\" class=\"btn-sm float-start btn btn-outline-secondary\" title=\"Add ${this._getItemType()}\"><i class=\"bi bi-plus-lg\"></i></button>`;\r\n            this.footer.querySelector('#profile-page-buttons').innerHTML = b;\r\n            this._setContents(pp + '<div class=\"list-group\">' + p + '</div>');\r\n            let items = this._contents.querySelectorAll('.list-badge-button');\r\n            for (let i = 0, il = items.length; i < il; i++)\r\n                items[i].addEventListener('click', e => {\r\n                    this._removeItem(+e.target.parentElement.dataset.index);\r\n                    e.stopPropagation();\r\n                    e.cancelBubble = true;\r\n                    e.preventDefault();\r\n                });\r\n            this._contentPage = null;\r\n            this.footer.querySelector(`#${this.id}-add`).addEventListener('click', () => {\r\n                this._addItem();\r\n            });\r\n            if (this._contents.querySelector(`#${this.id}-add-contents`))\r\n                this._contents.querySelector(`#${this.id}-add-contents`).addEventListener('click', () => {\r\n                    this._addItem();\r\n                });\r\n\r\n            items = this._contents.querySelectorAll('input');\r\n            for (let i = 0, il = items.length; i < il; i++)\r\n                items[i].addEventListener('change', (e: MouseEvent) => {\r\n                    const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                    const value = target.checked;\r\n                    this._menu.querySelector(`#enabled-${this.sanitizeID(this._current.profileName)}-${this._current.collection}-${target.dataset.index}`).checked = value;\r\n                    this._current.profile[this._current.collection][+target.dataset.index].enabled = value;\r\n                    this.changed = true;\r\n                });\r\n\r\n        }\r\n        else if (pages.length === 4) {\r\n            let b = `<button id=\"${this.id}-remove\" type=\"button\" class=\"btn-sm btn btn-danger\" title=\"Remove ${this._getItemType()}\"><i class=\"bi bi-trash\"></i></button>`;\r\n            this.footer.querySelector('#profile-page-buttons').innerHTML = b;\r\n            this.footer.querySelector(`#${this.id}-remove`).addEventListener('click', e => {\r\n                this._removeItem(this._current.itemIdx, 0, true);\r\n                e.stopPropagation();\r\n                e.cancelBubble = true;\r\n                e.preventDefault();\r\n            });\r\n            for (let p = 0, pl = pages.length; p < pl; p++) {\r\n                if (p === last)\r\n                    breadcrumb += '<li class=\"breadcrumb-item active\">' + htmlEncode(GetDisplay(this._current.item)) + '</li>';\r\n                else\r\n                    breadcrumb += '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"#' + pages.slice(0, p + 1).join('/') + '\">' + capitalize(pages[p]) + '</a></li>';\r\n            }\r\n            this.title = `<ol class=\"breadcrumb${this._small ? ' breadcrumb-sm' : ''}\" style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;flex-wrap: nowrap;\">${breadcrumb}</ol>`;\r\n            if (this._contentPage !== this._current.collection) {\r\n                this._contentPage = this._current.collection;\r\n                this._loadPage(this._current.collection).then(contents => {\r\n                    this._setContents(contents);\r\n                    this._loadItem(true);\r\n                }).catch(() => { });\r\n            }\r\n            else\r\n                this._loadItem();\r\n\r\n        }\r\n        else if (pages.length === 5) {\r\n            let b = `<button id=\"${this.id}-remove\" type=\"button\" class=\"btn-sm btn btn-danger\" title=\"Remove ${this._getItemType()}\"><i class=\"bi bi-trash\"></i></button>`;\r\n            this.footer.querySelector('#profile-page-buttons').innerHTML = b;\r\n            this.footer.querySelector(`#${this.id}-remove`).addEventListener('click', e => {\r\n                this._removeItem(this._current.itemIdx, 0, true);\r\n                e.stopPropagation();\r\n                e.cancelBubble = true;\r\n                e.preventDefault();\r\n            });\r\n            let last = pages.length - 1;\r\n            for (let p = 0, pl = pages.length; p < pl; p++) {\r\n                if (p === last - 1)\r\n                    breadcrumb += '<li class=\"breadcrumb-item\"><a href=\"#' + pages.slice(0, p + 1).join('/') + '\">' + htmlEncode(GetDisplay(this._current.parent)) + '</a></li>';\r\n                else if (p === last)\r\n                    breadcrumb += '<li class=\"breadcrumb-item active\">' + htmlEncode(GetDisplay(this._current.item)) + '</li>';\r\n                else\r\n                    breadcrumb += '<li class=\"breadcrumb-item\" aria-current=\"page\"><a href=\"#' + pages.slice(0, p + 1).join('/') + '\">' + capitalize(pages[p]) + '</a></li>';\r\n            }\r\n            this.title = `<ol class=\"breadcrumb${this._small ? ' breadcrumb-sm' : ''}\" style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;flex-wrap: nowrap;\">${breadcrumb}</ol>`;\r\n            if (this._contentPage !== this._current.collection) {\r\n                this._contentPage = this._current.collection;\r\n                this._loadPage(this._current.collection).then(contents => this._setContents(contents)).catch(() => {\r\n                    this._loadItem(true);\r\n                });\r\n            }\r\n            else\r\n                this._loadItem();\r\n        }\r\n        else {\r\n            let b = `<button id=\"btn-${this.id}-add-profile\" type=\"button\" class=\"btn-sm btn btn-outline-secondary\" title=\"Add profile\"><i class=\"bi bi-plus-lg\"></i></button>`;\r\n            this.footer.querySelector('#profile-page-buttons').innerHTML = b;\r\n            this.footer.querySelector(`#btn-${this.id}-add-profile`).addEventListener('click', () => {\r\n                this._createProfile(true);\r\n            });\r\n            this._contentPage = null;\r\n            this._setContents('');\r\n        }\r\n    }\r\n\r\n    private _setCurrent(pages) {\r\n        if (!pages)\r\n            return false;\r\n        this._current.itemIdx = this._current.itemSubIdx = -1;\r\n        this._current.parent = null;\r\n        if (pages.length > 1) {\r\n            this._current.profileName = pages[1];\r\n            if (!this.profiles.contains(this._current.profileName)) {\r\n                this._setContents(`<h1 id=\"empty\" style=\"width: 100%;text-align:center\">Profile ${this._current.profileName} not found.</h1>`);\r\n                this._contentPage = null;\r\n                return false;\r\n            }\r\n            this._current.profile = this.profiles.items[this._current.profileName];\r\n        }\r\n        if (pages.length > 2) {\r\n            this._current.collection = pages[2];\r\n            if (!this._current.profile[this._current.collection]) {\r\n                this._setContents(`<h1 id=\"empty\" style=\"width: 100%;text-align:center\">${capitalize(this._current.collection)} not found in ${this._current.profileName}.</h1>`);\r\n                this._contentPage = null;\r\n                return false;\r\n            }\r\n            this._current.item = this._current.profile[pages[2]];\r\n        }\r\n        if (pages.length > 3) {\r\n            this._current.itemIdx = +pages[3];\r\n            if (this._current.itemIdx < 0 || this._current.itemIdx >= this._current.item.length) {\r\n                this._setContents(`<h1 id=\"empty\" style=\"width: 100%;text-align:center\">${capitalize(this._getItemType())} not found.</h1>`);\r\n                this._contentPage = null;\r\n                return;\r\n            }\r\n            this._current.item = this._current.profile[pages[2]][this._current.itemIdx];\r\n        }\r\n        if (pages.length > 4) {\r\n            this._current.itemSubIdx = +pages[4];\r\n            if (!this._current.item.triggers) {\r\n                this._setContents(`<h1 id=\"empty\" style=\"width: 100%;text-align:center\">Invalid trigger.</h1>`);\r\n                this._contentPage = null;\r\n                return;\r\n            }\r\n            if (this._current.itemSubIdx < 0 || this._current.itemSubIdx >= this._current.item.triggers.length) {\r\n                this._setContents(`<h1 id=\"empty\" style=\"width: 100%;text-align:center\">Trigger state not found.</h1>`);\r\n                this._contentPage = null;\r\n                return;\r\n            }\r\n            this._current.parent = this._current.item;\r\n            this._current.item = this._current.item.triggers[this._current.itemSubIdx];\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private _loadPage(page) {\r\n        return new Promise((resolve, reject) => {\r\n            $.ajax({\r\n                url: 'dialogs/profiles-' + page + '.htm',\r\n                cache: false,\r\n                type: 'GET',\r\n            })\r\n                .done((data) => {\r\n                    data = data.replace(/{profileURL}/g, encodeURIComponent(this._current.profileName)).replace(/{profile}/g, this._current.profileName)\r\n                    resolve(data);\r\n                })\r\n                .fail(function () {\r\n                    reject('');\r\n                });\r\n        });\r\n    }\r\n\r\n    private _setContents(contents) {\r\n        this._contents.innerHTML = contents;\r\n        const scripts: HTMLScriptElement[] = this._contents.querySelectorAll('script');\r\n        const args = {\r\n            client: client,\r\n            item: this._current.item,\r\n            FilterArrayByKeyValue: FilterArrayByKeyValue,\r\n            keyCharToCode: keyCharToCode,\r\n            keyCodeToChar: keyCodeToChar,\r\n            profile: this._current.profile,\r\n            profileName: this._current.profileName,\r\n            parent: this._current.parent,\r\n            current: this._current,\r\n            GetDisplay: GetDisplay,\r\n            Trigger: Trigger,\r\n            debounce: debounce,\r\n            updateHash: updateHash,\r\n            DialogButtons: DialogButtons\r\n        };\r\n        this.emit('content-changing');\r\n        for (let s = 0, sl = scripts.length; s < sl; s++) {\r\n            /*jslint evil: true */\r\n            let script = new Function('body', 'dialog', ...Object.keys(args), 'try { ' + scripts[s].textContent + '}catch(e){client.error(e)}');\r\n            script.apply(client, [this._contents, this, ...Object.values(args), this]);\r\n        }\r\n        this.emit('content-changed');\r\n    }\r\n\r\n    private _loadItem(events?) {\r\n        const forms: HTMLInputElement[] = this._contents.querySelectorAll('input,select,textarea');\r\n\r\n        for (let f = 0, fl = forms.length; f < fl; f++) {\r\n            if (!(forms[f].id in this._current.item) && forms[f].dataset.enum !== 'true')\r\n                continue;\r\n            if (forms[f].type === 'checkbox') {\r\n                if (forms[f].dataset.enum === 'true') {\r\n                    const name = forms[f].name || forms[f].id.substring(0, forms[f].id.lastIndexOf('-'));\r\n                    const value = +forms[f].id.substring(forms[f].id.lastIndexOf('-') + 1);\r\n                    forms[f].checked = (this._current.item[name] & value) === value;\r\n                }\r\n                else\r\n                    forms[f].checked = this._current.item[forms[f].id];\r\n                if (events)\r\n                    forms[f].addEventListener('change', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        if (target.style.display === 'none') return;\r\n                        if (target.dataset.enum === 'true') {\r\n                            const name = target.name || target.id.substring(0, target.id.lastIndexOf('-'));\r\n                            const enums = this.body.querySelectorAll(`[name=${name}]`);\r\n                            let value = 0;\r\n                            for (let e = 0, el = enums.length; e < el; e++) {\r\n                                if (enums[e].checked)\r\n                                    value |= +enums[e].value;\r\n                            }\r\n                            this._current.item[name] = value;\r\n                        }\r\n                        else {\r\n                            this._current.item[target.id] = target.checked || false;\r\n                            if (target.id === 'enabled')\r\n                                this._menu.querySelector(`#enabled-${this.sanitizeID(this._current.profileName)}-${this._current.collection}-${this._current.itemIdx}`).checked = this._current.item[target.id];\r\n                        }\r\n                        this.changed = true;\r\n                        this._updateItemMenu();\r\n                    });\r\n            }\r\n            else {\r\n                forms[f].value = this._current.item[forms[f].id];\r\n                if (events) {\r\n                    forms[f].addEventListener('change', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        if (target.style.display === 'none') return;\r\n                        this.setValue(this._current.item, target.id, target.value);\r\n                        this.changed = true;\r\n                        this._updateItemMenu();\r\n                    });\r\n                    forms[f].addEventListener('input', e => {\r\n                        const target = (e.currentTarget || e.target) as HTMLInputElement;\r\n                        if (target.style.display === 'none') return;\r\n                        this.setValue(this._current.item, target.id, target.value);\r\n                        this.changed = true;\r\n                        this._updateItemMenu();\r\n                    });\r\n                }\r\n                let c = this.changed;\r\n                forms[f].dispatchEvent(new Event('change'));\r\n                this.changed = c;\r\n            }\r\n        }\r\n        this.emit('item-loaded', this._current);\r\n    }\r\n\r\n    private _updateItemMenu(currentItem?, profile?, collection?, index?) {\r\n        profile = profile || this._current.profileName;\r\n        collection = collection || this._current.collection;\r\n        if (typeof index !== 'number')\r\n            index = this._current.itemIdx;\r\n        const currentParent = this._current.parent;\r\n        currentItem = currentItem || this._current.item;\r\n        debounce(() => {\r\n            let item = this.body.querySelector(`#${this.sanitizeID(profile)}-${collection}-${index}`);\r\n            if (!item) return;\r\n            let display\r\n            display = GetDisplay(currentParent || currentItem);\r\n            item.title = display;\r\n            item.firstChild.childNodes[2].textContent = ' ' + display;\r\n            let bc = this.header.querySelector('ol').children;\r\n            if (bc.length > 4) {\r\n                if (bc[4].children.length)\r\n                    bc[4].children[0].textContent = display;\r\n                else\r\n                    bc[4].textContent = display;\r\n            }\r\n            if (bc.length > 5) {\r\n                bc[5].textContent = GetDisplay(currentItem);\r\n            }\r\n        }, 200, 'updateItemMenu');\r\n    }\r\n\r\n    private _expandPath(pages, select?) {\r\n        if (!Array.isArray(pages))\r\n            pages = pages.split('/');\r\n        let id;\r\n        let el;\r\n        let expand;\r\n        let po = 0;\r\n        if (pages[0] === 'profiles')\r\n            po = 1;\r\n        let last = pages.length - 1;\r\n        for (let p = po, pl = pages.length; p < pl; p++) {\r\n            id = this.sanitizeID(pages.slice(po, p + 1).join('-'));\r\n            el = document.getElementById(id);\r\n            if (!el) continue;\r\n            if (p === last) {\r\n                setTimeout(() => {\r\n                    const items = this._menu.querySelectorAll('.active');\r\n                    for (let i = 0, il = items.length; i < il; i++)\r\n                        items[i].classList.remove('active');\r\n                    scrollChildIntoView(this._menu, el);\r\n                    el.classList.add('active');\r\n                    if (select)\r\n                        el.firstChild.click();\r\n                }, 100);\r\n            }\r\n            else {\r\n                expand = el.querySelector('.dropdown-menu');\r\n                if (!expand || expand.classList.contains('show')) continue;\r\n                el = el.querySelector('i');\r\n                if (el) {\r\n                    el.closest('li').querySelector('.dropdown-menu').classList.toggle('show');\r\n                    el.classList.toggle('bi-chevron-right');\r\n                    el.classList.toggle('bi-chevron-down');\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private _goBack() {\r\n        if (this._errorField) {\r\n            this._errorField.focus();\r\n            return;\r\n        }\r\n        const pages = this._page.split('/');\r\n        if (pages.length === 5)\r\n            updateHash(pages.slice(0, pages.length - 2).join('/'), this._page);\r\n        else\r\n            updateHash(pages.slice(0, pages.length - 1).join('/'), this._page);\r\n    }\r\n\r\n    private _createProfile(defaults: boolean) {\r\n        let i = this.profiles.length;\r\n        let name = 'NewProfile' + i;\r\n        while (this.profiles.contains(name)) {\r\n            i++;\r\n            name = 'NewProfile' + i\r\n        }\r\n        const profile = new Profile(name, defaults);\r\n        name = name.toLowerCase();\r\n        this.profiles.add(profile);\r\n        this.profiles.SortByPriority();\r\n        let menuItem = this._profile(name);\r\n        i = this.profiles.keys.indexOf(name);\r\n        const menu = document.getElementById('profile-menu');\r\n        if (i === -1 || i >= menu.children.length)\r\n            i = menu.children.length - 1;\r\n        if (i < 0) i = 0;\r\n        menu.children[i].insertAdjacentHTML(\"afterend\", menuItem);\r\n        this._profileEvents(menu.children[i + 1]);\r\n        this.changed = true;\r\n        updateHash('profiles/' + name, this._page);\r\n    }\r\n\r\n    private _deleteProfile(profile) {\r\n        if (!profile) return false;\r\n        confirm_box('Remove profile?', `Delete \"${profile}\"?`).then(e => {\r\n            if (e.button === DialogButtons.Yes) {\r\n                this.profiles.remove(profile);\r\n                this._menu.querySelector('#' + profile).remove();\r\n                if (this._page.startsWith('profiles/' + profile))\r\n                    updateHash('profiles', this._page);\r\n                this.changed = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    private _renameProfile(name, oldProfile?) {\r\n        if (!name) return 'Name can not be empty!';\r\n        oldProfile = (oldProfile || this._current.profileName).toLowerCase();\r\n        name = name.toLowerCase();\r\n        if (name === oldProfile) return true;\r\n        if (this.profiles.contains(name))\r\n            return 'A profile named ' + name + ' already exists!';\r\n        this.profiles.remove(oldProfile);\r\n        this._current.profile.name = name;\r\n        this._current.profileName = name;\r\n        this.profiles.add(this._current.profile);\r\n        const oldID = this.sanitizeID(oldProfile);\r\n        const newID = this.sanitizeID(name);\r\n        let items;\r\n        items = this.body.querySelector(`#${oldID} a`);\r\n        items.children[2].childNodes[1].textContent = ' ' + capitalize(name);\r\n        document.querySelector(`#${oldID} a`).children[3].childNodes[1].textContent = ' ' + capitalize(name);\r\n        items = this.body.querySelector(`#${oldID}`);\r\n        items.id = newID;\r\n        items.title = name;\r\n        this._replaceProfileName(this._menu.firstChild, oldProfile, name);\r\n        this._replaceProfileName(this._contents, oldProfile, name);\r\n        this.header.querySelector('ol').children[2].textContent = capitalize(name);\r\n        return true;\r\n    }\r\n\r\n    private _replaceProfileName(container, oldName, newName) {\r\n        let items;\r\n        let i, il;\r\n        const oldID = this.sanitizeID(oldName);\r\n        const newID = this.sanitizeID(newName);\r\n        items = container.querySelectorAll(`[id*=\"-${oldID}-\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].id = items[i].id.replace(`-${oldID}-`, `-${newID}-`);\r\n        items = container.querySelectorAll(`[id$=\"-${oldID}\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].id = items[i].id.replace(`-${oldID}`, `-${newID}`);\r\n        items = container.querySelectorAll(`[id^=\"${oldID}-\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].id = items[i].id.replace(`${oldID}-`, `${newID}-`);\r\n        items = container.querySelectorAll(`[data-profile=\"${oldID}\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].dataset.profile = newID;\r\n        const oldPath = encodeURIComponent(oldName);\r\n        const newPath = encodeURIComponent(newName);\r\n        items = container.querySelectorAll(`[href*=\"/${oldPath}/\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].href = items[i].getAttribute('href').replace(`/${oldPath}/`, `/${newPath}/`);\r\n        items = container.querySelectorAll(`[href$=\"/${oldPath}\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].href = items[i].getAttribute('href').replace(`/${oldPath}`, `/${newPath}`);\r\n        items = container.querySelectorAll(`[href^=\"${oldPath}/\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].href = items[i].getAttribute('href').replace(`${oldPath}/`, `${newPath}/`);\r\n        items = container.querySelectorAll(`[data-path*=\"/${oldPath}/\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].dataset.path = items[i].dataset.path.replace(`/${oldPath}`, `/${newPath}`);\r\n        items = container.querySelectorAll(`[data-page*=\"/${oldPath}/\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].dataset.page = items[i].dataset.page.replace(`/${oldPath}/`, `/${newPath}/`);\r\n        items = container.querySelectorAll(`[data-page$=\"/${oldPath}\"]`);\r\n        for (i = 0, il = items.length; i < il; i++)\r\n            items[i].dataset.page = items[i].dataset.page.replace(`/${oldPath}`, `/${newPath}`);\r\n    }\r\n\r\n    private _sortProfiles() {\r\n        this.profiles.SortByPriority();\r\n        const menu = this._menu.firstChild;\r\n        const items = Array.from(menu.children);\r\n        items.sort((a: HTMLElement, b: HTMLElement) => {\r\n            let ap = this.profiles.items[a.dataset.profile].priority\r\n            let bp = this.profiles.items[b.dataset.profile].priority\r\n            if (ap > bp)\r\n                return -1;\r\n            if (ap < bp)\r\n                return 1;\r\n            if (a.dataset.profile === 'default')\r\n                return -1;\r\n            if (b.dataset.profile === 'default')\r\n                return 1;\r\n            ap = a.dataset.profile;\r\n            bp = b.dataset.profile;\r\n            if (ap > bp)\r\n                return 1;\r\n            if (ap < bp)\r\n                return -1;\r\n            return 0;\r\n        })\r\n\r\n        items.forEach(item => menu.appendChild(item));\r\n    }\r\n\r\n    private _save() {\r\n        if (!this.changed) return true;\r\n        if (this._errorField) {\r\n            this._errorField.focus();\r\n            return false;\r\n        }\r\n        this.profiles.save().then(() => {\r\n            client.loadProfiles().then(() => {\r\n\r\n            });\r\n        })\r\n        this.changed = false;\r\n        return true;\r\n    }\r\n\r\n    public close() {\r\n        if (!this._canClose) {\r\n            this.confirmSave().then(r => {\r\n                if (r)\r\n                    if (!this._save()) return;\r\n                this._canClose = true;\r\n                this.close();\r\n            }).catch(() => {\r\n                this._canClose = false;\r\n            });\r\n        }\r\n        else\r\n            super.close();\r\n    }\r\n\r\n    public reload() {\r\n        if (!this._setCurrent(this._page.split('/')))\r\n            return\r\n        this._loadItem();\r\n        this._updateItemMenu();\r\n    }\r\n\r\n    private confirmSave() {\r\n        return new Promise((resolve, reject) => {\r\n            if (this._profilesChanged) {\r\n                confirm_box('Save changes?', `Save changes to profiles?`, null, DialogButtons.YesNo | DialogButtons.Cancel).then(e => {\r\n                    if (e.button === DialogButtons.Yes)\r\n                        resolve(true);\r\n                    else if (e.button === DialogButtons.No)\r\n                        resolve(false);\r\n                    else\r\n                        reject();\r\n                }).catch(e => {\r\n                    reject();\r\n                });\r\n            }\r\n            else\r\n                resolve(true);\r\n        });\r\n    }\r\n\r\n    private sanitizeID(name) {\r\n        return name.toLowerCase().replace(/[^a-z0-9:.-]+/gi, '_');\r\n    }\r\n\r\n    private _getItemType(collection?) {\r\n        collection = collection || this._current.collection;\r\n        if (!collection) return;\r\n        if (collection === 'aliases') return 'alias';\r\n        return collection.substring(0, collection.length - 1);\r\n    }\r\n\r\n    private _addItem(collection?, item?) {\r\n        if (!collection) collection = this._current.collection;\r\n        if (!collection) return;\r\n        var index = this._current.profile[collection].length;\r\n        let menuItem;\r\n        if (!item) {\r\n            if (collection === 'aliases')\r\n                item = new Alias();\r\n            else if (collection === 'triggers')\r\n                item = new Trigger();\r\n            else if (collection === 'buttons')\r\n                item = new Button();\r\n            else if (collection === 'macros')\r\n                item = new Macro();\r\n            else if (collection === 'context')\r\n                item = new Context();\r\n        }\r\n        this._current.profile[collection].push(item);\r\n        let m = this._menu.querySelector(`#${this.sanitizeID(this._current.profileName)}-${collection}`);\r\n        if (index === 0) {\r\n            menuItem = this._getItem([{\r\n                name: capitalize(collection),\r\n                items: this._current.profile[collection],\r\n                useName: true,\r\n                enabled: this._current.profile[collection],\r\n            }], 0, this.sanitizeID(this._current.profileName), 'profiles/' + encodeURIComponent(this._current.profileName), 1);\r\n            var newNode = document.createElement('div');\r\n            newNode.innerHTML = menuItem;\r\n            if (m.replaceWith)\r\n                m.replaceWith(newNode.firstChild);\r\n            else if (m.replaceChild)\r\n                m.parentNode.replaceChild(newNode.firstChild, m);\r\n            else\r\n                m.outerHTML = menuItem;\r\n            m = this._menu.querySelector(`#${this.sanitizeID(this._current.profileName)}-${collection}`);\r\n            this._profileEvents(m);\r\n        }\r\n        else {\r\n            menuItem = this._getItem(this._current.profile[collection], index, `${this.sanitizeID(this._current.profileName)}-${collection}`, `profiles/${encodeURIComponent(this._current.profileName)}/${collection}`, 2);\r\n            m = m.querySelector('ul');\r\n            m.insertAdjacentHTML(\"beforeend\", menuItem);\r\n            m = this._menu.querySelector(`#${this.sanitizeID(this._current.profileName)}-${collection}`);\r\n            this._profileEvents(m.lastChild);\r\n        }\r\n        updateHash(`profiles/${encodeURIComponent(this._current.profileName)}/${collection}/${index}`, this._page);\r\n        this.changed = true;\r\n    }\r\n\r\n    private _removeItem(index, collection?, back?) {\r\n        if (!collection) collection = this._current.collection;\r\n        if (!collection) return;\r\n        confirm_box('Remove profile?', `Delete ${this._getItemType()}?`).then(e => {\r\n            if (e.button === DialogButtons.Yes) {\r\n                const id = `${this.sanitizeID(this._current.profileName)}-${collection}`;\r\n                const items = this._current.profile[collection];\r\n                items.splice(index, 1);\r\n                this._menu.querySelector(`#${id}-${index}`).remove();\r\n                if (this._current.itemIdx === -1)\r\n                    this.setBody(this._page);\r\n\r\n\r\n                if (items.length === 0) {\r\n                    this._menu.querySelector(`#${id} i`).remove();\r\n                    this._menu.querySelector(`#${id} a`).insertAdjacentHTML('afterbegin', '<i class=\"align-middle float-start no-icon\"></i>');\r\n                }\r\n                else {\r\n                    const menuItems = this._menu.querySelector(`#${id} ul`);\r\n                    let i = menuItems.children.length;\r\n                    const href = `#profiles/${encodeURIComponent(this._current.profileName)}/${collection}/`;\r\n                    for (; index < i; index++) {\r\n                        const item = menuItems.children[index];\r\n                        item.id = `${id}-${index}`;\r\n                        item.firstChild.href = `${href}${index}`;\r\n                        item.firstChild.children[1].id = `enabled-${id}-${index}`;\r\n                    }\r\n                }\r\n                this.changed = true;\r\n                if (back)\r\n                    this._goBack();\r\n            }\r\n        });\r\n    }\r\n\r\n    public setValue(obj, prop, value) {\r\n        if (value == 'false') value = false;\r\n        if (value == 'true') value = true;\r\n        if (value == 'null') value = null;\r\n        if (value == 'undefined') value = undefined;\r\n        if (typeof value == 'string' && parseFloat(value).toString() == value)\r\n            value = parseFloat(value);\r\n        obj[prop] = this.convertType(value, typeof obj[prop]);\r\n    }\r\n\r\n    public convertType(value, type) {\r\n        if (typeof value === type)\r\n            return value;\r\n        switch (type) {\r\n            case 'number':\r\n                if (typeof value == 'string' && parseFloat(value).toString() == value)\r\n                    return parseFloat(value);\r\n                return Number(value);\r\n            case 'boolean':\r\n                return Boolean(value);\r\n            case 'string':\r\n                return '' + value;\r\n        }\r\n        return value;\r\n    }\r\n\r\n}\r\n\r\nexport function GetDisplay(arr) {\r\n    if (arr.displaytype === 1) {\r\n        /*jslint evil: true */\r\n        const f = new Function('item', 'keyCodeToChar', 'MacroDisplay', arr.display);\r\n        return f(arr, keyCodeToChar, MacroDisplay);\r\n    }\r\n    if ($.isFunction(arr.display))\r\n        return arr.display(arr);\r\n    if ($.isFunction(arr[arr.display]))\r\n        return arr[arr.display](arr);\r\n    if (!arr[arr.display])\r\n        return arr['name'];\r\n    return arr[arr.display];\r\n}", "\nimport \"../css/interface.css\";\nimport { initMenu } from './menu';\nimport { Client } from '../client';\nimport { Dialog, DialogButtons } from \"./dialog\";\nimport { openFileDialog, readFile, debounce, copyText, pasteText, setSelectionRange, htmlEncode, offset } from '../library';\nimport { AdvEditor } from './adv.editor';\nimport { SettingsDialog } from './settingsdialog';\nimport { ProfilesDialog } from \"./profilesdialog\";\nimport \"../css/buttons.css\";\ndeclare global {\n    interface Window {\n        initializeInterface;\n        readClipboard;\n        writeClipboard;\n        readClipboardHTML;\n        doLink;\n        doMXPLink;\n        doMXPSend;\n        MXPMenuHandler;\n        doMXPTooltip;\n    }\n    let client: Client;\n}\ndeclare let confirm_box;\n\n//cache the objects once made for later use\nlet editor: AdvEditor;\nlet editorDialog: Dialog;\nlet _currentIcon = -1;\n\n//TODO these are set for context menu\nlet _selword = '';\nlet _selurl = '';\nlet _selline = '';\nlet lastMouse;\n\n//#region MXP display hooks\nfunction doLink(url) {\n    confirm_box('Open?', `Open '${url}'?`).then(e => {\n        if (e.button === DialogButtons.Yes) {\n            window.open(url);\n            if (client.getOption('CommandonClick'))\n                client.commandInput.focus();\n        }\n    });\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction doMXPLink(el, url) {\n    if (url.startsWith('OoMUD://') || url.startsWith('jiMUD://') || url.startsWith('client://'))\n        doMXPSend(0, el, url.substring(8));\n    else {\n        confirm_box('Open?', `Open '${url}'?`).then(e => {\n            if (e.button === DialogButtons.Yes) {\n                window.open(url);\n                if (client.getOption('CommandonClick'))\n                    client.commandInput.focus();\n            }\n        });\n    }\n}\n\nfunction doMXPSend(e, el, url, pmt?, tt?) {\n    var im = el.querySelector('img[ismap]');\n    var extra = '';\n    if (im) {\n        var os = offset(im);\n        var x = Math.floor(e.clientX - os.left);\n        var y = Math.floor(e.clientY - os.top);\n        extra = '?' + x + ',' + y;\n    }\n    //TODO convert to contextmenu\n    if (url.constructor === Array || url.__proto__.constructor === Array || Object.prototype.toString.call(url) === '[object Array]') {\n        let menu: any = '<ul id=\"mxp-send-menu\" class=\"dropdown-menu show\">';\n        for (var i = 0, il = url.length; i < il; i++) {\n            url[i] = url[i].replace('&text;', el.textContent);\n            if (i < tt.length)\n                menu += `<li><a class=\"dropdown-item\" data-pnt=\"${pmt ? 'true' : 'false'}\" data-cmd=\"${htmlEncode(url[i] + extra)}\" href=\"#\">${tt[i]}</a></li>`;\n            else\n                menu += `<li><a class=\"dropdown-item\" data-pnt=\"${pmt ? 'true' : 'false'}\" data-cmd=\"${htmlEncode(url[i] + extra)}\" href=\"#\">${url[i]}</a></li>`;\n        }\n        menu += '</ul>';\n        document.body.insertAdjacentHTML('afterend', menu);\n        menu = document.getElementById('mxp-send-menu');\n        menu.cleanUp = e => {\n            window.removeEventListener('click', menu.cleanUp);\n            window.removeEventListener('keydown', menu.cleanUp);\n            menu.remove();\n        };\n        let items = menu.querySelectorAll('li a');\n        for (let i = 0, il = items.length; i < il; i++) {\n            items[i].addEventListener('click', e => {\n                MXPMenuHandler(e.currentTarget.dataset.cmd, e.currentTarget.dataset.pmt === 'true');\n                menu.cleanUp();\n            })\n        }\n        setTimeout( () => {\n            window.addEventListener('click', menu.cleanUp);\n            window.addEventListener('keydown', menu.cleanUp);\n        }, 100);\n        menu.style.left = e.clientX + 'px';\n        menu.style.top = e.clientY + 'px';\n        menu.style.display = 'block';\n        menu.style.position = 'absolute';\n    }\n    else if (pmt) {\n        url = url.replace('&text;', el.textContent) + extra;\n        client.commandInput.value = url;\n        setSelectionRange(client.commandInput, url.length, url.length);\n    }\n    else\n        client.send(url.replace('&text;', el.textContent) + extra + '\\n', true);\n    setTimeout(() => {\n        if (client.getOption('CommandonClick'))\n            client.commandInput.focus();\n    }, 0);\n}\n\nfunction MXPMenuHandler(cmd, pmt) {\n    if (pmt) {\n        client.commandInput.value = cmd;\n        setSelectionRange(client.commandInput, cmd.length, cmd.length);\n    }\n    else\n        client.send(cmd, true);\n    setTimeout(() => {\n        if (client.getOption('CommandonClick'))\n            client.commandInput.focus();\n    }, 0);\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction doMXPTooltip(el) {\n    el.title = el.title.replace('&text;', el.textContent);\n}\nwindow.doLink = doLink;\nwindow.doMXPLink = doMXPLink;\nwindow.doMXPSend = doMXPSend;\nwindow.MXPMenuHandler = MXPMenuHandler;\nwindow.doMXPTooltip = doMXPTooltip;\n//#endregion\n\nexport function initializeInterface() {\n    let options;\n    _setIcon(0);\n    initMenu();\n    //not supported bu add stubs to prevent errors from imported scripts\n    window.readClipboard = () => pasteText();\n    window.readClipboardHTML = () => pasteText();\n    (client as any).readClipboard = window.readClipboard;\n    (client as any).readClipboardHTML = window.readClipboardHTML;\n\n    window.writeClipboard = (txt, html) => copyText(txt);\n    (client as any).writeClipboard = window.writeClipboard;\n\n    (client as any).closeDialog = window => {\n        switch (window) {\n            case 'editor':\n            case 'help':\n            case 'about':\n                closeDialog(window);\n                break;\n            case 'profiles':\n            case 'profiles-manager':\n            case 'profile-manager':\n            case 'manager':\n                closeDialog('profiles');\n                break;\n            case 'prefs':\n            case 'options':\n            case 'preferences':\n                closeDialog('settings');\n                break;\n            case 'history':\n            case 'command-history':\n                closeDialog('history');\n                break;\n            default:\n                client.emit('close-window', window);\n                break;\n        }\n    };\n\n    //#region global variables for scripting\n    ['repeatnum', 'i'].forEach((a) => {\n        Object.defineProperty(window, a, {\n            get: function () {\n                if (!client) return undefined;\n                return client.repeatnum;\n            },\n            configurable: true\n        });\n    });\n\n    Object.defineProperty(window, '$selected', {\n        get: function () {\n            if (!client) return '';\n            return client.display.selection;\n        },\n        configurable: true\n    });\n\n    //Not supported but return blank to prevent errors on scriptsthat use it\n    Object.defineProperty(window, '$copied', {\n        get: function () {\n            return '';\n        },\n        configurable: true\n    });\n\n    Object.defineProperty(window, '$selword', {\n        get: function () {\n            if (!client) return '';\n            return client.input.vStack['$selword'] || _selword || (lastMouse ? client.display.getWordFromPosition(lastMouse.pageX, lastMouse.pageY) : '');\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$selurl', {\n        get: function () {\n            if (!client) return '';\n            let value = client.input.vStack['$selurl'] || _selurl || '';\n            if (value) return value;\n            if (!lastMouse) return '';\n            var parent = lastMouse.srcElement.parentNode;\n            if (parent && parent.classList && parent.classList.contains('URLLink'))\n                return parent.title;\n            else if (parent && parent.classList && parent.classList.contains('MXPLink') && parent.dataset && parent.dataset.href && parent.dataset.href.length > 0)\n                return parent.dataset.href;\n            return '';\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$selline', {\n        get: function () {\n            if (!client) return '';\n            let value = client.input.vStack['$selline'] || _selline || '';\n            if (value) return value;\n            if (!lastMouse) return '';\n            var pos = client.display.getLineOffset(lastMouse.pageX, lastMouse.pageY);\n            if (pos.y < 0 || pos.y >= client.display.lines.length)\n                return '';\n            return client.display.getLineText(pos.y, true);\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$selectedword', {\n        get: function () {\n            if (!client) return '';\n            return client.input.vStack['$selectedword'] || _selword || (lastMouse ? client.display.getWordFromPosition(lastMouse.pageX, lastMouse.pageY) : '');\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$selectedurl', {\n        get: function () {\n            if (!client) return '';\n            let value = client.input.vStack['$selectedurl'] || _selurl || '';\n            if (value) return value;\n            if (!lastMouse) return '';\n            var parent = lastMouse.srcElement.parentNode;\n            if (parent && parent.classList && parent.classList.contains('URLLink'))\n                return parent.title;\n            else if (parent && parent.classList && parent.classList.contains('MXPLink') && parent.dataset && parent.dataset.href && parent.dataset.href.length > 0)\n                return parent.dataset.href;\n            return '';\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$selectedline', {\n        get: function () {\n            if (!client) return '';\n            let value = client.input.vStack['$selectedline'] || _selline || '';\n            if (value) return value;\n            if (!lastMouse) return '';\n            var pos = client.display.getLineOffset(lastMouse.pageX, lastMouse.pageY);\n            if (pos.y < 0 || pos.y >= client.display.lines.length)\n                return '';\n            return client.display.getLineText(pos.y, true);\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$action', {\n        get: function () {\n            if (!client) return '';\n            return client.input.vStack['$action'] || (client.input.lastTriggerExecuted ? client.input.lastTriggerExecuted.value : '') || '';\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$trigger', {\n        get: function () {\n            if (!client) return '';\n            return client.input.vStack['$trigger'] || client.input.lastTriggered || '';\n        },\n        configurable: true\n    });\n    Object.defineProperty(window, '$caption', {\n        get: function () {\n            if (!client) return '';\n            return client.input.vStack['$caption'] || '';\n        },\n        configurable: true\n    });\n\n    //#endregion\n\n    client.input.on('history-navigate', () => {\n        if (client.getOption('commandAutoSize') || client.getOption('commandScrollbars'))\n            resizeCommandInput();\n    });\n    client.on('options-loaded', () => {\n        client.commandInput.removeEventListener('input', resizeCommandInput);\n        client.commandInput.removeEventListener('change', resizeCommandInput);\n        initCommandInput();\n        updateCommandInput();\n        if (client.getOption('commandAutoSize') || client.getOption('commandScrollbars'))\n            resizeCommandInput();\n        if (editorDialog) {\n            editorDialog.resetState(client.getOption('windows.editor') || { center: true });\n            if (editor.simple != client.getOption('simpleEditor')) {\n                let value = '';\n                if (!editor.isSimple)\n                    value = editor.getFormattedText().replace(/(?:\\r)/g, '');\n                editor.simple = client.getOption('simpleEditor');\n                if (!editor.isSimple) {\n                    editorDialog.hideFooter();\n                    editorDialog.header.querySelector('#adv-editor-switch').title = 'Switch to simple';\n                }\n                else {\n                    editor.value = value;\n                    editorDialog.showFooter();\n                    editorDialog.header.querySelector('#adv-editor-switch').title = 'Switch to advanced';\n                    setTimeout(() => editor.focus(), 100);\n                }\n            }\n        }\n        if (_dialogs.history) _dialogs.history.resetState(client.getOption('windows.history') || { center: true, width: 400, height: 275 });\n        if (_dialogs.profiles) _dialogs.profiles.resetState(client.getOption('windows.profiles') || { center: true, width: 400, height: 275 });\n    });\n    client.on('set-title', title => {\n        window.document.title = title;\n    });\n    client.on('connected', () => _setIcon(1));\n    client.on('closed', () => _setIcon(0));\n    client.on('received-data', () => {\n        if (!client.active && client.connected)\n            _setIcon(2);\n    })\n    client.on('focus', () => {\n        if (client.connected)\n            _setIcon(1);\n        else\n            _setIcon(0);\n    })\n    client.on('print', () => {\n        if (!client.active && client.connected)\n            _setIcon(2);\n    });\n    client.display.on('selection-done', e => {\n        if (client.getOption('AutoCopySelectedToClipboard') && client.display.hasSelection) {\n            copyText(client.display.selection);\n            client.display.clearSelection();\n        }\n    });\n    client.on('profiles-loaded', () => {\n        buildButtons();\n    });\n    client.on('notify', (title, message, options) => {\n        if (!client.getOption('enableNotifications') || !(\"Notification\" in window)) return;\n        options = options || { silent: true };\n        if (!Object.prototype.hasOwnProperty.call(options, 'silent'))\n            options.silent = true;\n        switch (_currentIcon) {\n            case 1:\n                options.icon = options.icon || 'images/connected.png';\n                break;\n            case 2:\n                options.icon = options.icon || 'images/active.png';\n                break;\n            default:\n                options.icon = options.icon || 'images/disconnected.png';\n                break;\n        }\n        if (message) {\n            options.body = message;\n            if (options.body.length > 127)\n                options.body = options.body.substr(0, 127) + '...';\n        }\n        if (Notification.permission === 'granted') {\n            var notify = new window.Notification(title, options);\n            notify.onclick = () => {\n                client.emit('notify-clicked', title, message);\n                client.raise('notify-clicked', [title, message]);\n            };\n            notify.onclose = () => {\n                client.emit('notify-closed', title, message);\n                client.raise('notify-closed', [title, message]);\n            };\n        } else if (Notification.permission !== \"denied\") {\n            Notification.requestPermission().then((permission) => {\n                if (permission === \"granted\") {\n                    var notify = new window.Notification(title, options);\n                    notify.onclick = () => {\n                        client.emit('notify-clicked', title, message);\n                        client.raise('notify-clicked', [title, message]);\n                    };\n                    notify.onclose = () => {\n                        client.emit('notify-closed', title, message);\n                        client.raise('notify-closed', [title, message]);\n                    };\n                }\n                else\n                    client.echo('Notification permission denied.', -7, -8, true, true);\n            });\n        }\n        else\n            client.echo('Notification permission denied.', -7, -8, true, true);\n    });\n    client.on('window', (window, args, name) => {\n        switch (window) {\n            case 'editor':\n            case 'help':\n            case 'about':\n                if (args === 'close')\n                    closeDialog(window);\n                else\n                    showDialog(window);\n                break;\n            case 'profiles':\n            case 'profiles-manager':\n            case 'profile-manager':\n            case 'manager':\n                if (args === 'close')\n                    closeDialog('profiles');\n                else\n                    showDialog('profiles');\n                break;\n            case 'prefs':\n            case 'options':\n            case 'preferences':\n                if (args === 'close')\n                    closeDialog('settings');\n                else\n                    showDialog('settings');\n                break;\n            case 'history':\n            case 'command-history':\n                if (args === 'close')\n                    closeDialog('history');\n                else\n                    showDialog('history');\n                break;\n        }\n    });\n    //setup advanced editor footer button\n    document.getElementById('btn-adv-editor').addEventListener('click', e => {\n        showDialog('editor');\n    });\n    //restore advanced editor\n    options = client.getOption('windows.editor');\n    if (options && options.show)\n        document.getElementById('btn-adv-editor').click();\n    options = client.getOption('windows.history');\n    if (options && options.show)\n        showDialog('history');\n    options = client.getOption('windows.profiles');\n    if (options && options.show)\n        showDialog('profiles');\n\n    document.getElementById('btn-command-history').addEventListener('show.bs.dropdown', function () {\n        document.body.appendChild(document.getElementById('command-history-menu'));\n        let h = '';\n        const menu = document.getElementById('command-history-menu');\n        let history = client.commandHistory;\n        for (let i = 0, il = history.length; i < il; i++)\n            h += `<li id=\"command-history-item-${i}\"><a data-index=\"${i}\" class=\"dropdown-item\" href=\"javascript:void(0)\">${history[i]}</a></li>`;\n        if (history.length) {\n            h += '<li><hr class=\"dropdown-divider\"></li>';\n            h += `<li><a id=\"history-clear\" class=\"dropdown-item\" href=\"javascript:void(0)\">Clear history</a></li>`;\n        }\n        h += `<li><a id=\"history-show\" class=\"dropdown-item\" href=\"javascript:void(0)\">Show history window...</a></li>`;\n        menu.innerHTML = h;\n        if (history.length)\n            menu.querySelector('#history-clear').addEventListener('click', () => {\n                confirm_box('Clear history?', `Clear all history`).then(e => {\n                    if (e.button === DialogButtons.Yes) {\n                        client.clearCommandHistory()\n                    }\n                });\n            });\n        menu.querySelector('#history-show').addEventListener('click', () => showDialog('history'));\n        const items = document.querySelectorAll('[id^=\"command-history-item\"] a');\n        for (let i = 0, il = items.length; i < il; i++) {\n            items[i].addEventListener('click', e => {\n                var cmd = client.commandHistory[parseInt((e.currentTarget as HTMLElement).dataset.index, 10)];\n                client.AddCommandToHistory(cmd);\n                client.sendCommand(cmd, null, client.getOption('allowCommentsFromCommand'));\n            });\n        }\n    });\n    document.getElementById('btn-command-history').addEventListener('hidden.bs.dropdown', function () {\n        document.getElementById('btn-command-history').parentElement.appendChild(document.getElementById('command-history-menu'));\n    });\n    client.commandInput.removeEventListener('input', resizeCommandInput);\n    client.commandInput.removeEventListener('change', resizeCommandInput);\n    initCommandInput();\n    updateCommandInput();\n    if (client.getOption('commandAutoSize') || client.getOption('commandScrollbars'))\n        resizeCommandInput();\n    //#region window events\n    window.addEventListener('keydown', (event) => {\n        if (event.which === 33) //page up\n            client.display.pageUp();\n        else if (event.which === 34) //page up\n            client.display.pageDown();\n    });\n\n    window.addEventListener('error', (e) => {\n        const { message, filename, lineno, colno, error } = e;\n        if (client) {\n            if (error)\n                client.error(error);\n            else if (message.startsWith('Uncaught Error: '))\n                client.error(`${message.substr(16)}`);\n            else\n                client.error(`${message}`);\n            if (client.getOption('enableDebug')) {\n                client.error('Url: ' + filename);\n                client.error('Line: ' + lineno);\n                client.error('Column: ' + colno);\n                client.error(error);\n            }\n        }\n        else {\n            console.error('Message: ' + message);\n            console.error('Url: ' + filename);\n            console.error('Line: ' + lineno);\n            console.error('Column: ' + colno);\n            console.error(error);\n        }\n        return true;\n    });\n\n    window.addEventListener('mousemove', event => {\n        lastMouse = event;\n    });\n    window.addEventListener('hashchange', hashChange, false);\n    window.addEventListener('load', hashChange);\n    //#endregion\n\n\n    client.on('command-history-changed', history => {\n        _loadHistory();\n    });\n    showButtons();\n}\n\nexport function removeHash(string) {\n    if (!string || string.length === 0) return;\n    string = string.trim();\n    if (string.startsWith('#'))\n        string = string.substring(1);\n    var hashes = decodeURI(window.location.hash.substring(1)).split(',').filter(s => s.trim() !== string);\n    window.location.hash = hashes.join(',');\n}\n\nexport function addHash(string) {\n    if (!string || string.length === 0) return;\n    string = string.trim();\n    if (string.startsWith('#'))\n        string = string.substring(1);\n    var hashes = decodeURI(window.location.hash.substring(1)).split(',').filter(s => s.trim() !== string);\n    hashes.push(string);\n    window.location.hash = hashes.join(',');\n}\n\nexport function updateHash(add: string | string[], remove?: string | string[]) {\n    if (!Array.isArray(add))\n        add = [add];\n    remove = remove || [];\n    if (!Array.isArray(remove))\n        remove = [remove];\n    //remove add, new to ensure no dups\n    remove = remove.concat(...add);\n    var hashes = decodeURI(window.location.hash.substring(1)).split(',').filter(s => !remove.includes(s.trim()));\n    hashes = hashes.concat(...add);\n    window.location.hash = hashes.join(',');\n}\n\nfunction hashChange() {\n    if (!window.location.hash || window.location.hash.length < 2) return;\n    var dialogs = decodeURI(window.location.hash.substring(1)).split(',').map(s => s.trim());\n    for (let d = dialogs.length - 1; d >= 0; d--)\n        switch (dialogs[d]) {\n            case 'about':\n                showDialog('about');\n                break;\n            case 'editor':\n                document.getElementById('btn-adv-editor').click();\n                break;\n            default:\n                if (dialogs[d] === 'history' || dialogs[d].startsWith('settings') || dialogs[d].startsWith('profiles'))\n                    showDialog(dialogs[d]);\n                break;\n        }\n}\n\nlet _dialogs: any = {};\nexport function showDialog(name: string) {\n    switch (name) {\n        case 'about':\n            if (!_dialogs.about) {\n                _dialogs.about = new Dialog(({ title: '<i class=\"bi-info-circle\"></i> About', noFooter: true, resizable: false, center: true, maximizable: false }));\n                _dialogs.about.on('closed', () => {\n                    delete _dialogs.about;\n                    removeHash(name);\n                });\n                _dialogs.about.on('canceled', () => {\n                    delete _dialogs.about;\n                    removeHash(name);\n                });\n            }\n            loadDialog(_dialogs.about, name, 1, true).catch(e => {\n                client.error(e);\n            });\n            return _dialogs.about;\n        case 'history':\n            if (!_dialogs.history) {\n                _dialogs.history = new Dialog(Object.assign({}, client.getOption('windows.history') || { center: true, width: 400, height: 275 }, { title: '<i class=\"bi bi-clock-history\"></i> Command history', id: 'command-history' }));\n                _dialogs.history.on('closed', () => {\n                    client.setOption('windows.history', _dialogs.history.windowState);\n                    delete _dialogs.history;\n                    removeHash(name);\n                });\n                _dialogs.history.on('canceled', () => {\n                    client.setOption('windows.history', _dialogs.history.windowState);\n                    removeHash('history');\n                    delete _dialogs.history;\n                    removeHash(name);\n                });\n                _dialogs.history.on('resized', e => {\n                    client.setOption('windows.history', e);\n                });\n                _dialogs.history.on('moved', e => {\n                    client.setOption('windows.history', e);\n                })\n                _dialogs.history.on('maximized', () => {\n                    client.setOption('windows.history', _dialogs.history.windowState);\n                });\n                _dialogs.history.on('restored', () => {\n                    client.setOption('windows.history', _dialogs.history.windowState);\n                });\n                _dialogs.history.on('shown', () => {\n                    client.setOption('windows.history', _dialogs.history.windowState);\n                });\n                let footer = '';\n                footer += `<button id=\"${_dialogs.history.id}-clear\" type=\"button\" class=\"btn-sm float-end btn btn-danger\" title=\"Clear history\"><i class=\"bi bi-trash\"></i><span class=\"icon-only\"> Clear</span></button>`;\n                footer += `<button id=\"${_dialogs.history.id}-send\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Send\"><i class=\"bi bi-send-fill\"></i><span class=\"icon-only\"> Send</span></button>`;\n                footer += `<button id=\"${_dialogs.history.id}-refresh\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Refresh\"><i class=\"bi bi-arrow-repeat\"></i><span class=\"icon-only\"> Refresh</span></button>`\n                _dialogs.history.footer.innerHTML = footer;\n                _dialogs.history.body.innerHTML = `<select id=\"history-list\" multiple=\"multiple\" class=\"form-control\"></select>`;\n\n                _dialogs.history.body.querySelector('#history-list').addEventListener('dblclick', e => {\n                    const cmd = e.currentTarget.value;\n                    client.AddCommandToHistory(cmd);\n                    client.sendCommand(cmd, false, client.getOption('allowCommentsFromCommand'));\n                    _dialogs.history.close();\n                });\n                _dialogs.history.body.querySelector('#history-list').addEventListener('change', e => {\n                    client.setHistoryIndex(e.currentTarget.selectedIndex);\n                    _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-send`).style.display = history.length && _dialogs.history.body.querySelector('#history-list').selectedIndex !== -1 ? '' : 'none';\n                });\n\n                _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-refresh`).addEventListener('click', () => _loadHistory())\n                _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-send`).addEventListener('click', () => {\n                    const list = _dialogs.history.body.querySelector('#history-list');\n                    let cmds = []\n                    for (let l = 0, ll = list.options.length; l < ll; l++) {\n                        if (list.options[l].selected) {\n                            cmds.push(list.options[l].value);\n                        }\n                    }\n                    for (let c = 0, cl = cmds.length; c < cl; c++) {\n                        client.AddCommandToHistory(cmds[c]);\n                        client.sendCommand(cmds[c], false, client.getOption('allowCommentsFromCommand'));\n                    }\n                });\n                _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-clear`).addEventListener('click', () => {\n                    confirm_box('Clear history?', `Clear all history`).then(e => {\n                        if (e.button === DialogButtons.Yes) {\n                            client.clearCommandHistory();\n                        }\n                    });\n                });\n            }\n            _loadHistory();\n            _dialogs.history.show();\n            return _dialogs.history;\n        case 'editor':\n            if (!editorDialog) {\n                editorDialog = new Dialog(Object.assign({}, client.getOption('windows.editor') || { center: true }, { title: '<i class=\"fas fa-edit\"></i> Advanced editor', id: 'adv-editor' }));\n                editorDialog.on('resized', e => {\n                    client.setOption('windows.editor', e);\n                });\n                editorDialog.on('moved', e => {\n                    client.setOption('windows.editor', e);\n                })\n                editorDialog.on('maximized', () => {\n                    client.setOption('windows.editor', editorDialog.windowState);\n                });\n                editorDialog.on('restored', () => {\n                    client.setOption('windows.editor', editorDialog.windowState);\n                });\n                editorDialog.on('shown', () => {\n                    client.setOption('windows.editor', editorDialog.windowState);\n                    editor.initialize();\n                });\n                editorDialog.on('closing', () => {\n                    editor.remove();\n                });\n                editorDialog.on('closed', () => {\n                    client.setOption('windows.editor', editorDialog.windowState);\n                    removeHash('editor');\n                });\n                editorDialog.on('canceling', () => {\n                    editor.remove();\n                });\n                editorDialog.on('canceled', () => {\n                    client.setOption('windows.editor', editorDialog.windowState);\n                    removeHash('editor');\n                });\n                editorDialog.on('focus', () => editor.focus());\n                const textarea = document.createElement('textarea');\n                textarea.classList.add('form-control', 'form-control-sm');\n                textarea.id = 'adv-editor-txt';\n                editorDialog.body.appendChild(textarea);\n                editorDialog.body.style.overflow = 'hidden';\n                if (!editor) editor = new AdvEditor(textarea, !client.getOption('simpleEditor'));\n                editor.on('close', () => {\n                    editorDialog.close();\n                });\n                editor.on('editor-init', () => editor.focus());\n                editor.on('click', () => editorDialog.focus());\n                editorDialog.dialog.editor = editor;\n                if (TINYMCE && tinymce)\n                    editorDialog.header.querySelector('#adv-editor-max').insertAdjacentHTML('afterend', '<button type=\"button\" class=\"btn btn-light float-end\" id=\"adv-editor-switch\" title=\"Switch to advanced\" style=\"padding: 0 4px;margin-top: -1px;\"><i class=\"bi-shuffle\"></i></button>');\n                editorDialog.footer.innerHTML = `<button id=\"btn-adv-editor-clear\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Clear editor\"><i class=\"bi bi-journal-x\"></i><span class=\"icon-only\"> Clear</span></button>\n                    <button id=\"btn-adv-editor-append\" type=\"button\" class=\"btn-sm float-start btn btn-light\" title=\"Append file...\"><i class=\"bi bi-box-arrow-in-down\"></i><span class=\"icon-only\"> Append file...</span></button>\n                    <button id=\"btn-adv-editor-send\" type=\"button\" class=\"btn-sm float-end btn btn-primary\" title=\"Send\"><i class=\"bi bi-send-fill\"></i><span class=\"icon-only\"> Send</span></button>`;\n                if (!editor.isSimple)\n                    editorDialog.header.querySelector('#adv-editor-switch').title = 'Switch to simple';\n                editorDialog.header.querySelector('#adv-editor-switch').addEventListener('click', () => {\n                    client.setOption('simpleEditor', !editor.simple);\n                    let value = '';\n                    if (!editor.isSimple)\n                        value = editor.getFormattedText().replace(/(?:\\r)/g, '');\n                    editor.simple = !editor.simple;\n                    if (!editor.isSimple) {\n                        editorDialog.hideFooter();\n                        editorDialog.header.querySelector('#adv-editor-switch').title = 'Switch to simple';\n                    }\n                    else {\n                        editor.value = value;\n                        editorDialog.showFooter();\n                        editorDialog.header.querySelector('#adv-editor-switch').title = 'Switch to advanced';\n                        setTimeout(() => editor.focus(), 100);\n                    }\n                });\n                document.getElementById('btn-adv-editor-append').addEventListener('click', () => {\n                    openFileDialog('Append file', false).then(files => {\n                        readFile(files[0]).then((contents: any) => {\n                            editor.insert(contents);\n                        }).catch(client.error);\n                    }).catch(() => { });\n                });\n                document.getElementById('btn-adv-editor-send').addEventListener('click', () => {\n                    client.sendCommand(editor.value());\n                    if (client.getOption('editorClearOnSend'))\n                        editor.clear();\n                    if (client.getOption('editorCloseOnSend'))\n                        editorDialog.close();\n                });\n                document.getElementById('btn-adv-editor-clear').addEventListener('click', () => {\n                    editor.clear();\n                    editor.focus();\n                });\n                if (!editor.isSimple)\n                    editorDialog.hideFooter();\n            }\n            editorDialog.show();\n            if (editor.isSimple)\n                editor.focus();\n            return editorDialog;\n    }\n    if (name.startsWith('settings')) {\n        if (!_dialogs.settings) {\n            _dialogs.settings = new SettingsDialog();\n            _dialogs.settings.on('closed', () => {\n                delete _dialogs.settings;\n            });\n            _dialogs.settings.on('canceled', () => {\n                delete _dialogs.settings;\n            });\n        }\n        if (name === 'settings') {\n            _dialogs.settings.dialog.dataset.path = name;\n            _dialogs.settings.dialog.dataset.fullPath = name;\n            _dialogs.settings.dialog.dataset.hash = window.location.hash;\n            _dialogs.settings.setBody('', { client: client });\n            _dialogs.settings.showModal();\n        }\n        else\n            loadDialog(_dialogs.settings, name, 2, false).catch(e => {\n                client.error(e);\n            });\n        return _dialogs.settings;\n    }\n    if (name.startsWith('profiles')) {\n        if (!_dialogs.profiles) {\n            _dialogs.profiles = new ProfilesDialog();\n            _dialogs.profiles.on('closed', () => {\n                delete _dialogs.profiles;\n            });\n            _dialogs.profiles.on('canceled', () => {\n                delete _dialogs.profiles;\n            });\n        }\n        _dialogs.profiles.dialog.dataset.path = name;\n        _dialogs.profiles.dialog.dataset.fullPath = name;\n        _dialogs.profiles.dialog.dataset.hash = window.location.hash;\n        _dialogs.profiles.setBody('', { client: client });\n        _dialogs.profiles.show();\n        return _dialogs.profiles;\n    }\n}\n\nexport function loadDialog(dialog: Dialog, path, show?, showError?) {\n    return new Promise((resolve, reject) => {\n        var subpath = path.split('/');\n        $.ajax({\n            url: 'dialogs/' + subpath[0] + '.htm',\n            cache: false,\n            type: 'GET',\n        })\n            .done(function (data) {\n                dialog.dialog.dataset.path = subpath[0];\n                dialog.dialog.dataset.fullPath = path;\n                dialog.dialog.dataset.hash = window.location.hash;\n                dialog.setBody(data, { client: client });\n                if (show == 1)\n                    dialog.show();\n                else if (show === 2)\n                    dialog.showModal();\n                resolve(data);\n            })\n            .fail(function (err) {\n                if (showError && client.enableDebug)\n                    dialog.setBody(`<h1 style=\"width: 100%;text-align:center\">Error loading ${path}</h1> ${err.statusText}`);\n                else if (showError)\n                    dialog.setBody(`<h1 style=\"width: 100%;text-align:center\">Error loading ${path}</h1>`);\n                else\n                    dialog.setBody('');\n                reject(path + ': ' + subpath.statusText);\n            });\n    });\n}\n\nexport function closeDialog(dialog) {\n    if (_dialogs[dialog])\n        _dialogs[dialog].close();\n    else if (dialog === 'editor') {\n        if (editorDialog)\n            editorDialog.close();\n    }\n}\n\nfunction _loadHistory() {\n    if (!_dialogs.history) return;\n    const list: HTMLSelectElement = document.getElementById('history-list') as HTMLSelectElement;\n    list.innerHTML = '';\n    let history = client.commandHistory;\n    var fragment = document.createDocumentFragment();\n    for (var i = 0, l = history.length; i < l; i++) {\n        var opt = document.createElement('option');\n        opt.appendChild(document.createTextNode(history[i]));\n        opt.value = history[i];\n        fragment.append(opt);\n    }\n    list.appendChild(fragment);\n    _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-clear`).style.display = history.length ? '' : 'none';\n    _dialogs.history.footer.querySelector(`#${_dialogs.history.id}-send`).style.display = history.length && list.selectedIndex !== -1 ? '' : 'none';\n}\n\nfunction resizeCommandInput() {\n    debounce(() => {\n        _resizeCommandInput();\n    }, 250, 'resizeCommand');\n}\n\nasync function initCommandInput() {\n    if (client.getOption('commandAutoSize') || client.getOption('commandScrollbars')) {\n        client.commandInput.addEventListener('input', resizeCommandInput);\n        client.commandInput.addEventListener('change', resizeCommandInput);\n    }\n    if (client.getOption('commandWordWrap')) {\n        document.getElementById('commandMeasure').style.whiteSpace = 'pre-wrap';\n        document.getElementById('commandMeasure').style.overflowWrap = 'anywhere';\n    }\n    else {\n        document.getElementById('commandMeasure').style.whiteSpace = '';\n        document.getElementById('commandMeasure').style.overflowWrap = '';\n    }\n    if (client.getOption('commandScrollbars')) {\n        document.getElementById('commandMeasure').style.overflow = 'auto';\n        client.commandInput.style.overflow = 'auto';\n    }\n    else {\n        document.getElementById('commandMeasure').style.overflow = '';\n        client.commandInput.style.overflow = '';\n    }\n}\n\nlet commandInputResize: any = {};\nfunction updateCommandInput() {\n    const measure = document.getElementById('commandMeasure');\n    document.body.appendChild(measure);\n    const cmd = client.commandInput.parentElement;\n    const cmdSize = window.getComputedStyle(cmd);\n    measure.style.fontSize = client.commandInput.style.fontSize;\n    measure.style.fontFamily = client.commandInput.style.fontFamily;\n    measure.style.width = client.commandInput.offsetWidth + 'px';\n    const oldMeasure = measure.innerHTML;\n    measure.innerHTML = 'W';\n    let minHeight = client.getOption('commandMinLines');\n    const height = measure.offsetHeight;\n    minHeight = height * (minHeight < 1 ? 1 : minHeight);\n    let padding = parseFloat(cmdSize.borderTopWidth) || 0;\n    padding += parseFloat(cmdSize.borderBottomWidth) || 0;\n    padding += parseFloat(cmdSize.paddingTop) || 0;\n    padding += parseFloat(cmdSize.paddingBottom) || 0;\n    let inset = cmdSize.inset.split(' ');\n    padding += (parseFloat(inset[0]) || 0) * 2;\n    measure.innerHTML = oldMeasure;\n    cmd.style.height = (height + padding) + 'px';\n    /*\n    TODO need to rethink this logic and in _resizeCommandInput, as the current interface has 3 layers the nav group, then input group, then the input itself\n    may need to walk the chain up til body or until it finds shared container with display and resize each one based on positions/paddings/margins\n    */\n    client.commandInput.parentElement.style.height = height + 'px';\n    client.commandInput.closest('nav').style.height = height + 6 + 'px';\n    client.display.container.style.bottom = (height + padding) + 'px';\n\n    commandInputResize = {\n        measure: measure,\n        cmd: cmd,\n        cmdSize: cmdSize,\n        height: height,\n        padding: padding,\n        minHeight: minHeight\n    }\n}\n\nfunction _resizeCommandInput() {\n    const measure = commandInputResize.measure;\n    const cmd = commandInputResize.cmd;\n    measure.innerHTML = client.commandInput.value + '\\n';\n    let height = measure.offsetHeight;\n    if (height < commandInputResize.minHeight)\n        height = commandInputResize.minHeight;\n    const padding = commandInputResize.padding;\n    cmd.style.height = (height + padding) + 'px';\n    client.commandInput.parentElement.style.height = height + 'px';\n    client.commandInput.closest('nav').style.height = height + 6 + 'px';\n    client.display.container.style.bottom = (height + padding) + 'px';\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction _setIcon(ico) {\n    if (_currentIcon === ico)\n        return;\n    _currentIcon = ico;\n    let icon = 'disconnected';\n    switch (ico) {\n        case 1:\n            icon = 'connected';\n            break;\n        case 2:\n            icon = 'active';\n            break;\n    }\n    document.getElementById('icon1').remove();\n    document.getElementById('icon2').remove();\n    document.getElementById('icon3').remove();\n    document.querySelector('head').insertAdjacentHTML('afterbegin', `<link id=\"icon1\" rel=\"shortcut icon\" href=\"images/${icon}.ico\" />\n        <link id=\"icon2\" rel=\"icon\" href=\"images/${icon}.ico\" />\n        <link id=\"icon3\" rel=\"icon\" type=\"image/x-icon\" href=\"images/${icon}.png\" />`);\n}\n\nexport function toggleButtons() {\n    client.setOption('showButtons', !client.getOption('showButtons'));\n    showButtons();\n}\n\nfunction createButton(button, index) {\n    var c = '';\n    var tt = '';\n    var caption = button.caption;\n    var bh = 0;\n    if (caption.substring(0, 3) === 'fa-') {\n        caption = caption.split(',');\n        if (caption.length > 1)\n            caption = '<i class=\"fas ' + caption[0] + ' fa-fw\" data-fa-transform=\"' + caption[1] + '\"></i>';\n        else\n            caption = '<i class=\"fas ' + caption[0] + ' fa-fw\"></i>';\n        bh = 26;\n    }\n    else if (caption.substring(0, 4) === 'fas-') {\n        caption = caption.split(',');\n        if (caption.length > 1)\n            caption = '<i class=\"fas fa-' + caption[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + caption[1] + '\"></i>';\n        else\n            caption = '<i class=\"fas fa-' + caption[0].substring(4) + ' fa-fw\"></i>';\n        bh = 26;\n    }\n    else if (caption.substring(0, 4) === 'far-') {\n        caption = caption.split(',');\n        if (caption.length > 1)\n            caption = '<i class=\"far fa-' + caption[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + caption[1] + '\"></i>';\n        else\n            caption = '<i class=\"far fa-' + caption[0].substring(4) + ' fa-fw\"></i>';\n        bh = 26;\n    }\n    else if (caption.substring(0, 4) === 'fab-') {\n        caption = caption.split(',');\n        if (caption.length > 1)\n            caption = '<i class=\"fab fa-' + caption[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + caption[1] + '\"></i>';\n        else\n            caption = '<i class=\"fab fa-' + caption[0].substring(4) + ' fa-fw\"></i>';\n        bh = 26;\n    }\n    else if (caption.substring(0, 7) === 'http://' || caption.substring(0, 7) === 'https://')\n        caption = '<img src=\"' + caption + '\" style=\"max-width: ' + button.width + 'px;max-height:' + button.height + 'px\"/>';\n    else {\n        if (!button.iconOnly)\n            caption = button.caption;\n        tt = button.caption;\n    }\n    if (button.icon && button.icon.length) {\n        var icon = button.icon;\n        if (icon.substring(0, 3) === 'fa-') {\n            icon = icon.split(',');\n            if (icon.length > 1)\n                icon = '<i class=\"fas ' + icon[0] + ' fa-fw\" data-fa-transform=\"' + icon[1] + '\"></i>';\n            else\n                icon = '<i class=\"fas ' + icon[0] + ' fa-fw\"></i>';\n            bh = 26;\n        }\n        else if (icon.substring(0, 4) === 'fas-') {\n            icon = icon.split(',');\n            if (icon.length > 1)\n                icon = '<i class=\"fas fa-' + icon[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + icon[1] + '\"></i>';\n            else\n                icon = '<i class=\"fas fa-' + icon[0].substring(4) + ' fa-fw\"></i>';\n            bh = 26;\n        }\n        else if (icon.substring(0, 4) === 'far-') {\n            icon = icon.split(',');\n            if (icon.length > 1)\n                icon = '<i class=\"far fa-' + icon[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + icon[1] + '\"></i>';\n            else\n                icon = '<i class=\"far fa-' + icon[0].substring(4) + ' fa-fw\"></i>';\n            bh = 26;\n        }\n        else if (icon.substring(0, 4) === 'fab-') {\n            icon = icon.split(',');\n            if (icon.length > 1)\n                icon = '<i class=\"fab fa-' + icon[0].substring(4) + ' fa-fw\" data-fa-transform=\"' + icon[1] + '\"></i>';\n            else\n                icon = '<i class=\"fab fa-' + icon[0].substring(4) + ' fa-fw\"></i>';\n            bh = 26;\n        }\n        else if (button.icon.length) {\n            icon = '<img src=\"' + icon + '\" style=\"max-width: ' + button.width + 'px;max-height:' + button.height + 'px\"/>';\n        }\n        if (button.iconOnly)\n            caption = icon;\n        else\n            caption = icon + caption;\n    }\n    c += '<button';\n    c += ' data-index=\"' + index + '\"';\n    if (button.name && button.name.length !== 0)\n        c += ' id=\"button-' + button.name + '\"';\n    c += ' class=\"user-button\" style=\"';\n    if (button.left === -1 && button.right === -1 && button.top === -1 && button.bottom === -1) {\n        c += 'position: static;margin-right:2px;margin-top:2px;';\n    }\n    else {\n        if (button.left >= 0)\n            c += 'left:' + (button.left || 0) + 'px;';\n        if (button.top >= 0)\n            c += 'top:' + (button.top || 0) + 'px;';\n        if (button.bottom >= 0)\n            c += 'bottom:' + (button.bottom || 0) + 'px;';\n        if (button.right >= 0)\n            c += 'right:' + (button.right || 0) + 'px;';\n        if (button.right === -1 && button.left === -1)\n            c += 'right:0px;';\n        if (button.bottom === -1 && button.top === -1)\n            c += 'top:0px;';\n    }\n    if (button.width)\n        c += 'width: ' + button.width + 'px;';\n    else if (bh === 26)\n        c += 'min-width: 26px;';\n    if (button.height)\n        c += 'height: ' + button.height + 'px;';\n    c += '\" title=\"' + tt + '\" draggable=\"true\" data-index=\"' + index + '\">' + caption + '</button>';\n    return c;\n}\n\nfunction showButtons() {\n    if (client.getOption('showButtons'))\n        document.getElementById('buttons').style.visibility = 'visible';\n    else\n        document.getElementById('buttons').style.visibility = '';\n}\n\nfunction buildButtons() {\n    var c = '';\n    var buttons = client.buttons;\n    var b, bl;\n    for (b = 0, bl = buttons.length; b < bl; b++) {\n        if (!buttons[b].enabled) continue;\n        c += createButton(buttons[b], b);\n    }\n    document.getElementById('buttons').innerHTML = c;\n    const items = document.querySelectorAll('#buttons button');\n    for (let i = 0, il = items.length; i < il; i++) {\n        items[i].addEventListener('click', e => {\n            ExecuteButton(e.currentTarget, +(e.currentTarget as HTMLElement).dataset.index);\n        });\n        dragButton(items[i]);\n    }\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction ExecuteButton(el, idx) {\n    if (idx < 0) return false;\n    if (el.dataset.moving === 'true') {\n        delete el.dataset.moving;\n        return;\n    }\n    var buttons = client.buttons;\n    if (idx >= buttons.length) return false;\n    var button = buttons[idx];\n    if (!button.enabled) return false;\n    var ret;// = \"\";\n    switch (button.style) {\n        case 1:\n            ret = client.parseOutgoing(button.value);\n            break;\n        case 2:\n            /*jslint evil: true */\n            var f = new Function('try { ' + button.value + '} catch (e) { if(this.options.showScriptErrors) this.error(e);}');\n            ret = f.apply(client);\n            break;\n        default:\n            ret = button.value;\n            break;\n    }\n    if (ret === null || typeof ret == 'undefined')\n        return true;\n    if (button.send) {\n        if (!ret.endsWith('\\n'))\n            ret += '\\n';\n        if (button.chain) {\n            if (client.commandInput.value.endsWith(' ')) {\n                client.commandInput.value += ret;\n                client.sendCommand();\n                return true;\n            }\n        }\n        if (client.connected)\n            client.send(ret);\n        if (client.telnet.echo && client.getOption('commandEcho'))\n            client.echo(ret);\n    }\n    else if (button.append)\n        client.commandInput.value += ret;\n    return true;\n}\n\nfunction dragButton(elmnt) {\n    var pos3 = 0, pos4 = 0;\n    var delay;\n    if (document.getElementById(elmnt.id + 'header')) {\n        // if present, the header is where you move the DIV from:\n        document.getElementById(elmnt.id + 'header').onmousedown = dragMouseDown;\n    } else {\n        // otherwise, move the DIV from anywhere inside the DIV:\n        elmnt.onmousedown = dragMouseDown;\n        elmnt.ontouchstart = dragTouchStart;\n        elmnt.onmouseleave = dragMouseleave;\n    }\n\n    function dragMouseDown(e) {\n        e = e || window.event;\n        if (e.buttons !== 1) return;\n        e.preventDefault();\n        var b = elmnt.getBoundingClientRect();\n        pos3 = e.pageX - b.left;\n        pos4 = e.pageY - b.top;\n        document.onmouseup = closeDragButton;\n        delay = setTimeout(function () {\n            document.onmousemove = elementDrag;\n            delay = null;\n        }, 500);\n    }\n\n    function dragMouseleave() {\n        if (delay)\n            closeDragButton();\n    }\n\n    function elementDrag(e) {\n        e = e || window.event;\n        e.preventDefault();\n        // calculate the new cursor position:\n\n        // set the element's new position:\n        elmnt.style.position = 'absolute';\n        elmnt.style.top = (e.pageY - pos4) + 'px';\n        elmnt.style.left = (e.pageX - document.body.clientWidth - pos3) + 'px';\n        elmnt.dataset.moving = 'true';\n    }\n\n    function dragTouchStart(e) {\n        e = e || window.event;\n        if (!e.touches.length) return;\n        //e.preventDefault();\n        var b = elmnt.getBoundingClientRect();\n        pos3 = e.touches[0].pageX - b.left;\n        pos4 = e.touches[0].pageY - b.top;\n        document.ontouchend = closeDragButton;\n        delay = setTimeout(function () {\n            document.ontouchmove = elementMove;\n            delay = null;\n        }, 500);\n    }\n\n    function elementMove(e) {\n        e = e || window.event;\n        e.preventDefault();\n        // calculate the new cursor position:\n\n        // set the element's new position:\n        elmnt.style.position = 'absolute';\n        if (!e.touches.length) return;\n        elmnt.style.top = (e.touches[0].pageY - pos4) + 'px';\n        elmnt.style.left = (e.touches[0].pageX - document.body.clientWidth - pos3) + 'px';\n        elmnt.dataset.moving = 'true';\n    }\n\n    function closeDragButton() {\n        // stop moving when mouse button is released:\n        var b = elmnt.getBoundingClientRect();\n        var idx = parseInt(elmnt.dataset.index, 10);\n        if (idx < 0) return;\n        var buttons = client.buttons;\n        if (idx >= buttons.length) return;\n        var button = buttons[idx];\n        if (!button.enabled) return;\n        if (button.left === -1 && button.right === -1 && button.top === -1 && button.bottom === -1) {\n            button.top = b.top || -1;\n            button.right = document.body.clientWidth - b.right || -1;\n        }\n        else {\n            if (button.left >= 0)\n                button.left = (document.body.clientWidth - b.left) || -1;\n            if (button.top >= 0)\n                button.top = b.top || -1;\n            if (button.bottom >= 0)\n                button.bottom = b.bottom || -1;\n            if (button.right >= 0)\n                button.right = document.body.clientWidth - b.right || -1;\n            if (button.right === -1 && button.left === -1)\n                button.right = document.body.clientWidth - b.right || -1;\n            if (button.bottom === -1 && button.top === -1)\n                button.top = b.top || -1;\n        }\n\n        document.onmouseup = null;\n        document.onmousemove = null;\n        document.ontouchend = null;\n        document.ontouchmove = null;\n        clearTimeout(delay);\n        client.saveProfiles();\n    }\n}\n\nwindow.initializeInterface = initializeInterface;"],
  "mappings": "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V,OAAU,eACV,OAAU,sBACV,OAAU,OACV,OAAU,OACV,OAAU,WACV,OAAU,YACV,OAAU,SACV,OAAU,SACV,OAAU,SACV,OAAU,cACV,OAAU,SACV,OAAU,YACV,OAAU,gBACV,OAAU,aACV,OAAU,aACV,OAAU,aACV,OAAU,aACV,OAAU,iBACV,OAAU,iBACV,OAAU,aACV,OAAU,aACV,OAAU,kBACV,OAAU,aACV,OAAU,iBACV,OAAU,aACV,OAAU,aACV,OAAU,WACV,OAAU,aACV,OAAU,aACV,OAAU,aACV,OAAU,YACV,OAAU,aACV,OAAU,mBACV,OAAU,aACV,OAAU,aACV,OAAU,YACV,OAAU,YACV,OAAU,YACV,OAAU,aACV,OAAU,kBACV,OAAU,WACV,OAAU,YACV,OAAU,eACV,OAAU,eACV,OAAU,cACV,OAAU,SACV,OAAU,SACV,OAAU,aACV,OAAU,OACV,OAAU,gBACV,OAAU,gBACV,OAAU,aACV,OAAU,SACV,OAAU,QACV,OAAU,OACV,OAAU,mBACV,OAAU,gBACV,OAAU,mBACV,OAAU,SACV,OAAU,mBACV,OAAU,iBACV,OAAU,iBACV,OAAU,iBACV,OAAU,WACV,OAAU,aACV,OAAU,mBACV,OAAU,aACV,OAAU,iBACV,OAAU,kBACV,OAAU,WACV,OAAU,aACV,OAAU,cACV,OAAU,cACV,OAAU,aACV,OAAU,aACV,OAAU,kBACV,OAAU,MACV,OAAU,YACV,OAAU,oBACV,OAAU,UACV,OAAU,cACV,OAAU,SACV,OAAU,cACV,OAAU,aACV,OAAU,WACV,OAAU,gBACV,OAAU,gBACV,OAAU,gBACV,OAAU,iBACV,OAAU,eACV,OAAU,aACV,OAAU,OACV,OAAU,gBACV,OAAU,gBACV,OAAU,OACV,OAAU,aACV,OAAU,eACV,OAAU,OACV,OAAU,mBACV,OAAU,mBACV,OAAU,SACV,OAAU,mBACV,OAAU,iBACV,OAAU,iBACV,OAAU,aACV,OAAU,iBACV,OAAU,eACV,OAAU,mBACV,OAAU,aACV,OAAU,iBACV,OAAU,iBACV,OAAU,iBACV,OAAU,cACV,OAAU,YACV,OAAU,YACV,OAAU,UACV,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",
  "names": ["closeMenu", "instance", "showMenu", "initMenu", "el", "text", "icon", "updateScrollLock", "e", "showDialog", "doc", "docEl", "requestFullScreen", "cancelFullScreen", "toggleButtons", "button", "pl", "s", "sl", "list", "p", "item", "code", "id", "ie", "EventEmitter", "#events", "type", "listener", "caller", "args", "events", "i", "len", "key", "fun", "len", "res", "thisp", "val", "SortArrayByPriority", "a", "b", "SortMapByPriority", "SortItemArrayByPriority", "list", "map", "el", "i", "FilterArrayByKeyValue", "array", "k", "v", "al", "_edCache", "htmlEncode", "value", "_edCache", "offset", "el", "box", "docElem", "StringBuffer", "str", "string", "b", "arr", "keyCodeToChar", "keyCharToCode", "$", "clone", "obj", "replacer", "setSelectionRange", "input", "selectionStart", "selectionEnd", "range", "x", "y", "w", "h", "r", "k", "p", "obj", "str", "idx", "s", "rem", "paddingValue", "newStr", "addSlashes", "string", "all", "sep", "type", "escape", "escapeChar", "quote", "sQuote", "pS", "c", "pC", "sp", "spl", "spC", "tl", "capitalize", "s", "first", "c", "i", "p", "il", "pl", "_colorCodes", "pinkfishToHTML", "text", "loadColors", "stack", "codes", "tl", "bold", "boldNest", "classes", "cl", "c", "color", "r", "g", "b", "idx", "getColors", "_ColorTable", "insertValue", "input", "value", "active", "arg", "copyText", "text", "resolve", "reject", "blob", "data", "permission", "textarea", "e", "err", "pasteText", "fSaveAs", "DownloadAttributeSupport", "BlobBuilder", "URL", "BrowserSupportedMimeTypes", "data", "name", "mimetype", "builder", "blob", "url", "link", "event", "utf8", "intc", "i", "TryGetCharUTF8", "b", "count", "c", "s", "ss", "StringBuffer", "sl", "openFileDialog", "title", "multiple", "accept", "resolve", "reject", "dialog", "e", "input", "readFile", "file", "reader", "evt", "_timers", "debounce", "mainFunction", "delay", "key", "scrollChildIntoView", "parent", "child", "childRect", "parentRect", "DialogButtons", "Dialog", "EventEmitter", "options", "debounce", "styles", "x", "y", "size", "e", "fake", "redirectedEvent", "footer", "ec", "right", "bottom", "corner", "left", "top", "entries", "observer", "mutationsList", "mutation", "value", "type", "rect", "old", "el", "w", "h", "position", "forceReset", "dialogs", "d", "dl", "i", "order", "z", "a", "b", "full", "silent", "contents", "args", "scripts", "sl", "AlertDialog", "title", "message", "icon", "getIcon", "ConfirmDialog", "buttons", "resolve", "reject", "confirm", "reason", "RGBColor", "color_string", "simple_colors", "key", "color_defs", "bits", "cl", "re", "processor", "channels", "r", "g", "b", "AdvEditor", "EventEmitter", "element", "enabledAdvanced", "value", "insertValue", "htmlEncode", "content", "_dColors", "getColors", "c", "color", "r", "g", "b", "idx", "_bold", "bl", "clientColors", "RGBColor", "_editor", "editor", "url", "fallbackColor", "_colors", "_lastButton", "Cell", "initial", "v", "_forecolor", "_backcolor", "getCurrentColor", "format", "elm", "applyFormat", "removeFormat", "registerCommands", "name", "setIconColor", "getAdditionalColors", "hasCustom", "type", "remove", "applyColor", "onChoice", "mapColors", "colorMap", "colors", "i", "getFetch", "callback", "splitButtonApi", "newColor", "id", "registerTextColorButton", "tooltip", "lastColor", "_splitButtonApi", "handler", "e", "registerTextColorMenuItem", "text", "data", "buttonPostRender", "buttonApi", "state", "toggleFormat", "api", "pasteText", "err", "copyText", "els", "back", "fore", "cell", "Dialog", "cl", "html", "html2", "cells", "openFileDialog", "files", "f", "fl", "readFile", "contents", "pinkfishToHTML", "tag", "$el", "t", "tl", "stack", "tags", "el", "nodes", "n", "nl", "start", "end", "style", "buffer", "codes", "d", "dl", "rgb", "hex", "hexToRgb", "shortRegEx", "full", "longRegEx", "rgbArray", "rgbObj", "closestHexFromRgb", "minDistance", "nearestHex", "currentColor", "distance", "regex", "m", "SettingList", "Settings", "_Settings", "s", "sl", "SettingList", "setting", "defaultValue", "tmp", "err", "value", "prop", "SettingsDialog", "_SettingsDialog", "Dialog", "footer", "removeHash", "data", "clone", "openFileDialog", "files", "readFile", "contents", "sl", "SettingList", "AlertDialog", "err", "confirm", "ConfirmDialog", "e", "c", "colors", "pages", "title", "capitalize", "forms", "f", "fl", "Settings", "s", "args", "breadcrumb", "last", "p", "pl", "target", "value", "id", "name", "enums", "el", "color", "RGBColor", "code", "option", "type", "menu", "item", "Splitter", "EventEmitter", "options", "value", "parent", "bnd", "ge", "l", "entries", "observer", "mutationsList", "mutation", "MacroDisplay", "item", "d", "keyCodeToChar", "Item", "_Item", "data", "profile", "prop", "Button", "_Button", "Macro", "_Macro", "Alias", "_Alias", "pattern", "value", "Trigger", "_Trigger", "il", "i", "state", "Context", "_Context", "Profile", "_Profile", "name", "defaults", "data", "m", "dl", "d", "Macro", "buttons", "b", "Button", "file", "profile", "prop", "i", "il", "Alias", "Trigger", "Context", "version", "t", "sl", "s", "clone", "key", "value", "type", "field", "tmp", "SortItemArrayByPriority", "l", "v", "ProfilesDialog", "Dialog", "e", "Splitter", "distance", "footer", "el", "rect", "removeHash", "items", "Profile", "il", "i", "data", "openFileDialog", "files", "readFile", "contents", "keys", "n", "k", "kl", "p", "err", "value", "collection", "index", "idPrefix", "hrefPrefix", "indent", "menu", "padding", "htmlEncode", "GetDisplay", "c", "cl", "nav", "item", "capitalize", "profile", "title", "id", "enabled", "args", "pages", "breadcrumb", "last", "pl", "forms", "f", "fl", "target", "debounce", "b", "pp", "page", "resolve", "reject", "scripts", "FilterArrayByKeyValue", "keyCharToCode", "keyCodeToChar", "Trigger", "updateHash", "DialogButtons", "sl", "events", "name", "enums", "currentItem", "currentParent", "display", "bc", "select", "expand", "po", "scrollChildIntoView", "defaults", "menuItem", "oldProfile", "oldID", "newID", "container", "oldName", "newName", "oldPath", "newPath", "a", "ap", "bp", "r", "Alias", "Button", "Macro", "Context", "m", "newNode", "back", "menuItems", "href", "obj", "prop", "type", "arr", "MacroDisplay", "editor", "editorDialog", "_currentIcon", "_selword", "_selurl", "_selline", "lastMouse", "doLink", "url", "e", "doMXPLink", "el", "doMXPSend", "pmt", "tt", "im", "extra", "os", "offset", "x", "y", "menu", "i", "il", "htmlEncode", "items", "MXPMenuHandler", "setSelectionRange", "cmd", "doMXPTooltip", "initializeInterface", "options", "_setIcon", "initMenu", "pasteText", "txt", "html", "copyText", "window", "closeDialog", "a", "value", "parent", "pos", "resizeCommandInput", "initCommandInput", "updateCommandInput", "_dialogs", "title", "buildButtons", "message", "notify", "permission", "args", "name", "showDialog", "h", "history", "event", "filename", "lineno", "colno", "error", "hashChange", "_loadHistory", "showButtons", "removeHash", "string", "hashes", "s", "addHash", "updateHash", "add", "remove", "dialogs", "d", "Dialog", "loadDialog", "footer", "list", "cmds", "l", "ll", "c", "cl", "textarea", "AdvEditor", "openFileDialog", "files", "readFile", "contents", "SettingsDialog", "ProfilesDialog", "dialog", "path", "show", "showError", "resolve", "reject", "subpath", "data", "err", "fragment", "opt", "debounce", "_resizeCommandInput", "commandInputResize", "measure", "cmdSize", "oldMeasure", "minHeight", "height", "padding", "inset", "ico", "icon", "toggleButtons", "createButton", "button", "index", "caption", "bh", "buttons", "b", "bl", "ExecuteButton", "dragButton", "idx", "ret", "f", "elmnt", "pos3", "pos4", "delay", "dragMouseDown", "dragTouchStart", "dragMouseleave", "closeDragButton", "elementDrag", "elementMove"]
}
